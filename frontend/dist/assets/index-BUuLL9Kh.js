function of(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function lf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var om={exports:{}},Oi={},lm={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oa=Symbol.for("react.element"),cf=Symbol.for("react.portal"),df=Symbol.for("react.fragment"),uf=Symbol.for("react.strict_mode"),mf=Symbol.for("react.profiler"),pf=Symbol.for("react.provider"),hf=Symbol.for("react.context"),ff=Symbol.for("react.forward_ref"),yf=Symbol.for("react.suspense"),gf=Symbol.for("react.memo"),vf=Symbol.for("react.lazy"),cd=Symbol.iterator;function xf(e){return e===null||typeof e!="object"?null:(e=cd&&e[cd]||e["@@iterator"],typeof e=="function"?e:null)}var cm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dm=Object.assign,um={};function as(e,t,r){this.props=e,this.context=t,this.refs=um,this.updater=r||cm}as.prototype.isReactComponent={};as.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};as.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function mm(){}mm.prototype=as.prototype;function ic(e,t,r){this.props=e,this.context=t,this.refs=um,this.updater=r||cm}var oc=ic.prototype=new mm;oc.constructor=ic;dm(oc,as.prototype);oc.isPureReactComponent=!0;var dd=Array.isArray,pm=Object.prototype.hasOwnProperty,lc={current:null},hm={key:!0,ref:!0,__self:!0,__source:!0};function fm(e,t,r){var s,a={},i=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)pm.call(t,s)&&!hm.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:oa,type:e,key:i,ref:o,props:a,_owner:lc.current}}function jf(e,t){return{$$typeof:oa,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cc(e){return typeof e=="object"&&e!==null&&e.$$typeof===oa}function Sf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ud=/\/+/g;function io(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Sf(""+e.key):t.toString(36)}function Va(e,t,r,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case oa:case cf:o=!0}}if(o)return o=e,a=a(o),e=s===""?"."+io(o,0):s,dd(a)?(r="",e!=null&&(r=e.replace(ud,"$&/")+"/"),Va(a,t,r,"",function(u){return u})):a!=null&&(cc(a)&&(a=jf(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(ud,"$&/")+"/")+e)),t.push(a)),1;if(o=0,s=s===""?".":s+":",dd(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+io(i,l);o+=Va(i,t,r,c,a)}else if(c=xf(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+io(i,l++),o+=Va(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function va(e,t,r){if(e==null)return e;var s=[],a=0;return Va(e,s,"","",function(i){return t.call(r,i,a++)}),s}function Cf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Nt={current:null},Qa={transition:null},Nf={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:Qa,ReactCurrentOwner:lc};function ym(){throw Error("act(...) is not supported in production builds of React.")}Le.Children={map:va,forEach:function(e,t,r){va(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return va(e,function(){t++}),t},toArray:function(e){return va(e,function(t){return t})||[]},only:function(e){if(!cc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Le.Component=as;Le.Fragment=df;Le.Profiler=mf;Le.PureComponent=ic;Le.StrictMode=uf;Le.Suspense=yf;Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nf;Le.act=ym;Le.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=dm({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=lc.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)pm.call(t,c)&&!hm.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:oa,type:e.type,key:a,ref:i,props:s,_owner:o}};Le.createContext=function(e){return e={$$typeof:hf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:pf,_context:e},e.Consumer=e};Le.createElement=fm;Le.createFactory=function(e){var t=fm.bind(null,e);return t.type=e,t};Le.createRef=function(){return{current:null}};Le.forwardRef=function(e){return{$$typeof:ff,render:e}};Le.isValidElement=cc;Le.lazy=function(e){return{$$typeof:vf,_payload:{_status:-1,_result:e},_init:Cf}};Le.memo=function(e,t){return{$$typeof:gf,type:e,compare:t===void 0?null:t}};Le.startTransition=function(e){var t=Qa.transition;Qa.transition={};try{e()}finally{Qa.transition=t}};Le.unstable_act=ym;Le.useCallback=function(e,t){return Nt.current.useCallback(e,t)};Le.useContext=function(e){return Nt.current.useContext(e)};Le.useDebugValue=function(){};Le.useDeferredValue=function(e){return Nt.current.useDeferredValue(e)};Le.useEffect=function(e,t){return Nt.current.useEffect(e,t)};Le.useId=function(){return Nt.current.useId()};Le.useImperativeHandle=function(e,t,r){return Nt.current.useImperativeHandle(e,t,r)};Le.useInsertionEffect=function(e,t){return Nt.current.useInsertionEffect(e,t)};Le.useLayoutEffect=function(e,t){return Nt.current.useLayoutEffect(e,t)};Le.useMemo=function(e,t){return Nt.current.useMemo(e,t)};Le.useReducer=function(e,t,r){return Nt.current.useReducer(e,t,r)};Le.useRef=function(e){return Nt.current.useRef(e)};Le.useState=function(e){return Nt.current.useState(e)};Le.useSyncExternalStore=function(e,t,r){return Nt.current.useSyncExternalStore(e,t,r)};Le.useTransition=function(){return Nt.current.useTransition()};Le.version="18.3.1";lm.exports=Le;var p=lm.exports;const gm=lf(p),wf=of({__proto__:null,default:gm},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _f=p,Rf=Symbol.for("react.element"),Ef=Symbol.for("react.fragment"),bf=Object.prototype.hasOwnProperty,kf=_f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Pf={key:!0,ref:!0,__self:!0,__source:!0};function vm(e,t,r){var s,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)bf.call(t,s)&&!Pf.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:Rf,type:e,key:i,ref:o,props:a,_owner:kf.current}}Oi.Fragment=Ef;Oi.jsx=vm;Oi.jsxs=vm;om.exports=Oi;var n=om.exports,al={},xm={exports:{}},Mt={},jm={exports:{}},Sm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,P){var A=B.length;B.push(P);e:for(;0<A;){var k=A-1>>>1,te=B[k];if(0<a(te,P))B[k]=P,B[A]=te,A=k;else break e}}function r(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var P=B[0],A=B.pop();if(A!==P){B[0]=A;e:for(var k=0,te=B.length,K=te>>>1;k<K;){var U=2*(k+1)-1,C=B[U],ie=U+1,ne=B[ie];if(0>a(C,A))ie<te&&0>a(ne,C)?(B[k]=ne,B[ie]=A,k=ie):(B[k]=C,B[U]=A,k=U);else if(ie<te&&0>a(ne,A))B[k]=ne,B[ie]=A,k=ie;else break e}}return P}function a(B,P){var A=B.sortIndex-P.sortIndex;return A!==0?A:B.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,_=!1,m=!1,N=!1,E=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(B){for(var P=r(u);P!==null;){if(P.callback===null)s(u);else if(P.startTime<=B)s(u),P.sortIndex=P.expirationTime,t(c,P);else break;P=r(u)}}function w(B){if(N=!1,S(B),!m)if(r(c)!==null)m=!0,q($);else{var P=r(u);P!==null&&z(w,P.startTime-B)}}function $(B,P){m=!1,N&&(N=!1,y(Q),Q=-1),_=!0;var A=h;try{for(S(P),f=r(c);f!==null&&(!(f.expirationTime>P)||B&&!ce());){var k=f.callback;if(typeof k=="function"){f.callback=null,h=f.priorityLevel;var te=k(f.expirationTime<=P);P=e.unstable_now(),typeof te=="function"?f.callback=te:f===r(c)&&s(c),S(P)}else s(c);f=r(c)}if(f!==null)var K=!0;else{var U=r(u);U!==null&&z(w,U.startTime-P),K=!1}return K}finally{f=null,h=A,_=!1}}var O=!1,W=null,Q=-1,Y=5,M=-1;function ce(){return!(e.unstable_now()-M<Y)}function G(){if(W!==null){var B=e.unstable_now();M=B;var P=!0;try{P=W(!0,B)}finally{P?L():(O=!1,W=null)}}else O=!1}var L;if(typeof v=="function")L=function(){v(G)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,T=I.port2;I.port1.onmessage=G,L=function(){T.postMessage(null)}}else L=function(){E(G,0)};function q(B){W=B,O||(O=!0,L())}function z(B,P){Q=E(function(){B(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){m||_||(m=!0,q($))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(B){switch(h){case 1:case 2:case 3:var P=3;break;default:P=h}var A=h;h=P;try{return B()}finally{h=A}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,P){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var A=h;h=B;try{return P()}finally{h=A}},e.unstable_scheduleCallback=function(B,P,A){var k=e.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?k+A:k):A=k,B){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=A+te,B={id:d++,callback:P,priorityLevel:B,startTime:A,expirationTime:te,sortIndex:-1},A>k?(B.sortIndex=A,t(u,B),r(c)===null&&B===r(u)&&(N?(y(Q),Q=-1):N=!0,z(w,A-k))):(B.sortIndex=te,t(c,B),m||_||(m=!0,q($))),B},e.unstable_shouldYield=ce,e.unstable_wrapCallback=function(B){var P=h;return function(){var A=h;h=P;try{return B.apply(this,arguments)}finally{h=A}}}})(Sm);jm.exports=Sm;var If=jm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Af=p,Ft=If;function ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cm=new Set,Bs={};function Sr(e,t){Yr(e,t),Yr(e+"Capture",t)}function Yr(e,t){for(Bs[e]=t,e=0;e<t.length;e++)Cm.add(t[e])}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),il=Object.prototype.hasOwnProperty,Tf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,md={},pd={};function Lf(e){return il.call(pd,e)?!0:il.call(md,e)?!1:Tf.test(e)?pd[e]=!0:(md[e]=!0,!1)}function Of(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Df(e,t,r,s){if(t===null||typeof t>"u"||Of(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function wt(e,t,r,s,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){dt[e]=new wt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];dt[t]=new wt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){dt[e]=new wt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){dt[e]=new wt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){dt[e]=new wt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){dt[e]=new wt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){dt[e]=new wt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){dt[e]=new wt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){dt[e]=new wt(e,5,!1,e.toLowerCase(),null,!1,!1)});var dc=/[\-:]([a-z])/g;function uc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dc,uc);dt[t]=new wt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dc,uc);dt[t]=new wt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dc,uc);dt[t]=new wt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){dt[e]=new wt(e,1,!1,e.toLowerCase(),null,!1,!1)});dt.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){dt[e]=new wt(e,1,!1,e.toLowerCase(),null,!0,!0)});function mc(e,t,r,s){var a=dt.hasOwnProperty(t)?dt[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Df(t,r,a,s)&&(r=null),s||a===null?Lf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Nn=Af.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xa=Symbol.for("react.element"),Ar=Symbol.for("react.portal"),Tr=Symbol.for("react.fragment"),pc=Symbol.for("react.strict_mode"),ol=Symbol.for("react.profiler"),Nm=Symbol.for("react.provider"),wm=Symbol.for("react.context"),hc=Symbol.for("react.forward_ref"),ll=Symbol.for("react.suspense"),cl=Symbol.for("react.suspense_list"),fc=Symbol.for("react.memo"),Pn=Symbol.for("react.lazy"),_m=Symbol.for("react.offscreen"),hd=Symbol.iterator;function hs(e){return e===null||typeof e!="object"?null:(e=hd&&e[hd]||e["@@iterator"],typeof e=="function"?e:null)}var Ye=Object.assign,oo;function Es(e){if(oo===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);oo=t&&t[1]||""}return`
`+oo+e}var lo=!1;function co(e,t){if(!e||lo)return"";lo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=s.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{lo=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Es(e):""}function Ff(e){switch(e.tag){case 5:return Es(e.type);case 16:return Es("Lazy");case 13:return Es("Suspense");case 19:return Es("SuspenseList");case 0:case 2:case 15:return e=co(e.type,!1),e;case 11:return e=co(e.type.render,!1),e;case 1:return e=co(e.type,!0),e;default:return""}}function dl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Tr:return"Fragment";case Ar:return"Portal";case ol:return"Profiler";case pc:return"StrictMode";case ll:return"Suspense";case cl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case wm:return(e.displayName||"Context")+".Consumer";case Nm:return(e._context.displayName||"Context")+".Provider";case hc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fc:return t=e.displayName||null,t!==null?t:dl(e.type)||"Memo";case Pn:t=e._payload,e=e._init;try{return dl(e(t))}catch{}}return null}function Mf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dl(t);case 8:return t===pc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Wn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Rm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Uf(e){var t=Rm(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ja(e){e._valueTracker||(e._valueTracker=Uf(e))}function Em(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Rm(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function ii(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ul(e,t){var r=t.checked;return Ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function fd(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Wn(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function bm(e,t){t=t.checked,t!=null&&mc(e,"checked",t,!1)}function ml(e,t){bm(e,t);var r=Wn(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?pl(e,t.type,r):t.hasOwnProperty("defaultValue")&&pl(e,t.type,Wn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yd(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function pl(e,t,r){(t!=="number"||ii(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var bs=Array.isArray;function Vr(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Wn(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function hl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ue(91));return Ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gd(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ue(92));if(bs(r)){if(1<r.length)throw Error(ue(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Wn(r)}}function km(e,t){var r=Wn(t.value),s=Wn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function vd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Pm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Pm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Sa,Im=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Sa=Sa||document.createElement("div"),Sa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Sa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ts={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qf=["Webkit","ms","Moz","O"];Object.keys(Ts).forEach(function(e){qf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ts[t]=Ts[e]})});function Am(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ts.hasOwnProperty(e)&&Ts[e]?(""+t).trim():t+"px"}function Tm(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=Am(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var $f=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yl(e,t){if(t){if($f[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ue(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ue(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ue(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ue(62))}}function gl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vl=null;function yc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xl=null,Qr=null,Wr=null;function xd(e){if(e=da(e)){if(typeof xl!="function")throw Error(ue(280));var t=e.stateNode;t&&(t=qi(t),xl(e.stateNode,e.type,t))}}function Lm(e){Qr?Wr?Wr.push(e):Wr=[e]:Qr=e}function Om(){if(Qr){var e=Qr,t=Wr;if(Wr=Qr=null,xd(e),t)for(e=0;e<t.length;e++)xd(t[e])}}function Dm(e,t){return e(t)}function Fm(){}var uo=!1;function Mm(e,t,r){if(uo)return e(t,r);uo=!0;try{return Dm(e,t,r)}finally{uo=!1,(Qr!==null||Wr!==null)&&(Fm(),Om())}}function Vs(e,t){var r=e.stateNode;if(r===null)return null;var s=qi(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ue(231,t,typeof r));return r}var jl=!1;if(xn)try{var fs={};Object.defineProperty(fs,"passive",{get:function(){jl=!0}}),window.addEventListener("test",fs,fs),window.removeEventListener("test",fs,fs)}catch{jl=!1}function Bf(e,t,r,s,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Ls=!1,oi=null,li=!1,Sl=null,zf={onError:function(e){Ls=!0,oi=e}};function Vf(e,t,r,s,a,i,o,l,c){Ls=!1,oi=null,Bf.apply(zf,arguments)}function Qf(e,t,r,s,a,i,o,l,c){if(Vf.apply(this,arguments),Ls){if(Ls){var u=oi;Ls=!1,oi=null}else throw Error(ue(198));li||(li=!0,Sl=u)}}function Cr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Um(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function jd(e){if(Cr(e)!==e)throw Error(ue(188))}function Wf(e){var t=e.alternate;if(!t){if(t=Cr(e),t===null)throw Error(ue(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return jd(a),e;if(i===s)return jd(a),t;i=i.sibling}throw Error(ue(188))}if(r.return!==s.return)r=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,s=i;break}if(l===s){o=!0,s=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,s=a;break}if(l===s){o=!0,s=i,r=a;break}l=l.sibling}if(!o)throw Error(ue(189))}}if(r.alternate!==s)throw Error(ue(190))}if(r.tag!==3)throw Error(ue(188));return r.stateNode.current===r?e:t}function qm(e){return e=Wf(e),e!==null?$m(e):null}function $m(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$m(e);if(t!==null)return t;e=e.sibling}return null}var Bm=Ft.unstable_scheduleCallback,Sd=Ft.unstable_cancelCallback,Hf=Ft.unstable_shouldYield,Gf=Ft.unstable_requestPaint,et=Ft.unstable_now,Kf=Ft.unstable_getCurrentPriorityLevel,gc=Ft.unstable_ImmediatePriority,zm=Ft.unstable_UserBlockingPriority,ci=Ft.unstable_NormalPriority,Yf=Ft.unstable_LowPriority,Vm=Ft.unstable_IdlePriority,Di=null,dn=null;function Jf(e){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Di,e,void 0,(e.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:ey,Zf=Math.log,Xf=Math.LN2;function ey(e){return e>>>=0,e===0?32:31-(Zf(e)/Xf|0)|0}var Ca=64,Na=4194304;function ks(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function di(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?s=ks(l):(i&=o,i!==0&&(s=ks(i)))}else o=r&~a,o!==0?s=ks(o):i!==0&&(s=ks(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Xt(t),a=1<<r,s|=e[r],t&=~a;return s}function ty(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ny(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Xt(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&s)&&(a[o]=ty(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Cl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Qm(){var e=Ca;return Ca<<=1,!(Ca&4194240)&&(Ca=64),e}function mo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function la(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xt(t),e[t]=r}function ry(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Xt(r),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~i}}function vc(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Xt(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var $e=0;function Wm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Hm,xc,Gm,Km,Ym,Nl=!1,wa=[],Fn=null,Mn=null,Un=null,Qs=new Map,Ws=new Map,An=[],sy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cd(e,t){switch(e){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":Mn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":Qs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ws.delete(t.pointerId)}}function ys(e,t,r,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=da(t),t!==null&&xc(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function ay(e,t,r,s,a){switch(t){case"focusin":return Fn=ys(Fn,e,t,r,s,a),!0;case"dragenter":return Mn=ys(Mn,e,t,r,s,a),!0;case"mouseover":return Un=ys(Un,e,t,r,s,a),!0;case"pointerover":var i=a.pointerId;return Qs.set(i,ys(Qs.get(i)||null,e,t,r,s,a)),!0;case"gotpointercapture":return i=a.pointerId,Ws.set(i,ys(Ws.get(i)||null,e,t,r,s,a)),!0}return!1}function Jm(e){var t=lr(e.target);if(t!==null){var r=Cr(t);if(r!==null){if(t=r.tag,t===13){if(t=Um(r),t!==null){e.blockedOn=t,Ym(e.priority,function(){Gm(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=wl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);vl=s,r.target.dispatchEvent(s),vl=null}else return t=da(r),t!==null&&xc(t),e.blockedOn=r,!1;t.shift()}return!0}function Nd(e,t,r){Wa(e)&&r.delete(t)}function iy(){Nl=!1,Fn!==null&&Wa(Fn)&&(Fn=null),Mn!==null&&Wa(Mn)&&(Mn=null),Un!==null&&Wa(Un)&&(Un=null),Qs.forEach(Nd),Ws.forEach(Nd)}function gs(e,t){e.blockedOn===t&&(e.blockedOn=null,Nl||(Nl=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,iy)))}function Hs(e){function t(a){return gs(a,e)}if(0<wa.length){gs(wa[0],e);for(var r=1;r<wa.length;r++){var s=wa[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Fn!==null&&gs(Fn,e),Mn!==null&&gs(Mn,e),Un!==null&&gs(Un,e),Qs.forEach(t),Ws.forEach(t),r=0;r<An.length;r++)s=An[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<An.length&&(r=An[0],r.blockedOn===null);)Jm(r),r.blockedOn===null&&An.shift()}var Hr=Nn.ReactCurrentBatchConfig,ui=!0;function oy(e,t,r,s){var a=$e,i=Hr.transition;Hr.transition=null;try{$e=1,jc(e,t,r,s)}finally{$e=a,Hr.transition=i}}function ly(e,t,r,s){var a=$e,i=Hr.transition;Hr.transition=null;try{$e=4,jc(e,t,r,s)}finally{$e=a,Hr.transition=i}}function jc(e,t,r,s){if(ui){var a=wl(e,t,r,s);if(a===null)Co(e,t,s,mi,r),Cd(e,s);else if(ay(a,e,t,r,s))s.stopPropagation();else if(Cd(e,s),t&4&&-1<sy.indexOf(e)){for(;a!==null;){var i=da(a);if(i!==null&&Hm(i),i=wl(e,t,r,s),i===null&&Co(e,t,s,mi,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else Co(e,t,s,null,r)}}var mi=null;function wl(e,t,r,s){if(mi=null,e=yc(s),e=lr(e),e!==null)if(t=Cr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Um(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return mi=e,null}function Zm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kf()){case gc:return 1;case zm:return 4;case ci:case Yf:return 16;case Vm:return 536870912;default:return 16}default:return 16}}var Ln=null,Sc=null,Ha=null;function Xm(){if(Ha)return Ha;var e,t=Sc,r=t.length,s,a="value"in Ln?Ln.value:Ln.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(s=1;s<=o&&t[r-s]===a[i-s];s++);return Ha=a.slice(e,1<s?1-s:void 0)}function Ga(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _a(){return!0}function wd(){return!1}function Ut(e){function t(r,s,a,i,o){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?_a:wd,this.isPropagationStopped=wd,this}return Ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=_a)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=_a)},persist:function(){},isPersistent:_a}),t}var is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cc=Ut(is),ca=Ye({},is,{view:0,detail:0}),cy=Ut(ca),po,ho,vs,Fi=Ye({},ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vs&&(vs&&e.type==="mousemove"?(po=e.screenX-vs.screenX,ho=e.screenY-vs.screenY):ho=po=0,vs=e),po)},movementY:function(e){return"movementY"in e?e.movementY:ho}}),_d=Ut(Fi),dy=Ye({},Fi,{dataTransfer:0}),uy=Ut(dy),my=Ye({},ca,{relatedTarget:0}),fo=Ut(my),py=Ye({},is,{animationName:0,elapsedTime:0,pseudoElement:0}),hy=Ut(py),fy=Ye({},is,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yy=Ut(fy),gy=Ye({},is,{data:0}),Rd=Ut(gy),vy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jy[e])?!!t[e]:!1}function Nc(){return Sy}var Cy=Ye({},ca,{key:function(e){if(e.key){var t=vy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ga(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nc,charCode:function(e){return e.type==="keypress"?Ga(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ga(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ny=Ut(Cy),wy=Ye({},Fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ed=Ut(wy),_y=Ye({},ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nc}),Ry=Ut(_y),Ey=Ye({},is,{propertyName:0,elapsedTime:0,pseudoElement:0}),by=Ut(Ey),ky=Ye({},Fi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Py=Ut(ky),Iy=[9,13,27,32],wc=xn&&"CompositionEvent"in window,Os=null;xn&&"documentMode"in document&&(Os=document.documentMode);var Ay=xn&&"TextEvent"in window&&!Os,ep=xn&&(!wc||Os&&8<Os&&11>=Os),bd=" ",kd=!1;function tp(e,t){switch(e){case"keyup":return Iy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function np(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Lr=!1;function Ty(e,t){switch(e){case"compositionend":return np(t);case"keypress":return t.which!==32?null:(kd=!0,bd);case"textInput":return e=t.data,e===bd&&kd?null:e;default:return null}}function Ly(e,t){if(Lr)return e==="compositionend"||!wc&&tp(e,t)?(e=Xm(),Ha=Sc=Ln=null,Lr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ep&&t.locale!=="ko"?null:t.data;default:return null}}var Oy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Oy[e.type]:t==="textarea"}function rp(e,t,r,s){Lm(s),t=pi(t,"onChange"),0<t.length&&(r=new Cc("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Ds=null,Gs=null;function Dy(e){hp(e,0)}function Mi(e){var t=Fr(e);if(Em(t))return e}function Fy(e,t){if(e==="change")return t}var sp=!1;if(xn){var yo;if(xn){var go="oninput"in document;if(!go){var Id=document.createElement("div");Id.setAttribute("oninput","return;"),go=typeof Id.oninput=="function"}yo=go}else yo=!1;sp=yo&&(!document.documentMode||9<document.documentMode)}function Ad(){Ds&&(Ds.detachEvent("onpropertychange",ap),Gs=Ds=null)}function ap(e){if(e.propertyName==="value"&&Mi(Gs)){var t=[];rp(t,Gs,e,yc(e)),Mm(Dy,t)}}function My(e,t,r){e==="focusin"?(Ad(),Ds=t,Gs=r,Ds.attachEvent("onpropertychange",ap)):e==="focusout"&&Ad()}function Uy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Mi(Gs)}function qy(e,t){if(e==="click")return Mi(t)}function $y(e,t){if(e==="input"||e==="change")return Mi(t)}function By(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tn=typeof Object.is=="function"?Object.is:By;function Ks(e,t){if(tn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!il.call(t,a)||!tn(e[a],t[a]))return!1}return!0}function Td(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ld(e,t){var r=Td(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Td(r)}}function ip(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ip(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function op(){for(var e=window,t=ii();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ii(e.document)}return t}function _c(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function zy(e){var t=op(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ip(r.ownerDocument.documentElement,r)){if(s!==null&&_c(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=Ld(r,i);var o=Ld(r,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Vy=xn&&"documentMode"in document&&11>=document.documentMode,Or=null,_l=null,Fs=null,Rl=!1;function Od(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Rl||Or==null||Or!==ii(s)||(s=Or,"selectionStart"in s&&_c(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Fs&&Ks(Fs,s)||(Fs=s,s=pi(_l,"onSelect"),0<s.length&&(t=new Cc("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Or)))}function Ra(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Dr={animationend:Ra("Animation","AnimationEnd"),animationiteration:Ra("Animation","AnimationIteration"),animationstart:Ra("Animation","AnimationStart"),transitionend:Ra("Transition","TransitionEnd")},vo={},lp={};xn&&(lp=document.createElement("div").style,"AnimationEvent"in window||(delete Dr.animationend.animation,delete Dr.animationiteration.animation,delete Dr.animationstart.animation),"TransitionEvent"in window||delete Dr.transitionend.transition);function Ui(e){if(vo[e])return vo[e];if(!Dr[e])return e;var t=Dr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in lp)return vo[e]=t[r];return e}var cp=Ui("animationend"),dp=Ui("animationiteration"),up=Ui("animationstart"),mp=Ui("transitionend"),pp=new Map,Dd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gn(e,t){pp.set(e,t),Sr(t,[e])}for(var xo=0;xo<Dd.length;xo++){var jo=Dd[xo],Qy=jo.toLowerCase(),Wy=jo[0].toUpperCase()+jo.slice(1);Gn(Qy,"on"+Wy)}Gn(cp,"onAnimationEnd");Gn(dp,"onAnimationIteration");Gn(up,"onAnimationStart");Gn("dblclick","onDoubleClick");Gn("focusin","onFocus");Gn("focusout","onBlur");Gn(mp,"onTransitionEnd");Yr("onMouseEnter",["mouseout","mouseover"]);Yr("onMouseLeave",["mouseout","mouseover"]);Yr("onPointerEnter",["pointerout","pointerover"]);Yr("onPointerLeave",["pointerout","pointerover"]);Sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ps="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ps));function Fd(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,Qf(s,t,void 0,e),e.currentTarget=null}function hp(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;Fd(a,l,u),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;Fd(a,l,u),i=c}}}if(li)throw e=Sl,li=!1,Sl=null,e}function Ve(e,t){var r=t[Il];r===void 0&&(r=t[Il]=new Set);var s=e+"__bubble";r.has(s)||(fp(t,e,2,!1),r.add(s))}function So(e,t,r){var s=0;t&&(s|=4),fp(r,e,s,t)}var Ea="_reactListening"+Math.random().toString(36).slice(2);function Ys(e){if(!e[Ea]){e[Ea]=!0,Cm.forEach(function(r){r!=="selectionchange"&&(Hy.has(r)||So(r,!1,e),So(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ea]||(t[Ea]=!0,So("selectionchange",!1,t))}}function fp(e,t,r,s){switch(Zm(t)){case 1:var a=oy;break;case 4:a=ly;break;default:a=jc}r=a.bind(null,t,r,e),a=void 0,!jl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Co(e,t,r,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=lr(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}Mm(function(){var u=i,d=yc(r),f=[];e:{var h=pp.get(e);if(h!==void 0){var _=Cc,m=e;switch(e){case"keypress":if(Ga(r)===0)break e;case"keydown":case"keyup":_=Ny;break;case"focusin":m="focus",_=fo;break;case"focusout":m="blur",_=fo;break;case"beforeblur":case"afterblur":_=fo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=_d;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=uy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=Ry;break;case cp:case dp:case up:_=hy;break;case mp:_=by;break;case"scroll":_=cy;break;case"wheel":_=Py;break;case"copy":case"cut":case"paste":_=yy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Ed}var N=(t&4)!==0,E=!N&&e==="scroll",y=N?h!==null?h+"Capture":null:h;N=[];for(var v=u,S;v!==null;){S=v;var w=S.stateNode;if(S.tag===5&&w!==null&&(S=w,y!==null&&(w=Vs(v,y),w!=null&&N.push(Js(v,w,S)))),E)break;v=v.return}0<N.length&&(h=new _(h,m,null,r,d),f.push({event:h,listeners:N}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",h&&r!==vl&&(m=r.relatedTarget||r.fromElement)&&(lr(m)||m[jn]))break e;if((_||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,_?(m=r.relatedTarget||r.toElement,_=u,m=m?lr(m):null,m!==null&&(E=Cr(m),m!==E||m.tag!==5&&m.tag!==6)&&(m=null)):(_=null,m=u),_!==m)){if(N=_d,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(N=Ed,w="onPointerLeave",y="onPointerEnter",v="pointer"),E=_==null?h:Fr(_),S=m==null?h:Fr(m),h=new N(w,v+"leave",_,r,d),h.target=E,h.relatedTarget=S,w=null,lr(d)===u&&(N=new N(y,v+"enter",m,r,d),N.target=S,N.relatedTarget=E,w=N),E=w,_&&m)t:{for(N=_,y=m,v=0,S=N;S;S=_r(S))v++;for(S=0,w=y;w;w=_r(w))S++;for(;0<v-S;)N=_r(N),v--;for(;0<S-v;)y=_r(y),S--;for(;v--;){if(N===y||y!==null&&N===y.alternate)break t;N=_r(N),y=_r(y)}N=null}else N=null;_!==null&&Md(f,h,_,N,!1),m!==null&&E!==null&&Md(f,E,m,N,!0)}}e:{if(h=u?Fr(u):window,_=h.nodeName&&h.nodeName.toLowerCase(),_==="select"||_==="input"&&h.type==="file")var $=Fy;else if(Pd(h))if(sp)$=$y;else{$=Uy;var O=My}else(_=h.nodeName)&&_.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&($=qy);if($&&($=$(e,u))){rp(f,$,r,d);break e}O&&O(e,h,u),e==="focusout"&&(O=h._wrapperState)&&O.controlled&&h.type==="number"&&pl(h,"number",h.value)}switch(O=u?Fr(u):window,e){case"focusin":(Pd(O)||O.contentEditable==="true")&&(Or=O,_l=u,Fs=null);break;case"focusout":Fs=_l=Or=null;break;case"mousedown":Rl=!0;break;case"contextmenu":case"mouseup":case"dragend":Rl=!1,Od(f,r,d);break;case"selectionchange":if(Vy)break;case"keydown":case"keyup":Od(f,r,d)}var W;if(wc)e:{switch(e){case"compositionstart":var Q="onCompositionStart";break e;case"compositionend":Q="onCompositionEnd";break e;case"compositionupdate":Q="onCompositionUpdate";break e}Q=void 0}else Lr?tp(e,r)&&(Q="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Q="onCompositionStart");Q&&(ep&&r.locale!=="ko"&&(Lr||Q!=="onCompositionStart"?Q==="onCompositionEnd"&&Lr&&(W=Xm()):(Ln=d,Sc="value"in Ln?Ln.value:Ln.textContent,Lr=!0)),O=pi(u,Q),0<O.length&&(Q=new Rd(Q,e,null,r,d),f.push({event:Q,listeners:O}),W?Q.data=W:(W=np(r),W!==null&&(Q.data=W)))),(W=Ay?Ty(e,r):Ly(e,r))&&(u=pi(u,"onBeforeInput"),0<u.length&&(d=new Rd("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=W))}hp(f,t)})}function Js(e,t,r){return{instance:e,listener:t,currentTarget:r}}function pi(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Vs(e,r),i!=null&&s.unshift(Js(e,i,a)),i=Vs(e,t),i!=null&&s.push(Js(e,i,a))),e=e.return}return s}function _r(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Md(e,t,r,s,a){for(var i=t._reactName,o=[];r!==null&&r!==s;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,a?(c=Vs(r,i),c!=null&&o.unshift(Js(r,c,l))):a||(c=Vs(r,i),c!=null&&o.push(Js(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Gy=/\r\n?/g,Ky=/\u0000|\uFFFD/g;function Ud(e){return(typeof e=="string"?e:""+e).replace(Gy,`
`).replace(Ky,"")}function ba(e,t,r){if(t=Ud(t),Ud(e)!==t&&r)throw Error(ue(425))}function hi(){}var El=null,bl=null;function kl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pl=typeof setTimeout=="function"?setTimeout:void 0,Yy=typeof clearTimeout=="function"?clearTimeout:void 0,qd=typeof Promise=="function"?Promise:void 0,Jy=typeof queueMicrotask=="function"?queueMicrotask:typeof qd<"u"?function(e){return qd.resolve(null).then(e).catch(Zy)}:Pl;function Zy(e){setTimeout(function(){throw e})}function No(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),Hs(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);Hs(t)}function qn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $d(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var os=Math.random().toString(36).slice(2),cn="__reactFiber$"+os,Zs="__reactProps$"+os,jn="__reactContainer$"+os,Il="__reactEvents$"+os,Xy="__reactListeners$"+os,eg="__reactHandles$"+os;function lr(e){var t=e[cn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[jn]||r[cn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=$d(e);e!==null;){if(r=e[cn])return r;e=$d(e)}return t}e=r,r=e.parentNode}return null}function da(e){return e=e[cn]||e[jn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Fr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ue(33))}function qi(e){return e[Zs]||null}var Al=[],Mr=-1;function Kn(e){return{current:e}}function Qe(e){0>Mr||(e.current=Al[Mr],Al[Mr]=null,Mr--)}function ze(e,t){Mr++,Al[Mr]=e.current,e.current=t}var Hn={},xt=Kn(Hn),kt=Kn(!1),fr=Hn;function Jr(e,t){var r=e.type.contextTypes;if(!r)return Hn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pt(e){return e=e.childContextTypes,e!=null}function fi(){Qe(kt),Qe(xt)}function Bd(e,t,r){if(xt.current!==Hn)throw Error(ue(168));ze(xt,t),ze(kt,r)}function yp(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(ue(108,Mf(e)||"Unknown",a));return Ye({},r,s)}function yi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Hn,fr=xt.current,ze(xt,e),ze(kt,kt.current),!0}function zd(e,t,r){var s=e.stateNode;if(!s)throw Error(ue(169));r?(e=yp(e,t,fr),s.__reactInternalMemoizedMergedChildContext=e,Qe(kt),Qe(xt),ze(xt,e)):Qe(kt),ze(kt,r)}var fn=null,$i=!1,wo=!1;function gp(e){fn===null?fn=[e]:fn.push(e)}function tg(e){$i=!0,gp(e)}function Yn(){if(!wo&&fn!==null){wo=!0;var e=0,t=$e;try{var r=fn;for($e=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}fn=null,$i=!1}catch(a){throw fn!==null&&(fn=fn.slice(e+1)),Bm(gc,Yn),a}finally{$e=t,wo=!1}}return null}var Ur=[],qr=0,gi=null,vi=0,Bt=[],zt=0,yr=null,yn=1,gn="";function ir(e,t){Ur[qr++]=vi,Ur[qr++]=gi,gi=e,vi=t}function vp(e,t,r){Bt[zt++]=yn,Bt[zt++]=gn,Bt[zt++]=yr,yr=e;var s=yn;e=gn;var a=32-Xt(s)-1;s&=~(1<<a),r+=1;var i=32-Xt(t)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,yn=1<<32-Xt(t)+a|r<<a|s,gn=i+e}else yn=1<<i|r<<a|s,gn=e}function Rc(e){e.return!==null&&(ir(e,1),vp(e,1,0))}function Ec(e){for(;e===gi;)gi=Ur[--qr],Ur[qr]=null,vi=Ur[--qr],Ur[qr]=null;for(;e===yr;)yr=Bt[--zt],Bt[zt]=null,gn=Bt[--zt],Bt[zt]=null,yn=Bt[--zt],Bt[zt]=null}var Dt=null,Ot=null,We=!1,Zt=null;function xp(e,t){var r=Vt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Vd(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dt=e,Ot=qn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dt=e,Ot=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=yr!==null?{id:yn,overflow:gn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Vt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Dt=e,Ot=null,!0):!1;default:return!1}}function Tl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ll(e){if(We){var t=Ot;if(t){var r=t;if(!Vd(e,t)){if(Tl(e))throw Error(ue(418));t=qn(r.nextSibling);var s=Dt;t&&Vd(e,t)?xp(s,r):(e.flags=e.flags&-4097|2,We=!1,Dt=e)}}else{if(Tl(e))throw Error(ue(418));e.flags=e.flags&-4097|2,We=!1,Dt=e}}}function Qd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dt=e}function ka(e){if(e!==Dt)return!1;if(!We)return Qd(e),We=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!kl(e.type,e.memoizedProps)),t&&(t=Ot)){if(Tl(e))throw jp(),Error(ue(418));for(;t;)xp(e,t),t=qn(t.nextSibling)}if(Qd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ue(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ot=qn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ot=null}}else Ot=Dt?qn(e.stateNode.nextSibling):null;return!0}function jp(){for(var e=Ot;e;)e=qn(e.nextSibling)}function Zr(){Ot=Dt=null,We=!1}function bc(e){Zt===null?Zt=[e]:Zt.push(e)}var ng=Nn.ReactCurrentBatchConfig;function xs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ue(309));var s=r.stateNode}if(!s)throw Error(ue(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ue(284));if(!r._owner)throw Error(ue(290,e))}return e}function Pa(e,t){throw e=Object.prototype.toString.call(t),Error(ue(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wd(e){var t=e._init;return t(e._payload)}function Sp(e){function t(y,v){if(e){var S=y.deletions;S===null?(y.deletions=[v],y.flags|=16):S.push(v)}}function r(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function s(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function a(y,v){return y=Vn(y,v),y.index=0,y.sibling=null,y}function i(y,v,S){return y.index=S,e?(S=y.alternate,S!==null?(S=S.index,S<v?(y.flags|=2,v):S):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,v,S,w){return v===null||v.tag!==6?(v=Io(S,y.mode,w),v.return=y,v):(v=a(v,S),v.return=y,v)}function c(y,v,S,w){var $=S.type;return $===Tr?d(y,v,S.props.children,w,S.key):v!==null&&(v.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Pn&&Wd($)===v.type)?(w=a(v,S.props),w.ref=xs(y,v,S),w.return=y,w):(w=ti(S.type,S.key,S.props,null,y.mode,w),w.ref=xs(y,v,S),w.return=y,w)}function u(y,v,S,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=Ao(S,y.mode,w),v.return=y,v):(v=a(v,S.children||[]),v.return=y,v)}function d(y,v,S,w,$){return v===null||v.tag!==7?(v=pr(S,y.mode,w,$),v.return=y,v):(v=a(v,S),v.return=y,v)}function f(y,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Io(""+v,y.mode,S),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case xa:return S=ti(v.type,v.key,v.props,null,y.mode,S),S.ref=xs(y,null,v),S.return=y,S;case Ar:return v=Ao(v,y.mode,S),v.return=y,v;case Pn:var w=v._init;return f(y,w(v._payload),S)}if(bs(v)||hs(v))return v=pr(v,y.mode,S,null),v.return=y,v;Pa(y,v)}return null}function h(y,v,S,w){var $=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return $!==null?null:l(y,v,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case xa:return S.key===$?c(y,v,S,w):null;case Ar:return S.key===$?u(y,v,S,w):null;case Pn:return $=S._init,h(y,v,$(S._payload),w)}if(bs(S)||hs(S))return $!==null?null:d(y,v,S,w,null);Pa(y,S)}return null}function _(y,v,S,w,$){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(S)||null,l(v,y,""+w,$);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case xa:return y=y.get(w.key===null?S:w.key)||null,c(v,y,w,$);case Ar:return y=y.get(w.key===null?S:w.key)||null,u(v,y,w,$);case Pn:var O=w._init;return _(y,v,S,O(w._payload),$)}if(bs(w)||hs(w))return y=y.get(S)||null,d(v,y,w,$,null);Pa(v,w)}return null}function m(y,v,S,w){for(var $=null,O=null,W=v,Q=v=0,Y=null;W!==null&&Q<S.length;Q++){W.index>Q?(Y=W,W=null):Y=W.sibling;var M=h(y,W,S[Q],w);if(M===null){W===null&&(W=Y);break}e&&W&&M.alternate===null&&t(y,W),v=i(M,v,Q),O===null?$=M:O.sibling=M,O=M,W=Y}if(Q===S.length)return r(y,W),We&&ir(y,Q),$;if(W===null){for(;Q<S.length;Q++)W=f(y,S[Q],w),W!==null&&(v=i(W,v,Q),O===null?$=W:O.sibling=W,O=W);return We&&ir(y,Q),$}for(W=s(y,W);Q<S.length;Q++)Y=_(W,y,Q,S[Q],w),Y!==null&&(e&&Y.alternate!==null&&W.delete(Y.key===null?Q:Y.key),v=i(Y,v,Q),O===null?$=Y:O.sibling=Y,O=Y);return e&&W.forEach(function(ce){return t(y,ce)}),We&&ir(y,Q),$}function N(y,v,S,w){var $=hs(S);if(typeof $!="function")throw Error(ue(150));if(S=$.call(S),S==null)throw Error(ue(151));for(var O=$=null,W=v,Q=v=0,Y=null,M=S.next();W!==null&&!M.done;Q++,M=S.next()){W.index>Q?(Y=W,W=null):Y=W.sibling;var ce=h(y,W,M.value,w);if(ce===null){W===null&&(W=Y);break}e&&W&&ce.alternate===null&&t(y,W),v=i(ce,v,Q),O===null?$=ce:O.sibling=ce,O=ce,W=Y}if(M.done)return r(y,W),We&&ir(y,Q),$;if(W===null){for(;!M.done;Q++,M=S.next())M=f(y,M.value,w),M!==null&&(v=i(M,v,Q),O===null?$=M:O.sibling=M,O=M);return We&&ir(y,Q),$}for(W=s(y,W);!M.done;Q++,M=S.next())M=_(W,y,Q,M.value,w),M!==null&&(e&&M.alternate!==null&&W.delete(M.key===null?Q:M.key),v=i(M,v,Q),O===null?$=M:O.sibling=M,O=M);return e&&W.forEach(function(G){return t(y,G)}),We&&ir(y,Q),$}function E(y,v,S,w){if(typeof S=="object"&&S!==null&&S.type===Tr&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case xa:e:{for(var $=S.key,O=v;O!==null;){if(O.key===$){if($=S.type,$===Tr){if(O.tag===7){r(y,O.sibling),v=a(O,S.props.children),v.return=y,y=v;break e}}else if(O.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Pn&&Wd($)===O.type){r(y,O.sibling),v=a(O,S.props),v.ref=xs(y,O,S),v.return=y,y=v;break e}r(y,O);break}else t(y,O);O=O.sibling}S.type===Tr?(v=pr(S.props.children,y.mode,w,S.key),v.return=y,y=v):(w=ti(S.type,S.key,S.props,null,y.mode,w),w.ref=xs(y,v,S),w.return=y,y=w)}return o(y);case Ar:e:{for(O=S.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){r(y,v.sibling),v=a(v,S.children||[]),v.return=y,y=v;break e}else{r(y,v);break}else t(y,v);v=v.sibling}v=Ao(S,y.mode,w),v.return=y,y=v}return o(y);case Pn:return O=S._init,E(y,v,O(S._payload),w)}if(bs(S))return m(y,v,S,w);if(hs(S))return N(y,v,S,w);Pa(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(r(y,v.sibling),v=a(v,S),v.return=y,y=v):(r(y,v),v=Io(S,y.mode,w),v.return=y,y=v),o(y)):r(y,v)}return E}var Xr=Sp(!0),Cp=Sp(!1),xi=Kn(null),ji=null,$r=null,kc=null;function Pc(){kc=$r=ji=null}function Ic(e){var t=xi.current;Qe(xi),e._currentValue=t}function Ol(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Gr(e,t){ji=e,kc=$r=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(bt=!0),e.firstContext=null)}function Wt(e){var t=e._currentValue;if(kc!==e)if(e={context:e,memoizedValue:t,next:null},$r===null){if(ji===null)throw Error(ue(308));$r=e,ji.dependencies={lanes:0,firstContext:e}}else $r=$r.next=e;return t}var cr=null;function Ac(e){cr===null?cr=[e]:cr.push(e)}function Np(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,Ac(t)):(r.next=a.next,a.next=r),t.interleaved=r,Sn(e,s)}function Sn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var In=!1;function Tc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $n(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Me&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Sn(e,r)}return a=s.interleaved,a===null?(t.next=t,Ac(s)):(t.next=a.next,a.next=t),s.interleaved=t,Sn(e,r)}function Ka(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,vc(e,r)}}function Hd(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Si(e,t,r,s){var a=e.updateQueue;In=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,d=u=c=null,l=i;do{var h=l.lane,_=l.eventTime;if((s&h)===h){d!==null&&(d=d.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,N=l;switch(h=t,_=r,N.tag){case 1:if(m=N.payload,typeof m=="function"){f=m.call(_,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=N.payload,h=typeof m=="function"?m.call(_,f,h):m,h==null)break e;f=Ye({},f,h);break e;case 2:In=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else _={eventTime:_,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=_,c=f):d=d.next=_,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);vr|=o,e.lanes=o,e.memoizedState=f}}function Gd(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(ue(191,a));a.call(s)}}}var ua={},un=Kn(ua),Xs=Kn(ua),ea=Kn(ua);function dr(e){if(e===ua)throw Error(ue(174));return e}function Lc(e,t){switch(ze(ea,t),ze(Xs,e),ze(un,ua),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fl(t,e)}Qe(un),ze(un,t)}function es(){Qe(un),Qe(Xs),Qe(ea)}function _p(e){dr(ea.current);var t=dr(un.current),r=fl(t,e.type);t!==r&&(ze(Xs,e),ze(un,r))}function Oc(e){Xs.current===e&&(Qe(un),Qe(Xs))}var He=Kn(0);function Ci(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _o=[];function Dc(){for(var e=0;e<_o.length;e++)_o[e]._workInProgressVersionPrimary=null;_o.length=0}var Ya=Nn.ReactCurrentDispatcher,Ro=Nn.ReactCurrentBatchConfig,gr=0,Ge=null,rt=null,at=null,Ni=!1,Ms=!1,ta=0,rg=0;function ft(){throw Error(ue(321))}function Fc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!tn(e[r],t[r]))return!1;return!0}function Mc(e,t,r,s,a,i){if(gr=i,Ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ya.current=e===null||e.memoizedState===null?og:lg,e=r(s,a),Ms){i=0;do{if(Ms=!1,ta=0,25<=i)throw Error(ue(301));i+=1,at=rt=null,t.updateQueue=null,Ya.current=cg,e=r(s,a)}while(Ms)}if(Ya.current=wi,t=rt!==null&&rt.next!==null,gr=0,at=rt=Ge=null,Ni=!1,t)throw Error(ue(300));return e}function Uc(){var e=ta!==0;return ta=0,e}function ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?Ge.memoizedState=at=e:at=at.next=e,at}function Ht(){if(rt===null){var e=Ge.alternate;e=e!==null?e.memoizedState:null}else e=rt.next;var t=at===null?Ge.memoizedState:at.next;if(t!==null)at=t,rt=e;else{if(e===null)throw Error(ue(310));rt=e,e={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},at===null?Ge.memoizedState=at=e:at=at.next=e}return at}function na(e,t){return typeof t=="function"?t(e):t}function Eo(e){var t=Ht(),r=t.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=e;var s=rt,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((gr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=s):c=c.next=f,Ge.lanes|=d,vr|=d}u=u.next}while(u!==null&&u!==i);c===null?o=s:c.next=l,tn(s,t.memoizedState)||(bt=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Ge.lanes|=i,vr|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function bo(e){var t=Ht(),r=t.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);tn(i,t.memoizedState)||(bt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function Rp(){}function Ep(e,t){var r=Ge,s=Ht(),a=t(),i=!tn(s.memoizedState,a);if(i&&(s.memoizedState=a,bt=!0),s=s.queue,qc(Pp.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||at!==null&&at.memoizedState.tag&1){if(r.flags|=2048,ra(9,kp.bind(null,r,s,a,t),void 0,null),it===null)throw Error(ue(349));gr&30||bp(r,t,a)}return a}function bp(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function kp(e,t,r,s){t.value=r,t.getSnapshot=s,Ip(t)&&Ap(e)}function Pp(e,t,r){return r(function(){Ip(t)&&Ap(e)})}function Ip(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!tn(e,r)}catch{return!0}}function Ap(e){var t=Sn(e,1);t!==null&&en(t,e,1,-1)}function Kd(e){var t=ln();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:e},t.queue=e,e=e.dispatch=ig.bind(null,Ge,e),[t.memoizedState,e]}function ra(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function Tp(){return Ht().memoizedState}function Ja(e,t,r,s){var a=ln();Ge.flags|=e,a.memoizedState=ra(1|t,r,void 0,s===void 0?null:s)}function Bi(e,t,r,s){var a=Ht();s=s===void 0?null:s;var i=void 0;if(rt!==null){var o=rt.memoizedState;if(i=o.destroy,s!==null&&Fc(s,o.deps)){a.memoizedState=ra(t,r,i,s);return}}Ge.flags|=e,a.memoizedState=ra(1|t,r,i,s)}function Yd(e,t){return Ja(8390656,8,e,t)}function qc(e,t){return Bi(2048,8,e,t)}function Lp(e,t){return Bi(4,2,e,t)}function Op(e,t){return Bi(4,4,e,t)}function Dp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Fp(e,t,r){return r=r!=null?r.concat([e]):null,Bi(4,4,Dp.bind(null,t,e),r)}function $c(){}function Mp(e,t){var r=Ht();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Fc(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Up(e,t){var r=Ht();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Fc(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function qp(e,t,r){return gr&21?(tn(r,t)||(r=Qm(),Ge.lanes|=r,vr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bt=!0),e.memoizedState=r)}function sg(e,t){var r=$e;$e=r!==0&&4>r?r:4,e(!0);var s=Ro.transition;Ro.transition={};try{e(!1),t()}finally{$e=r,Ro.transition=s}}function $p(){return Ht().memoizedState}function ag(e,t,r){var s=zn(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Bp(e))zp(t,r);else if(r=Np(e,t,r,s),r!==null){var a=Ct();en(r,e,s,a),Vp(r,t,s)}}function ig(e,t,r){var s=zn(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Bp(e))zp(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,tn(l,o)){var c=t.interleaved;c===null?(a.next=a,Ac(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=Np(e,t,a,s),r!==null&&(a=Ct(),en(r,e,s,a),Vp(r,t,s))}}function Bp(e){var t=e.alternate;return e===Ge||t!==null&&t===Ge}function zp(e,t){Ms=Ni=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Vp(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,vc(e,r)}}var wi={readContext:Wt,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},og={readContext:Wt,useCallback:function(e,t){return ln().memoizedState=[e,t===void 0?null:t],e},useContext:Wt,useEffect:Yd,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ja(4194308,4,Dp.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ja(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ja(4,2,e,t)},useMemo:function(e,t){var r=ln();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=ln();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=ag.bind(null,Ge,e),[s.memoizedState,e]},useRef:function(e){var t=ln();return e={current:e},t.memoizedState=e},useState:Kd,useDebugValue:$c,useDeferredValue:function(e){return ln().memoizedState=e},useTransition:function(){var e=Kd(!1),t=e[0];return e=sg.bind(null,e[1]),ln().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Ge,a=ln();if(We){if(r===void 0)throw Error(ue(407));r=r()}else{if(r=t(),it===null)throw Error(ue(349));gr&30||bp(s,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Yd(Pp.bind(null,s,i,e),[e]),s.flags|=2048,ra(9,kp.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=ln(),t=it.identifierPrefix;if(We){var r=gn,s=yn;r=(s&~(1<<32-Xt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=ta++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=rg++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lg={readContext:Wt,useCallback:Mp,useContext:Wt,useEffect:qc,useImperativeHandle:Fp,useInsertionEffect:Lp,useLayoutEffect:Op,useMemo:Up,useReducer:Eo,useRef:Tp,useState:function(){return Eo(na)},useDebugValue:$c,useDeferredValue:function(e){var t=Ht();return qp(t,rt.memoizedState,e)},useTransition:function(){var e=Eo(na)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:Rp,useSyncExternalStore:Ep,useId:$p,unstable_isNewReconciler:!1},cg={readContext:Wt,useCallback:Mp,useContext:Wt,useEffect:qc,useImperativeHandle:Fp,useInsertionEffect:Lp,useLayoutEffect:Op,useMemo:Up,useReducer:bo,useRef:Tp,useState:function(){return bo(na)},useDebugValue:$c,useDeferredValue:function(e){var t=Ht();return rt===null?t.memoizedState=e:qp(t,rt.memoizedState,e)},useTransition:function(){var e=bo(na)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:Rp,useSyncExternalStore:Ep,useId:$p,unstable_isNewReconciler:!1};function Yt(e,t){if(e&&e.defaultProps){t=Ye({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Dl(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Ye({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var zi={isMounted:function(e){return(e=e._reactInternals)?Cr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Ct(),a=zn(e),i=vn(s,a);i.payload=t,r!=null&&(i.callback=r),t=$n(e,i,a),t!==null&&(en(t,e,a,s),Ka(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Ct(),a=zn(e),i=vn(s,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=$n(e,i,a),t!==null&&(en(t,e,a,s),Ka(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ct(),s=zn(e),a=vn(r,s);a.tag=2,t!=null&&(a.callback=t),t=$n(e,a,s),t!==null&&(en(t,e,s,r),Ka(t,e,s))}};function Jd(e,t,r,s,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ks(r,s)||!Ks(a,i):!0}function Qp(e,t,r){var s=!1,a=Hn,i=t.contextType;return typeof i=="object"&&i!==null?i=Wt(i):(a=Pt(t)?fr:xt.current,s=t.contextTypes,i=(s=s!=null)?Jr(e,a):Hn),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=zi,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Zd(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&zi.enqueueReplaceState(t,t.state,null)}function Fl(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Tc(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Wt(i):(i=Pt(t)?fr:xt.current,a.context=Jr(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Dl(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&zi.enqueueReplaceState(a,a.state,null),Si(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ts(e,t){try{var r="",s=t;do r+=Ff(s),s=s.return;while(s);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function ko(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ml(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var dg=typeof WeakMap=="function"?WeakMap:Map;function Wp(e,t,r){r=vn(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Ri||(Ri=!0,Gl=s),Ml(e,t)},r}function Hp(e,t,r){r=vn(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){Ml(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Ml(e,t),typeof s!="function"&&(Bn===null?Bn=new Set([this]):Bn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Xd(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new dg;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=wg.bind(null,e,t,r),t.then(e,e))}function eu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tu(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=vn(-1,1),t.tag=2,$n(r,t,1))),r.lanes|=1),e)}var ug=Nn.ReactCurrentOwner,bt=!1;function St(e,t,r,s){t.child=e===null?Cp(t,null,r,s):Xr(t,e.child,r,s)}function nu(e,t,r,s,a){r=r.render;var i=t.ref;return Gr(t,a),s=Mc(e,t,r,s,i,a),r=Uc(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Cn(e,t,a)):(We&&r&&Rc(t),t.flags|=1,St(e,t,s,a),t.child)}function ru(e,t,r,s,a){if(e===null){var i=r.type;return typeof i=="function"&&!Kc(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Gp(e,t,i,s,a)):(e=ti(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Ks,r(o,s)&&e.ref===t.ref)return Cn(e,t,a)}return t.flags|=1,e=Vn(i,s),e.ref=t.ref,e.return=t,t.child=e}function Gp(e,t,r,s,a){if(e!==null){var i=e.memoizedProps;if(Ks(i,s)&&e.ref===t.ref)if(bt=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(bt=!0);else return t.lanes=e.lanes,Cn(e,t,a)}return Ul(e,t,r,s,a)}function Kp(e,t,r){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(zr,Lt),Lt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ze(zr,Lt),Lt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,ze(zr,Lt),Lt|=s}else i!==null?(s=i.baseLanes|r,t.memoizedState=null):s=r,ze(zr,Lt),Lt|=s;return St(e,t,a,r),t.child}function Yp(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ul(e,t,r,s,a){var i=Pt(r)?fr:xt.current;return i=Jr(t,i),Gr(t,a),r=Mc(e,t,r,s,i,a),s=Uc(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Cn(e,t,a)):(We&&s&&Rc(t),t.flags|=1,St(e,t,r,a),t.child)}function su(e,t,r,s,a){if(Pt(r)){var i=!0;yi(t)}else i=!1;if(Gr(t,a),t.stateNode===null)Za(e,t),Qp(t,r,s),Fl(t,r,s,a),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Wt(u):(u=Pt(r)?fr:xt.current,u=Jr(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==u)&&Zd(t,o,s,u),In=!1;var h=t.memoizedState;o.state=h,Si(t,s,o,a),c=t.memoizedState,l!==s||h!==c||kt.current||In?(typeof d=="function"&&(Dl(t,r,d,s),c=t.memoizedState),(l=In||Jd(t,r,l,s,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=u,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,wp(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Yt(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Wt(c):(c=Pt(r)?fr:xt.current,c=Jr(t,c));var _=r.getDerivedStateFromProps;(d=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&Zd(t,o,s,c),In=!1,h=t.memoizedState,o.state=h,Si(t,s,o,a);var m=t.memoizedState;l!==f||h!==m||kt.current||In?(typeof _=="function"&&(Dl(t,r,_,s),m=t.memoizedState),(u=In||Jd(t,r,u,s,h,m,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,m,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=m),o.props=s,o.state=m,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return ql(e,t,r,s,i,a)}function ql(e,t,r,s,a,i){Yp(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return a&&zd(t,r,!1),Cn(e,t,i);s=t.stateNode,ug.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=Xr(t,e.child,null,i),t.child=Xr(t,null,l,i)):St(e,t,l,i),t.memoizedState=s.state,a&&zd(t,r,!0),t.child}function Jp(e){var t=e.stateNode;t.pendingContext?Bd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Bd(e,t.context,!1),Lc(e,t.containerInfo)}function au(e,t,r,s,a){return Zr(),bc(a),t.flags|=256,St(e,t,r,s),t.child}var $l={dehydrated:null,treeContext:null,retryLane:0};function Bl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zp(e,t,r){var s=t.pendingProps,a=He.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ze(He,a&1),e===null)return Ll(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Wi(o,s,0,null),e=pr(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Bl(r),t.memoizedState=$l,e):Bc(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return mg(e,t,o,s,l,a,r);if(i){i=s.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Vn(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Vn(l,i):(i=pr(i,o,r,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=e.child.memoizedState,o=o===null?Bl(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=$l,s}return i=e.child,e=i.sibling,s=Vn(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Bc(e,t){return t=Wi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ia(e,t,r,s){return s!==null&&bc(s),Xr(t,e.child,null,r),e=Bc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mg(e,t,r,s,a,i,o){if(r)return t.flags&256?(t.flags&=-257,s=ko(Error(ue(422))),Ia(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=Wi({mode:"visible",children:s.children},a,0,null),i=pr(i,a,o,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&Xr(t,e.child,null,o),t.child.memoizedState=Bl(o),t.memoizedState=$l,i);if(!(t.mode&1))return Ia(e,t,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(ue(419)),s=ko(i,s,void 0),Ia(e,t,o,s)}if(l=(o&e.childLanes)!==0,bt||l){if(s=it,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Sn(e,a),en(s,e,a,-1))}return Gc(),s=ko(Error(ue(421))),Ia(e,t,o,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=_g.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Ot=qn(a.nextSibling),Dt=t,We=!0,Zt=null,e!==null&&(Bt[zt++]=yn,Bt[zt++]=gn,Bt[zt++]=yr,yn=e.id,gn=e.overflow,yr=t),t=Bc(t,s.children),t.flags|=4096,t)}function iu(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Ol(e.return,t,r)}function Po(e,t,r,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function Xp(e,t,r){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(St(e,t,s.children,r),s=He.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&iu(e,r,t);else if(e.tag===19)iu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(ze(He,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Ci(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Po(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ci(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Po(t,!0,r,null,i);break;case"together":Po(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Za(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Cn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),vr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ue(153));if(t.child!==null){for(e=t.child,r=Vn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Vn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function pg(e,t,r){switch(t.tag){case 3:Jp(t),Zr();break;case 5:_p(t);break;case 1:Pt(t.type)&&yi(t);break;case 4:Lc(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;ze(xi,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(ze(He,He.current&1),t.flags|=128,null):r&t.child.childLanes?Zp(e,t,r):(ze(He,He.current&1),e=Cn(e,t,r),e!==null?e.sibling:null);ze(He,He.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Xp(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ze(He,He.current),s)break;return null;case 22:case 23:return t.lanes=0,Kp(e,t,r)}return Cn(e,t,r)}var eh,zl,th,nh;eh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};zl=function(){};th=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,dr(un.current);var i=null;switch(r){case"input":a=ul(e,a),s=ul(e,s),i=[];break;case"select":a=Ye({},a,{value:void 0}),s=Ye({},s,{value:void 0}),i=[];break;case"textarea":a=hl(e,a),s=hl(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=hi)}yl(r,s);var o;r=null;for(u in a)if(!s.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Bs.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var c=s[u];if(l=a!=null?a[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Bs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ve("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};nh=function(e,t,r,s){r!==s&&(t.flags|=4)};function js(e,t){if(!We)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function yt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function hg(e,t,r){var s=t.pendingProps;switch(Ec(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(t),null;case 1:return Pt(t.type)&&fi(),yt(t),null;case 3:return s=t.stateNode,es(),Qe(kt),Qe(xt),Dc(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ka(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zt!==null&&(Jl(Zt),Zt=null))),zl(e,t),yt(t),null;case 5:Oc(t);var a=dr(ea.current);if(r=t.type,e!==null&&t.stateNode!=null)th(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(ue(166));return yt(t),null}if(e=dr(un.current),ka(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[cn]=t,s[Zs]=i,e=(t.mode&1)!==0,r){case"dialog":Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":case"embed":Ve("load",s);break;case"video":case"audio":for(a=0;a<Ps.length;a++)Ve(Ps[a],s);break;case"source":Ve("error",s);break;case"img":case"image":case"link":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"input":fd(s,i),Ve("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Ve("invalid",s);break;case"textarea":gd(s,i),Ve("invalid",s)}yl(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&ba(s.textContent,l,e),a=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ba(s.textContent,l,e),a=["children",""+l]):Bs.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ve("scroll",s)}switch(r){case"input":ja(s),yd(s,i,!0);break;case"textarea":ja(s),vd(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=hi)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Pm(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(r,{is:s.is}):(e=o.createElement(r),r==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,r),e[cn]=t,e[Zs]=s,eh(e,t,!1,!1),t.stateNode=e;e:{switch(o=gl(r,s),r){case"dialog":Ve("cancel",e),Ve("close",e),a=s;break;case"iframe":case"object":case"embed":Ve("load",e),a=s;break;case"video":case"audio":for(a=0;a<Ps.length;a++)Ve(Ps[a],e);a=s;break;case"source":Ve("error",e),a=s;break;case"img":case"image":case"link":Ve("error",e),Ve("load",e),a=s;break;case"details":Ve("toggle",e),a=s;break;case"input":fd(e,s),a=ul(e,s),Ve("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Ye({},s,{value:void 0}),Ve("invalid",e);break;case"textarea":gd(e,s),a=hl(e,s),Ve("invalid",e);break;default:a=s}yl(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Tm(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Im(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&zs(e,c):typeof c=="number"&&zs(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Bs.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ve("scroll",e):c!=null&&mc(e,i,c,o))}switch(r){case"input":ja(e),yd(e,s,!1);break;case"textarea":ja(e),vd(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Wn(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?Vr(e,!!s.multiple,i,!1):s.defaultValue!=null&&Vr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=hi)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return yt(t),null;case 6:if(e&&t.stateNode!=null)nh(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(ue(166));if(r=dr(ea.current),dr(un.current),ka(t)){if(s=t.stateNode,r=t.memoizedProps,s[cn]=t,(i=s.nodeValue!==r)&&(e=Dt,e!==null))switch(e.tag){case 3:ba(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ba(s.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[cn]=t,t.stateNode=s}return yt(t),null;case 13:if(Qe(He),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(We&&Ot!==null&&t.mode&1&&!(t.flags&128))jp(),Zr(),t.flags|=98560,i=!1;else if(i=ka(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(ue(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ue(317));i[cn]=t}else Zr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;yt(t),i=!1}else Zt!==null&&(Jl(Zt),Zt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||He.current&1?st===0&&(st=3):Gc())),t.updateQueue!==null&&(t.flags|=4),yt(t),null);case 4:return es(),zl(e,t),e===null&&Ys(t.stateNode.containerInfo),yt(t),null;case 10:return Ic(t.type._context),yt(t),null;case 17:return Pt(t.type)&&fi(),yt(t),null;case 19:if(Qe(He),i=t.memoizedState,i===null)return yt(t),null;if(s=(t.flags&128)!==0,o=i.rendering,o===null)if(s)js(i,!1);else{if(st!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ci(e),o!==null){for(t.flags|=128,js(i,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)i=r,e=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ze(He,He.current&1|2),t.child}e=e.sibling}i.tail!==null&&et()>ns&&(t.flags|=128,s=!0,js(i,!1),t.lanes=4194304)}else{if(!s)if(e=Ci(o),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),js(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!We)return yt(t),null}else 2*et()-i.renderingStartTime>ns&&r!==1073741824&&(t.flags|=128,s=!0,js(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=et(),t.sibling=null,r=He.current,ze(He,s?r&1|2:r&1),t):(yt(t),null);case 22:case 23:return Hc(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Lt&1073741824&&(yt(t),t.subtreeFlags&6&&(t.flags|=8192)):yt(t),null;case 24:return null;case 25:return null}throw Error(ue(156,t.tag))}function fg(e,t){switch(Ec(t),t.tag){case 1:return Pt(t.type)&&fi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return es(),Qe(kt),Qe(xt),Dc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Oc(t),null;case 13:if(Qe(He),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ue(340));Zr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Qe(He),null;case 4:return es(),null;case 10:return Ic(t.type._context),null;case 22:case 23:return Hc(),null;case 24:return null;default:return null}}var Aa=!1,gt=!1,yg=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function Br(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Ze(e,t,s)}else r.current=null}function Vl(e,t,r){try{r()}catch(s){Ze(e,t,s)}}var ou=!1;function gg(e,t){if(El=ui,e=op(),_c(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var _;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==i||s!==0&&f.nodeType!==3||(c=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(_=f.firstChild)!==null;)h=f,f=_;for(;;){if(f===e)break t;if(h===r&&++u===a&&(l=o),h===i&&++d===s&&(c=o),(_=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=_}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(bl={focusedElem:e,selectionRange:r},ui=!1,Ce=t;Ce!==null;)if(t=Ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ce=e;else for(;Ce!==null;){t=Ce;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var N=m.memoizedProps,E=m.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?N:Yt(t.type,N),E);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(w){Ze(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,Ce=e;break}Ce=t.return}return m=ou,ou=!1,m}function Us(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Vl(t,r,i)}a=a.next}while(a!==s)}}function Vi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Ql(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function rh(e){var t=e.alternate;t!==null&&(e.alternate=null,rh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[cn],delete t[Zs],delete t[Il],delete t[Xy],delete t[eg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sh(e){return e.tag===5||e.tag===3||e.tag===4}function lu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||sh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wl(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=hi));else if(s!==4&&(e=e.child,e!==null))for(Wl(e,t,r),e=e.sibling;e!==null;)Wl(e,t,r),e=e.sibling}function Hl(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Hl(e,t,r),e=e.sibling;e!==null;)Hl(e,t,r),e=e.sibling}var lt=null,Jt=!1;function bn(e,t,r){for(r=r.child;r!==null;)ah(e,t,r),r=r.sibling}function ah(e,t,r){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Di,r)}catch{}switch(r.tag){case 5:gt||Br(r,t);case 6:var s=lt,a=Jt;lt=null,bn(e,t,r),lt=s,Jt=a,lt!==null&&(Jt?(e=lt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):lt.removeChild(r.stateNode));break;case 18:lt!==null&&(Jt?(e=lt,r=r.stateNode,e.nodeType===8?No(e.parentNode,r):e.nodeType===1&&No(e,r),Hs(e)):No(lt,r.stateNode));break;case 4:s=lt,a=Jt,lt=r.stateNode.containerInfo,Jt=!0,bn(e,t,r),lt=s,Jt=a;break;case 0:case 11:case 14:case 15:if(!gt&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Vl(r,t,o),a=a.next}while(a!==s)}bn(e,t,r);break;case 1:if(!gt&&(Br(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){Ze(r,t,l)}bn(e,t,r);break;case 21:bn(e,t,r);break;case 22:r.mode&1?(gt=(s=gt)||r.memoizedState!==null,bn(e,t,r),gt=s):bn(e,t,r);break;default:bn(e,t,r)}}function cu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new yg),t.forEach(function(s){var a=Rg.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Gt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:lt=l.stateNode,Jt=!1;break e;case 3:lt=l.stateNode.containerInfo,Jt=!0;break e;case 4:lt=l.stateNode.containerInfo,Jt=!0;break e}l=l.return}if(lt===null)throw Error(ue(160));ah(i,o,a),lt=null,Jt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Ze(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ih(t,e),t=t.sibling}function ih(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gt(t,e),an(e),s&4){try{Us(3,e,e.return),Vi(3,e)}catch(N){Ze(e,e.return,N)}try{Us(5,e,e.return)}catch(N){Ze(e,e.return,N)}}break;case 1:Gt(t,e),an(e),s&512&&r!==null&&Br(r,r.return);break;case 5:if(Gt(t,e),an(e),s&512&&r!==null&&Br(r,r.return),e.flags&32){var a=e.stateNode;try{zs(a,"")}catch(N){Ze(e,e.return,N)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&bm(a,i),gl(l,o);var u=gl(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?Tm(a,f):d==="dangerouslySetInnerHTML"?Im(a,f):d==="children"?zs(a,f):mc(a,d,f,u)}switch(l){case"input":ml(a,i);break;case"textarea":km(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?Vr(a,!!i.multiple,_,!1):h!==!!i.multiple&&(i.defaultValue!=null?Vr(a,!!i.multiple,i.defaultValue,!0):Vr(a,!!i.multiple,i.multiple?[]:"",!1))}a[Zs]=i}catch(N){Ze(e,e.return,N)}}break;case 6:if(Gt(t,e),an(e),s&4){if(e.stateNode===null)throw Error(ue(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(N){Ze(e,e.return,N)}}break;case 3:if(Gt(t,e),an(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Hs(t.containerInfo)}catch(N){Ze(e,e.return,N)}break;case 4:Gt(t,e),an(e);break;case 13:Gt(t,e),an(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Qc=et())),s&4&&cu(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(gt=(u=gt)||d,Gt(t,e),gt=u):Gt(t,e),an(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Ce=e,d=e.child;d!==null;){for(f=Ce=d;Ce!==null;){switch(h=Ce,_=h.child,h.tag){case 0:case 11:case 14:case 15:Us(4,h,h.return);break;case 1:Br(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){s=h,r=h.return;try{t=s,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(N){Ze(s,r,N)}}break;case 5:Br(h,h.return);break;case 22:if(h.memoizedState!==null){uu(f);continue}}_!==null?(_.return=h,Ce=_):uu(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Am("display",o))}catch(N){Ze(e,e.return,N)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(N){Ze(e,e.return,N)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Gt(t,e),an(e),s&4&&cu(e);break;case 21:break;default:Gt(t,e),an(e)}}function an(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(sh(r)){var s=r;break e}r=r.return}throw Error(ue(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(zs(a,""),s.flags&=-33);var i=lu(e);Hl(e,i,a);break;case 3:case 4:var o=s.stateNode.containerInfo,l=lu(e);Wl(e,l,o);break;default:throw Error(ue(161))}}catch(c){Ze(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vg(e,t,r){Ce=e,oh(e)}function oh(e,t,r){for(var s=(e.mode&1)!==0;Ce!==null;){var a=Ce,i=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||Aa;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||gt;l=Aa;var u=gt;if(Aa=o,(gt=c)&&!u)for(Ce=a;Ce!==null;)o=Ce,c=o.child,o.tag===22&&o.memoizedState!==null?mu(a):c!==null?(c.return=o,Ce=c):mu(a);for(;i!==null;)Ce=i,oh(i),i=i.sibling;Ce=a,Aa=l,gt=u}du(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ce=i):du(e)}}function du(e){for(;Ce!==null;){var t=Ce;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gt||Vi(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!gt)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Yt(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Gd(t,i,s);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Gd(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Hs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}gt||t.flags&512&&Ql(t)}catch(h){Ze(t,t.return,h)}}if(t===e){Ce=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ce=r;break}Ce=t.return}}function uu(e){for(;Ce!==null;){var t=Ce;if(t===e){Ce=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ce=r;break}Ce=t.return}}function mu(e){for(;Ce!==null;){var t=Ce;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Vi(4,t)}catch(c){Ze(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){Ze(t,a,c)}}var i=t.return;try{Ql(t)}catch(c){Ze(t,i,c)}break;case 5:var o=t.return;try{Ql(t)}catch(c){Ze(t,o,c)}}}catch(c){Ze(t,t.return,c)}if(t===e){Ce=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ce=l;break}Ce=t.return}}var xg=Math.ceil,_i=Nn.ReactCurrentDispatcher,zc=Nn.ReactCurrentOwner,Qt=Nn.ReactCurrentBatchConfig,Me=0,it=null,tt=null,ct=0,Lt=0,zr=Kn(0),st=0,sa=null,vr=0,Qi=0,Vc=0,qs=null,Et=null,Qc=0,ns=1/0,hn=null,Ri=!1,Gl=null,Bn=null,Ta=!1,On=null,Ei=0,$s=0,Kl=null,Xa=-1,ei=0;function Ct(){return Me&6?et():Xa!==-1?Xa:Xa=et()}function zn(e){return e.mode&1?Me&2&&ct!==0?ct&-ct:ng.transition!==null?(ei===0&&(ei=Qm()),ei):(e=$e,e!==0||(e=window.event,e=e===void 0?16:Zm(e.type)),e):1}function en(e,t,r,s){if(50<$s)throw $s=0,Kl=null,Error(ue(185));la(e,r,s),(!(Me&2)||e!==it)&&(e===it&&(!(Me&2)&&(Qi|=r),st===4&&Tn(e,ct)),It(e,s),r===1&&Me===0&&!(t.mode&1)&&(ns=et()+500,$i&&Yn()))}function It(e,t){var r=e.callbackNode;ny(e,t);var s=di(e,e===it?ct:0);if(s===0)r!==null&&Sd(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&Sd(r),t===1)e.tag===0?tg(pu.bind(null,e)):gp(pu.bind(null,e)),Jy(function(){!(Me&6)&&Yn()}),r=null;else{switch(Wm(s)){case 1:r=gc;break;case 4:r=zm;break;case 16:r=ci;break;case 536870912:r=Vm;break;default:r=ci}r=fh(r,lh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function lh(e,t){if(Xa=-1,ei=0,Me&6)throw Error(ue(327));var r=e.callbackNode;if(Kr()&&e.callbackNode!==r)return null;var s=di(e,e===it?ct:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=bi(e,s);else{t=s;var a=Me;Me|=2;var i=dh();(it!==e||ct!==t)&&(hn=null,ns=et()+500,mr(e,t));do try{Cg();break}catch(l){ch(e,l)}while(!0);Pc(),_i.current=i,Me=a,tt!==null?t=0:(it=null,ct=0,t=st)}if(t!==0){if(t===2&&(a=Cl(e),a!==0&&(s=a,t=Yl(e,a))),t===1)throw r=sa,mr(e,0),Tn(e,s),It(e,et()),r;if(t===6)Tn(e,s);else{if(a=e.current.alternate,!(s&30)&&!jg(a)&&(t=bi(e,s),t===2&&(i=Cl(e),i!==0&&(s=i,t=Yl(e,i))),t===1))throw r=sa,mr(e,0),Tn(e,s),It(e,et()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(ue(345));case 2:or(e,Et,hn);break;case 3:if(Tn(e,s),(s&130023424)===s&&(t=Qc+500-et(),10<t)){if(di(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){Ct(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Pl(or.bind(null,e,Et,hn),t);break}or(e,Et,hn);break;case 4:if(Tn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-Xt(s);i=1<<o,o=t[o],o>a&&(a=o),s&=~i}if(s=a,s=et()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*xg(s/1960))-s,10<s){e.timeoutHandle=Pl(or.bind(null,e,Et,hn),s);break}or(e,Et,hn);break;case 5:or(e,Et,hn);break;default:throw Error(ue(329))}}}return It(e,et()),e.callbackNode===r?lh.bind(null,e):null}function Yl(e,t){var r=qs;return e.current.memoizedState.isDehydrated&&(mr(e,t).flags|=256),e=bi(e,t),e!==2&&(t=Et,Et=r,t!==null&&Jl(t)),e}function Jl(e){Et===null?Et=e:Et.push.apply(Et,e)}function jg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!tn(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Tn(e,t){for(t&=~Vc,t&=~Qi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Xt(t),s=1<<r;e[r]=-1,t&=~s}}function pu(e){if(Me&6)throw Error(ue(327));Kr();var t=di(e,0);if(!(t&1))return It(e,et()),null;var r=bi(e,t);if(e.tag!==0&&r===2){var s=Cl(e);s!==0&&(t=s,r=Yl(e,s))}if(r===1)throw r=sa,mr(e,0),Tn(e,t),It(e,et()),r;if(r===6)throw Error(ue(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,or(e,Et,hn),It(e,et()),null}function Wc(e,t){var r=Me;Me|=1;try{return e(t)}finally{Me=r,Me===0&&(ns=et()+500,$i&&Yn())}}function xr(e){On!==null&&On.tag===0&&!(Me&6)&&Kr();var t=Me;Me|=1;var r=Qt.transition,s=$e;try{if(Qt.transition=null,$e=1,e)return e()}finally{$e=s,Qt.transition=r,Me=t,!(Me&6)&&Yn()}}function Hc(){Lt=zr.current,Qe(zr)}function mr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Yy(r)),tt!==null)for(r=tt.return;r!==null;){var s=r;switch(Ec(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&fi();break;case 3:es(),Qe(kt),Qe(xt),Dc();break;case 5:Oc(s);break;case 4:es();break;case 13:Qe(He);break;case 19:Qe(He);break;case 10:Ic(s.type._context);break;case 22:case 23:Hc()}r=r.return}if(it=e,tt=e=Vn(e.current,null),ct=Lt=t,st=0,sa=null,Vc=Qi=vr=0,Et=qs=null,cr!==null){for(t=0;t<cr.length;t++)if(r=cr[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,s.next=o}r.pending=s}cr=null}return e}function ch(e,t){do{var r=tt;try{if(Pc(),Ya.current=wi,Ni){for(var s=Ge.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Ni=!1}if(gr=0,at=rt=Ge=null,Ms=!1,ta=0,zc.current=null,r===null||r.return===null){st=1,sa=t,tt=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=ct,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var _=eu(o);if(_!==null){_.flags&=-257,tu(_,o,l,i,t),_.mode&1&&Xd(i,u,t),t=_,c=u;var m=t.updateQueue;if(m===null){var N=new Set;N.add(c),t.updateQueue=N}else m.add(c);break e}else{if(!(t&1)){Xd(i,u,t),Gc();break e}c=Error(ue(426))}}else if(We&&l.mode&1){var E=eu(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),tu(E,o,l,i,t),bc(ts(c,l));break e}}i=c=ts(c,l),st!==4&&(st=2),qs===null?qs=[i]:qs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=Wp(i,c,t);Hd(i,y);break e;case 1:l=c;var v=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Bn===null||!Bn.has(S)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=Hp(i,l,t);Hd(i,w);break e}}i=i.return}while(i!==null)}mh(r)}catch($){t=$,tt===r&&r!==null&&(tt=r=r.return);continue}break}while(!0)}function dh(){var e=_i.current;return _i.current=wi,e===null?wi:e}function Gc(){(st===0||st===3||st===2)&&(st=4),it===null||!(vr&268435455)&&!(Qi&268435455)||Tn(it,ct)}function bi(e,t){var r=Me;Me|=2;var s=dh();(it!==e||ct!==t)&&(hn=null,mr(e,t));do try{Sg();break}catch(a){ch(e,a)}while(!0);if(Pc(),Me=r,_i.current=s,tt!==null)throw Error(ue(261));return it=null,ct=0,st}function Sg(){for(;tt!==null;)uh(tt)}function Cg(){for(;tt!==null&&!Hf();)uh(tt)}function uh(e){var t=hh(e.alternate,e,Lt);e.memoizedProps=e.pendingProps,t===null?mh(e):tt=t,zc.current=null}function mh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=fg(r,t),r!==null){r.flags&=32767,tt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{st=6,tt=null;return}}else if(r=hg(r,t,Lt),r!==null){tt=r;return}if(t=t.sibling,t!==null){tt=t;return}tt=t=e}while(t!==null);st===0&&(st=5)}function or(e,t,r){var s=$e,a=Qt.transition;try{Qt.transition=null,$e=1,Ng(e,t,r,s)}finally{Qt.transition=a,$e=s}return null}function Ng(e,t,r,s){do Kr();while(On!==null);if(Me&6)throw Error(ue(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ue(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(ry(e,i),e===it&&(tt=it=null,ct=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ta||(Ta=!0,fh(ci,function(){return Kr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Qt.transition,Qt.transition=null;var o=$e;$e=1;var l=Me;Me|=4,zc.current=null,gg(e,r),ih(r,e),zy(bl),ui=!!El,bl=El=null,e.current=r,vg(r),Gf(),Me=l,$e=o,Qt.transition=i}else e.current=r;if(Ta&&(Ta=!1,On=e,Ei=a),i=e.pendingLanes,i===0&&(Bn=null),Jf(r.stateNode),It(e,et()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(Ri)throw Ri=!1,e=Gl,Gl=null,e;return Ei&1&&e.tag!==0&&Kr(),i=e.pendingLanes,i&1?e===Kl?$s++:($s=0,Kl=e):$s=0,Yn(),null}function Kr(){if(On!==null){var e=Wm(Ei),t=Qt.transition,r=$e;try{if(Qt.transition=null,$e=16>e?16:e,On===null)var s=!1;else{if(e=On,On=null,Ei=0,Me&6)throw Error(ue(331));var a=Me;for(Me|=4,Ce=e.current;Ce!==null;){var i=Ce,o=i.child;if(Ce.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ce=u;Ce!==null;){var d=Ce;switch(d.tag){case 0:case 11:case 15:Us(8,d,i)}var f=d.child;if(f!==null)f.return=d,Ce=f;else for(;Ce!==null;){d=Ce;var h=d.sibling,_=d.return;if(rh(d),d===u){Ce=null;break}if(h!==null){h.return=_,Ce=h;break}Ce=_}}}var m=i.alternate;if(m!==null){var N=m.child;if(N!==null){m.child=null;do{var E=N.sibling;N.sibling=null,N=E}while(N!==null)}}Ce=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ce=o;else e:for(;Ce!==null;){if(i=Ce,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Us(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Ce=y;break e}Ce=i.return}}var v=e.current;for(Ce=v;Ce!==null;){o=Ce;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Ce=S;else e:for(o=v;Ce!==null;){if(l=Ce,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Vi(9,l)}}catch($){Ze(l,l.return,$)}if(l===o){Ce=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,Ce=w;break e}Ce=l.return}}if(Me=a,Yn(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Di,e)}catch{}s=!0}return s}finally{$e=r,Qt.transition=t}}return!1}function hu(e,t,r){t=ts(r,t),t=Wp(e,t,1),e=$n(e,t,1),t=Ct(),e!==null&&(la(e,1,t),It(e,t))}function Ze(e,t,r){if(e.tag===3)hu(e,e,r);else for(;t!==null;){if(t.tag===3){hu(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Bn===null||!Bn.has(s))){e=ts(r,e),e=Hp(t,e,1),t=$n(t,e,1),e=Ct(),t!==null&&(la(t,1,e),It(t,e));break}}t=t.return}}function wg(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Ct(),e.pingedLanes|=e.suspendedLanes&r,it===e&&(ct&r)===r&&(st===4||st===3&&(ct&130023424)===ct&&500>et()-Qc?mr(e,0):Vc|=r),It(e,t)}function ph(e,t){t===0&&(e.mode&1?(t=Na,Na<<=1,!(Na&130023424)&&(Na=4194304)):t=1);var r=Ct();e=Sn(e,t),e!==null&&(la(e,t,r),It(e,r))}function _g(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),ph(e,r)}function Rg(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(ue(314))}s!==null&&s.delete(t),ph(e,r)}var hh;hh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||kt.current)bt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return bt=!1,pg(e,t,r);bt=!!(e.flags&131072)}else bt=!1,We&&t.flags&1048576&&vp(t,vi,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Za(e,t),e=t.pendingProps;var a=Jr(t,xt.current);Gr(t,r),a=Mc(null,t,s,e,a,r);var i=Uc();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pt(s)?(i=!0,yi(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Tc(t),a.updater=zi,t.stateNode=a,a._reactInternals=t,Fl(t,s,e,r),t=ql(null,t,s,!0,i,r)):(t.tag=0,We&&i&&Rc(t),St(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Za(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=bg(s),e=Yt(s,e),a){case 0:t=Ul(null,t,s,e,r);break e;case 1:t=su(null,t,s,e,r);break e;case 11:t=nu(null,t,s,e,r);break e;case 14:t=ru(null,t,s,Yt(s.type,e),r);break e}throw Error(ue(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Yt(s,a),Ul(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Yt(s,a),su(e,t,s,a,r);case 3:e:{if(Jp(t),e===null)throw Error(ue(387));s=t.pendingProps,i=t.memoizedState,a=i.element,wp(e,t),Si(t,s,null,r);var o=t.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=ts(Error(ue(423)),t),t=au(e,t,s,r,a);break e}else if(s!==a){a=ts(Error(ue(424)),t),t=au(e,t,s,r,a);break e}else for(Ot=qn(t.stateNode.containerInfo.firstChild),Dt=t,We=!0,Zt=null,r=Cp(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Zr(),s===a){t=Cn(e,t,r);break e}St(e,t,s,r)}t=t.child}return t;case 5:return _p(t),e===null&&Ll(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,kl(s,a)?o=null:i!==null&&kl(s,i)&&(t.flags|=32),Yp(e,t),St(e,t,o,r),t.child;case 6:return e===null&&Ll(t),null;case 13:return Zp(e,t,r);case 4:return Lc(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Xr(t,null,s,r):St(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Yt(s,a),nu(e,t,s,a,r);case 7:return St(e,t,t.pendingProps,r),t.child;case 8:return St(e,t,t.pendingProps.children,r),t.child;case 12:return St(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,ze(xi,s._currentValue),s._currentValue=o,i!==null)if(tn(i.value,o)){if(i.children===a.children&&!kt.current){t=Cn(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=vn(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Ol(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ue(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Ol(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}St(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Gr(t,r),a=Wt(a),s=s(a),t.flags|=1,St(e,t,s,r),t.child;case 14:return s=t.type,a=Yt(s,t.pendingProps),a=Yt(s.type,a),ru(e,t,s,a,r);case 15:return Gp(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Yt(s,a),Za(e,t),t.tag=1,Pt(s)?(e=!0,yi(t)):e=!1,Gr(t,r),Qp(t,s,a),Fl(t,s,a,r),ql(null,t,s,!0,e,r);case 19:return Xp(e,t,r);case 22:return Kp(e,t,r)}throw Error(ue(156,t.tag))};function fh(e,t){return Bm(e,t)}function Eg(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(e,t,r,s){return new Eg(e,t,r,s)}function Kc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bg(e){if(typeof e=="function")return Kc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hc)return 11;if(e===fc)return 14}return 2}function Vn(e,t){var r=e.alternate;return r===null?(r=Vt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ti(e,t,r,s,a,i){var o=2;if(s=e,typeof e=="function")Kc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Tr:return pr(r.children,a,i,t);case pc:o=8,a|=8;break;case ol:return e=Vt(12,r,t,a|2),e.elementType=ol,e.lanes=i,e;case ll:return e=Vt(13,r,t,a),e.elementType=ll,e.lanes=i,e;case cl:return e=Vt(19,r,t,a),e.elementType=cl,e.lanes=i,e;case _m:return Wi(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Nm:o=10;break e;case wm:o=9;break e;case hc:o=11;break e;case fc:o=14;break e;case Pn:o=16,s=null;break e}throw Error(ue(130,e==null?e:typeof e,""))}return t=Vt(o,r,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function pr(e,t,r,s){return e=Vt(7,e,s,t),e.lanes=r,e}function Wi(e,t,r,s){return e=Vt(22,e,s,t),e.elementType=_m,e.lanes=r,e.stateNode={isHidden:!1},e}function Io(e,t,r){return e=Vt(6,e,null,t),e.lanes=r,e}function Ao(e,t,r){return t=Vt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function kg(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mo(0),this.expirationTimes=mo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mo(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Yc(e,t,r,s,a,i,o,l,c){return e=new kg(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Vt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tc(i),e}function Pg(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ar,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function yh(e){if(!e)return Hn;e=e._reactInternals;e:{if(Cr(e)!==e||e.tag!==1)throw Error(ue(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ue(171))}if(e.tag===1){var r=e.type;if(Pt(r))return yp(e,r,t)}return t}function gh(e,t,r,s,a,i,o,l,c){return e=Yc(r,s,!0,e,a,i,o,l,c),e.context=yh(null),r=e.current,s=Ct(),a=zn(r),i=vn(s,a),i.callback=t??null,$n(r,i,a),e.current.lanes=a,la(e,a,s),It(e,s),e}function Hi(e,t,r,s){var a=t.current,i=Ct(),o=zn(a);return r=yh(r),t.context===null?t.context=r:t.pendingContext=r,t=vn(i,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=$n(a,t,o),e!==null&&(en(e,a,o,i),Ka(e,a,o)),o}function ki(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Jc(e,t){fu(e,t),(e=e.alternate)&&fu(e,t)}function Ig(){return null}var vh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Zc(e){this._internalRoot=e}Gi.prototype.render=Zc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ue(409));Hi(e,t,null,null)};Gi.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xr(function(){Hi(null,e,null,null)}),t[jn]=null}};function Gi(e){this._internalRoot=e}Gi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Km();e={blockedOn:null,target:e,priority:t};for(var r=0;r<An.length&&t!==0&&t<An[r].priority;r++);An.splice(r,0,e),r===0&&Jm(e)}};function Xc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ki(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yu(){}function Ag(e,t,r,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var u=ki(o);i.call(u)}}var o=gh(t,s,e,0,null,!1,!1,"",yu);return e._reactRootContainer=o,e[jn]=o.current,Ys(e.nodeType===8?e.parentNode:e),xr(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var l=s;s=function(){var u=ki(c);l.call(u)}}var c=Yc(e,0,!1,null,null,!1,!1,"",yu);return e._reactRootContainer=c,e[jn]=c.current,Ys(e.nodeType===8?e.parentNode:e),xr(function(){Hi(t,c,r,s)}),c}function Yi(e,t,r,s,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=ki(o);l.call(c)}}Hi(t,o,e,a)}else o=Ag(r,t,e,a,s);return ki(o)}Hm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ks(t.pendingLanes);r!==0&&(vc(t,r|1),It(t,et()),!(Me&6)&&(ns=et()+500,Yn()))}break;case 13:xr(function(){var s=Sn(e,1);if(s!==null){var a=Ct();en(s,e,1,a)}}),Jc(e,1)}};xc=function(e){if(e.tag===13){var t=Sn(e,134217728);if(t!==null){var r=Ct();en(t,e,134217728,r)}Jc(e,134217728)}};Gm=function(e){if(e.tag===13){var t=zn(e),r=Sn(e,t);if(r!==null){var s=Ct();en(r,e,t,s)}Jc(e,t)}};Km=function(){return $e};Ym=function(e,t){var r=$e;try{return $e=e,t()}finally{$e=r}};xl=function(e,t,r){switch(t){case"input":if(ml(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=qi(s);if(!a)throw Error(ue(90));Em(s),ml(s,a)}}}break;case"textarea":km(e,r);break;case"select":t=r.value,t!=null&&Vr(e,!!r.multiple,t,!1)}};Dm=Wc;Fm=xr;var Tg={usingClientEntryPoint:!1,Events:[da,Fr,qi,Lm,Om,Wc]},Ss={findFiberByHostInstance:lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lg={bundleType:Ss.bundleType,version:Ss.version,rendererPackageName:Ss.rendererPackageName,rendererConfig:Ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=qm(e),e===null?null:e.stateNode},findFiberByHostInstance:Ss.findFiberByHostInstance||Ig,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var La=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!La.isDisabled&&La.supportsFiber)try{Di=La.inject(Lg),dn=La}catch{}}Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tg;Mt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xc(t))throw Error(ue(200));return Pg(e,t,null,r)};Mt.createRoot=function(e,t){if(!Xc(e))throw Error(ue(299));var r=!1,s="",a=vh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Yc(e,1,!1,null,null,r,!1,s,a),e[jn]=t.current,Ys(e.nodeType===8?e.parentNode:e),new Zc(t)};Mt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ue(188)):(e=Object.keys(e).join(","),Error(ue(268,e)));return e=qm(t),e=e===null?null:e.stateNode,e};Mt.flushSync=function(e){return xr(e)};Mt.hydrate=function(e,t,r){if(!Ki(t))throw Error(ue(200));return Yi(null,e,t,!0,r)};Mt.hydrateRoot=function(e,t,r){if(!Xc(e))throw Error(ue(405));var s=r!=null&&r.hydratedSources||null,a=!1,i="",o=vh;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=gh(t,null,e,1,r??null,a,!1,i,o),e[jn]=t.current,Ys(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Gi(t)};Mt.render=function(e,t,r){if(!Ki(t))throw Error(ue(200));return Yi(null,e,t,!1,r)};Mt.unmountComponentAtNode=function(e){if(!Ki(e))throw Error(ue(40));return e._reactRootContainer?(xr(function(){Yi(null,null,e,!1,function(){e._reactRootContainer=null,e[jn]=null})}),!0):!1};Mt.unstable_batchedUpdates=Wc;Mt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Ki(r))throw Error(ue(200));if(e==null||e._reactInternals===void 0)throw Error(ue(38));return Yi(e,t,r,!1,s)};Mt.version="18.3.1-next-f1338f8080-20240426";function xh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xh)}catch(e){console.error(e)}}xh(),xm.exports=Mt;var Og=xm.exports,gu=Og;al.createRoot=gu.createRoot,al.hydrateRoot=gu.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function aa(){return aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},aa.apply(this,arguments)}var Dn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Dn||(Dn={}));const vu="popstate";function Dg(e){e===void 0&&(e={});function t(s,a){let{pathname:i,search:o,hash:l}=s.location;return Zl("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:Pi(a)}return Mg(t,r,null,e)}function Ke(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ed(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Fg(){return Math.random().toString(36).substr(2,8)}function xu(e,t){return{usr:e.state,key:e.key,idx:t}}function Zl(e,t,r,s){return r===void 0&&(r=null),aa({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ls(t):t,{state:r,key:t&&t.key||s||Fg()})}function Pi(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function ls(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function Mg(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,o=a.history,l=Dn.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(aa({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=Dn.Pop;let E=d(),y=E==null?null:E-u;u=E,c&&c({action:l,location:N.location,delta:y})}function h(E,y){l=Dn.Push;let v=Zl(N.location,E,y);u=d()+1;let S=xu(v,u),w=N.createHref(v);try{o.pushState(S,"",w)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;a.location.assign(w)}i&&c&&c({action:l,location:N.location,delta:1})}function _(E,y){l=Dn.Replace;let v=Zl(N.location,E,y);u=d();let S=xu(v,u),w=N.createHref(v);o.replaceState(S,"",w),i&&c&&c({action:l,location:N.location,delta:0})}function m(E){let y=a.location.origin!=="null"?a.location.origin:a.location.href,v=typeof E=="string"?E:Pi(E);return v=v.replace(/ $/,"%20"),Ke(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let N={get action(){return l},get location(){return e(a,o)},listen(E){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(vu,f),c=E,()=>{a.removeEventListener(vu,f),c=null}},createHref(E){return t(a,E)},createURL:m,encodeLocation(E){let y=m(E);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:_,go(E){return o.go(E)}};return N}var ju;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ju||(ju={}));function Ug(e,t,r){return r===void 0&&(r="/"),qg(e,t,r)}function qg(e,t,r,s){let a=typeof t=="string"?ls(t):t,i=rs(a.pathname||"/",r);if(i==null)return null;let o=jh(e);$g(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Zg(i);l=Yg(o[c],u)}return l}function jh(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ke(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=Qn([s,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Ke(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),jh(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:Gg(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of Sh(i.path))a(i,o,c)}),t}function Sh(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let o=Sh(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function $g(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Kg(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const Bg=/^:[\w-]+$/,zg=3,Vg=2,Qg=1,Wg=10,Hg=-2,Su=e=>e==="*";function Gg(e,t){let r=e.split("/"),s=r.length;return r.some(Su)&&(s+=Hg),t&&(s+=Vg),r.filter(a=>!Su(a)).reduce((a,i)=>a+(Bg.test(i)?zg:i===""?Qg:Wg),s)}function Kg(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function Yg(e,t,r){let{routesMeta:s}=e,a={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=Xl({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:Qn([i,f.pathname]),pathnameBase:rv(Qn([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=Qn([i,f.pathnameBase]))}return o}function Xl(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=Jg(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((u,d,f)=>{let{paramName:h,isOptional:_}=d;if(h==="*"){let N=l[f]||"";o=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const m=l[f];return _&&!m?u[h]=void 0:u[h]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function Jg(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),ed(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function Zg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ed(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function rs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}const Xg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ev=e=>Xg.test(e);function tv(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?ls(e):e,i;if(r)if(ev(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),ed(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=Cu(r.substring(1),"/"):i=Cu(r,t)}else i=t;return{pathname:i,search:sv(s),hash:av(a)}}function Cu(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function To(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nv(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function td(e,t){let r=nv(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function nd(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=ls(e):(a=aa({},e),Ke(!a.pathname||!a.pathname.includes("?"),To("?","pathname","search",a)),Ke(!a.pathname||!a.pathname.includes("#"),To("#","pathname","hash",a)),Ke(!a.search||!a.search.includes("#"),To("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!s&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=tv(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Qn=e=>e.join("/").replace(/\/\/+/g,"/"),rv=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),sv=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,av=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function iv(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Ch=["post","put","patch","delete"];new Set(Ch);const ov=["get",...Ch];new Set(ov);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ia(){return ia=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ia.apply(this,arguments)}const Ji=p.createContext(null),Nh=p.createContext(null),wn=p.createContext(null),Zi=p.createContext(null),mn=p.createContext({outlet:null,matches:[],isDataRoute:!1}),wh=p.createContext(null);function lv(e,t){let{relative:r}=t===void 0?{}:t;cs()||Ke(!1);let{basename:s,navigator:a}=p.useContext(wn),{hash:i,pathname:o,search:l}=Xi(e,{relative:r}),c=o;return s!=="/"&&(c=o==="/"?s:Qn([s,o])),a.createHref({pathname:c,search:l,hash:i})}function cs(){return p.useContext(Zi)!=null}function ds(){return cs()||Ke(!1),p.useContext(Zi).location}function _h(e){p.useContext(wn).static||p.useLayoutEffect(e)}function _n(){let{isDataRoute:e}=p.useContext(mn);return e?wv():cv()}function cv(){cs()||Ke(!1);let e=p.useContext(Ji),{basename:t,future:r,navigator:s}=p.useContext(wn),{matches:a}=p.useContext(mn),{pathname:i}=ds(),o=JSON.stringify(td(a,r.v7_relativeSplatPath)),l=p.useRef(!1);return _h(()=>{l.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){s.go(u);return}let f=nd(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Qn([t,f.pathname])),(d.replace?s.replace:s.push)(f,d.state,d)},[t,s,o,i,e])}const dv=p.createContext(null);function uv(e){let t=p.useContext(mn).outlet;return t&&p.createElement(dv.Provider,{value:e},t)}function mv(){let{matches:e}=p.useContext(mn),t=e[e.length-1];return t?t.params:{}}function Xi(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=p.useContext(wn),{matches:a}=p.useContext(mn),{pathname:i}=ds(),o=JSON.stringify(td(a,s.v7_relativeSplatPath));return p.useMemo(()=>nd(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function pv(e,t){return hv(e,t)}function hv(e,t,r,s){cs()||Ke(!1);let{navigator:a}=p.useContext(wn),{matches:i}=p.useContext(mn),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=ds(),d;if(t){var f;let E=typeof t=="string"?ls(t):t;c==="/"||(f=E.pathname)!=null&&f.startsWith(c)||Ke(!1),d=E}else d=u;let h=d.pathname||"/",_=h;if(c!=="/"){let E=c.replace(/^\//,"").split("/");_="/"+h.replace(/^\//,"").split("/").slice(E.length).join("/")}let m=Ug(e,{pathname:_}),N=xv(m&&m.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:Qn([c,a.encodeLocation?a.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:Qn([c,a.encodeLocation?a.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,r,s);return t&&N?p.createElement(Zi.Provider,{value:{location:ia({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Dn.Pop}},N):N}function fv(){let e=Nv(),t=iv(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:a},r):null,null)}const yv=p.createElement(fv,null);class gv extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?p.createElement(mn.Provider,{value:this.props.routeContext},p.createElement(wh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function vv(e){let{routeContext:t,match:r,children:s}=e,a=p.useContext(Ji);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(mn.Provider,{value:t},s)}function xv(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Ke(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:_}=r,m=f.route.loader&&h[f.route.id]===void 0&&(!_||_[f.route.id]===void 0);if(f.route.lazy||m){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,h)=>{let _,m=!1,N=null,E=null;r&&(_=l&&f.route.id?l[f.route.id]:void 0,N=f.route.errorElement||yv,c&&(u<0&&h===0?(_v("route-fallback"),m=!0,E=null):u===h&&(m=!0,E=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,h+1)),v=()=>{let S;return _?S=N:m?S=E:f.route.Component?S=p.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=d,p.createElement(vv,{match:f,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:S})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?p.createElement(gv,{location:r.location,revalidation:r.revalidation,component:N,error:_,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var Rh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Rh||{}),Eh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Eh||{});function jv(e){let t=p.useContext(Ji);return t||Ke(!1),t}function Sv(e){let t=p.useContext(Nh);return t||Ke(!1),t}function Cv(e){let t=p.useContext(mn);return t||Ke(!1),t}function bh(e){let t=Cv(),r=t.matches[t.matches.length-1];return r.route.id||Ke(!1),r.route.id}function Nv(){var e;let t=p.useContext(wh),r=Sv(),s=bh();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function wv(){let{router:e}=jv(Rh.UseNavigateStable),t=bh(Eh.UseNavigateStable),r=p.useRef(!1);return _h(()=>{r.current=!0}),p.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,ia({fromRouteId:t},i)))},[e,t])}const Nu={};function _v(e,t,r){Nu[e]||(Nu[e]=!0)}function Rv(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ii(e){let{to:t,replace:r,state:s,relative:a}=e;cs()||Ke(!1);let{future:i,static:o}=p.useContext(wn),{matches:l}=p.useContext(mn),{pathname:c}=ds(),u=_n(),d=nd(t,td(l,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(d);return p.useEffect(()=>u(JSON.parse(f),{replace:r,state:s,relative:a}),[u,f,a,r,s]),null}function Ev(e){return uv(e.context)}function Fe(e){Ke(!1)}function bv(e){let{basename:t="/",children:r=null,location:s,navigationType:a=Dn.Pop,navigator:i,static:o=!1,future:l}=e;cs()&&Ke(!1);let c=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:i,static:o,future:ia({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof s=="string"&&(s=ls(s));let{pathname:d="/",search:f="",hash:h="",state:_=null,key:m="default"}=s,N=p.useMemo(()=>{let E=rs(d,c);return E==null?null:{location:{pathname:E,search:f,hash:h,state:_,key:m},navigationType:a}},[c,d,f,h,_,m,a]);return N==null?null:p.createElement(wn.Provider,{value:u},p.createElement(Zi.Provider,{children:r,value:N}))}function kv(e){let{children:t,location:r}=e;return pv(ec(t),r)}new Promise(()=>{});function ec(e,t){t===void 0&&(t=[]);let r=[];return p.Children.forEach(e,(s,a)=>{if(!p.isValidElement(s))return;let i=[...t,a];if(s.type===p.Fragment){r.push.apply(r,ec(s.props.children,i));return}s.type!==Fe&&Ke(!1),!s.props.index||!s.props.children||Ke(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=ec(s.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ai(){return Ai=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ai.apply(this,arguments)}function kh(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Pv(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Iv(e,t){return e.button===0&&(!t||t==="_self")&&!Pv(e)}const Av=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Tv=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Lv="6";try{window.__reactRouterVersion=Lv}catch{}const Ov=p.createContext({isTransitioning:!1}),Dv="startTransition",wu=wf[Dv];function Fv(e){let{basename:t,children:r,future:s,window:a}=e,i=p.useRef();i.current==null&&(i.current=Dg({window:a,v5Compat:!0}));let o=i.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},d=p.useCallback(f=>{u&&wu?wu(()=>c(f)):c(f)},[c,u]);return p.useLayoutEffect(()=>o.listen(d),[o,d]),p.useEffect(()=>Rv(s),[s]),p.createElement(bv,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:s})}const Mv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Uv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ph=p.forwardRef(function(t,r){let{onClick:s,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=kh(t,Av),{basename:_}=p.useContext(wn),m,N=!1;if(typeof u=="string"&&Uv.test(u)&&(m=u,Mv))try{let S=new URL(window.location.href),w=u.startsWith("//")?new URL(S.protocol+u):new URL(u),$=rs(w.pathname,_);w.origin===S.origin&&$!=null?u=$+w.search+w.hash:N=!0}catch{}let E=lv(u,{relative:a}),y=Bv(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function v(S){s&&s(S),S.defaultPrevented||y(S)}return p.createElement("a",Ai({},h,{href:m||E,onClick:N||i?s:v,ref:r,target:c}))}),qv=p.forwardRef(function(t,r){let{"aria-current":s="page",caseSensitive:a=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,f=kh(t,Tv),h=Xi(c,{relative:f.relative}),_=ds(),m=p.useContext(Nh),{navigator:N,basename:E}=p.useContext(wn),y=m!=null&&zv(h)&&u===!0,v=N.encodeLocation?N.encodeLocation(h).pathname:h.pathname,S=_.pathname,w=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;a||(S=S.toLowerCase(),w=w?w.toLowerCase():null,v=v.toLowerCase()),w&&E&&(w=rs(w,E)||w);const $=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let O=S===v||!o&&S.startsWith(v)&&S.charAt($)==="/",W=w!=null&&(w===v||!o&&w.startsWith(v)&&w.charAt(v.length)==="/"),Q={isActive:O,isPending:W,isTransitioning:y},Y=O?s:void 0,M;typeof i=="function"?M=i(Q):M=[i,O?"active":null,W?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let ce=typeof l=="function"?l(Q):l;return p.createElement(Ph,Ai({},f,{"aria-current":Y,className:M,ref:r,style:ce,to:c,viewTransition:u}),typeof d=="function"?d(Q):d)});var tc;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(tc||(tc={}));var _u;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(_u||(_u={}));function $v(e){let t=p.useContext(Ji);return t||Ke(!1),t}function Bv(e,t){let{target:r,replace:s,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=_n(),u=ds(),d=Xi(e,{relative:o});return p.useCallback(f=>{if(Iv(f,r)){f.preventDefault();let h=s!==void 0?s:Pi(u)===Pi(d);c(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,s,a,r,e,i,o,l])}function zv(e,t){t===void 0&&(t={});let r=p.useContext(Ov);r==null&&Ke(!1);let{basename:s}=$v(tc.useViewTransitionState),a=Xi(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=rs(r.currentLocation.pathname,s)||r.currentLocation.pathname,o=rs(r.nextLocation.pathname,s)||r.nextLocation.pathname;return Xl(a.pathname,o)!=null||Xl(a.pathname,i)!=null}function Ih(e,t){return function(){return e.apply(t,arguments)}}const{toString:Vv}=Object.prototype,{getPrototypeOf:rd}=Object,{iterator:eo,toStringTag:Ah}=Symbol,to=(e=>t=>{const r=Vv.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),nn=e=>(e=e.toLowerCase(),t=>to(t)===e),no=e=>t=>typeof t===e,{isArray:us}=Array,ss=no("undefined");function ma(e){return e!==null&&!ss(e)&&e.constructor!==null&&!ss(e.constructor)&&At(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Th=nn("ArrayBuffer");function Qv(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Th(e.buffer),t}const Wv=no("string"),At=no("function"),Lh=no("number"),pa=e=>e!==null&&typeof e=="object",Hv=e=>e===!0||e===!1,ni=e=>{if(to(e)!=="object")return!1;const t=rd(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Ah in e)&&!(eo in e)},Gv=e=>{if(!pa(e)||ma(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Kv=nn("Date"),Yv=nn("File"),Jv=nn("Blob"),Zv=nn("FileList"),Xv=e=>pa(e)&&At(e.pipe),ex=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||At(e.append)&&((t=to(e))==="formdata"||t==="object"&&At(e.toString)&&e.toString()==="[object FormData]"))},tx=nn("URLSearchParams"),[nx,rx,sx,ax]=["ReadableStream","Request","Response","Headers"].map(nn),ix=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ha(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,a;if(typeof e!="object"&&(e=[e]),us(e))for(s=0,a=e.length;s<a;s++)t.call(null,e[s],s,e);else{if(ma(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(s=0;s<o;s++)l=i[s],t.call(null,e[l],l,e)}}function Oh(e,t){if(ma(e))return null;t=t.toLowerCase();const r=Object.keys(e);let s=r.length,a;for(;s-- >0;)if(a=r[s],t===a.toLowerCase())return a;return null}const ur=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Dh=e=>!ss(e)&&e!==ur;function nc(){const{caseless:e,skipUndefined:t}=Dh(this)&&this||{},r={},s=(a,i)=>{const o=e&&Oh(r,i)||i;ni(r[o])&&ni(a)?r[o]=nc(r[o],a):ni(a)?r[o]=nc({},a):us(a)?r[o]=a.slice():(!t||!ss(a))&&(r[o]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&ha(arguments[a],s);return r}const ox=(e,t,r,{allOwnKeys:s}={})=>(ha(t,(a,i)=>{r&&At(a)?e[i]=Ih(a,r):e[i]=a},{allOwnKeys:s}),e),lx=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),cx=(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},dx=(e,t,r,s)=>{let a,i,o;const l={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!s||s(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&rd(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},ux=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return s!==-1&&s===r},mx=e=>{if(!e)return null;if(us(e))return e;let t=e.length;if(!Lh(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},px=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&rd(Uint8Array)),hx=(e,t)=>{const s=(e&&e[eo]).call(e);let a;for(;(a=s.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},fx=(e,t)=>{let r;const s=[];for(;(r=e.exec(t))!==null;)s.push(r);return s},yx=nn("HTMLFormElement"),gx=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,a){return s.toUpperCase()+a}),Ru=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),vx=nn("RegExp"),Fh=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};ha(r,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(s[i]=o||a)}),Object.defineProperties(e,s)},xx=e=>{Fh(e,(t,r)=>{if(At(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(At(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},jx=(e,t)=>{const r={},s=a=>{a.forEach(i=>{r[i]=!0})};return us(e)?s(e):s(String(e).split(t)),r},Sx=()=>{},Cx=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Nx(e){return!!(e&&At(e.append)&&e[Ah]==="FormData"&&e[eo])}const wx=e=>{const t=new Array(10),r=(s,a)=>{if(pa(s)){if(t.indexOf(s)>=0)return;if(ma(s))return s;if(!("toJSON"in s)){t[a]=s;const i=us(s)?[]:{};return ha(s,(o,l)=>{const c=r(o,a+1);!ss(c)&&(i[l]=c)}),t[a]=void 0,i}}return s};return r(e,0)},_x=nn("AsyncFunction"),Rx=e=>e&&(pa(e)||At(e))&&At(e.then)&&At(e.catch),Mh=((e,t)=>e?setImmediate:t?((r,s)=>(ur.addEventListener("message",({source:a,data:i})=>{a===ur&&i===r&&s.length&&s.shift()()},!1),a=>{s.push(a),ur.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",At(ur.postMessage)),Ex=typeof queueMicrotask<"u"?queueMicrotask.bind(ur):typeof process<"u"&&process.nextTick||Mh,bx=e=>e!=null&&At(e[eo]),V={isArray:us,isArrayBuffer:Th,isBuffer:ma,isFormData:ex,isArrayBufferView:Qv,isString:Wv,isNumber:Lh,isBoolean:Hv,isObject:pa,isPlainObject:ni,isEmptyObject:Gv,isReadableStream:nx,isRequest:rx,isResponse:sx,isHeaders:ax,isUndefined:ss,isDate:Kv,isFile:Yv,isBlob:Jv,isRegExp:vx,isFunction:At,isStream:Xv,isURLSearchParams:tx,isTypedArray:px,isFileList:Zv,forEach:ha,merge:nc,extend:ox,trim:ix,stripBOM:lx,inherits:cx,toFlatObject:dx,kindOf:to,kindOfTest:nn,endsWith:ux,toArray:mx,forEachEntry:hx,matchAll:fx,isHTMLForm:yx,hasOwnProperty:Ru,hasOwnProp:Ru,reduceDescriptors:Fh,freezeMethods:xx,toObjectSet:jx,toCamelCase:gx,noop:Sx,toFiniteNumber:Cx,findKey:Oh,global:ur,isContextDefined:Dh,isSpecCompliantForm:Nx,toJSONObject:wx,isAsyncFn:_x,isThenable:Rx,setImmediate:Mh,asap:Ex,isIterable:bx};function ke(e,t,r,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}V.inherits(ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const Uh=ke.prototype,qh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{qh[e]={value:e}});Object.defineProperties(ke,qh);Object.defineProperty(Uh,"isAxiosError",{value:!0});ke.from=(e,t,r,s,a,i)=>{const o=Object.create(Uh);V.toFlatObject(e,o,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return ke.call(o,l,c,r,s,a),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const kx=null;function rc(e){return V.isPlainObject(e)||V.isArray(e)}function $h(e){return V.endsWith(e,"[]")?e.slice(0,-2):e}function Eu(e,t,r){return e?e.concat(t).map(function(a,i){return a=$h(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function Px(e){return V.isArray(e)&&!e.some(rc)}const Ix=V.toFlatObject(V,{},null,function(t){return/^is[A-Z]/.test(t)});function ro(e,t,r){if(!V.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=V.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,E){return!V.isUndefined(E[N])});const s=r.metaTokens,a=r.visitor||d,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(t);if(!V.isFunction(a))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(V.isDate(m))return m.toISOString();if(V.isBoolean(m))return m.toString();if(!c&&V.isBlob(m))throw new ke("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(m)||V.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,N,E){let y=m;if(m&&!E&&typeof m=="object"){if(V.endsWith(N,"{}"))N=s?N:N.slice(0,-2),m=JSON.stringify(m);else if(V.isArray(m)&&Px(m)||(V.isFileList(m)||V.endsWith(N,"[]"))&&(y=V.toArray(m)))return N=$h(N),y.forEach(function(S,w){!(V.isUndefined(S)||S===null)&&t.append(o===!0?Eu([N],w,i):o===null?N:N+"[]",u(S))}),!1}return rc(m)?!0:(t.append(Eu(E,N,i),u(m)),!1)}const f=[],h=Object.assign(Ix,{defaultVisitor:d,convertValue:u,isVisitable:rc});function _(m,N){if(!V.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+N.join("."));f.push(m),V.forEach(m,function(y,v){(!(V.isUndefined(y)||y===null)&&a.call(t,y,V.isString(v)?v.trim():v,N,h))===!0&&_(y,N?N.concat(v):[v])}),f.pop()}}if(!V.isObject(e))throw new TypeError("data must be an object");return _(e),t}function bu(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function sd(e,t){this._pairs=[],e&&ro(e,this,t)}const Bh=sd.prototype;Bh.append=function(t,r){this._pairs.push([t,r])};Bh.toString=function(t){const r=t?function(s){return t.call(this,s,bu)}:bu;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function Ax(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function zh(e,t,r){if(!t)return e;const s=r&&r.encode||Ax;V.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=V.isURLSearchParams(t)?t.toString():new sd(t,r).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class ku{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){V.forEach(this.handlers,function(s){s!==null&&t(s)})}}const Vh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Tx=typeof URLSearchParams<"u"?URLSearchParams:sd,Lx=typeof FormData<"u"?FormData:null,Ox=typeof Blob<"u"?Blob:null,Dx={isBrowser:!0,classes:{URLSearchParams:Tx,FormData:Lx,Blob:Ox},protocols:["http","https","file","blob","url","data"]},ad=typeof window<"u"&&typeof document<"u",sc=typeof navigator=="object"&&navigator||void 0,Fx=ad&&(!sc||["ReactNative","NativeScript","NS"].indexOf(sc.product)<0),Mx=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ux=ad&&window.location.href||"http://localhost",qx=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ad,hasStandardBrowserEnv:Fx,hasStandardBrowserWebWorkerEnv:Mx,navigator:sc,origin:Ux},Symbol.toStringTag,{value:"Module"})),vt={...qx,...Dx};function $x(e,t){return ro(e,new vt.classes.URLSearchParams,{visitor:function(r,s,a,i){return vt.isNode&&V.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function Bx(e){return V.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function zx(e){const t={},r=Object.keys(e);let s;const a=r.length;let i;for(s=0;s<a;s++)i=r[s],t[i]=e[i];return t}function Qh(e){function t(r,s,a,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&V.isArray(a)?a.length:o,c?(V.hasOwnProp(a,o)?a[o]=[a[o],s]:a[o]=s,!l):((!a[o]||!V.isObject(a[o]))&&(a[o]=[]),t(r,s,a[o],i)&&V.isArray(a[o])&&(a[o]=zx(a[o])),!l)}if(V.isFormData(e)&&V.isFunction(e.entries)){const r={};return V.forEachEntry(e,(s,a)=>{t(Bx(s),a,r,0)}),r}return null}function Vx(e,t,r){if(V.isString(e))try{return(t||JSON.parse)(e),V.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const fa={transitional:Vh,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const s=r.getContentType()||"",a=s.indexOf("application/json")>-1,i=V.isObject(t);if(i&&V.isHTMLForm(t)&&(t=new FormData(t)),V.isFormData(t))return a?JSON.stringify(Qh(t)):t;if(V.isArrayBuffer(t)||V.isBuffer(t)||V.isStream(t)||V.isFile(t)||V.isBlob(t)||V.isReadableStream(t))return t;if(V.isArrayBufferView(t))return t.buffer;if(V.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return $x(t,this.formSerializer).toString();if((l=V.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return ro(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),Vx(t)):t}],transformResponse:[function(t){const r=this.transitional||fa.transitional,s=r&&r.forcedJSONParsing,a=this.responseType==="json";if(V.isResponse(t)||V.isReadableStream(t))return t;if(t&&V.isString(t)&&(s&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?ke.from(l,ke.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vt.classes.FormData,Blob:vt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],e=>{fa.headers[e]={}});const Qx=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Wx=e=>{const t={};let r,s,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),s=o.substring(a+1).trim(),!(!r||t[r]&&Qx[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},Pu=Symbol("internals");function Cs(e){return e&&String(e).trim().toLowerCase()}function ri(e){return e===!1||e==null?e:V.isArray(e)?e.map(ri):String(e)}function Hx(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}const Gx=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Lo(e,t,r,s,a){if(V.isFunction(s))return s.call(this,t,r);if(a&&(t=r),!!V.isString(t)){if(V.isString(s))return t.indexOf(s)!==-1;if(V.isRegExp(s))return s.test(t)}}function Kx(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function Yx(e,t){const r=V.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(a,i,o){return this[s].call(this,t,a,i,o)},configurable:!0})})}let Tt=class{constructor(t){t&&this.set(t)}set(t,r,s){const a=this;function i(l,c,u){const d=Cs(c);if(!d)throw new Error("header name must be a non-empty string");const f=V.findKey(a,d);(!f||a[f]===void 0||u===!0||u===void 0&&a[f]!==!1)&&(a[f||c]=ri(l))}const o=(l,c)=>V.forEach(l,(u,d)=>i(u,d,c));if(V.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(V.isString(t)&&(t=t.trim())&&!Gx(t))o(Wx(t),r);else if(V.isObject(t)&&V.isIterable(t)){let l={},c,u;for(const d of t){if(!V.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?V.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(l,r)}else t!=null&&i(r,t,s);return this}get(t,r){if(t=Cs(t),t){const s=V.findKey(this,t);if(s){const a=this[s];if(!r)return a;if(r===!0)return Hx(a);if(V.isFunction(r))return r.call(this,a,s);if(V.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Cs(t),t){const s=V.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||Lo(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let a=!1;function i(o){if(o=Cs(o),o){const l=V.findKey(s,o);l&&(!r||Lo(s,s[l],l,r))&&(delete s[l],a=!0)}}return V.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let s=r.length,a=!1;for(;s--;){const i=r[s];(!t||Lo(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,s={};return V.forEach(this,(a,i)=>{const o=V.findKey(s,i);if(o){r[o]=ri(a),delete r[i];return}const l=t?Kx(i):String(i).trim();l!==i&&delete r[i],r[l]=ri(a),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return V.forEach(this,(s,a)=>{s!=null&&s!==!1&&(r[a]=t&&V.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(a=>s.set(a)),s}static accessor(t){const s=(this[Pu]=this[Pu]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=Cs(o);s[l]||(Yx(a,o),s[l]=!0)}return V.isArray(t)?t.forEach(i):i(t),this}};Tt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(Tt.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[r]=s}}});V.freezeMethods(Tt);function Oo(e,t){const r=this||fa,s=t||r,a=Tt.from(s.headers);let i=s.data;return V.forEach(e,function(l){i=l.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function Wh(e){return!!(e&&e.__CANCEL__)}function ms(e,t,r){ke.call(this,e??"canceled",ke.ERR_CANCELED,t,r),this.name="CanceledError"}V.inherits(ms,ke,{__CANCEL__:!0});function Hh(e,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):t(new ke("Request failed with status code "+r.status,[ke.ERR_BAD_REQUEST,ke.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Jx(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Zx(e,t){e=e||10;const r=new Array(e),s=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),d=s[i];o||(o=u),r[a]=c,s[a]=u;let f=i,h=0;for(;f!==a;)h+=r[f++],f=f%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),u-o<t)return;const _=d&&u-d;return _?Math.round(h*1e3/_):void 0}}function Xx(e,t){let r=0,s=1e3/t,a,i;const o=(u,d=Date.now())=>{r=d,a=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const d=Date.now(),f=d-r;f>=s?o(u,d):(a=u,i||(i=setTimeout(()=>{i=null,o(a)},s-f)))},()=>a&&o(a)]}const Ti=(e,t,r=3)=>{let s=0;const a=Zx(50,250);return Xx(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-s,u=a(c),d=o<=l;s=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},r)},Iu=(e,t)=>{const r=e!=null;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},Au=e=>(...t)=>V.asap(()=>e(...t)),ej=vt.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,vt.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(vt.origin),vt.navigator&&/(msie|trident)/i.test(vt.navigator.userAgent)):()=>!0,tj=vt.hasStandardBrowserEnv?{write(e,t,r,s,a,i,o){if(typeof document>"u")return;const l=[`${e}=${encodeURIComponent(t)}`];V.isNumber(r)&&l.push(`expires=${new Date(r).toUTCString()}`),V.isString(s)&&l.push(`path=${s}`),V.isString(a)&&l.push(`domain=${a}`),i===!0&&l.push("secure"),V.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function nj(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function rj(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Gh(e,t,r){let s=!nj(t);return e&&(s||r==!1)?rj(e,t):t}const Tu=e=>e instanceof Tt?{...e}:e;function jr(e,t){t=t||{};const r={};function s(u,d,f,h){return V.isPlainObject(u)&&V.isPlainObject(d)?V.merge.call({caseless:h},u,d):V.isPlainObject(d)?V.merge({},d):V.isArray(d)?d.slice():d}function a(u,d,f,h){if(V.isUndefined(d)){if(!V.isUndefined(u))return s(void 0,u,f,h)}else return s(u,d,f,h)}function i(u,d){if(!V.isUndefined(d))return s(void 0,d)}function o(u,d){if(V.isUndefined(d)){if(!V.isUndefined(u))return s(void 0,u)}else return s(void 0,d)}function l(u,d,f){if(f in t)return s(u,d);if(f in e)return s(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,d,f)=>a(Tu(u),Tu(d),f,!0)};return V.forEach(Object.keys({...e,...t}),function(d){const f=c[d]||a,h=f(e[d],t[d],d);V.isUndefined(h)&&f!==l||(r[d]=h)}),r}const Kh=e=>{const t=jr({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=Tt.from(o),t.url=zh(Gh(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),V.isFormData(r)){if(vt.hasStandardBrowserEnv||vt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(V.isFunction(r.getHeaders)){const c=r.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([d,f])=>{u.includes(d.toLowerCase())&&o.set(d,f)})}}if(vt.hasStandardBrowserEnv&&(s&&V.isFunction(s)&&(s=s(t)),s||s!==!1&&ej(t.url))){const c=a&&i&&tj.read(i);c&&o.set(a,c)}return t},sj=typeof XMLHttpRequest<"u",aj=sj&&function(e){return new Promise(function(r,s){const a=Kh(e);let i=a.data;const o=Tt.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=a,d,f,h,_,m;function N(){_&&_(),m&&m(),a.cancelToken&&a.cancelToken.unsubscribe(d),a.signal&&a.signal.removeEventListener("abort",d)}let E=new XMLHttpRequest;E.open(a.method.toUpperCase(),a.url,!0),E.timeout=a.timeout;function y(){if(!E)return;const S=Tt.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),$={data:!l||l==="text"||l==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:S,config:e,request:E};Hh(function(W){r(W),N()},function(W){s(W),N()},$),E=null}"onloadend"in E?E.onloadend=y:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(y)},E.onabort=function(){E&&(s(new ke("Request aborted",ke.ECONNABORTED,e,E)),E=null)},E.onerror=function(w){const $=w&&w.message?w.message:"Network Error",O=new ke($,ke.ERR_NETWORK,e,E);O.event=w||null,s(O),E=null},E.ontimeout=function(){let w=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const $=a.transitional||Vh;a.timeoutErrorMessage&&(w=a.timeoutErrorMessage),s(new ke(w,$.clarifyTimeoutError?ke.ETIMEDOUT:ke.ECONNABORTED,e,E)),E=null},i===void 0&&o.setContentType(null),"setRequestHeader"in E&&V.forEach(o.toJSON(),function(w,$){E.setRequestHeader($,w)}),V.isUndefined(a.withCredentials)||(E.withCredentials=!!a.withCredentials),l&&l!=="json"&&(E.responseType=a.responseType),u&&([h,m]=Ti(u,!0),E.addEventListener("progress",h)),c&&E.upload&&([f,_]=Ti(c),E.upload.addEventListener("progress",f),E.upload.addEventListener("loadend",_)),(a.cancelToken||a.signal)&&(d=S=>{E&&(s(!S||S.type?new ms(null,e,E):S),E.abort(),E=null)},a.cancelToken&&a.cancelToken.subscribe(d),a.signal&&(a.signal.aborted?d():a.signal.addEventListener("abort",d)));const v=Jx(a.url);if(v&&vt.protocols.indexOf(v)===-1){s(new ke("Unsupported protocol "+v+":",ke.ERR_BAD_REQUEST,e));return}E.send(i||null)})},ij=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let s=new AbortController,a;const i=function(u){if(!a){a=!0,l();const d=u instanceof Error?u:this.reason;s.abort(d instanceof ke?d:new ms(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{o=null,i(new ke(`timeout ${t} of ms exceeded`,ke.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>V.asap(l),c}},oj=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let s=0,a;for(;s<r;)a=s+t,yield e.slice(s,a),s=a},lj=async function*(e,t){for await(const r of cj(e))yield*oj(r,t)},cj=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:s}=await t.read();if(r)break;yield s}}finally{await t.cancel()}},Lu=(e,t,r,s)=>{const a=lj(e,t);let i=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await a.next();if(u){l(),c.close();return}let f=d.byteLength;if(r){let h=i+=f;r(h)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},Ou=64*1024,{isFunction:Oa}=V,dj=(({Request:e,Response:t})=>({Request:e,Response:t}))(V.global),{ReadableStream:Du,TextEncoder:Fu}=V.global,Mu=(e,...t)=>{try{return!!e(...t)}catch{return!1}},uj=e=>{e=V.merge.call({skipUndefined:!0},dj,e);const{fetch:t,Request:r,Response:s}=e,a=t?Oa(t):typeof fetch=="function",i=Oa(r),o=Oa(s);if(!a)return!1;const l=a&&Oa(Du),c=a&&(typeof Fu=="function"?(m=>N=>m.encode(N))(new Fu):async m=>new Uint8Array(await new r(m).arrayBuffer())),u=i&&l&&Mu(()=>{let m=!1;const N=new r(vt.origin,{body:new Du,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!N}),d=o&&l&&Mu(()=>V.isReadableStream(new s("").body)),f={stream:d&&(m=>m.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!f[m]&&(f[m]=(N,E)=>{let y=N&&N[m];if(y)return y.call(N);throw new ke(`Response type '${m}' is not supported`,ke.ERR_NOT_SUPPORT,E)})});const h=async m=>{if(m==null)return 0;if(V.isBlob(m))return m.size;if(V.isSpecCompliantForm(m))return(await new r(vt.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(V.isArrayBufferView(m)||V.isArrayBuffer(m))return m.byteLength;if(V.isURLSearchParams(m)&&(m=m+""),V.isString(m))return(await c(m)).byteLength},_=async(m,N)=>{const E=V.toFiniteNumber(m.getContentLength());return E??h(N)};return async m=>{let{url:N,method:E,data:y,signal:v,cancelToken:S,timeout:w,onDownloadProgress:$,onUploadProgress:O,responseType:W,headers:Q,withCredentials:Y="same-origin",fetchOptions:M}=Kh(m),ce=t||fetch;W=W?(W+"").toLowerCase():"text";let G=ij([v,S&&S.toAbortSignal()],w),L=null;const I=G&&G.unsubscribe&&(()=>{G.unsubscribe()});let T;try{if(O&&u&&E!=="get"&&E!=="head"&&(T=await _(Q,y))!==0){let k=new r(N,{method:"POST",body:y,duplex:"half"}),te;if(V.isFormData(y)&&(te=k.headers.get("content-type"))&&Q.setContentType(te),k.body){const[K,U]=Iu(T,Ti(Au(O)));y=Lu(k.body,Ou,K,U)}}V.isString(Y)||(Y=Y?"include":"omit");const q=i&&"credentials"in r.prototype,z={...M,signal:G,method:E.toUpperCase(),headers:Q.normalize().toJSON(),body:y,duplex:"half",credentials:q?Y:void 0};L=i&&new r(N,z);let B=await(i?ce(L,M):ce(N,z));const P=d&&(W==="stream"||W==="response");if(d&&($||P&&I)){const k={};["status","statusText","headers"].forEach(C=>{k[C]=B[C]});const te=V.toFiniteNumber(B.headers.get("content-length")),[K,U]=$&&Iu(te,Ti(Au($),!0))||[];B=new s(Lu(B.body,Ou,K,()=>{U&&U(),I&&I()}),k)}W=W||"text";let A=await f[V.findKey(f,W)||"text"](B,m);return!P&&I&&I(),await new Promise((k,te)=>{Hh(k,te,{data:A,headers:Tt.from(B.headers),status:B.status,statusText:B.statusText,config:m,request:L})})}catch(q){throw I&&I(),q&&q.name==="TypeError"&&/Load failed|fetch/i.test(q.message)?Object.assign(new ke("Network Error",ke.ERR_NETWORK,m,L),{cause:q.cause||q}):ke.from(q,q&&q.code,m,L)}}},mj=new Map,Yh=e=>{let t=e&&e.env||{};const{fetch:r,Request:s,Response:a}=t,i=[s,a,r];let o=i.length,l=o,c,u,d=mj;for(;l--;)c=i[l],u=d.get(c),u===void 0&&d.set(c,u=l?new Map:uj(t)),d=u;return u};Yh();const id={http:kx,xhr:aj,fetch:{get:Yh}};V.forEach(id,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Uu=e=>`- ${e}`,pj=e=>V.isFunction(e)||e===null||e===!1;function hj(e,t){e=V.isArray(e)?e:[e];const{length:r}=e;let s,a;const i={};for(let o=0;o<r;o++){s=e[o];let l;if(a=s,!pj(s)&&(a=id[(l=String(s)).toLowerCase()],a===void 0))throw new ke(`Unknown adapter '${l}'`);if(a&&(V.isFunction(a)||(a=a.get(t))))break;i[l||"#"+o]=a}if(!a){const o=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=r?o.length>1?`since :
`+o.map(Uu).join(`
`):" "+Uu(o[0]):"as no adapter specified";throw new ke("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a}const Jh={getAdapter:hj,adapters:id};function Do(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ms(null,e)}function qu(e){return Do(e),e.headers=Tt.from(e.headers),e.data=Oo.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Jh.getAdapter(e.adapter||fa.adapter,e)(e).then(function(s){return Do(e),s.data=Oo.call(e,e.transformResponse,s),s.headers=Tt.from(s.headers),s},function(s){return Wh(s)||(Do(e),s&&s.response&&(s.response.data=Oo.call(e,e.transformResponse,s.response),s.response.headers=Tt.from(s.response.headers))),Promise.reject(s)})}const Zh="1.13.2",so={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{so[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const $u={};so.transitional=function(t,r,s){function a(i,o){return"[Axios v"+Zh+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(t===!1)throw new ke(a(o," has been removed"+(r?" in "+r:"")),ke.ERR_DEPRECATED);return r&&!$u[o]&&($u[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};so.spelling=function(t){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function fj(e,t,r){if(typeof e!="object")throw new ke("options must be an object",ke.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let a=s.length;for(;a-- >0;){const i=s[a],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new ke("option "+i+" must be "+c,ke.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ke("Unknown option "+i,ke.ERR_BAD_OPTION)}}const si={assertOptions:fj,validators:so},on=si.validators;let hr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new ku,response:new ku}}async request(t,r){try{return await this._request(t,r)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=jr(this.defaults,r);const{transitional:s,paramsSerializer:a,headers:i}=r;s!==void 0&&si.assertOptions(s,{silentJSONParsing:on.transitional(on.boolean),forcedJSONParsing:on.transitional(on.boolean),clarifyTimeoutError:on.transitional(on.boolean)},!1),a!=null&&(V.isFunction(a)?r.paramsSerializer={serialize:a}:si.assertOptions(a,{encode:on.function,serialize:on.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),si.assertOptions(r,{baseUrl:on.spelling("baseURL"),withXsrfToken:on.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&V.merge(i.common,i[r.method]);i&&V.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),r.headers=Tt.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(r)===!1||(c=c&&N.synchronous,l.unshift(N.fulfilled,N.rejected))});const u=[];this.interceptors.response.forEach(function(N){u.push(N.fulfilled,N.rejected)});let d,f=0,h;if(!c){const m=[qu.bind(this),void 0];for(m.unshift(...l),m.push(...u),h=m.length,d=Promise.resolve(r);f<h;)d=d.then(m[f++],m[f++]);return d}h=l.length;let _=r;for(;f<h;){const m=l[f++],N=l[f++];try{_=m(_)}catch(E){N.call(this,E);break}}try{d=qu.call(this,_)}catch(m){return Promise.reject(m)}for(f=0,h=u.length;f<h;)d=d.then(u[f++],u[f++]);return d}getUri(t){t=jr(this.defaults,t);const r=Gh(t.baseURL,t.url,t.allowAbsoluteUrls);return zh(r,t.params,t.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(t){hr.prototype[t]=function(r,s){return this.request(jr(s||{},{method:t,url:r,data:(s||{}).data}))}});V.forEach(["post","put","patch"],function(t){function r(s){return function(i,o,l){return this.request(jr(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}hr.prototype[t]=r(),hr.prototype[t+"Form"]=r(!0)});let yj=class Xh{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(a=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](a);s._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(a);return o.cancel=function(){s.unsubscribe(i)},o},t(function(i,o,l){s.reason||(s.reason=new ms(i,o,l),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=s=>{t.abort(s)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Xh(function(a){t=a}),cancel:t}}};function gj(e){return function(r){return e.apply(null,r)}}function vj(e){return V.isObject(e)&&e.isAxiosError===!0}const ac={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ac).forEach(([e,t])=>{ac[t]=e});function ef(e){const t=new hr(e),r=Ih(hr.prototype.request,t);return V.extend(r,hr.prototype,t,{allOwnKeys:!0}),V.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return ef(jr(e,a))},r}const H=ef(fa);H.Axios=hr;H.CanceledError=ms;H.CancelToken=yj;H.isCancel=Wh;H.VERSION=Zh;H.toFormData=ro;H.AxiosError=ke;H.Cancel=H.CanceledError;H.all=function(t){return Promise.all(t)};H.spread=gj;H.isAxiosError=vj;H.mergeConfig=jr;H.AxiosHeaders=Tt;H.formToJSON=e=>Qh(V.isHTMLForm(e)?new FormData(e):e);H.getAdapter=Jh.getAdapter;H.HttpStatusCode=ac;H.default=H;const{Axios:x0,AxiosError:j0,CanceledError:S0,isCancel:C0,CancelToken:N0,VERSION:w0,all:_0,Cancel:R0,isAxiosError:E0,spread:b0,toFormData:k0,AxiosHeaders:P0,HttpStatusCode:I0,formToJSON:A0,getAdapter:T0,mergeConfig:L0}=H,tf=p.createContext(null),xj="",Fo=xj.replace(/\/+$/,"");function jj(){return Fo.endsWith("/api")?`${Fo}/auth/login`:`${Fo}/api/auth/login`}H.defaults.withCredentials=!0;const Sj=({children:e})=>{const[t,r]=p.useState(null),[s,a]=p.useState(null);p.useEffect(()=>{try{const l=localStorage.getItem("auth");if(l){const c=JSON.parse(l);r(c.user||null),a(c.token||null),c.token&&(H.defaults.headers.common.Authorization=`Bearer ${c.token}`)}}catch(l){console.error("Failed to parse stored auth:",l),localStorage.removeItem("auth")}},[]);const i=async(l,c)=>{let u;typeof l=="string"?u={email:l,password:c}:u=l||{};const d=jj();try{const f=await H.post(d,u,{headers:{"Content-Type":"application/json"}}),h=(f==null?void 0:f.data)||{},_=h.token||h.accessToken||null,m=h.user||h.data||null;return a(_),r(m),_&&(H.defaults.headers.common.Authorization=`Bearer ${_}`),localStorage.setItem("auth",JSON.stringify({token:_,user:m})),{success:!0,data:h}}catch(f){const h=f==null?void 0:f.response,_=(h==null?void 0:h.data)||f.message||"Login error";return console.error("Login failed:",_),{success:!1,error:_,status:h==null?void 0:h.status}}},o=()=>{r(null),a(null),localStorage.removeItem("auth"),delete H.defaults.headers.common.Authorization};return n.jsx(tf.Provider,{value:{user:t,token:s,login:i,logout:o},children:e})},od=()=>p.useContext(tf),Cj="",Nj=()=>{const{login:e}=od(),t=_n(),[r,s]=p.useState(""),[a,i]=p.useState(""),[o,l]=p.useState(!1),[c,u]=p.useState(""),d=async f=>{var h,_,m;f.preventDefault(),u(""),l(!0);try{if(console.log("login payload:",{email:r,password:a}),!r||!a)throw new Error("Email and password required");const N=await H.post(`${Cj}/api/auth/login`,{email:r,password:a},{headers:{"Content-Type":"application/json"},withCredentials:!0});if((h=N.data)!=null&&h.token&&localStorage.setItem("authToken",N.data.token),typeof e=="function")try{await e(r,a)}catch(E){console.warn("context login failed (non-fatal)",E)}t("/super-admin/dashboard")}catch(N){console.error(N),u(((m=(_=N.response)==null?void 0:_.data)==null?void 0:m.message)||N.message||"Login failed")}finally{l(!1)}};return n.jsx("div",{className:"auth-wrapper",children:n.jsxs("div",{className:"auth-card",children:[n.jsxs("div",{className:"auth-left",children:[n.jsx("h1",{children:"Resort Purchase CRM"}),n.jsx("p",{children:"Centralised purchase & inventory control for all your resorts."}),n.jsxs("ul",{children:[n.jsx("li",{children:"Multi-resort requisition & PO tracking"}),n.jsx("li",{children:"Real-time stock & consumption visibility"}),n.jsx("li",{children:"Configurable approval workflow"})]})]}),n.jsxs("div",{className:"auth-right",children:[n.jsx("h2",{children:"Login"}),n.jsx("p",{className:"auth-sub",children:"Sign in as Super Admin or Resort User"}),n.jsxs("form",{onSubmit:d,className:"auth-form",children:[n.jsxs("label",{children:["Email",n.jsx("input",{type:"email",name:"email",value:r,onChange:f=>s(f.target.value),placeholder:"you@resort.com",required:!0})]}),n.jsxs("label",{children:["Password",n.jsx("input",{type:"password",name:"password",value:a,onChange:f=>i(f.target.value),placeholder:"",required:!0})]}),c&&n.jsx("div",{className:"auth-error",children:c}),n.jsx("button",{type:"submit",className:"auth-button",disabled:o,children:o?"Signing in...":"Sign in"})]})]})]})})},wj=[{label:"Dashboard",icon:"ri-dashboard-line",path:"/super-admin/dashboard"},{type:"section",label:"Masters"},{label:"Resorts",icon:"ri-building-4-line",path:"/super-admin/resorts"},{label:"Departments",icon:"ri-team-line",path:"/super-admin/departments"},{label:"Items Category",icon:"ri-archive-2-line",path:"/super-admin/item-categories"},{label:"Items",icon:"ri-archive-2-line",path:"/super-admin/items"},{label:"Stores",icon:"ri-store-2-line",path:"/super-admin/stores"},{label:"Vendors",icon:"ri-truck-line",path:"/super-admin/vendors"},{label:"Recipes",icon:"ri-book-2-line",path:"/super-admin/recipes"},{label:"Users",icon:"ri-user-settings-line",path:"/super-admin/users"},{label:"Roles",icon:"ri-user-star-line",path:"/super-admin/roles"},{type:"section",label:"Purchase"},{label:"Requisitions",icon:"ri-file-list-2-line",path:"/super-admin/requisitions"},{label:"Purchase Orders",icon:"ri-file-paper-line",path:"/super-admin/po"},{label:"GRN",icon:"ri-archive-stack-line",path:"/super-admin/grn"},{label:"Consumption",icon:"ri-goblet-line",path:"/super-admin/consumption"},{label:"Store Replacement",icon:"ri-exchange-box-line",path:"/super-admin/store-replacement"},{type:"section",label:"Inventory & Reports"},{label:"Inventory",icon:"ri-archive-line",path:"/super-admin/inventory"},{label:"Reports",icon:"ri-bar-chart-2-line",path:"/super-admin/reports"}],_j=()=>{const{user:e,logout:t}=od(),r=_n(),s=()=>{t(),r("/login")};return n.jsxs("div",{className:"sa-app-shell",children:[n.jsxs("aside",{className:"sa-sidebar",children:[n.jsxs("div",{className:"sa-logo-block",children:[n.jsx("div",{className:"sa-logo-circle",children:"R"}),n.jsxs("div",{children:[n.jsx("h1",{className:"sa-app-title",children:"Resort Purchase"}),n.jsx("p",{className:"sa-app-subtitle",children:"Super Admin"})]})]}),n.jsx("nav",{className:"sa-nav",children:wj.map((a,i)=>a.type==="section"?n.jsx("div",{className:"sa-nav-section",children:a.label},i):n.jsxs(qv,{to:a.path,className:({isActive:o})=>"sa-nav-item"+(o?" sa-nav-item-active":""),children:[n.jsx("i",{className:`sa-nav-icon ${a.icon}`}),n.jsx("span",{children:a.label})]},a.path))}),n.jsxs("div",{className:"sa-sidebar-footer",children:[n.jsx("div",{className:"sa-mini-badge",children:"v1.0"}),n.jsx("span",{children:"All resorts overview"})]})]}),n.jsxs("div",{className:"sa-main",children:[n.jsxs("header",{className:"sa-topbar",children:[n.jsxs("div",{className:"sa-topbar-left",children:[n.jsx("select",{className:"sa-resort-switcher",children:n.jsx("option",{children:"All Resorts"})}),n.jsx("div",{className:"sa-topbar-divider"}),n.jsx("div",{className:"sa-breadcrumb",children:"Super Admin / Panel"})]}),n.jsxs("div",{className:"sa-topbar-right",children:[n.jsxs("div",{className:"sa-search-box",children:[n.jsx("i",{className:"ri-search-line"}),n.jsx("input",{placeholder:"Search requisition, PO, vendor..."})]}),n.jsx("button",{className:"sa-icon-button",onClick:s,children:n.jsx("i",{className:"ri-logout-circle-r-line"})}),n.jsxs("div",{className:"sa-user-pill",children:[n.jsx("div",{className:"sa-avatar-circle",children:"SA"}),n.jsxs("div",{className:"sa-user-info",children:[n.jsx("span",{className:"sa-user-name",children:(e==null?void 0:e.name)||"Super Admin"}),n.jsx("span",{className:"sa-user-role",children:e==null?void 0:e.role})]})]})]})]}),n.jsx("main",{className:"sa-content",children:n.jsx(Ev,{})})]})]})},Da=({label:e,value:t,subLabel:r,trend:s,trendType:a})=>n.jsxs("div",{className:"sa-card sa-stat-card",children:[n.jsx("div",{className:"sa-stat-label",children:e}),n.jsx("div",{className:"sa-stat-value",children:t}),n.jsxs("div",{className:"sa-stat-bottom",children:[n.jsx("span",{className:"sa-stat-sublabel",children:r}),s&&n.jsxs("span",{className:`sa-stat-trend ${a==="up"?"up":"down"}`,children:[n.jsx("i",{className:a==="up"?"ri-arrow-up-s-line":"ri-arrow-down-s-line"}),s]})]})]}),Rj=()=>n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Dashboard"}),n.jsx("p",{children:"Overview of all resorts, purchases & inventory."})]}),n.jsxs("button",{className:"sa-primary-button",children:[n.jsx("i",{className:"ri-add-line"}),"New Requisition"]})]}),n.jsxs("div",{className:"sa-grid-4",children:[n.jsx(Da,{label:"Total Resorts",value:"6",subLabel:"Active properties",trend:"+1 new",trendType:"up"}),n.jsx(Da,{label:"Open Requisitions",value:"24",subLabel:"Waiting for approval",trend:"+4 today",trendType:"up"}),n.jsx(Da,{label:"Pending GRN",value:"8",subLabel:"PO received, GRN not done",trend:"-3 vs yesterday",trendType:"down"}),n.jsx(Da,{label:"Low Stock Items",value:"17",subLabel:"Below reorder level",trend:"Check now",trendType:"up"})]})]}),Rt="http://localhost:5000/api/v1",Ns=()=>({lineId:`ln_${Date.now()}_${Math.floor(Math.random()*1e3)}`,item:"",qty:1,remark:""}),Xn=e=>{const t=e?new Date(e):new Date;if(Number.isNaN(t.getTime()))return`GRN-${Date.now()}`;const r=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),i=Math.floor(Math.random()*900)+100;return`GRN-${r}${s}${a}-${i}`},Bu=[{_id:"sample_req_1",requisitionNo:"REQ-2025-001",type:"INTERNAL",resort:"Demo Resort A",fromStore:"Main Store",toStore:"Cold Store",vendor:null,status:"PENDING",date:new Date().toISOString(),lines:[{lineId:"ln1",item:"dev_item_1",qty:10,remark:""},{lineId:"ln2",item:"dev_item_2",qty:5,remark:""}]},{_id:"sample_req_2",requisitionNo:"REQ-2025-002",type:"VENDOR",resort:"Demo Resort A",department:null,store:"Main Store",vendor:"dev_vendor_1",status:"PENDING",date:new Date().toISOString(),lines:[{lineId:"ln3",item:"dev_item_3",qty:2,remark:"urgent"}]}],zu=()=>{var Nr,rn,_t,jt,Jn,Je,Rn,ga,ld;const[e,t]=p.useState([]),[r,s]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState([]),[d,f]=p.useState([]),[h,_]=p.useState(!1),[m,N]=p.useState(!1),[E,y]=p.useState(""),[v,S]=p.useState(!1),[w,$]=p.useState(null),[O,W]=p.useState({type:"INTERNAL",resort:"",department:"",fromStore:"",toStore:"",store:"",vendor:"",requiredBy:"",lines:[Ns()]}),[Q,Y]=p.useState({open:!1,req:null,poNo:"",poDate:new Date().toISOString().slice(0,10),items:[],subTotal:0,taxPercent:0,taxAmount:0,total:0}),M=new Date().toISOString().slice(0,10),[ce,G]=p.useState({open:!1,req:null,grnNo:Xn(M),receivedBy:"",receivedDate:M,challanNo:"",billNo:"",items:[]}),[L,I]=p.useState("ALL"),[T,q]=p.useState("ALL"),[z,B]=p.useState(""),[P,A]=p.useState(""),[k,te]=p.useState(""),[K,U]=p.useState("ALL"),[C,ie]=p.useState(""),ne=_n(),re=async()=>{try{_(!0);const[x,X,ye,fe,Se,Ne]=await Promise.all([H.get(`${Rt}/requisitions`).catch(()=>({data:[]})),H.get(`${Rt}/resorts`).catch(()=>({data:[]})),H.get(`${Rt}/departments`).catch(()=>({data:[]})),H.get(`${Rt}/stores`).catch(()=>({data:[]})),H.get(`${Rt}/items`).catch(()=>({data:[]})),H.get(`${Rt}/vendors`).catch(()=>({data:[]}))]),Ae=Array.isArray(x.data)?x.data:[],Ue=new Set(Ae.map(nt=>nt._id)),Xe=Bu.filter(nt=>!Ue.has(nt._id));t([...Ae,...Xe]),s(Array.isArray(X.data)?X.data:[]),i(Array.isArray(ye.data)?ye.data:[]),l(Array.isArray(fe.data)?fe.data:[]),u(Array.isArray(Se.data)?Se.data:[]),f(Array.isArray(Ne.data)?Ne.data:[])}catch(x){console.error("load error",x),y("Failed to load requisitions. Using demo data."),s([]),i([]),l([]),u([]),f([]),t(Bu)}finally{_(!1)}};p.useEffect(()=>{re()},[]);const pe=(x,X)=>{if(!X)return"-";const ye=x.find(fe=>fe._id===X||fe.id===X||fe.name===X||fe.code===X);return ye&&(ye.name||ye.code)||X},de=x=>pe(r,x),_e=x=>pe(a,x),he=x=>pe(o,x),F=x=>pe(d,x),me=x=>pe(c,x),se={type:"INTERNAL",resort:"",department:"",fromStore:"",toStore:"",store:"",vendor:"",requiredBy:"",lines:[Ns()]},Ee=()=>{$(null),W(se),y(""),S(!0)},be=x=>{$(x._id),W({type:x.type||"INTERNAL",resort:x.resort||"",department:x.department||"",fromStore:x.fromStore||"",toStore:x.toStore||x.store||"",store:x.store||"",vendor:x.vendor||"",requiredBy:x.requiredBy?x.requiredBy.slice(0,10):"",lines:x.lines&&x.lines.length>0&&x.lines.map(X=>{var ye;return{lineId:X.lineId||`ln_${Math.floor(Math.random()*1e5)}`,item:((ye=X.item)==null?void 0:ye._id)||X.item||"",qty:X.qty||1,remark:X.remark||""}})||[Ns()]}),y(""),S(!0)},D=x=>{$(null),W({type:x.type||"INTERNAL",resort:x.resort||"",department:x.department||"",fromStore:x.fromStore||"",toStore:x.toStore||x.store||"",store:x.store||"",vendor:x.vendor||"",requiredBy:x.requiredBy?x.requiredBy.slice(0,10):"",lines:x.lines&&x.lines.length>0&&x.lines.map(X=>{var ye;return{lineId:`dup_${Math.floor(Math.random()*1e5)}`,item:((ye=X.item)==null?void 0:ye._id)||X.item||"",qty:X.qty||1,remark:X.remark||""}})||[Ns()]}),y(""),S(!0)},Z=x=>{const{name:X,value:ye}=x.target;if(X==="type"){W(fe=>({...fe,type:ye,department:"",fromStore:"",toStore:"",store:"",vendor:""}));return}W(fe=>({...fe,[X]:ye}))},ae=(x,X,ye)=>{W(fe=>{const Se=[...fe.lines];return Se[x][X]=ye,{...fe,lines:Se}})},Re=()=>W(x=>({...x,lines:[...x.lines,Ns()]})),Oe=x=>W(X=>({...X,lines:X.lines.filter((ye,fe)=>fe!==x)})),Te=async x=>{var ye,fe;if(x&&x.preventDefault(),y(""),!O.type)return y("Select requisition type");if(O.type==="INTERNAL"){if(!O.fromStore)return y("Select From Store for internal requisition");if(!O.toStore)return y("Select To Store for internal requisition")}else{if(!O.vendor)return y("Select vendor for vendor requisition");if(!O.store)return y("Select store to receive goods for vendor requisition")}if(!O.lines||O.lines.length===0)return y("Add at least one item");for(const Se of O.lines){if(!Se.item)return y("Each line must have an item selected");if(!Se.qty||Number(Se.qty)<=0)return y("Each line must have quantity > 0")}let X=O.resort||void 0;if(O.type==="INTERNAL"){const Se=o.find(Ne=>(Ne._id||Ne.id)===O.fromStore);Se!=null&&Se.resort&&(X=Se.resort)}else{const Se=o.find(Ne=>(Ne._id||Ne.id)===O.store);Se!=null&&Se.resort&&(X=Se.resort)}try{N(!0);const Se={type:O.type,resort:X,fromStore:O.type==="INTERNAL"?O.fromStore:void 0,toStore:O.type==="INTERNAL"?O.toStore:void 0,department:O.department||void 0,vendor:O.type==="VENDOR"&&O.vendor||void 0,store:O.type==="VENDOR"?O.store||void 0:O.toStore||void 0,requiredBy:O.requiredBy||void 0,lines:O.lines.map(Ae=>({item:Ae.item,qty:Number(Ae.qty),remark:Ae.remark}))};let Ne;w?(Ne=await H.put(`${Rt}/requisitions/${w}`,Se),t(Ae=>Ae.map(Ue=>Ue._id===w?Ne.data:Ue))):(Ne=await H.post(`${Rt}/requisitions`,Se),t(Ae=>[Ne.data,...Ae])),S(!1),$(null)}catch(Se){console.error("save requisition error",Se),y(((fe=(ye=Se.response)==null?void 0:ye.data)==null?void 0:fe.message)||"Failed to save requisition")}finally{N(!1)}},j=async x=>{var X,ye;if(window.confirm(`Delete requisition ${x.requisitionNo||x._id}?`))try{t(fe=>fe.filter(Se=>Se._id!==x._id)),await H.delete(`${Rt}/requisitions/${x._id}`)}catch(fe){console.error("delete error",fe),y(((ye=(X=fe.response)==null?void 0:X.data)==null?void 0:ye.message)||"Failed to delete requisition"),re()}},oe=async x=>{var X,ye;if(x.status!=="APPROVED"&&window.confirm(`Approve requisition ${x.requisitionNo||x._id}?`))try{const fe=await H.post(`${Rt}/requisitions/${x._id}/approve`);fe!=null&&fe.data?t(Se=>Se.map(Ne=>Ne._id===x._id?fe.data:Ne)):t(Se=>Se.map(Ne=>Ne._id===x._id?{...Ne,status:"APPROVED"}:Ne))}catch(fe){console.error("approve error",fe),y(((ye=(X=fe.response)==null?void 0:X.data)==null?void 0:ye.message)||"Failed to approve requisition")}},je=async x=>{var X,ye;if(window.confirm(`Put requisition ${x.requisitionNo||x._id} on hold?`))try{const fe=await H.post(`${Rt}/requisitions/${x._id}/hold`);fe!=null&&fe.data?t(Se=>Se.map(Ne=>Ne._id===x._id?fe.data:Ne)):t(Se=>Se.map(Ne=>Ne._id===x._id?{...Ne,status:"ON_HOLD"}:Ne))}catch(fe){console.error("hold error",fe),y(((ye=(X=fe.response)==null?void 0:X.data)==null?void 0:ye.message)||"Failed to put requisition on hold")}},ve=async x=>{var ye,fe;const X=window.prompt("Enter rejection reason (optional):","");if(X!==null)try{const Se=await H.post(`${Rt}/requisitions/${x._id}/reject`,{reason:X});Se!=null&&Se.data?t(Ne=>Ne.map(Ae=>Ae._id===x._id?Se.data:Ae)):t(Ne=>Ne.map(Ae=>Ae._id===x._id?{...Ae,status:"REJECTED"}:Ae))}catch(Se){console.error("reject error",Se),y(((fe=(ye=Se.response)==null?void 0:ye.data)==null?void 0:fe.message)||"Failed to reject requisition")}},ee=x=>{const X=(x.lines||[]).map(fe=>{var nt;const Se=((nt=fe.item)==null?void 0:nt._id)||fe.item,Ne=c.find(mt=>(mt._id||mt.id)===Se),Ae=fe.expectedRate||fe.rate||(Ne==null?void 0:Ne.indicativePrice)||0,Ue=fe.item&&fe.item.name||(Ne?Ne.name:""),Xe=fe.qty||0;return{lineId:fe.lineId||`ln_${Math.floor(Math.random()*1e5)}`,item:Se,itemName:Ue,qty:Xe,rate:Ae,amount:Number((Xe*Ae).toFixed(2)),remark:fe.remark||""}}),ye=X.reduce((fe,Se)=>fe+Number(Se.amount||0),0);Y({open:!0,req:x,poNo:`PO-${Date.now()}`,poDate:new Date().toISOString().slice(0,10),items:X,subTotal:ye,taxPercent:0,taxAmount:0,total:ye})},xe=async()=>{var Xe,nt,mt;const{req:x,poNo:X,items:ye,poDate:fe,taxPercent:Se}=Q;if(!X)return y("PO No. is required");const Ne=x.vendor||void 0,Ae=x.toStore||x.store||void 0,Ue=x.resort||void 0;if(!Ne)return y("Requisition has no vendor assigned (cannot create PO)");if(!Ae)return y("Requisition has no destination store (cannot create PO)");if(!ye||ye.length===0)return y("PO must have at least one item");for(const pt of ye){if(!pt.item)return y("Each PO line must have an item id");if(!pt.qty||Number(pt.qty)<=0)return y("Each PO line qty must be > 0");if(pt.rate==null||Number(pt.rate)<0)return y("Each PO line rate must be >= 0")}try{N(!0);const pt=ye.map(ot=>{const $t=Number(ot.qty),wr=Number(ot.rate),En=$t*wr;return{item:ot.item,qty:$t,rate:wr,amount:En,remark:ot.remark||""}}),sn=pt.reduce((ot,$t)=>ot+$t.amount,0),ht=Number((Se||0)/100*sn),Zn=sn+ht,ao={poNo:X,vendor:Ne,resort:Ue,deliverTo:Ae,poDate:fe,items:pt,subTotal:sn,taxPercent:Se||0,taxAmount:ht,total:Zn},qt=await H.post(`${Rt}/requisitions/${x._id}/create-po`,ao);if((Xe=qt==null?void 0:qt.data)!=null&&Xe.requisition){t(wr=>wr.map(En=>En._id===x._id?qt.data.requisition:En));const ot=qt.data.po,$t=ot&&(ot._id||ot.code)||X;Y({open:!1,req:null,poNo:"",items:[]}),ne(`/super-admin/po/${$t}`)}else if(qt!=null&&qt.data){const ot=qt.data;t(wr=>wr.map(En=>En._id===x._id?{...En,status:"PO_CREATED",po:{code:ot.code||X,_id:ot._id}}:En)),Y({open:!1,req:null,poNo:"",items:[]});const $t=ot._id||ot.code||X;ne(`/super-admin/po/${$t}`)}else t(ot=>ot.map($t=>$t._id===x._id?{...$t,status:"PO_CREATED",po:{poNo:X}}:$t)),Y({open:!1,req:null,poNo:"",items:[]}),ne(`/super-admin/po/${X}`)}catch(pt){console.error("create po error",pt),y(((mt=(nt=pt.response)==null?void 0:nt.data)==null?void 0:mt.message)||"Failed to create PO")}finally{N(!1)}},Pe=x=>{if(x.po){y("This requisition already has a PO  create GRN from PO page instead.");return}const X=(x.lines||[]).map(fe=>{var Xe;const Se=((Xe=fe.item)==null?void 0:Xe._id)||fe.item,Ne=c.find(nt=>(nt._id||nt.id)===Se),Ae=fe.item&&fe.item.name||(Ne?Ne.name:""),Ue=fe.qty||0;return{lineId:fe.lineId||`ln_${Math.floor(Math.random()*1e5)}`,item:Se,itemName:Ae,qtyRequested:Ue,qtyReceived:Ue,remark:fe.remark||""}}),ye=new Date().toISOString().slice(0,10);G({open:!0,req:x,grnNo:Xn(ye),receivedBy:"",receivedDate:ye,challanNo:"",billNo:"",items:X})},De=(x,X,ye)=>{G(fe=>{const Se=[...fe.items||[]];return Se[x]={...Se[x],[X]:ye},{...fe,items:Se}})},b=async()=>{var Ue,Xe,nt;const{req:x,grnNo:X,receivedBy:ye,receivedDate:fe,challanNo:Se,billNo:Ne,items:Ae}=ce;if(!X)return y("GRN No. is required");if(!Se.trim())return y("Challan No is required");if(!Ae||Ae.length===0)return y("GRN must include at least one item");if(x.po)return y("PO exists for this requisition  create GRN from PO instead.");for(const mt of Ae){if(!mt.item)return y("Each GRN line must have an item");if(mt.qtyReceived==null||Number(mt.qtyReceived)<0)return y("Each GRN line received qty must be >= 0")}try{N(!0);const mt=Ae.map(ht=>({item:ht.item,qtyRequested:Number(ht.qtyRequested||0),qtyReceived:Number(ht.qtyReceived||0),remark:ht.remark||""})),pt={grnNo:X,receivedBy:ye||void 0,receivedDate:fe,challanNo:Se.trim(),billNo:(Ne==null?void 0:Ne.trim())||void 0,items:mt,store:x.toStore||x.store||void 0},sn=await H.post(`${Rt}/requisitions/${x._id}/create-grn`,pt);if((Ue=sn==null?void 0:sn.data)!=null&&Ue.requisition){t(ao=>ao.map(qt=>qt._id===x._id?sn.data.requisition:qt));const ht=sn.data.grn||sn.data,Zn=(ht==null?void 0:ht._id)||(ht==null?void 0:ht.code)||X;G({open:!1,req:null,grnNo:Xn(M),receivedBy:"",receivedDate:M,challanNo:"",billNo:"",items:[]}),ne(`/super-admin/grn/${Zn}`)}else t(ht=>ht.map(Zn=>Zn._id===x._id?{...Zn,status:"GRN_CREATED",grn:{grnNo:X}}:Zn)),G({open:!1,req:null,grnNo:Xn(M),receivedBy:"",receivedDate:M,challanNo:"",billNo:"",items:[]}),ne(`/super-admin/grn/${X}`)}catch(mt){console.error("create grn error",mt),y(((nt=(Xe=mt.response)==null?void 0:Xe.data)==null?void 0:nt.message)||"Failed to create GRN")}finally{N(!1)}},g=x=>{if(!x)return;const X=x._id||x.code;X&&ne(`/super-admin/po/${X}`)},R=x=>{if(!x)return;const X=x._id||x.code;X&&ne(`/super-admin/grn/${X}`)},J=x=>{ne(`/super-admin/requisition/${x._id}`)},ge=x=>{window.alert(`Transfer action for internal requisition ${x.requisitionNo||x._id} is not implemented yet.`)},le=x=>{const X=c.find(Ue=>Ue._id===x.item||Ue.id===x.item);if(!X)return"-";const ye=X.stockByStore||{},fe=Object.keys(ye);if(!fe.length)return"-";const Se=fe.map(Ue=>{const Xe=o.find(pt=>(pt._id||pt.id)===Ue),nt=(Xe==null?void 0:Xe.name)||Ue,mt=Number(ye[Ue]||0);return{name:nt,qty:mt}}),Ne=Se.reduce((Ue,Xe)=>Ue+Xe.qty,0),Ae=Se.map(Ue=>`${Ue.name}: ${Ue.qty}`).join(`
`);return n.jsx("span",{title:Ae,style:{cursor:"help"},children:Ne})},Ie=e.filter(x=>{if(L!=="ALL"&&(x.status||"PENDING").toUpperCase()!==L.toUpperCase()||T!=="ALL"&&(x.type||"INTERNAL").toUpperCase()!==T.toUpperCase())return!1;if(z){const X=x.resort||x.resortName||x.resortRef||x.resort;if(!X||!String(X).toLowerCase().includes(String(z).toLowerCase()))return!1}if(P){const X=x.date?new Date(x.date).setHours(0,0,0,0):null,ye=new Date(P).setHours(0,0,0,0);if(!X||X<ye)return!1}if(k){const X=x.date?new Date(x.date).setHours(0,0,0,0):null,ye=new Date(k).setHours(0,0,0,0);if(!X||X>ye)return!1}if(K!=="ALL"){const X=!!x.po,ye=!!x.grn;if(K==="NeedsPO"&&X||K==="NeedsGRN"&&ye||K==="HasPO"&&!X||K==="HasGRN"&&!ye)return!1}if(C&&C.trim()){const X=C.trim().toLowerCase();if(![x.requisitionNo,x.department,x.store,x.vendor,x.resort].filter(Boolean).join(" ").toLowerCase().includes(X))return!1}return!0}),Be=()=>{I("ALL"),q("ALL"),B(""),A(""),te(""),U("ALL"),ie("")},qe={display:"inline-block",marginLeft:6,cursor:"pointer",padding:6,borderRadius:6,position:"relative"},ut={...qe,opacity:.4,cursor:"not-allowed"};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",style:{alignItems:"flex-start"},children:[n.jsxs("div",{style:{flex:1},children:[n.jsx("h2",{children:"Requisitions"}),n.jsx("p",{children:"Create and manage internal and vendor requisitions."})]}),n.jsxs("div",{style:{display:"flex",gap:8},children:[n.jsxs("button",{className:"sa-primary-button",type:"button",onClick:Ee,children:[n.jsx("i",{className:"ri-add-line"})," New Requisition"]}),n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>{re(),Be()},children:"Refresh"})]})]}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:12},children:[n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Status",n.jsxs("select",{value:L,onChange:x=>I(x.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"ALL",children:"All"}),n.jsx("option",{value:"PENDING",children:"Pending"}),n.jsx("option",{value:"APPROVED",children:"Approved"}),n.jsx("option",{value:"ON_HOLD",children:"On Hold"}),n.jsx("option",{value:"REJECTED",children:"Rejected"}),n.jsx("option",{value:"PO_CREATED",children:"PO Created"}),n.jsx("option",{value:"GRN_CREATED",children:"GRN Created"})]})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Type",n.jsxs("select",{value:T,onChange:x=>q(x.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"ALL",children:"All"}),n.jsx("option",{value:"INTERNAL",children:"Internal"}),n.jsx("option",{value:"VENDOR",children:"Vendor"})]})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Resort",n.jsxs("select",{value:z,onChange:x=>B(x.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"",children:"All Resorts"}),r.length>0?r.map(x=>n.jsx("option",{value:x._id||x.name||x.id,children:x.name},x._id||x.id)):Array.from(new Set(e.map(x=>x.resort))).map(x=>n.jsx("option",{value:x,children:x},x))]})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Date from",n.jsx("input",{type:"date",value:P,onChange:x=>A(x.target.value),style:{marginLeft:6}})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Date to",n.jsx("input",{type:"date",value:k,onChange:x=>te(x.target.value),style:{marginLeft:6}})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Action",n.jsxs("select",{value:K,onChange:x=>U(x.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"ALL",children:"All"}),n.jsx("option",{value:"NeedsPO",children:"Needs PO"}),n.jsx("option",{value:"NeedsGRN",children:"Needs GRN"}),n.jsx("option",{value:"HasPO",children:"Has PO"}),n.jsx("option",{value:"HasGRN",children:"Has GRN"})]})]}),n.jsxs("label",{style:{flex:1,minWidth:220},children:["Search",n.jsx("input",{placeholder:"Requisition no / dept / store / vendor",value:C,onChange:x=>ie(x.target.value),style:{marginLeft:8,width:"80%"}})]}),n.jsx("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:n.jsx("button",{className:"sa-secondary-button",onClick:Be,children:"Clear"})})]}),E&&n.jsx("div",{className:"sa-modal-error",children:E}),n.jsx("div",{className:"sa-card",children:h?n.jsx("div",{children:"Loading requisitions..."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{marginBottom:8,color:"#6b7280",fontSize:"0.9rem"},children:["Showing ",Ie.length," of"," ",e.length," requisitions"]}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Requisition No."}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Resort"}),n.jsx("th",{children:"Dept / Store / Vendor"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:Ie.map(x=>n.jsxs("tr",{children:[n.jsx("td",{children:x.requisitionNo||x._id}),n.jsx("td",{children:x.type||"INTERNAL"}),n.jsx("td",{children:de(x.resort)}),n.jsx("td",{children:x.type==="VENDOR"?n.jsxs(n.Fragment,{children:[F(x.vendor),x.store?`  ${he(x.store)}`:""]}):x.fromStore||x.toStore?n.jsxs(n.Fragment,{children:[he(x.fromStore)," "," ",he(x.toStore||x.store)]}):_e(x.department)!=="-"?_e(x.department):he(x.store)}),n.jsx("td",{children:x.status||"PENDING"}),n.jsx("td",{children:x.date?x.date.slice(0,10):"-"}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("span",{style:qe,onClick:()=>J(x),title:"View",children:n.jsx("i",{className:"ri-eye-line"})}),n.jsx("span",{style:qe,onClick:()=>D(x),title:"Create (Duplicate)",children:n.jsx("i",{className:"ri-file-copy-line"})}),n.jsx("span",{style:qe,onClick:()=>be(x),title:"Edit",children:n.jsx("i",{className:"ri-edit-line"})}),n.jsx("span",{style:{...qe,background:x.status==="APPROVED"?"#052e16":"transparent"},onClick:()=>oe(x),title:x.status==="APPROVED"?"Already approved":"Approve",children:n.jsx("i",{className:"ri-checkbox-circle-line"})}),n.jsx("span",{style:qe,onClick:()=>je(x),title:"Hold",children:n.jsx("i",{className:"ri-pause-line"})}),n.jsx("span",{style:qe,onClick:()=>ve(x),title:"Reject",children:n.jsx("i",{className:"ri-close-circle-line"})}),x.type==="VENDOR"&&n.jsxs(n.Fragment,{children:[x.po?n.jsx("span",{style:qe,title:"View PO",onClick:()=>g(x.po),children:n.jsx("i",{className:"ri-file-paper-line"})}):x.grn?n.jsx("span",{style:ut,title:"GRN already created  PO cannot be created from this requisition",children:n.jsx("i",{className:"ri-file-paper-line"})}):n.jsx("span",{style:qe,onClick:()=>ee(x),title:"Create Purchase Order (PO)",children:n.jsx("i",{className:"ri-shopping-cart-line"})}),x.grn?n.jsx("span",{style:qe,title:"View GRN",onClick:()=>R(x.grn),children:n.jsx("i",{className:"ri-inbox-line"})}):x.po?n.jsx("span",{style:ut,title:"PO created  cannot create GRN from requisition (create GRN from PO page)",children:n.jsx("i",{className:"ri-inbox-line"})}):n.jsx("span",{style:qe,onClick:()=>Pe(x),title:"Create GRN",children:n.jsx("i",{className:"ri-add-box-line"})})]}),x.type==="INTERNAL"&&n.jsx("span",{style:qe,onClick:()=>ge(x),title:"Transfer",children:n.jsx("i",{className:"ri-arrow-left-right-line"})}),n.jsx("span",{style:qe,onClick:()=>j(x),title:"Delete",children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},x._id))})]})]})}),v&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!m&&S(!1),children:n.jsxs("div",{className:"sa-modal",onClick:x=>x.stopPropagation(),children:[n.jsx("h3",{children:w?"Edit Requisition":"Create Requisition"}),n.jsx("p",{className:"sa-modal-sub",children:"Fill the following details to raise a requisition."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:Te,children:[n.jsxs("label",{children:["Requisition Type",n.jsxs("select",{name:"type",value:O.type,onChange:Z,required:!0,children:[n.jsx("option",{value:"INTERNAL",children:"Internal (Store  Store transfer)"}),n.jsx("option",{value:"VENDOR",children:"Vendor (Direct purchase from vendor)"})]})]}),O.type==="INTERNAL"?n.jsxs(n.Fragment,{children:[n.jsxs("label",{children:["From Store",n.jsxs("select",{name:"fromStore",value:O.fromStore,onChange:Z,required:!0,children:[n.jsx("option",{value:"",children:"-- Select From Store --"}),o.map(x=>n.jsx("option",{value:x._id||x.id,children:x.name},x._id||x.id))]})]}),n.jsxs("label",{children:["To Store",n.jsxs("select",{name:"toStore",value:O.toStore,onChange:Z,required:!0,children:[n.jsx("option",{value:"",children:"-- Select To Store --"}),o.map(x=>n.jsx("option",{value:x._id||x.id,children:x.name},x._id||x.id))]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("label",{children:["Vendor",n.jsxs("select",{name:"vendor",value:O.vendor,onChange:Z,required:!0,children:[n.jsx("option",{value:"",children:"-- Select Vendor --"}),d.map(x=>n.jsx("option",{value:x._id||x.id,children:x.name},x._id||x.id))]})]}),n.jsxs("label",{children:["Store (to receive goods)",n.jsxs("select",{name:"store",value:O.store,onChange:Z,required:!0,children:[n.jsx("option",{value:"",children:"-- Select Store --"}),o.map(x=>n.jsx("option",{value:x._id||x.id,children:x.name},x._id||x.id))]})]})]}),n.jsxs("label",{children:["Required On",n.jsx("input",{type:"date",name:"requiredBy",value:O.requiredBy,onChange:Z})]}),n.jsxs("div",{style:{marginTop:10},children:[n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Current Stock"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Remark"}),n.jsx("th",{})]})}),n.jsx("tbody",{children:O.lines.map((x,X)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("select",{value:x.item,onChange:ye=>ae(X,"item",ye.target.value),required:!0,children:[n.jsx("option",{value:"",children:"-- Select Item --"}),c.map(ye=>n.jsx("option",{value:ye._id||ye.id,children:ye.name},ye._id||ye.id))]})}),n.jsx("td",{style:{textAlign:"center"},children:le(x)}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"1",value:x.qty,onChange:ye=>ae(X,"qty",ye.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{value:x.remark,onChange:ye=>ae(X,"remark",ye.target.value)})}),n.jsx("td",{children:O.lines.length>1&&n.jsx("button",{type:"button",onClick:()=>Oe(X),children:"Remove"})})]},x.lineId))})]}),n.jsx("button",{type:"button",onClick:Re,style:{marginTop:5},children:"+ Add Line"})]}),E&&n.jsx("div",{className:"sa-modal-error",children:E}),n.jsxs("div",{className:"sa-modal-actions",children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!m&&S(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:m,children:m?"Saving...":w?"Update Requisition":"Save Requisition"})]})]})]})}),Q.open&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!m&&Y({open:!1,req:null,poNo:"",items:[]}),children:n.jsxs("div",{className:"sa-modal large",onClick:x=>x.stopPropagation(),style:{maxWidth:980},children:[n.jsx("h3",{children:"Create Purchase Order"}),n.jsx("p",{className:"sa-modal-sub",children:"This PO will be created from the selected requisition. Vendor and delivery store are taken from the requisition."}),n.jsxs("div",{className:"sa-modal-form",children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[n.jsxs("label",{children:["Approved Requisition (read-only)",n.jsx("input",{value:((Nr=Q.req)==null?void 0:Nr.requisitionNo)||((rn=Q.req)==null?void 0:rn._id)||"",readOnly:!0})]}),n.jsxs("label",{children:["PO No.",n.jsx("input",{value:Q.poNo||"",onChange:x=>Y(X=>({...X,poNo:x.target.value})),placeholder:"PO-YYYY-XXX"})]}),n.jsxs("label",{children:["Vendor (from requisition)",n.jsx("input",{value:F((_t=Q.req)==null?void 0:_t.vendor)||"",readOnly:!0})]}),n.jsxs("label",{children:["Delivery Store (from requisition)",n.jsx("input",{value:he(((jt=Q.req)==null?void 0:jt.toStore)||((Jn=Q.req)==null?void 0:Jn.store))||"",readOnly:!0})]}),n.jsxs("label",{children:["PO Date",n.jsx("input",{type:"date",value:Q.poDate||new Date().toISOString().slice(0,10),onChange:x=>Y(X=>({...X,poDate:x.target.value}))})]})]}),n.jsx("div",{style:{marginTop:12},children:n.jsxs("table",{className:"sa-table",style:{width:"100%"},children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"45%"},children:"Item"}),n.jsx("th",{style:{width:"12%"},children:"Qty"}),n.jsx("th",{style:{width:"12%"},children:"Rate"}),n.jsx("th",{style:{width:"12%"},children:"Amount"}),n.jsx("th",{style:{width:"19%"},children:"Remark"})]})}),n.jsx("tbody",{children:(Q.items||[]).map((x,X)=>n.jsxs("tr",{children:[n.jsx("td",{children:x.itemName||me(x.item)||x.item}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:x.qty,readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:x.rate,onChange:ye=>{const fe=Number(ye.target.value||0);Y(Se=>{const Ne=[...Se.items||[]];Ne[X]={...Ne[X],rate:fe,amount:Number((fe*Number(Ne[X].qty||0)).toFixed(2))};const Ae=Ne.reduce((Xe,nt)=>Xe+Number(nt.amount||0),0),Ue=(Se.taxPercent||0)/100*Ae;return{...Se,items:Ne,subTotal:Ae,taxAmount:Ue,total:Ae+Ue}})}})}),n.jsx("td",{children:Number(x.amount||0).toFixed(2)}),n.jsx("td",{children:n.jsx("input",{value:x.remark||"",onChange:ye=>{const fe=ye.target.value;Y(Se=>{const Ne=[...Se.items||[]];return Ne[X]={...Ne[X],remark:fe},{...Se,items:Ne}})}})})]},x.lineId||X))})]})}),n.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:12,marginTop:12},children:n.jsxs("div",{style:{width:360,textAlign:"right"},children:[n.jsxs("div",{style:{marginBottom:6},children:["Subtotal:"," ",n.jsx("strong",{children:(Q.subTotal||0).toFixed(2)})]}),n.jsxs("div",{style:{marginBottom:6},children:["Tax %"," ",n.jsx("input",{type:"number",min:"0",value:Q.taxPercent||0,onChange:x=>{const X=Number(x.target.value||0);Y(ye=>{var Ne;const fe=((Ne=ye.items)==null?void 0:Ne.reduce((Ae,Ue)=>Ae+Number(Ue.amount||0),0))||0,Se=X/100*fe;return{...ye,taxPercent:X,taxAmount:Se,subTotal:fe,total:fe+Se}})},style:{width:70,marginLeft:8}})]}),n.jsxs("div",{style:{marginBottom:6},children:["Tax Amount:"," ",n.jsx("strong",{children:(Q.taxAmount||0).toFixed(2)})]}),n.jsxs("div",{style:{marginTop:8,fontSize:"1.05rem"},children:["Total:"," ",n.jsx("strong",{children:(Q.total||Q.subTotal||0).toFixed(2)})]})]})}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>Y({open:!1,req:null,poNo:"",items:[]}),children:"Cancel"}),n.jsx("button",{type:"button",className:"sa-primary-button",onClick:xe,disabled:m,children:m?"Creating...":"Create PO"})]})]})]})}),ce.open&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!m&&G({open:!1,req:null,grnNo:Xn(M),receivedBy:"",receivedDate:M,challanNo:"",billNo:"",items:[]}),children:n.jsxs("div",{className:"sa-modal large",onClick:x=>x.stopPropagation(),style:{maxWidth:980},children:[n.jsx("h3",{children:"Create GRN"}),n.jsx("p",{className:"sa-modal-sub",children:"Record goods received against the selected requisition. Store is taken from the requisition."}),n.jsxs("div",{className:"sa-modal-form",children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[n.jsxs("label",{children:["Approved Requisition (read-only)",n.jsx("input",{value:((Je=ce.req)==null?void 0:Je.requisitionNo)||((Rn=ce.req)==null?void 0:Rn._id)||"",readOnly:!0})]}),n.jsxs("label",{children:["GRN No.",n.jsx("input",{value:ce.grnNo||"",onChange:x=>G(X=>({...X,grnNo:x.target.value}))})]}),n.jsxs("label",{children:["Received By",n.jsx("input",{value:ce.receivedBy||"",onChange:x=>G(X=>({...X,receivedBy:x.target.value}))})]}),n.jsxs("label",{children:["Received Date",n.jsx("input",{type:"date",value:ce.receivedDate||new Date().toISOString().slice(0,10),onChange:x=>{const X=x.target.value;G(ye=>({...ye,receivedDate:X,grnNo:Xn(X)}))}})]}),n.jsxs("label",{children:["Challan No",n.jsx("span",{style:{color:"red"},children:" *"}),n.jsx("input",{value:ce.challanNo||"",onChange:x=>G(X=>({...X,challanNo:x.target.value})),required:!0})]}),n.jsxs("label",{children:["Bill No (optional)",n.jsx("input",{value:ce.billNo||"",onChange:x=>G(X=>({...X,billNo:x.target.value}))})]}),n.jsxs("label",{children:["Store (from requisition)",n.jsx("input",{value:he(((ga=ce.req)==null?void 0:ga.toStore)||((ld=ce.req)==null?void 0:ld.store))||"",readOnly:!0})]})]}),n.jsx("div",{style:{marginTop:12},children:n.jsxs("table",{className:"sa-table",style:{width:"100%"},children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"45%"},children:"Item"}),n.jsx("th",{style:{width:"12%"},children:"Requested Qty"}),n.jsx("th",{style:{width:"12%"},children:"Received Qty"}),n.jsx("th",{style:{width:"12%"},children:"Balance"}),n.jsx("th",{style:{width:"19%"},children:"Remark"})]})}),n.jsx("tbody",{children:(ce.items||[]).map((x,X)=>n.jsxs("tr",{children:[n.jsx("td",{children:x.itemName||me(x.item)||x.item}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:x.qtyRequested,readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:x.qtyReceived,onChange:ye=>{const fe=Number(ye.target.value||0);De(X,"qtyReceived",fe)}})}),n.jsx("td",{children:Number((x.qtyRequested||0)-(x.qtyReceived||0)).toFixed(2)}),n.jsx("td",{children:n.jsx("input",{value:x.remark||"",onChange:ye=>De(X,"remark",ye.target.value)})})]},x.lineId||X))})]})}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>G({open:!1,req:null,grnNo:Xn(M),receivedBy:"",receivedDate:M,challanNo:"",billNo:"",items:[]}),children:"Cancel"}),n.jsx("button",{type:"button",className:"sa-primary-button",onClick:b,disabled:m,children:m?"Creating...":"Create GRN"})]})]})]})}),n.jsx("style",{children:`
        td .action-btn .tooltip { display:none; }
        td .action-btn:hover .tooltip { display:block; }
        .sa-modal.large { max-height: 85vh; overflow: auto; }
      `})]})},Ej=()=>{const e=window.location.hostname==="localhost"?"http://localhost:5000":"https://resort-crm.onrender.com";return e.endsWith("/api")?e:e.replace(/\/+$/,"")+"/api"},nf=Ej();console.log("ResortList API_BASE =",nf);const Is=H.create({baseURL:nf});Is.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const bj=["Mumbai","Pune","Nagpur","Nashik","Thane","Aurangabad","Solapur","Kolhapur","Amravati","Nanded","Ahmednagar","Jalgaon","Akola","Latur","Sangli","Satara","Ratnagiri","Sindhudurg","Palghar","Raigad","Chandrapur","Gondia","Buldhana","Yavatmal","Beed","Parbhani","Osmanabad","Hingoli","Jalna","Washim","Wardha","Kalyan","Dombivli","Panvel","Lonavala","Alibaug","Mahabaleshwar","Matheran","Shirdi"],Li=e=>String(e).padStart(2,"0"),Mo=e=>{if(!e)return"";const t=new Date(e);return isNaN(t)?"":`${Li(t.getDate())}/${Li(t.getMonth()+1)}/${t.getFullYear()}`},rf=e=>{if(!e)return"";const t=e.split("/");if(t.length!==3)return"";const[r,s,a]=t.map(c=>c.trim());if(!r||!s||!a)return"";const i=Number(r),o=Number(s),l=Number(a);return!Number.isFinite(i)||!Number.isFinite(o)||!Number.isFinite(l)?"":`${l}-${Li(o)}-${Li(i)}`},Vu=e=>{const t=rf(e);if(!t)return null;const r=new Date(t);return isNaN(r)?null:r},Uo=()=>({_id:void 0,name:"",code:"",address:"",locationZone:"",ownerName:"",ownerContact:"",ownerEmail:"",ownerResdAddress:"",ownerOffAddress:"",noOfKeys:"",tieUpCategory:"",qualityCategory:"",locationCategory:"",fssaiNumber:"",fssaiStatus:"",renewalDate:"",isActive:!0}),Fa=(e="")=>{if(!e)return"";const t=e.trim().split(/\s+/).filter(Boolean);return t.length===1?t[0].slice(0,3).toUpperCase():t.map(r=>r[0]).join("").slice(0,4).toUpperCase()},Qu=["Managed","Marketed","Owned","Commissionable"],Wu=["5-Star","4-Star","3-Star","Budget"],Hu=["Mainstream","Offbeat"],kj=()=>{const[e,t]=p.useState([]),[r,s]=p.useState(!1),[a,i]=p.useState(!1),[o,l]=p.useState(""),[c,u]=p.useState(!1),[d,f]=p.useState(!1),[h,_]=p.useState(null),[m,N]=p.useState(Uo()),[E,y]=p.useState({}),[v,S]=p.useState(""),[w,$]=p.useState(""),[O,W]=p.useState(""),[Q,Y]=p.useState(""),[M,ce]=p.useState(""),[G,L]=p.useState(""),[I,T]=p.useState(""),q=async()=>{var C,ie,ne,re;try{s(!0),l("");const pe=await Is.get("/resorts");console.log("resorts response:",pe.status,pe.data);const _e=(Array.isArray((C=pe.data)==null?void 0:C.resorts)?pe.data.resorts:Array.isArray(pe.data)?pe.data:[]).map(he=>({...he,_id:he._id||he.id}));t(_e)}catch(pe){console.error("loadResorts error",(ie=pe.response)==null?void 0:ie.status,(ne=pe.response)==null?void 0:ne.data),l(`Failed to load resorts from backend${(re=pe.response)!=null&&re.status?` (Status ${pe.response.status})`:""}`),t([])}finally{s(!1)}};p.useEffect(()=>{q()},[]),p.useEffect(()=>{if(!m.renewalDate)return;const C=Vu(m.renewalDate);if(!C)return;const ie=new Date,ne=new Date(ie.toDateString()),re=C<ne?"expired":"active";N(pe=>({...pe,fssaiStatus:re}))},[m.renewalDate]);const z=p.useMemo(()=>e.filter(C=>{var ie,ne,re;return!(v&&!((ie=C.name)!=null&&ie.toLowerCase().includes(v.toLowerCase()))||w&&!((ne=C.code)!=null&&ne.toLowerCase().includes(w.toLowerCase()))||O&&!((re=C.locationZone)!=null&&re.toLowerCase().includes(O.toLowerCase()))||Q&&(Q==="active"&&C.isActive===!1||Q==="inactive"&&C.isActive!==!1)||M&&(C.tieUpCategory||"")!==M||G&&(C.qualityCategory||"")!==G||I&&(C.locationCategory||"")!==I)}),[e,v,w,O,Q,M,G,I]),B=()=>{N(Uo()),y({}),l(""),u(!0)},P=C=>{N({_id:C._id||C.id,name:C.name||"",code:C.code||Fa(C.name||""),address:C.address||"",locationZone:C.locationZone||"",ownerName:C.ownerName||"",ownerContact:C.ownerContact||"",ownerEmail:C.ownerEmail||"",ownerResdAddress:C.ownerResdAddress||"",ownerOffAddress:C.ownerOffAddress||"",noOfKeys:C.noOfKeys??"",tieUpCategory:C.tieUpCategory||"",qualityCategory:C.qualityCategory||"",locationCategory:C.locationCategory||"",fssaiNumber:C.fssaiNumber||"",fssaiStatus:C.fssaiStatus||"",renewalDate:C.renewalDate?Mo(C.renewalDate):"",isActive:C.isActive!==!1}),y({}),l(""),u(!0)},A=C=>{_(C),f(!0)},k=C=>{const{name:ie,value:ne,type:re,checked:pe}=C.target;N(de=>{const _e={...de,[ie]:re==="checkbox"?pe:ne};if(ie==="name"){const he=Fa(ne);(!de.code||de.code===Fa(de.name||""))&&(_e.code=he)}return _e}),y(de=>({...de,[ie]:""}))},te=()=>{var ie,ne,re,pe,de;const C={};if((ie=m.name)!=null&&ie.trim()||(C.name="Resort name is required"),(ne=m.address)!=null&&ne.trim()||(C.address="Address is required"),(re=m.locationZone)!=null&&re.trim()||(C.locationZone="Location/Zone is required"),(pe=m.ownerName)!=null&&pe.trim()||(C.ownerName="Owner name is required"),(de=m.ownerContact)!=null&&de.trim()?(m.ownerContact||"").replace(/\D/g,"").length!==10&&(C.ownerContact="Owner contact must be 10 digits"):C.ownerContact="Owner contact is required",m.ownerEmail&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.ownerEmail)||(C.ownerEmail="Invalid email")),m.noOfKeys!==""&&m.noOfKeys!==null){const _e=Number(m.noOfKeys);(!Number.isFinite(_e)||_e<0)&&(C.noOfKeys="Enter a valid number")}return m.renewalDate&&(Vu(m.renewalDate)||(C.renewalDate="Enter renewal date as DD/MM/YYYY")),y(C),Object.keys(C).length===0},K=async C=>{var ie,ne,re,pe;if(C.preventDefault(),l(""),!te()){l("Please fix the highlighted errors.");return}try{i(!0);const de={name:m.name.trim(),code:m.code||Fa(m.name||""),address:m.address,locationZone:m.locationZone,ownerName:m.ownerName,ownerContact:(m.ownerContact||"").replace(/\D/g,""),ownerEmail:m.ownerEmail||void 0,ownerResdAddress:m.ownerResdAddress||void 0,ownerOffAddress:m.ownerOffAddress||void 0,noOfKeys:m.noOfKeys?Number(m.noOfKeys):void 0,tieUpCategory:m.tieUpCategory||void 0,qualityCategory:m.qualityCategory||void 0,locationCategory:m.locationCategory||void 0,fssaiNumber:m.fssaiNumber||void 0,fssaiStatus:m.fssaiStatus||void 0,renewalDate:m.renewalDate?rf(m.renewalDate):void 0,isActive:!!m.isActive};if(m._id){const _e=await Is.put(`/resorts/${m._id}`,de);console.log("update resort res:",_e.data)}else{const _e=await Is.post("/resorts",de);console.log("create resort res:",_e.data)}await q(),u(!1),N(Uo()),y({})}catch(de){console.error("save resort error",(ie=de.response)==null?void 0:ie.status,(ne=de.response)==null?void 0:ne.data,de.message),l(((pe=(re=de==null?void 0:de.response)==null?void 0:re.data)==null?void 0:pe.message)||"Failed to save resort")}finally{i(!1)}},U=async C=>{var ie,ne;if(window.confirm(`Delete resort ${C.name||C._id}?`))try{t(re=>re.filter(pe=>(pe._id||pe.id)!==(C._id||C.id)));try{await Is.delete(`/resorts/${C._id||C.id}`)}catch(re){console.error("delete resort error",(ie=re.response)==null?void 0:ie.status,(ne=re.response)==null?void 0:ne.data),await q()}}catch(re){console.error("delete resort error",re),l("Failed to delete resort"),await q()}};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Resorts"}),n.jsx("p",{children:"All resorts load from backend only. Create/Edit/Delete will persist to database."})]}),n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[n.jsx("button",{className:"sa-secondary-button",onClick:()=>{},children:"Download"}),n.jsxs("button",{className:"sa-primary-button",type:"button",onClick:B,children:[n.jsx("i",{className:"ri-add-line"})," New Resort"]})]})]}),o&&n.jsx("div",{style:{fontSize:"0.85rem",marginBottom:8,color:"#b91c1c",background:"rgba(250,204,210,0.3)",padding:8,borderRadius:8},children:o}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap",marginBottom:12},children:[n.jsxs("label",{children:["Name",n.jsx("input",{value:v,onChange:C=>S(C.target.value),placeholder:"Search name",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Code",n.jsx("input",{value:w,onChange:C=>$(C.target.value),placeholder:"Code",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Location/Zone",n.jsx("input",{list:"maha-cities",value:O,onChange:C=>W(C.target.value),placeholder:"Type or select city/place",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Status",n.jsxs("select",{value:Q,onChange:C=>Y(C.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"})]})]}),n.jsxs("label",{children:["Tie-up Category",n.jsxs("select",{value:M,onChange:C=>ce(C.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"--"}),Qu.map(C=>n.jsx("option",{value:C,children:C},C))]})]}),n.jsxs("label",{children:["Quality Category",n.jsxs("select",{value:G,onChange:C=>L(C.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"--"}),Wu.map(C=>n.jsx("option",{value:C,children:C},C))]})]}),n.jsxs("label",{children:["Location Category",n.jsxs("select",{value:I,onChange:C=>T(C.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"--"}),Hu.map(C=>n.jsx("option",{value:C,children:C},C))]})]}),n.jsxs("div",{style:{marginLeft:"auto",color:"#6b7280"},children:["Showing ",z.length," of ",e.length]})]}),n.jsx("div",{className:"sa-card",children:r?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Loading resorts..."}):z.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"No resorts found. Add one to get started."}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Location/Zone"}),n.jsx("th",{children:"Owner"}),n.jsx("th",{children:"No of Keys"}),n.jsx("th",{children:"Tie-up"}),n.jsx("th",{children:"Quality"}),n.jsx("th",{children:"Loc Category"}),n.jsx("th",{children:"FSSAI"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:z.map(C=>{const ie=C.renewalDate?Mo(C.renewalDate):"-";return n.jsxs("tr",{children:[n.jsx("td",{children:C.code}),n.jsx("td",{children:C.name}),n.jsx("td",{children:C.locationZone}),n.jsxs("td",{children:[n.jsx("div",{style:{fontWeight:500},children:C.ownerName}),n.jsx("div",{style:{fontSize:12,color:"#6b7280"},children:C.ownerContact})]}),n.jsx("td",{children:C.noOfKeys??"-"}),n.jsx("td",{children:C.tieUpCategory??"-"}),n.jsx("td",{children:C.qualityCategory??"-"}),n.jsx("td",{children:C.locationCategory??"-"}),n.jsxs("td",{children:[n.jsx("div",{children:C.fssaiNumber||"-"}),n.jsx("div",{style:{fontSize:11,color:"#6b7280"},children:C.fssaiStatus?C.fssaiStatus.toUpperCase():"-"}),n.jsxs("div",{style:{fontSize:11,color:"#6b7280"},children:["Renewal: ",ie]})]}),n.jsx("td",{children:n.jsx("span",{className:`sa-badge ${C.isActive===!1?"sa-badge-muted":"sa-badge-success"}`,children:C.isActive===!1?"Inactive":"Active"})}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("button",{title:"View",className:"sa-icon-button",onClick:()=>A(C),style:{marginRight:6},children:n.jsx("i",{className:"ri-eye-line"})}),n.jsx("button",{title:"Edit",className:"sa-icon-button",onClick:()=>P(C),style:{marginRight:6},children:n.jsx("i",{className:"ri-edit-line"})}),n.jsx("button",{title:"Delete",className:"sa-icon-button",onClick:()=>U(C),children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},C._id||C.id||C.code)})})]})}),c&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!a&&u(!1),children:n.jsxs("div",{className:"sa-modal",onClick:C=>C.stopPropagation(),style:{maxHeight:"85vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[n.jsx("h3",{style:{marginBottom:6},children:m._id?"Edit Resort":"New Resort"}),n.jsx("p",{className:"sa-modal-sub",style:{marginBottom:10},children:"Add or update a property which will be available for transactions."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:K,style:{overflow:"auto",paddingRight:8},children:[n.jsxs("label",{children:["Resort Name *",n.jsx("input",{name:"name",value:m.name,onChange:k,placeholder:"Resort Name",required:!0}),E.name&&n.jsx("div",{className:"field-error",children:E.name})]}),n.jsxs("label",{children:["Code (auto)",n.jsx("input",{name:"code",value:m.code,onChange:()=>{},placeholder:"Auto-generated code",readOnly:!0}),n.jsx("small",{style:{display:"block",color:"#6b7280"},children:"Auto-generated from name; backend will store this."})]}),n.jsxs("label",{children:["Address *",n.jsx("textarea",{name:"address",value:m.address,onChange:k,placeholder:"Street, area, pin",required:!0}),E.address&&n.jsx("div",{className:"field-error",children:E.address})]}),n.jsxs("label",{children:["Location / Zone *",n.jsx("input",{list:"maha-cities",name:"locationZone",value:m.locationZone,onChange:k,placeholder:"e.g. Mumbai / Pune / Lonavala",required:!0}),E.locationZone&&n.jsx("div",{className:"field-error",children:E.locationZone}),n.jsx("small",{style:{display:"block",color:"#6b7280"},children:"Select from Maharashtra cities or type any other place."})]}),n.jsxs("label",{children:["Owner Name *",n.jsx("input",{name:"ownerName",value:m.ownerName,onChange:k,placeholder:"Owner full name",required:!0}),E.ownerName&&n.jsx("div",{className:"field-error",children:E.ownerName})]}),n.jsxs("label",{children:["Owner Contact *",n.jsx("input",{name:"ownerContact",value:m.ownerContact,onChange:k,placeholder:"+91-XXXXXXXXXX",required:!0}),E.ownerContact&&n.jsx("div",{className:"field-error",children:E.ownerContact})]}),n.jsxs("label",{children:["Owner Email",n.jsx("input",{type:"email",name:"ownerEmail",value:m.ownerEmail,onChange:k,placeholder:"owner@example.com"}),E.ownerEmail&&n.jsx("div",{className:"field-error",children:E.ownerEmail})]}),n.jsxs("label",{children:["Owner Resd. Address",n.jsx("input",{name:"ownerResdAddress",value:m.ownerResdAddress,onChange:k,placeholder:"Residential address"})]}),n.jsxs("label",{children:["Owner Off. Address",n.jsx("input",{name:"ownerOffAddress",value:m.ownerOffAddress,onChange:k,placeholder:"Office address"})]}),n.jsxs("label",{children:["No of Keys",n.jsx("input",{type:"number",name:"noOfKeys",min:"0",value:m.noOfKeys,onChange:k,placeholder:"e.g. 20"}),E.noOfKeys&&n.jsx("div",{className:"field-error",children:E.noOfKeys})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:[n.jsxs("label",{children:["Tie-up Category",n.jsxs("select",{name:"tieUpCategory",value:m.tieUpCategory,onChange:k,children:[n.jsx("option",{value:"",children:"--"}),Qu.map(C=>n.jsx("option",{value:C,children:C},C))]})]}),n.jsxs("label",{children:["Quality Category",n.jsxs("select",{name:"qualityCategory",value:m.qualityCategory,onChange:k,children:[n.jsx("option",{value:"",children:"--"}),Wu.map(C=>n.jsx("option",{value:C,children:C},C))]})]}),n.jsxs("label",{children:["Location Category",n.jsxs("select",{name:"locationCategory",value:m.locationCategory,onChange:k,children:[n.jsx("option",{value:"",children:"--"}),Hu.map(C=>n.jsx("option",{value:C,children:C},C))]})]})]}),n.jsxs("label",{children:["FSSAI License Number",n.jsx("input",{name:"fssaiNumber",value:m.fssaiNumber,onChange:k,placeholder:"FSSAI / license no"})]}),n.jsxs("label",{children:["FSSAI License Status",n.jsxs("select",{name:"fssaiStatus",value:m.fssaiStatus,onChange:k,children:[n.jsx("option",{value:"",children:"Select status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"expired",children:"Expired"}),n.jsx("option",{value:"pending",children:"Pending"})]}),n.jsx("small",{style:{display:"block",color:"#6b7280"},children:"Auto-updates from Renewal Date but you can override."})]}),n.jsxs("label",{children:["Renewal Date (dd/mm/yyyy)",n.jsx("input",{name:"renewalDate",value:m.renewalDate,onChange:k,placeholder:"dd/mm/yyyy"}),E.renewalDate&&n.jsx("div",{className:"field-error",children:E.renewalDate}),n.jsx("small",{style:{display:"block",color:"#6b7280"},children:"Enter date as DD/MM/YYYY. Status will auto-update based on this date."})]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",name:"isActive",checked:!!m.isActive,onChange:k}),"Active"]}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!a&&u(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:a,children:a?"Saving...":m._id?"Update Resort":"Save Resort"})]})]})]})}),d&&h&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>f(!1),children:n.jsxs("div",{className:"sa-modal",onClick:C=>C.stopPropagation(),style:{maxWidth:800},children:[n.jsxs("h3",{children:[h.name," ",n.jsxs("small",{style:{color:"#6b7280"},children:["(",h.code,")"]})]}),n.jsx("p",{className:"sa-modal-sub",children:"Full resort details (read-only)"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:10},children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Address"}),n.jsx("div",{style:{color:"#374151"},children:h.address||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Location / Zone"}),n.jsx("div",{style:{color:"#374151"},children:h.locationZone||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Owner Name"}),n.jsx("div",{style:{color:"#374151"},children:h.ownerName||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Owner Contact"}),n.jsx("div",{style:{color:"#374151"},children:h.ownerContact||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Owner Email"}),n.jsx("div",{style:{color:"#374151"},children:h.ownerEmail||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"No of Keys"}),n.jsx("div",{style:{color:"#374151"},children:h.noOfKeys??"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Tie-up Category"}),n.jsx("div",{style:{color:"#374151"},children:h.tieUpCategory||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Quality Category"}),n.jsx("div",{style:{color:"#374151"},children:h.qualityCategory||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"FSSAI Number"}),n.jsx("div",{style:{color:"#374151"},children:h.fssaiNumber||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"FSSAI Status"}),n.jsx("div",{style:{color:"#374151"},children:h.fssaiStatus||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Renewal Date"}),n.jsx("div",{style:{color:"#374151"},children:h.renewalDate?Mo(h.renewalDate):"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Residential Address"}),n.jsx("div",{style:{color:"#374151"},children:h.ownerResdAddress||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Office Address"}),n.jsx("div",{style:{color:"#374151"},children:h.ownerOffAddress||"-"})]})]}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>f(!1),children:"Close"}),n.jsx("button",{type:"button",className:"sa-primary-button",onClick:()=>{f(!1),P(h)},children:"Edit"})]})]})}),n.jsx("datalist",{id:"maha-cities",children:bj.map(C=>n.jsx("option",{value:C},C))})]})},Pj=()=>{const e=window.location.hostname==="localhost"?"http://localhost:5000":"https://resort-crm.onrender.com";return e.endsWith("/api")?e:e.replace(/\/+$/,"")+"/api"},sf=Pj();console.log("DepartmentList API_BASE =",sf);const As=H.create({baseURL:sf});As.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const qo=()=>({_id:void 0,name:"",code:""}),Rr=(e="")=>{const t=e.trim().toUpperCase().replace(/[^A-Z0-9\s]/g,"").split(/\s+/).filter(Boolean).slice(0,3).map(a=>a.length<=4?a:a.slice(0,4)).join("_"),r=Math.floor(Math.random()*900+100);return((t||"DEPT")+"_"+r).slice(0,20)},Ij=()=>{const[e,t]=p.useState([]),[r,s]=p.useState(!1),[a,i]=p.useState(!1),[o,l]=p.useState(""),[c,u]=p.useState(!1),[d,f]=p.useState(qo()),[h,_]=p.useState(!1),[m,N]=p.useState(null),[E,y]=p.useState(""),[v,S]=p.useState(""),w=async()=>{var G,L,I,T;try{s(!0),l("");const q=await As.get("/departments");console.log("departments response:",q.status,q.data);const B=(Array.isArray((G=q.data)==null?void 0:G.departments)?q.data.departments:Array.isArray(q.data)?q.data:[]).map(P=>({_id:P._id||P.id,name:P.name||"",code:P.code||Rr(P.name||"")}));t(B)}catch(q){console.error("load error",(L=q.response)==null?void 0:L.status,(I=q.response)==null?void 0:I.data,q.message),l(`Failed to load departments from backend.${(T=q.response)!=null&&T.status?` (Status ${q.response.status})`:""}`),t([])}finally{s(!1)}};p.useEffect(()=>{w()},[]);const $=p.useMemo(()=>e.filter(G=>{var L,I;return!(E&&!((L=G.name)!=null&&L.toLowerCase().includes(E.toLowerCase()))||v&&!((I=G.code)!=null&&I.toLowerCase().includes(v.toLowerCase())))}),[e,E,v]),O=()=>{f({...qo(),code:Rr("")}),l(""),u(!0)},W=G=>{f({_id:G._id||G.id,name:G.name||"",code:G.code||Rr(G.name||"")}),l(""),u(!0)},Q=G=>{const{name:L,value:I}=G.target;f(L==="name"?T=>({...T,name:I,code:Rr(I)}):T=>({...T,[L]:I}))},Y=async G=>{var L,I,T,q,z,B;if(G.preventDefault(),l(""),!d.name||!d.name.trim())return l("Department name is required");try{i(!0);const P={name:d.name.trim(),code:Rr(d.name)};if(d._id)try{const A=await As.put(`/departments/${d._id}`,P);console.log("update department res:",A.data)}catch(A){throw console.error("update error",(L=A.response)==null?void 0:L.status,(I=A.response)==null?void 0:I.data,A.message),A}else try{const A=await As.post("/departments",P);console.log("create department res:",A.data)}catch(A){throw console.error("create error",(T=A.response)==null?void 0:T.status,(q=A.response)==null?void 0:q.data,A.message),A}await w(),u(!1),f(qo())}catch(P){console.error("save error",(z=P.response)==null?void 0:z.status,(B=P.response)==null?void 0:B.data,P.message),l("Failed to save department")}finally{i(!1)}},M=async G=>{var L,I,T,q;if(window.confirm(`Delete department ${G.name||G._id}?`))try{t(z=>z.filter(B=>(B._id||B.id)!==(G._id||G.id)));try{await As.delete(`/departments/${G._id||G.id}`)}catch(z){console.error("delete error",(L=z.response)==null?void 0:L.status,(I=z.response)==null?void 0:I.data,z.message),await w()}}catch(z){console.error("delete error",(T=z.response)==null?void 0:T.status,(q=z.response)==null?void 0:q.data,z.message),l("Failed to delete department"),await w()}},ce=G=>{N(G),_(!0)};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Departments"}),n.jsx("p",{children:"Departments are loaded from backend only."})]}),n.jsx("div",{style:{display:"flex",gap:8,alignItems:"center"},children:n.jsxs("button",{className:"sa-primary-button",type:"button",onClick:O,children:[n.jsx("i",{className:"ri-add-line"})," New Department"]})})]}),o&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:o}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[n.jsxs("label",{children:["Department Name",n.jsx("input",{value:E,onChange:G=>y(G.target.value),placeholder:"Search name...",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Code",n.jsx("input",{value:v,onChange:G=>S(G.target.value),placeholder:"Code...",style:{marginLeft:8}})]}),n.jsxs("div",{style:{marginLeft:"auto",color:"#9ca3af"},children:["Showing ",$.length," / ",e.length]})]}),n.jsx("div",{className:"sa-card",children:r?n.jsx("div",{children:"Loading departments..."}):$.length===0?n.jsx("div",{children:"No departments found. Add one to get started."}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Department"}),n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:$.map(G=>n.jsxs("tr",{children:[n.jsx("td",{children:G.name}),n.jsx("td",{children:G.code}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("button",{className:"sa-secondary-button",onClick:()=>ce(G),title:"View",style:{marginRight:6},children:n.jsx("i",{className:"ri-eye-line"})}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>W(G),title:"Edit",style:{marginRight:6},children:n.jsx("i",{className:"ri-edit-line"})}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>M(G),title:"Delete",children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},G._id||G.id||G.name))})]})}),c&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!a&&u(!1),children:n.jsxs("div",{className:"sa-modal",onClick:G=>G.stopPropagation(),style:{maxHeight:"85vh",display:"flex",flexDirection:"column"},children:[n.jsx("h3",{style:{marginBottom:6},children:d._id?"Edit Department":"New Department"}),n.jsx("p",{className:"sa-modal-sub",children:"Enter department name; code is auto-generated."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:Y,style:{overflow:"auto",paddingRight:8},children:[n.jsxs("label",{children:["Department Name *",n.jsx("input",{name:"name",value:d.name,onChange:Q,placeholder:"e.g. Food & Beverage",required:!0})]}),n.jsxs("label",{children:["Code (auto)",n.jsx("input",{name:"code",value:d.code||Rr(d.name),onChange:()=>{},placeholder:"Auto-generated",disabled:!0,style:{background:"#f3f4f6"}})]}),o&&n.jsx("div",{className:"sa-modal-error",style:{marginTop:8},children:o}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!a&&u(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:a,children:a?"Saving...":d._id?"Update Department":"Save Department"})]})]})]})}),h&&m&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>_(!1),children:n.jsxs("div",{className:"sa-modal",onClick:G=>G.stopPropagation(),style:{maxWidth:600},children:[n.jsx("h3",{children:m.name}),n.jsx("p",{className:"sa-modal-sub",children:"Department details (read-only)"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:10},children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Name"}),n.jsx("div",{style:{color:"#374151"},children:m.name||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Code"}),n.jsx("div",{style:{color:"#374151"},children:m.code||"-"})]})]}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>_(!1),children:"Close"}),n.jsx("button",{type:"button",className:"sa-primary-button",onClick:()=>{_(!1),W(m)},children:"Edit"})]})]})})]})},Er="http://localhost:5000",Gu=[{_id:"dev_store_1",resort:"resort_1",name:"Main Store",code:"MAIN"},{_id:"dev_store_2",resort:"resort_1",name:"Bar Store",code:"BAR"},{_id:"dev_store_3",resort:"resort_1",name:"Cold Room",code:"COLD"},{_id:"dev_store_4",resort:"resort_2",name:"Housekeeping Store",code:"HK"},{_id:"dev_store_5",resort:"resort_2",name:"Engineering Store",code:"ENG"},{_id:"dev_store_6",resort:"resort_3",name:"F&B Store",code:"FB"},{_id:"dev_store_7",resort:"resort_3",name:"Banquet Store",code:"BANQ"},{_id:"dev_store_8",resort:"resort_4",name:"Pool Bar Store",code:"PBAR"},{_id:"dev_store_9",resort:"resort_4",name:"Linen Store",code:"LIN"},{_id:"dev_store_10",resort:"resort_5",name:"Outlet Store",code:"OUT"}],Ku=[{_id:"resort_1",name:"Resort A"},{_id:"resort_2",name:"Resort B"},{_id:"resort_3",name:"Resort C"},{_id:"resort_4",name:"Resort D"},{_id:"resort_5",name:"Resort E"}],$o=()=>({_id:void 0,resort:"",name:"",code:""}),Aj=()=>{const[e,t]=p.useState([]),[r,s]=p.useState([]),[a,i]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(""),[d,f]=p.useState(!1),[h,_]=p.useState($o()),[m,N]=p.useState(""),[E,y]=p.useState(""),[v,S]=p.useState(""),[w,$]=p.useState(!1),[O,W]=p.useState(""),Q=async()=>{try{i(!0),u("");const[P,A]=await Promise.all([H.get(`${Er}/api/stores`).catch(()=>({data:[]})),H.get(`${Er}/api/resorts`).catch(()=>({data:[]}))]),k=Array.isArray(P.data)?P.data:[],te=Array.isArray(A.data)?A.data:[],K=new Set(k.map(C=>C._id||C.id)),U=Gu.filter(C=>!K.has(C._id));t([...k,...U]),s(te.length?te:Ku)}catch(P){console.error("Failed to load stores/resorts",P),u("Failed to load stores; using sample data"),t(Gu),s(Ku)}finally{i(!1)}};p.useEffect(()=>{Q()},[]);const Y=P=>{if(!P)return"-";const A=r.find(k=>k._id===P||k.id===P||k.name===P);return A?A.name:P},M=p.useMemo(()=>e.filter(P=>{var A,k;return!(m&&P.resort!==m&&P.resort!==Y(m)||E&&!((A=P.name)!=null&&A.toLowerCase().includes(E.toLowerCase()))||v&&!((k=P.code)!=null&&k.toLowerCase().includes(v.toLowerCase())))}),[e,m,E,v,r]),ce=()=>{_($o()),u(""),f(!0)},G=P=>{_({_id:P._id||P.id,resort:P.resort||P.resortId||P.resortName||"",name:P.name||"",code:P.code||""}),u(""),f(!0)},L=P=>{const{name:A,value:k}=P.target;_(te=>({...te,[A]:k}))},I=async P=>{var A,k;if(P.preventDefault(),u(""),!h.resort||!h.name)return u("Resort and Store name required");try{l(!0);const te={resort:h.resort,name:h.name,code:h.code||void 0};if(h._id){const K=await H.put(`${Er}/api/stores/${h._id}`,te).catch(()=>null);K!=null&&K.data?t(U=>U.map(C=>C._id===h._id||C.id===h._id?K.data:C)):t(U=>U.map(C=>C._id===h._id||C.id===h._id?{...C,...te}:C))}else{const K=await H.post(`${Er}/api/stores`,te).catch(()=>null),U=(K==null?void 0:K.data)||{...te,_id:`local_${Date.now()}`};t(C=>[U,...C])}f(!1),_($o())}catch(te){console.error("save store error",te),u(((k=(A=te.response)==null?void 0:A.data)==null?void 0:k.message)||"Failed to save store")}finally{l(!1)}},T=async P=>{if(window.confirm(`Delete store ${P.name||P._id}?`))try{t(A=>A.filter(k=>(k._id||k.id)!==(P._id||P.id))),await H.delete(`${Er}/api/stores/${P._id||P.id}`).catch(()=>null)}catch(A){console.error("delete error",A),u("Failed to delete store"),await Q()}},q=P=>{if(W(""),!P)return;$(!0);const A=new FileReader;A.onload=async k=>{const K=k.target.result.split(/\r?\n/).map(re=>re.trim()).filter(Boolean);if(K.length<=1){W("CSV has no data"),$(!1);return}const U=K[0].split(",").map(re=>re.trim().toLowerCase()),C=["name","resort"];for(const re of C)if(!U.includes(re)){W(`CSV must include columns: ${C.join(",")}`),$(!1);return}const ie=[];for(let re=1;re<K.length;re++){const pe=K[re].split(",").map(_e=>_e.trim());if(pe.length===0)continue;const de={};for(let _e=0;_e<U.length;_e++)de[U[_e]]=pe[_e]??"";ie.push(de)}if(!ie.length){W("No rows found in CSV"),$(!1);return}const ne=ie.map(re=>({_id:`local_${Date.now()}_${Math.floor(Math.random()*1e4)}`,resort:re.resort,name:re.name,code:re.code||""}));t(re=>[...ne,...re]);try{for(const re of ie){const pe={resort:re.resort,name:re.name,code:re.code||void 0};try{await H.post(`${Er}/api/stores`,pe).catch(()=>null)}catch(de){console.warn("store csv create failed for",re,de)}}}catch(re){console.error("CSV create sequence failed",re)}finally{$(!1)}},A.onerror=()=>{W("Failed to read file"),$(!1)},A.readAsText(P)},z=P=>{const A=["resort","name","code"],te=[A.join(",")].concat(P.map(ie=>A.map(ne=>{let re=ie[ne];ne==="resort"&&(re=Y(ie.resort)||ie.resort);const pe=String(re??"");return pe.includes(",")||pe.includes(`
`)?`"${pe.replace(/"/g,'""')}"`:pe}).join(","))).join(`
`),K=new Blob([te],{type:"text/csv"}),U=URL.createObjectURL(K),C=document.createElement("a");C.href=U,C.download=`stores-export-${Date.now()}.csv`,C.click(),URL.revokeObjectURL(U)},B=p.useMemo(()=>{const P=new Map;for(const A of r)P.set(A._id||A.id||A.name,A.name);for(const A of e)A.resort&&!P.has(A.resort)&&P.set(A.resort,String(A.resort));return Array.from(P.entries()).map(([A,k])=>({id:A,name:k}))},[r,e]);return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Stores"}),n.jsx("p",{children:"Define physical stores for each resort to track inventory."})]}),n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[n.jsx("input",{type:"file",accept:".csv,text/csv",onChange:P=>{var k;const A=(k=P.target.files)==null?void 0:k[0];q(A),P.target.value=""},title:"Upload CSV (columns: resort,name,code)"}),n.jsx("span",{style:{marginLeft:6},children:w?"Uploading...":"Upload CSV"})]}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>z(M),children:"Export CSV"}),n.jsxs("button",{className:"sa-primary-button",type:"button",onClick:ce,children:[n.jsx("i",{className:"ri-add-line"})," New Store"]})]})]}),c&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:c}),O&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:O}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[n.jsxs("label",{children:["Resort",n.jsxs("select",{value:m,onChange:P=>N(P.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),B.map(P=>n.jsx("option",{value:P.id,children:P.name},P.id))]})]}),n.jsxs("label",{children:["Store Name",n.jsx("input",{value:E,onChange:P=>y(P.target.value),placeholder:"Search name...",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Code",n.jsx("input",{value:v,onChange:P=>S(P.target.value),placeholder:"Code...",style:{marginLeft:8}})]}),n.jsxs("div",{style:{marginLeft:"auto",color:"#9ca3af"},children:["Showing ",M.length," / ",e.length]})]}),n.jsx("div",{className:"sa-card",children:a?n.jsx("div",{children:"Loading stores..."}):M.length===0?n.jsx("div",{children:"No stores found. Try clearing filters or add a new store."}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Resort"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:M.map(P=>n.jsxs("tr",{children:[n.jsx("td",{children:Y(P.resort)}),n.jsx("td",{children:P.name}),n.jsx("td",{children:P.code}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("button",{className:"sa-secondary-button",onClick:()=>G(P),title:"Edit",children:n.jsx("i",{className:"ri-edit-line"})}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>{var A;(A=navigator.clipboard)==null||A.writeText(JSON.stringify(P))},title:"Copy JSON",children:n.jsx("i",{className:"ri-file-copy-line"})}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>T(P),title:"Delete",children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},P._id||P.id||`${P.resort}_${P.name}`))})]})}),d&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!o&&f(!1),children:n.jsxs("div",{className:"sa-modal",onClick:P=>P.stopPropagation(),children:[n.jsx("h3",{children:h._id?"Edit Store":"New Store"}),n.jsx("p",{className:"sa-modal-sub",children:"Add a physical store for a resort (Main Store / Bar Store / HK Store)."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:I,children:[n.jsxs("label",{children:["Resort",n.jsxs("select",{name:"resort",value:h.resort,onChange:L,required:!0,children:[n.jsx("option",{value:"",children:"Select resort"}),B.map(P=>n.jsx("option",{value:P.id,children:P.name},P.id))]})]}),n.jsxs("label",{children:["Store Name",n.jsx("input",{name:"name",value:h.name,onChange:L,placeholder:"Main Store / Bar Store...",required:!0})]}),n.jsxs("label",{children:["Code",n.jsx("input",{name:"code",value:h.code,onChange:L,placeholder:"MAIN / BAR / HK"})]}),c&&n.jsx("div",{className:"sa-modal-error",children:c}),n.jsxs("div",{className:"sa-modal-actions",children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!o&&f(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:o,children:o?"Saving...":h._id?"Update Store":"Save Store"})]})]})]})})]})},er="http://localhost:5000",Yu=[{_id:"dev_vendor_1",code:"FFP_1234",name:"FreshFoods",contactPerson:"Ravi Kumar",phone:"9876500011",whatsapp:"9876500011",email:"sales@freshfoods.com",addressLine1:"123 Food St.",city:"Mumbai",state:"Maharashtra",pincode:"400001",country:"India",vendorType:"Company",category:"Food",categories:["Food"],gstNumber:"27AAAAA0000A1Z5",panNumber:"AAAAA0000A",paymentTerms:"30 Days",creditLimit:"50000",paymentMode:"Bank Transfer",status:"Active",resorts:["resort_a"],notes:"Priority supplier"},{_id:"dev_vendor_2",code:"GLB_2345",name:"GlobalSupplies",phone:"9876500022",email:"contact@globalsupplies.com",city:"Goa",vendorType:"Distributor",category:"Housekeeping",categories:["Housekeeping"],status:"Active",resorts:[]}],Bo=()=>({_id:void 0,code:"",name:"",vendorType:"",categories:[],resorts:[],contactPerson:"",phone:"",whatsapp:"",alternatePhone:"",email:"",addressLine1:"",addressLine2:"",city:"",state:"",pincode:"",country:"",gstNumber:"",panNumber:"",fssaiNumber:"",paymentTerms:"",creditLimit:"",paymentMode:"",bankName:"",accountNumber:"",ifsc:"",branch:"",deliveryTime:"",minOrderQty:"",status:"Active",notes:""}),Tj=()=>{const[e,t]=p.useState([]),[r,s]=p.useState(!1),[a,i]=p.useState(!1),[o,l]=p.useState(""),[c,u]=p.useState(!1),[d,f]=p.useState(Bo()),[h,_]=p.useState({}),[m,N]=p.useState([]),[E,y]=p.useState([]),[v,S]=p.useState(""),[w,$]=p.useState(""),[O,W]=p.useState(""),[Q,Y]=p.useState(""),[M,ce]=p.useState(""),[G,L]=p.useState(""),[I,T]=p.useState(!1),q=async()=>{try{s(!0),l("");const j=await H.get(`${er}/api/vendors`).catch(()=>({data:[]})),oe=Array.isArray(j.data)?j.data:[],je=new Set(oe.map(xe=>xe._id||xe.id||xe.code)),ve=Yu.filter(xe=>!je.has(xe._id)&&!je.has(xe.code)),ee=oe.map(xe=>({...xe,categories:xe.categories&&Array.isArray(xe.categories)?xe.categories:xe.category?[xe.category]:[],resorts:xe.resorts&&Array.isArray(xe.resorts)?xe.resorts:xe.resort?[xe.resort]:[]}));t([...ee,...ve])}catch(j){console.error("load vendors error",j),l("Failed to load vendors; using sample data"),t(Yu)}finally{s(!1)}},z=async()=>{try{const j=await H.get(`${er}/api/item-categories`).catch(()=>({data:[]})),je=(Array.isArray(j.data)?j.data:[]).map(ve=>typeof ve=="string"?ve:ve.name||ve.code||JSON.stringify(ve));N(je)}catch(j){console.warn("Failed to load categories",j),N([])}},B=async()=>{try{const j=await H.get(`${er}/api/resorts`).catch(()=>({data:[]})),oe=Array.isArray(j.data)?j.data.map(ve=>({id:ve._id||ve.id||ve.code||ve.name,name:ve.name||ve.code||ve._id})):[],je=[{id:"resort_a",name:"Demo Resort A"},{id:"resort_b",name:"Demo Resort B"}];y(oe.length?oe:je)}catch(j){console.warn("Failed to load resorts",j),y([{id:"resort_a",name:"Demo Resort A"},{id:"resort_b",name:"Demo Resort B"}])}};p.useEffect(()=>{q(),z(),B()},[]);const P=j=>String(j||"").replace(/[^A-Za-z ]+/g,""),A=j=>String(j||"").replace(/\D+/g,""),k=j=>String(j||"").replace(/[^0-9.]/g,""),te=j=>j==null||String(j).trim()==="",K={name:/^[A-Za-z ]+$/,phone:/^\d{10}$/,whatsapp:/^\d{10}$/,alternatePhone:/^\d{10}$/,email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,gst:/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/,pan:/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,ifsc:/^[A-Z]{4}0[A-Z0-9]{6}$/,pincode:/^[1-9][0-9]{5}$/,accountNumber:/^[0-9]{6,20}$/,integer:/^\d+$/,decimal:/^\d+(\.\d+)?$/,codeAllowed:/^[A-Z0-9_]+$/},U=j=>{if(!j)return"";const oe=j.replace(/[^A-Za-z0-9 ]/g," ").split(/\s+/).filter(Boolean).slice(0,4);if(oe.length===0)return`VEND_${String(Date.now()).slice(-4)}`;const je=oe.map(Pe=>Pe[0].toUpperCase()).join(""),ve=String(Date.now()).slice(-4);let ee=`${je}_${ve}`;return new Set(e.map(Pe=>(Pe.code||"").toUpperCase())).has(ee)?`${je}_${ve}${Math.floor(Math.random()*90+10)}`:ee},C=j=>{if(!j)return j;const oe=j.toUpperCase(),je=new Set(e.map(ve=>(ve.code||"").toUpperCase()));if(!je.has(oe))return oe;for(let ve=1;ve<1e3;ve++){const ee=`${oe}_${ve}`;if(!je.has(ee))return ee}return`${oe}_${Date.now().toString().slice(-4)}`},ie={code:j=>{if(!j)return"Vendor code is required";if(!K.codeAllowed.test(String(j).toUpperCase()))return"Code may contain only A-Z,0-9 and underscore"},name:j=>{if(!j)return"Vendor name is required";if(!K.name.test(String(j).trim()))return"Name must contain only letters and spaces"},phone:j=>{if(!te(j)&&!K.phone.test(String(j).trim()))return"Phone must be exactly 10 digits"},whatsapp:j=>{if(!te(j)&&!K.whatsapp.test(String(j).trim()))return"WhatsApp must be exactly 10 digits"},alternatePhone:j=>{if(!te(j)&&!K.alternatePhone.test(String(j).trim()))return"Alternate phone must be exactly 10 digits"},email:j=>{if(!te(j)&&!K.email.test(String(j).trim()))return"Invalid email format"},gstNumber:j=>{if(!te(j)&&!K.gst.test(String(j).trim()))return"GSTIN invalid (must follow 15-char GSTIN pattern)"},panNumber:j=>{if(!te(j)&&!K.pan.test(String(j).trim()))return"PAN invalid (format AAAAA9999A)"},ifsc:j=>{if(!te(j)&&!K.ifsc.test(String(j).trim()))return"IFSC invalid (e.g. SBIN0000001)"},pincode:j=>{if(!te(j)&&!K.pincode.test(String(j).trim()))return"Pincode must be 6 digits and not start with 0"},accountNumber:j=>{if(!te(j)&&!K.accountNumber.test(String(j).trim()))return"Account number must be 6-20 digits"},creditLimit:j=>{if(!te(j)&&!K.decimal.test(String(j).trim()))return"Credit limit must be a number"},deliveryTime:j=>{if(!te(j)&&!K.integer.test(String(j).trim()))return"Delivery time must be whole days (integer)"},minOrderQty:j=>{if(!te(j)&&!K.integer.test(String(j).trim()))return"MOQ must be a whole number"},category:j=>{if(!j||!Array.isArray(j)||j.length===0)return"At least one category is required"}},ne=()=>{const j={};return Object.keys(ie).forEach(oe=>{const je=oe==="category"?d.categories:d[oe],ve=ie[oe](je);ve&&(j[oe]=ve)}),_(j),Object.keys(j).length===0},re=()=>{f(Bo()),_({}),l(""),u(!0)},pe=j=>{f({_id:j._id||j.id,code:j.code||"",name:j.name||"",vendorType:j.vendorType||"",categories:j.categories&&Array.isArray(j.categories)?j.categories:j.category?[j.category]:[],resorts:j.resorts&&Array.isArray(j.resorts)?j.resorts:j.resort?[j.resort]:[],contactPerson:j.contactPerson||"",phone:j.phone||"",whatsapp:j.whatsapp||"",alternatePhone:j.alternatePhone||"",email:j.email||"",addressLine1:j.addressLine1||"",addressLine2:j.addressLine2||"",city:j.city||j.address||"",state:j.state||"",pincode:j.pincode||"",country:j.country||"",gstNumber:j.gstNumber||"",panNumber:j.panNumber||"",fssaiNumber:j.fssaiNumber||"",paymentTerms:j.paymentTerms||"",creditLimit:j.creditLimit||"",paymentMode:j.paymentMode||"",bankName:j.bankName||"",accountNumber:j.accountNumber||"",ifsc:j.ifsc||"",branch:j.branch||"",deliveryTime:j.deliveryTime||"",minOrderQty:j.minOrderQty||"",status:j.status||"Active",notes:j.notes||""}),_({}),l(""),u(!0)},de=j=>{const{name:oe,value:je}=j.target;f(ve=>{let ee=je;oe==="name"||oe==="contactPerson"?ee=P(je):oe==="phone"||oe==="whatsapp"||oe==="alternatePhone"||oe==="pincode"||oe==="accountNumber"||oe==="minOrderQty"||oe==="deliveryTime"?ee=A(je):oe==="creditLimit"?ee=k(je):oe==="code"&&(ee=String(je||"").toUpperCase().replace(/\s+/g,"_").replace(/[^A-Z0-9_]/g,""));const xe={...ve,[oe]:ee};if(oe==="name"&&(ve.code===""||ve.code===void 0)){const Pe=U(ee);xe.code=C(Pe)}return xe}),_(ve=>{const ee={...ve};return delete ee[oe],ee})},_e=j=>{f(oe=>{const je=new Set(oe.categories||[]);je.has(j)?je.delete(j):je.add(j);const ve={...oe,categories:Array.from(je)};return _(ee=>{const xe={...ee};return delete xe.category,xe}),ve})},he=j=>{f(oe=>{const je=new Set(oe.resorts||[]);return je.has(j)?je.delete(j):je.add(j),{...oe,resorts:Array.from(je)}})},F=(j,oe)=>{j.preventDefault();const je=(j.clipboardData||window.clipboardData).getData("text"),ve=P(je);f(ee=>{const xe={...ee,[oe]:ve};return oe==="name"&&(ee.code===""||ee.code===void 0)&&(xe.code=C(U(ve))),xe}),_(ee=>{const xe={...ee};return delete xe[oe],xe})},me=(j,oe,je)=>{j.preventDefault();const ve=(j.clipboardData||window.clipboardData).getData("text");let ee=A(ve);je&&(ee=ee.slice(0,je)),f(xe=>({...xe,[oe]:ee})),_(xe=>{const Pe={...xe};return delete Pe[oe],Pe})},se=(j,oe)=>{j.preventDefault();const je=(j.clipboardData||window.clipboardData).getData("text"),ve=k(je);f(ee=>({...ee,[oe]:ve})),_(ee=>{const xe={...ee};return delete xe[oe],xe})},Ee=()=>{const j=U(d.name||"");f(oe=>({...oe,code:C(j)})),_(oe=>{const je={...oe};return delete je.code,je})},be=async j=>{var oe,je;if(j.preventDefault(),l(""),!ne()){l("Please fix validation errors.");return}try{i(!0);const ve={...d,categories:d.categories||[],resorts:d.resorts||[]};if(!ve.category&&ve.categories&&ve.categories.length&&(ve.category=ve.categories[0]),ve.code||delete ve.code,d._id){const ee=await H.put(`${er}/api/vendors/${d._id}`,ve).catch(()=>null);if(ee!=null&&ee.data){const xe={...ee.data,categories:ee.data.categories||(ee.data.category?[ee.data.category]:[]),resorts:ee.data.resorts||(ee.data.resort?[ee.data.resort]:[])};t(Pe=>Pe.map(De=>De._id===d._id||De.id===d._id?xe:De))}else{const xe={...e.find(Pe=>Pe._id===d._id)||{},...ve};t(Pe=>Pe.map(De=>De._id===d._id||De.id===d._id?xe:De))}}else{ve.code=C(String(ve.code||"").toUpperCase());const ee=await H.post(`${er}/api/vendors`,ve).catch(()=>null),xe=(ee==null?void 0:ee.data)||{...ve,_id:`local_${Date.now()}`};xe.categories=xe.categories||(xe.category?[xe.category]:[]),xe.resorts=xe.resorts||(xe.resort?[xe.resort]:[]),t(Pe=>[xe,...Pe])}u(!1),f(Bo()),_({})}catch(ve){console.error("save vendor error",ve),l(((je=(oe=ve==null?void 0:ve.response)==null?void 0:oe.data)==null?void 0:je.message)||"Failed to save vendor")}finally{i(!1)}},D=async j=>{if(window.confirm(`Delete vendor ${j.name||j.code}?`))try{t(oe=>oe.filter(je=>(je._id||je.id||je.code)!==(j._id||j.id||j.code))),await H.delete(`${er}/api/vendors/${j._id||j.id||j.code}`).catch(()=>null)}catch(oe){console.error("delete vendor error",oe),l("Failed to delete vendor"),await q()}},Z=j=>{if(L(""),!j)return;T(!0);const oe=new FileReader;oe.onload=async je=>{const ee=je.target.result.split(/\r?\n/).map(R=>R.trim()).filter(Boolean);if(ee.length===0){L("Empty CSV file"),T(!1);return}const xe=ee[0].split(",").map(R=>R.trim().toLowerCase()),Pe=new Set(xe);if(!Pe.has("code")||!Pe.has("name")){L("CSV must contain at least: code,name columns"),T(!1);return}const De=[];for(let R=1;R<ee.length;R++){const J=ee[R].split(",").map(le=>le.trim());if(J.length===0)continue;const ge={};for(let le=0;le<xe.length;le++)ge[xe[le]]=J[le]??"";De.push(ge)}if(De.length===0){L("No data rows in CSV"),T(!1);return}const b=De.map(R=>{const J=R.name||"",ge=R.code||U(J),le=R.categories||R.category||"",we=le?le.split(/[,;]+/).map(qe=>qe.trim()).filter(Boolean):[],Ie=R.resorts||R.resort||"",Be=Ie?Ie.split(/[,;]+/).map(qe=>qe.trim()).filter(Boolean):[];return{code:C(String(ge).toUpperCase()),name:J,vendorType:R.vendortype||R.vendor_type||"",categories:we,category:we.length?we[0]:"",resorts:Be,contactPerson:R.contactperson||R.contact_person||R.contact||"",phone:R.phone||R.contact||"",whatsapp:R.whatsapp||"",alternatePhone:R.alternatephone||R.altphone||R.alt_phone||"",email:R.email||"",addressLine1:R.address||"",addressLine2:R.addressline2||"",city:R.city||"",state:R.state||"",pincode:R.pincode||"",country:R.country||"",gstNumber:R.gstnumber||"",panNumber:R.pannumber||"",paymentTerms:R.paymentterms||"",creditLimit:R.creditlimit||"",paymentMode:R.paymentmode||"",bankName:R.bankname||"",accountNumber:R.accountnumber||"",ifsc:R.ifsc||"",branch:R.branch||"",deliveryTime:R.deliverytime||"",minOrderQty:R.minqty||"",status:R.status||"Active",notes:R.notes||""}}),g=b.map(R=>({...R,_id:`local_${Date.now()}_${Math.floor(Math.random()*1e3)}`}));t(R=>[...g,...R]);try{for(const R of b)try{const J=await H.post(`${er}/api/vendors`,R).catch(()=>null);J!=null&&J.data&&t(ge=>ge.map(le=>le.code===R.code?J.data:le))}catch(J){console.warn("vendor CSV create failed for",R.code,J)}}catch(R){console.error("CSV bulk create error",R)}finally{T(!1)}},oe.onerror=()=>{L("Failed to read file"),T(!1)},oe.readAsText(j)},ae=j=>{const oe=["code","name","vendorType","categories","resorts","contactPerson","phone","whatsapp","alternatePhone","email","addressLine1","addressLine2","city","state","pincode","country","gstNumber","panNumber","fssaiNumber","paymentTerms","creditLimit","paymentMode","bankName","accountNumber","ifsc","branch","deliveryTime","minOrderQty","status","notes"],ve=[oe.join(","),...j.map(De=>oe.map(b=>{const g=b==="categories"?Array.isArray(De.categories)?De.categories.join(";"):De.categories||De.category||"":b==="resorts"?Array.isArray(De.resorts)?De.resorts.join(";"):De.resorts||De.resort||"":String(De[b]??"");return g.includes(",")||g.includes(`
`)?`"${g.replace(/"/g,'""')}"`:g}).join(","))].join(`
`),ee=new Blob([ve],{type:"text/csv"}),xe=URL.createObjectURL(ee),Pe=document.createElement("a");Pe.href=xe,Pe.download=`vendors-export-${Date.now()}.csv`,Pe.click(),URL.revokeObjectURL(xe)},Re=p.useMemo(()=>e.filter(j=>{var oe,je,ve,ee,xe;return!(v&&!((oe=j.name)!=null&&oe.toLowerCase().includes(v.toLowerCase()))||w&&!((je=j.code)!=null&&je.toLowerCase().includes(w.toLowerCase()))||O&&!((ve=j.city)!=null&&ve.toLowerCase().includes(O.toLowerCase()))||Q&&!((ee=j.phone)!=null&&ee.toLowerCase().includes(Q.toLowerCase()))||M&&!((xe=j.email)!=null&&xe.toLowerCase().includes(M.toLowerCase())))}),[e,v,w,O,Q,M]),Oe=p.useMemo(()=>Array.from(new Set(e.map(j=>j.city).filter(Boolean))),[e]),Te=j=>{const oe=E.find(je=>je.id===j||je._id===j||je.id===String(j));return oe?oe.name:j};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Vendors"}),n.jsx("p",{children:"Approved suppliers for all resort purchases."})]}),n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[n.jsx("input",{type:"file",accept:".csv,text/csv",onChange:j=>{var je;const oe=(je=j.target.files)==null?void 0:je[0];Z(oe),j.target.value=""},title:"Upload CSV (columns: code,name,... )"}),I?n.jsx("span",{style:{marginLeft:6},children:"Uploading..."}):n.jsx("span",{style:{marginLeft:6},children:"Upload CSV"})]}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>ae(Re),children:"Export CSV"}),n.jsxs("button",{className:"sa-primary-button",type:"button",onClick:re,children:[n.jsx("i",{className:"ri-add-line"})," New Vendor"]})]})]}),o&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:o}),G&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:G}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[n.jsxs("label",{children:["Name",n.jsx("input",{value:v,onChange:j=>S(j.target.value),placeholder:"Search name...",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Code",n.jsx("input",{value:w,onChange:j=>$(j.target.value),placeholder:"Code...",style:{marginLeft:8}})]}),n.jsxs("label",{children:["City",n.jsxs("select",{value:O,onChange:j=>W(j.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),Oe.map(j=>n.jsx("option",{value:j,children:j},j))]})]}),n.jsxs("label",{children:["Phone",n.jsx("input",{value:Q,onChange:j=>Y(j.target.value),placeholder:"Phone...",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Email",n.jsx("input",{value:M,onChange:j=>ce(j.target.value),placeholder:"Email...",style:{marginLeft:8}})]}),n.jsxs("div",{style:{marginLeft:"auto",color:"#9ca3af"},children:["Showing ",Re.length," / ",e.length]})]}),n.jsx("div",{className:"sa-card",children:r?n.jsx("div",{children:"Loading vendors..."}):Re.length===0?n.jsx("div",{children:"No vendors match the filters. Add vendor or try clearing filters."}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Vendor Name"}),n.jsx("th",{children:"Contact"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Categories"}),n.jsx("th",{children:"Resorts"}),n.jsx("th",{children:"GST"}),n.jsx("th",{children:"Payment Terms"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:Re.map(j=>n.jsxs("tr",{children:[n.jsx("td",{children:j.code}),n.jsx("td",{children:j.name}),n.jsxs("td",{children:[j.contactPerson?n.jsx("div",{children:j.contactPerson}):null,n.jsxs("div",{children:[j.phone,j.whatsapp?` (wa: ${j.whatsapp})`:""]})]}),n.jsx("td",{children:j.email}),n.jsx("td",{children:j.city}),n.jsx("td",{children:Array.isArray(j.categories)?j.categories.join(", "):j.category||""}),n.jsx("td",{children:Array.isArray(j.resorts)?j.resorts.map(Te).join(", "):j.resort?Te(j.resort):""}),n.jsx("td",{children:j.gstNumber}),n.jsx("td",{children:j.paymentTerms}),n.jsx("td",{children:j.status}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("button",{className:"sa-secondary-button",onClick:()=>pe(j),title:"Edit",children:n.jsx("i",{className:"ri-edit-line"})}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>{var oe;(oe=navigator.clipboard)==null||oe.writeText(JSON.stringify(j))},title:"Copy JSON",children:n.jsx("i",{className:"ri-file-copy-line"})}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>D(j),title:"Delete",children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},j._id||j.id||j.code))})]})}),c&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!a&&u(!1),children:n.jsxs("div",{className:"sa-modal",onClick:j=>j.stopPropagation(),style:{maxWidth:980},children:[n.jsx("h3",{children:d._id?"Edit Vendor":"New Vendor"}),n.jsx("p",{className:"sa-modal-sub",children:"Add or update a supplier used in purchase orders. (Strict validations enabled)"}),n.jsxs("form",{className:"sa-modal-form",onSubmit:be,children:[n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[n.jsxs("label",{style:{flex:1},children:["Vendor Name *",n.jsx("input",{name:"name",value:d.name,onChange:de,onPaste:j=>F(j,"name"),placeholder:"Only letters and spaces"}),h.name&&n.jsx("div",{className:"sa-field-error",children:h.name})]}),n.jsxs("label",{style:{width:260},children:["Code *",n.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[n.jsx("input",{name:"code",value:d.code,onChange:de,onPaste:j=>{j.preventDefault();const oe=(j.clipboardData||window.clipboardData).getData("text"),je=String(oe||"").toUpperCase().replace(/\s+/g,"_").replace(/[^A-Z0-9_]/g,"");f(ve=>({...ve,code:C(je)})),_(ve=>{const ee={...ve};return delete ee.code,ee})},placeholder:"Auto generated from name"}),n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:Ee,children:"Generate"})]}),h.code&&n.jsx("div",{className:"sa-field-error",children:h.code})]})]}),n.jsxs("label",{children:["Vendor Type",n.jsxs("select",{name:"vendorType",value:d.vendorType,onChange:de,children:[n.jsx("option",{value:"",children:"Select type"}),n.jsx("option",{value:"Company",children:"Company"}),n.jsx("option",{value:"Individual",children:"Individual"}),n.jsx("option",{value:"Distributor",children:"Distributor"}),n.jsx("option",{value:"Manufacturer",children:"Manufacturer"})]})]}),n.jsxs("label",{children:["Categories * (select one or more)",n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:6},children:m.length===0?n.jsx("div",{style:{color:"#9ca3af"},children:"(no categories)"}):m.map(j=>n.jsxs("label",{style:{display:"flex",gap:6,alignItems:"center"},children:[n.jsx("input",{type:"checkbox",checked:d.categories.includes(j),onChange:()=>_e(j)}),n.jsx("span",{children:j})]},j))}),h.category&&n.jsx("div",{className:"sa-field-error",children:h.category})]}),n.jsxs("label",{children:["Resorts (which this vendor supplies)  select one or more",n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:6},children:E.map(j=>n.jsxs("label",{style:{display:"flex",gap:6,alignItems:"center"},children:[n.jsx("input",{type:"checkbox",checked:(d.resorts||[]).includes(j.id),onChange:()=>he(j.id)}),n.jsx("span",{children:j.name})]},j.id))})]}),n.jsxs("label",{children:["Contact Person",n.jsx("input",{name:"contactPerson",value:d.contactPerson,onChange:de,onPaste:j=>F(j,"contactPerson"),placeholder:"Only letters and spaces"}),d.contactPerson&&!/^[A-Za-z ]+$/.test(String(d.contactPerson).trim())&&n.jsx("div",{className:"sa-field-error",children:"Contact person must be letters and spaces only"})]}),n.jsxs("label",{children:["Phone",n.jsx("input",{name:"phone",value:d.phone,onChange:de,onPaste:j=>me(j,"phone",10),placeholder:"10 digits"}),h.phone&&n.jsx("div",{className:"sa-field-error",children:h.phone})]}),n.jsxs("label",{children:["WhatsApp",n.jsx("input",{name:"whatsapp",value:d.whatsapp,onChange:de,onPaste:j=>me(j,"whatsapp",10),placeholder:"10 digits"}),h.whatsapp&&n.jsx("div",{className:"sa-field-error",children:h.whatsapp})]}),n.jsxs("label",{children:["Alternate Phone",n.jsx("input",{name:"alternatePhone",value:d.alternatePhone,onChange:de,onPaste:j=>me(j,"alternatePhone",10),placeholder:"10 digits"}),h.alternatePhone&&n.jsx("div",{className:"sa-field-error",children:h.alternatePhone})]}),n.jsxs("label",{children:["Email",n.jsx("input",{type:"email",name:"email",value:d.email,onChange:de,placeholder:"vendor@example.com"}),h.email&&n.jsx("div",{className:"sa-field-error",children:h.email})]}),n.jsxs("label",{children:["Address Line 1",n.jsx("input",{name:"addressLine1",value:d.addressLine1,onChange:de})]}),n.jsxs("label",{children:["Address Line 2",n.jsx("input",{name:"addressLine2",value:d.addressLine2,onChange:de})]}),n.jsxs("label",{children:["City",n.jsx("input",{name:"city",value:d.city,onChange:de})]}),n.jsxs("label",{children:["State",n.jsx("input",{name:"state",value:d.state,onChange:de})]}),n.jsxs("label",{children:["Pincode",n.jsx("input",{name:"pincode",value:d.pincode,onChange:de,onPaste:j=>me(j,"pincode",6),placeholder:"6 digits"}),h.pincode&&n.jsx("div",{className:"sa-field-error",children:h.pincode})]}),n.jsxs("label",{children:["Country",n.jsx("input",{name:"country",value:d.country,onChange:de})]}),n.jsxs("label",{children:["GST Number",n.jsx("input",{name:"gstNumber",value:d.gstNumber,onChange:de,placeholder:"15 char GSTIN"}),h.gstNumber&&n.jsx("div",{className:"sa-field-error",children:h.gstNumber})]}),n.jsxs("label",{children:["PAN Number",n.jsx("input",{name:"panNumber",value:d.panNumber,onChange:de,placeholder:"PAN (AAAAA9999A)"}),h.panNumber&&n.jsx("div",{className:"sa-field-error",children:h.panNumber})]}),n.jsxs("label",{children:["FSSAI Number",n.jsx("input",{name:"fssaiNumber",value:d.fssaiNumber,onChange:de})]}),n.jsxs("label",{children:["Payment Terms",n.jsxs("select",{name:"paymentTerms",value:d.paymentTerms,onChange:de,children:[n.jsx("option",{value:"",children:"Select"}),n.jsx("option",{value:"Advance",children:"Advance"}),n.jsx("option",{value:"7 Days",children:"7 Days"}),n.jsx("option",{value:"15 Days",children:"15 Days"}),n.jsx("option",{value:"30 Days",children:"30 Days"})]})]}),n.jsxs("label",{children:["Credit Limit",n.jsx("input",{name:"creditLimit",value:d.creditLimit,onChange:de,onPaste:j=>se(j,"creditLimit"),placeholder:"Numeric"}),h.creditLimit&&n.jsx("div",{className:"sa-field-error",children:h.creditLimit})]}),n.jsxs("label",{children:["Payment Mode",n.jsx("input",{name:"paymentMode",value:d.paymentMode,onChange:de,placeholder:"UPI / Bank / Cash"})]}),n.jsxs("label",{children:["Bank Name",n.jsx("input",{name:"bankName",value:d.bankName,onChange:de})]}),n.jsxs("label",{children:["Account Number",n.jsx("input",{name:"accountNumber",value:d.accountNumber,onChange:de,onPaste:j=>me(j,"accountNumber",20),placeholder:"6-20 digits"}),h.accountNumber&&n.jsx("div",{className:"sa-field-error",children:h.accountNumber})]}),n.jsxs("label",{children:["IFSC",n.jsx("input",{name:"ifsc",value:d.ifsc,onChange:de,placeholder:"IFSC"}),h.ifsc&&n.jsx("div",{className:"sa-field-error",children:h.ifsc})]}),n.jsxs("label",{children:["Branch",n.jsx("input",{name:"branch",value:d.branch,onChange:de})]}),n.jsxs("label",{children:["Delivery Time (days)",n.jsx("input",{name:"deliveryTime",value:d.deliveryTime,onChange:de,onPaste:j=>me(j,"deliveryTime"),placeholder:"Integer days"}),h.deliveryTime&&n.jsx("div",{className:"sa-field-error",children:h.deliveryTime})]}),n.jsxs("label",{children:["Minimum Order Qty",n.jsx("input",{name:"minOrderQty",value:d.minOrderQty,onChange:de,onPaste:j=>me(j,"minOrderQty"),placeholder:"Integer"}),h.minOrderQty&&n.jsx("div",{className:"sa-field-error",children:h.minOrderQty})]}),n.jsxs("label",{children:["Status",n.jsxs("select",{name:"status",value:d.status,onChange:de,children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"}),n.jsx("option",{value:"Blacklisted",children:"Blacklisted"})]})]}),n.jsxs("label",{children:["Notes",n.jsx("textarea",{name:"notes",value:d.notes,onChange:de,rows:3})]}),o&&n.jsx("div",{className:"sa-modal-error",children:o}),n.jsxs("div",{className:"sa-modal-actions",children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!a&&u(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:a,children:a?"Saving...":d._id?"Update Vendor":"Save Vendor"})]})]})]})})]})},tr="http://localhost:5000",Ju=[{_id:"dev_item_1",code:"RICE1",name:"Basmati Rice 5kg",itemCategory:"Pantry",uom:"Kg",brand:"GrainCo",indicativePrice:60},{_id:"dev_item_2",code:"OIL1L",name:"Sunflower Oil 1L",itemCategory:"Cooking Oil",uom:"Ltr",brand:"OilPure",indicativePrice:120},{_id:"dev_item_3",code:"SALT1",name:"Iodized Salt 1kg",itemCategory:"Pantry",uom:"Kg",brand:"SaltWell",indicativePrice:25},{_id:"dev_item_4",code:"MIL1L",name:"Fresh Milk 1L",itemCategory:"Dairy",uom:"Ltr",brand:"DairyBest",indicativePrice:45},{_id:"dev_item_5",code:"EGG12",name:"Eggs Pack 12",itemCategory:"Dairy",uom:"Nos",brand:"FarmFresh",indicativePrice:70},{_id:"dev_item_6",code:"SUGAR5",name:"Sugar 5kg",itemCategory:"Pantry",uom:"Kg",brand:"SweetCo",indicativePrice:40},{_id:"dev_item_7",code:"SOAP1L",name:"Liquid Soap 1L",itemCategory:"Cleaning",uom:"Ltr",brand:"CleanPro",indicativePrice:90},{_id:"dev_item_8",code:"BREAD1",name:"Bread Loaf",itemCategory:"Bakery",uom:"Nos",brand:"BakeHouse",indicativePrice:35},{_id:"dev_item_9",code:"CHICK1",name:"Chicken (1kg)",itemCategory:"Meat",uom:"Kg",brand:"PoultryKing",indicativePrice:200},{_id:"dev_item_10",code:"CUPP100",name:"Disposable Cups 100pcs",itemCategory:"Housekeeping",uom:"Nos",brand:"PackIt",indicativePrice:50}],zo=["GrainCo","OilPure","SaltWell","DairyBest","FarmFresh","SweetCo","CleanPro","BakeHouse","PoultryKing","PackIt"],Vo=["Pantry","Cooking Oil","Dairy","Cleaning","Bakery","Meat","Housekeeping"],Zu=["Kg","Ltr","Nos"],Qo=()=>({_id:void 0,name:"",code:"",itemCategory:"",uom:"",brand:"",indicativePrice:""}),Lj=()=>{const[e,t]=p.useState([]),[r,s]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState(!1),[c,u]=p.useState(!1),[d,f]=p.useState(""),[h,_]=p.useState(!1),[m,N]=p.useState(Qo()),[E,y]=p.useState(""),[v,S]=p.useState(""),[w,$]=p.useState(""),[O,W]=p.useState(""),[Q,Y]=p.useState(""),[M,ce]=p.useState(""),[G,L]=p.useState(!1),I=async()=>{try{l(!0),f("");const[U,C,ie]=await Promise.all([H.get(`${tr}/api/items`).catch(()=>({data:[]})),H.get(`${tr}/api/item-categories`).catch(()=>({data:[]})),H.get(`${tr}/api/brands`).catch(()=>({data:[]}))]),ne=Array.isArray(U.data)?U.data.map(he=>({_id:he._id||he.id||void 0,code:he.code||he._id||he.id||"",name:he.name||"",itemCategory:he.itemCategory||he.item_category||he.category||"",uom:he.uom||he.measurement||"",brand:he.brand||he.manufacturer||"",indicativePrice:he.indicativePrice??he.indicative_price??he.price??(typeof he.indicative=="number"?he.indicative:void 0)??""})):[],re=new Set(ne.map(he=>(he.code||"").toString())),pe=Ju.filter(he=>!re.has(he.code));t([...ne,...pe]);const de=Array.isArray(C.data)?C.data.map(he=>typeof he=="string"?he:he.name||he.code||he._id||he.id):[];s(de.length?Array.from(new Set(de)):Vo);const _e=Array.isArray(ie.data)?ie.data.map(he=>typeof he=="string"?he:he.name||he.code||he._id||he.id):[];i(_e.length?Array.from(new Set(_e)):zo)}catch(U){console.error("load items error",U),f("Failed to load items; using sample data"),t(Ju),s(Vo),i(zo)}finally{l(!1)}};p.useEffect(()=>{I()},[]);const T=()=>{N(Qo()),f(""),_(!0)},q=U=>{N({_id:U._id||U.id,code:U.code||"",name:U.name||"",itemCategory:U.itemCategory||"",uom:U.uom||"",brand:U.brand||"",indicativePrice:U.indicativePrice??""}),f(""),_(!0)},z=U=>{const{name:C,value:ie}=U.target;N(ne=>({...ne,[C]:ie}))},B=async U=>{var C,ie,ne,re;if(U.preventDefault(),f(""),!((C=m.name)!=null&&C.trim())||!((ie=m.code)!=null&&ie.trim())||!m.uom){f("Item Name, Code & Measurement (UOM) required");return}try{u(!0);const pe={name:m.name.trim(),code:m.code.trim(),itemCategory:m.itemCategory||"",uom:m.uom,brand:m.brand||"",indicativePrice:m.indicativePrice?Number(m.indicativePrice):void 0};if(m._id){const de=await H.put(`${tr}/api/items/${m._id}`,pe).catch(()=>null);de!=null&&de.data?t(_e=>_e.map(he=>he._id===m._id||he.id===m._id?de.data:he)):t(_e=>_e.map(he=>he._id===m._id||he.id===m._id?{...he,...pe}:he))}else{const de=await H.post(`${tr}/api/items`,pe).catch(()=>null),_e=de!=null&&de.data?de.data:{...pe,_id:`local_${Date.now()}`};t(he=>[_e,...he])}m.brand&&!a.includes(m.brand)&&i(de=>[m.brand,...de]),_(!1),N(Qo())}catch(pe){console.error("save error",pe),f(((re=(ne=pe.response)==null?void 0:ne.data)==null?void 0:re.message)||"Failed to save item")}finally{u(!1)}},P=async U=>{if(window.confirm(`Delete item ${U.name||U.code}?`))try{t(C=>C.filter(ie=>(ie._id||ie.id||ie.code)!==(U._id||U.id||U.code))),await H.delete(`${tr}/api/items/${U._id||U.id||U.code}`).catch(()=>null)}catch(C){console.error("delete item error",C),f("Failed to delete item"),await I()}},A=p.useMemo(()=>e.filter(U=>{var C,ie;return!(E&&!((C=U.name)!=null&&C.toLowerCase().includes(E.toLowerCase()))||v&&!((ie=U.code)!=null&&ie.toLowerCase().includes(v.toLowerCase()))||w&&(U.itemCategory||"").toLowerCase()!==w.toLowerCase()||O&&(U.uom||"").toLowerCase()!==O.toLowerCase()||Q&&(U.brand||"").toLowerCase()!==Q.toLowerCase())}),[e,E,v,w,O,Q]),k=U=>{if(ce(""),!U)return;L(!0);const C=new FileReader;C.onload=async ie=>{const pe=ie.target.result.split(/\r?\n/).map(se=>se.trim()).filter(Boolean).filter(se=>!se.startsWith("#"));if(pe.length===0){ce("Empty CSV"),L(!1);return}const de=pe[0].split(",").map(se=>se.trim().toLowerCase()),_e=new Set(de);if(!_e.has("code")||!_e.has("name")||!_e.has("uom")){ce("CSV must contain at least: code, name, uom columns"),L(!1);return}const he=[];for(let se=1;se<pe.length;se++){const Ee=pe[se].split(",").map(D=>D.trim());if(Ee.length===0)continue;const be={};for(let D=0;D<de.length;D++)be[de[D]]=Ee[D]??"";he.push(be)}if(he.length===0){ce("No data rows found in CSV"),L(!1);return}const F=he.map(se=>({code:se.code,name:se.name,itemCategory:se.itemcategory||se.itemCategory||"",uom:se.uom,brand:se.brand||"",indicativePrice:se.indicativeprice?Number(se.indicativeprice):void 0})),me=F.map(se=>({...se,_id:`local_${Date.now()}_${Math.floor(Math.random()*1e3)}`}));t(se=>[...se,...me]);try{for(const se of F)try{const Ee=await H.post(`${tr}/api/items`,se).catch(()=>null);Ee!=null&&Ee.data&&t(be=>be.map(D=>{var Z;return(Z=D._id)!=null&&Z.startsWith("local_")&&D.code===se.code?Ee.data:D}))}catch(Ee){console.warn("failed to create item from CSV:",se.code,Ee)}}catch(se){console.error("CSV upload server error",se)}finally{L(!1)}},C.onerror=()=>{ce("Failed to read file"),L(!1)},C.readAsText(U)},te=()=>{const U=["code","name","itemCategory","uom","brand","indicativePrice"],ie=[U.join(",")].concat(A.map(de=>U.map(_e=>{const he=de[_e]??"",F=String(he??"");return F.includes(",")||F.includes(`
`)?`"${F.replace(/"/g,'""')}"`:F}).join(","))).join(`
`),ne=new Blob([ie],{type:"text/csv"}),re=URL.createObjectURL(ne),pe=document.createElement("a");pe.href=re,pe.download=`items-export-${Date.now()}.csv`,pe.click(),URL.revokeObjectURL(re)},K=()=>{var F;const U=["code","name","itemCategory","uom","brand","indicativePrice"],C=["RICE1","Basmati Rice 5kg","Pantry","Kg","GrainCo","60"],ie=r.length?r:Vo,ne=a.length?a:zo,re=[];re.push(U.join(",")),re.push(C.join(",")),re.push(`#CATEGORIES:${ie.join("|")}`),re.push(`#BRANDS:${ne.join("|")}`);const pe=re.join(`
`),de=new Blob([pe],{type:"text/csv"}),_e=URL.createObjectURL(de),he=document.createElement("a");he.href=_e,he.download=`items-csv-format-${Date.now()}.csv`,he.click(),URL.revokeObjectURL(_e);try{(F=navigator.clipboard)==null||F.writeText(pe),alert("CSV format downloaded and copied to clipboard (categories & brands provided in metadata lines).")}catch{alert("CSV format downloaded. (If supported, format was also copied to clipboard.)")}};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Items"}),n.jsx("p",{children:"Central item master  Item Category, Brand, UOM and Indicative Price."})]}),n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[n.jsx("input",{type:"file",accept:".csv,text/csv",onChange:U=>{var ie;const C=(ie=U.target.files)==null?void 0:ie[0];k(C),U.target.value=""},title:"Upload CSV (columns: code,name,itemCategory,uom,brand,indicativePrice)"}),G?n.jsx("span",{style:{marginLeft:6},children:"Uploading..."}):n.jsx("span",{style:{marginLeft:6},children:"Upload CSV"})]}),n.jsx("button",{className:"sa-secondary-button",onClick:K,title:"Download CSV format with sample row and allowed categories/brands",children:"CSV Format"}),n.jsx("button",{className:"sa-secondary-button",onClick:te,title:"Export filtered items to CSV",children:"Export CSV"}),n.jsxs("button",{className:"sa-primary-button",type:"button",onClick:T,children:[n.jsx("i",{className:"ri-add-line"})," Add New Item"]})]})]}),d&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:d}),M&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:M}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[n.jsxs("label",{children:["Name",n.jsx("input",{value:E,onChange:U=>y(U.target.value),placeholder:"Search name...",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Code",n.jsx("input",{value:v,onChange:U=>S(U.target.value),placeholder:"Search code...",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Item Category",n.jsxs("select",{value:w,onChange:U=>$(U.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),r.map(U=>n.jsx("option",{value:U,children:U},U))]})]}),n.jsxs("label",{children:["Measurement (UOM)",n.jsxs("select",{value:O,onChange:U=>W(U.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),Zu.map(U=>n.jsx("option",{value:U,children:U},U))]})]}),n.jsxs("label",{children:["Brand",n.jsxs("select",{value:Q,onChange:U=>Y(U.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),a.map(U=>n.jsx("option",{value:U,children:U},U))]})]}),n.jsxs("div",{style:{marginLeft:"auto",color:"#9ca3af"},children:["Showing ",A.length," / ",e.length]})]}),n.jsx("div",{className:"sa-card",children:o?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Loading items..."}):A.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"No items found. Add your first item or upload a CSV."}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Item Name"}),n.jsx("th",{children:"Item Category"}),n.jsx("th",{children:"Measurement"}),n.jsx("th",{children:"Brand"}),n.jsx("th",{children:"Indicative Price"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:A.map(U=>n.jsxs("tr",{children:[n.jsx("td",{children:U.code}),n.jsx("td",{children:U.name}),n.jsx("td",{children:U.itemCategory||"-"}),n.jsx("td",{children:U.uom||"-"}),n.jsx("td",{children:U.brand||"-"}),n.jsx("td",{children:U.indicativePrice!==void 0&&U.indicativePrice!==""?`${String(U.indicativePrice)}`:"-"}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("button",{className:"sa-secondary-button",onClick:()=>{var C;(C=navigator.clipboard)==null||C.writeText(JSON.stringify(U)),alert("Copied")},title:"Copy JSON",children:"Copy"}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>q(U),title:"Edit",children:"Edit"}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>P(U),title:"Delete",children:"Delete"})]})]},U._id||U.id||U.code))})]})}),h&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!c&&_(!1),children:n.jsxs("div",{className:"sa-modal",onClick:U=>U.stopPropagation(),style:{maxWidth:720},children:[n.jsx("h3",{children:m._id?"Edit Item":"Add New Item"}),n.jsx("p",{className:"sa-modal-sub",children:"Define item  Item Category, Brand, UOM and Indicative Price."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:B,children:[n.jsxs("label",{children:["Item Name",n.jsx("input",{name:"name",value:m.name,onChange:z,placeholder:"e.g. Basmati Rice 5kg",required:!0})]}),n.jsxs("label",{children:["Code",n.jsx("input",{name:"code",value:m.code,onChange:z,placeholder:"e.g. RICE1",required:!0})]}),n.jsxs("label",{children:["Item Category",n.jsxs("select",{name:"itemCategory",value:m.itemCategory,onChange:z,children:[n.jsx("option",{value:"",children:"-- none --"}),r.map(U=>n.jsx("option",{value:U,children:U},U))]})]}),n.jsxs("label",{children:["Measurement (UOM)",n.jsxs("select",{name:"uom",value:m.uom,onChange:z,required:!0,children:[n.jsx("option",{value:"",children:"-- Select --"}),Zu.map(U=>n.jsx("option",{value:U,children:U},U))]})]}),n.jsxs("label",{children:["Brand",n.jsxs("select",{name:"brand",value:m.brand,onChange:z,children:[n.jsx("option",{value:"",children:"-- none --"}),a.map(U=>n.jsx("option",{value:U,children:U},U))]}),n.jsx("small",{style:{display:"block",color:"#6b7280"},children:"If brand not listed, type it in the Brand field and save (it will be added locally)."})]}),n.jsxs("label",{children:["Indicative Price ()",n.jsx("input",{name:"indicativePrice",type:"number",min:"0",step:"0.01",value:m.indicativePrice,onChange:z,placeholder:"Numeric price per selected UOM"})]}),d&&n.jsx("div",{className:"sa-modal-error",children:d}),n.jsxs("div",{className:"sa-modal-actions",children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!c&&_(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:c,children:c?"Saving...":"Save Item"})]})]})]})})]})},ws="http://localhost:5000",Oj=[{key:"SUPER_ADMIN",label:"Super Admin"},{key:"RESORT_USER",label:"Resort User"},{key:"APPROVER",label:"Approver"},{key:"PURCHASE_MANAGER",label:"Purchase Manager"},{key:"STORE_USER",label:"Store User"}],Xu=()=>({firstName:"",lastName:"",email:"",password:"",isdCode:"+91",phone:"",status:"ACTIVE",role:"RESORT_USER",resorts:[],defaultResort:"",accountAdmin:!1}),Dj=()=>{const[e,t]=p.useState([]),[r,s]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState(!1),[c,u]=p.useState(!1),[d,f]=p.useState(""),[h,_]=p.useState(!1),[m,N]=p.useState(Xu()),E=(I=[])=>{const T=(I||[]).reduce((z,B)=>(B.key&&(z[B.key]=B),z),{}),q=Oj.map(z=>{var B,P;return{key:z.key,label:z.label,_id:((B=T[z.key])==null?void 0:B._id)||null,fromBackend:!!T[z.key],storeMode:((P=T[z.key])==null?void 0:P.storeMode)||"MULTI"}});I.forEach(z=>{q.find(B=>B.key===z.key)||q.push({key:z.key,label:z.name||z.key,_id:z._id,fromBackend:!0,storeMode:z.storeMode||"MULTI"})}),i(q),N(z=>({...z,role:q.find(B=>B.key===z.role)?z.role:"RESORT_USER"}))},y=async()=>{var I,T;try{l(!0);const[q,z,B]=await Promise.all([H.get(`${ws}/api/users`),H.get(`${ws}/api/resorts`),H.get(`${ws}/api/roles`)]);t(q.data||[]),s(z.data||[]),E(B.data||[])}catch(q){console.error("loadData error:",q),f(((T=(I=q.response)==null?void 0:I.data)==null?void 0:T.message)||"Failed to load data")}finally{l(!1)}},v=async()=>{try{const I=await H.get(`${ws}/api/roles`);E(I.data||[])}catch(I){console.error("Failed to load roles:",I),E([])}};p.useEffect(()=>{y()},[]);const S=async()=>{await v(),N(Xu()),f(""),_(!0)},w=()=>{c||(_(!1),f(""))},$=I=>{const{name:T,value:q}=I.target;N(z=>{let B={...z,[T]:q};if(T==="role"){const P=a.find(k=>k.key===q);if((P==null?void 0:P.storeMode)==="SINGLE"){const k=z.resorts[0]||"";B.resorts=k?[k]:[],B.defaultResort=k||""}}return B})},O=I=>{const{name:T,checked:q}=I.target;N(z=>({...z,[T]:q}))},W=I=>{N(T=>{const z=T.resorts.includes(I)?T.resorts.filter(P=>P!==I):[...T.resorts,I],B=T.defaultResort&&!z.includes(T.defaultResort)?"":T.defaultResort;return{...T,resorts:z,defaultResort:B}})},Q=I=>{const T=I.target.value;N(q=>({...q,defaultResort:T,resorts:T&&!q.resorts.includes(T)?[...q.resorts,T]:q.resorts}))},Y=I=>{const T=I.target.value;N(q=>({...q,resorts:T?[T]:[],defaultResort:T||""}))},M=async(I=!1)=>{var q,z;f("");const T=`${m.firstName} ${m.lastName}`.trim();if(!T||!m.email||!m.password){f("First Name, Email & Password are required");return}try{u(!0);const B={name:T,email:m.email,password:m.password,role:m.role,resorts:m.resorts},P=await H.post(`${ws}/api/users`,B);P&&P.data?(t(A=>[...A,P.data]),_(!1)):(await y(),_(!1))}catch(B){console.error("create user error:",B),f(((z=(q=B.response)==null?void 0:q.data)==null?void 0:z.message)||"Failed to create user")}finally{u(!1)}},ce=I=>!I.resorts||I.resorts.length===0?"-":(I.resorts||[]).map(T=>{var q;return typeof T=="object"?T.name:(q=r.find(z=>z._id===T))==null?void 0:q.name}).filter(Boolean).join(", ");if(!h)return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Users"}),n.jsx("p",{children:"Create users and assign one or multiple resorts."})]}),n.jsxs("button",{className:"sa-primary-button",type:"button",onClick:S,children:[n.jsx("i",{className:"ri-add-line"})," New User"]})]}),d&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:d}),n.jsx("div",{className:"sa-card",children:o?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Loading users..."}):e.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"No users found."}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Role"}),n.jsx("th",{children:"Resorts"})]})}),n.jsx("tbody",{children:e.map(I=>n.jsxs("tr",{children:[n.jsx("td",{children:I.name}),n.jsx("td",{children:I.email}),n.jsx("td",{children:I.role}),n.jsx("td",{children:ce(I)})]},I._id||I.id))})]})})]});const G=a.find(I=>I.key===m.role),L=(G==null?void 0:G.storeMode)==="SINGLE";return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"ADD STAFF"}),n.jsx("p",{children:"Add your team members and assign resorts & roles."})]}),n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:w,children:"Back to Users"})]}),d&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:d}),n.jsx("div",{className:"sa-card",children:n.jsxs("form",{className:"sa-modal-form",style:{maxWidth:700},onSubmit:I=>I.preventDefault(),children:[n.jsxs("label",{children:["First Name",n.jsx("input",{name:"firstName",value:m.firstName,onChange:$,placeholder:"First Name",required:!0})]}),n.jsxs("label",{children:["Last Name",n.jsx("input",{name:"lastName",value:m.lastName,onChange:$,placeholder:"Last Name"})]}),n.jsxs("label",{children:["Email Address",n.jsx("input",{type:"email",name:"email",value:m.email,onChange:$,placeholder:"user@resort.com",required:!0})]}),n.jsxs("label",{children:["Password",n.jsx("input",{type:"password",name:"password",value:m.password,onChange:$,placeholder:"",required:!0})]}),n.jsxs("label",{children:["ISD Code",n.jsx("input",{name:"isdCode",value:m.isdCode,onChange:$,placeholder:"+91"})]}),n.jsxs("label",{children:["Phone Number",n.jsx("input",{name:"phone",value:m.phone,onChange:$,placeholder:"9876543210"})]}),n.jsxs("div",{style:{marginTop:10},children:[n.jsx("div",{style:{fontSize:"0.9rem",fontWeight:600},children:"Status"}),n.jsxs("div",{style:{display:"flex",gap:20,marginTop:6,fontSize:"0.9rem"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[n.jsx("input",{type:"radio",name:"status",value:"ACTIVE",checked:m.status==="ACTIVE",onChange:$}),"Active"]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[n.jsx("input",{type:"radio",name:"status",value:"INACTIVE",checked:m.status==="INACTIVE",onChange:$}),"In-Active"]})]})]}),n.jsx("div",{style:{marginTop:20,paddingTop:12,borderTop:"1px solid #eee"},children:n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontWeight:600,fontSize:"0.95rem"},children:[n.jsx("input",{type:"checkbox",name:"accountAdmin",checked:m.accountAdmin,onChange:O}),n.jsx("span",{children:"Account-Admin"})]})}),n.jsxs("label",{style:{marginTop:12},children:["Role",n.jsx("select",{name:"role",value:m.role,onChange:$,style:{maxWidth:260},children:a.map(I=>n.jsx("option",{value:I.key,children:I.label||I.key},I.key))})]}),G&&n.jsxs("div",{style:{fontSize:12,marginTop:4,color:"#777"},children:["Store access for this role:"," ",L?"Single Store":"Multi Store"]}),n.jsx("div",{style:{marginTop:18,paddingTop:12,borderTop:"1px solid #eee",fontSize:"0.9rem"},children:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"12px 24px"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:600},children:"Property"}),n.jsx("div",{style:{fontSize:"0.8rem",color:"#777"},children:"1. All-Properties"}),L?n.jsxs(n.Fragment,{children:[n.jsxs("select",{style:{marginTop:6,width:"100%"},value:m.resorts[0]||"",onChange:Y,children:[n.jsx("option",{value:"",children:"Select"}),r.map(I=>n.jsx("option",{value:I._id,children:I.name},I._id))]}),n.jsx("div",{style:{marginTop:8,fontWeight:600},children:"Default Property"}),n.jsxs("select",{style:{marginTop:4,width:"100%"},value:m.defaultResort||m.resorts[0]||"",onChange:Y,children:[n.jsx("option",{value:"",children:"Select"}),r.map(I=>n.jsx("option",{value:I._id,children:I.name},I._id))]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{marginTop:6,maxHeight:140,overflowY:"auto",padding:"6px 10px",border:"1px solid #ddd",borderRadius:4},children:r.length===0?n.jsx("div",{style:{fontSize:"0.8rem",color:"#777"},children:"No resorts found."}):r.map(I=>n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:"0.8rem",marginBottom:4},children:[n.jsx("input",{type:"checkbox",checked:m.resorts.includes(I._id),onChange:()=>W(I._id)}),I.name]},I._id))}),n.jsx("div",{style:{marginTop:8,fontWeight:600},children:"Default Property"}),n.jsxs("select",{name:"defaultResort",value:m.defaultResort,onChange:Q,style:{marginTop:4,width:"100%"},children:[n.jsx("option",{value:"",children:"Select"}),r.map(I=>n.jsx("option",{value:I._id,children:I.name},I._id))]})]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:600},children:"Product"}),n.jsx("div",{style:{fontSize:"0.8rem",color:"#777"},children:"1. All-Products"}),n.jsx("select",{disabled:!0,style:{marginTop:4,width:"100%",opacity:.6},children:n.jsx("option",{children:"Select"})}),n.jsx("div",{style:{marginTop:8,fontWeight:600},children:"Default Product"}),n.jsx("select",{disabled:!0,style:{marginTop:4,width:"100%",opacity:.6},children:n.jsx("option",{children:"Select"})})]})]})}),d&&n.jsx("div",{className:"sa-modal-error",children:d}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:24,display:"flex",gap:12,flexWrap:"wrap"},children:[n.jsx("button",{type:"button",className:"sa-primary-button",disabled:c,onClick:()=>M(!1),children:c?"Saving...":"Add New User"}),n.jsx("button",{type:"button",className:"sa-primary-button",disabled:c,onClick:()=>M(!0),children:c?"Saving...":"Add New User and Send Password"}),n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:w,disabled:c,children:"Cancel"})]})]})})]})},Kt="http://localhost:5000",br=()=>({lineId:`po_${Date.now()}_${Math.floor(Math.random()*1e3)}`,item:"",qty:1,rate:"",amount:0}),kr=e=>{const t=e?new Date(e):new Date;if(Number.isNaN(t.getTime()))return`GRN-${Date.now()}`;const r=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),i=Math.floor(Math.random()*900)+100;return`GRN-${r}${s}${a}-${i}`},pn=new Date().toISOString().slice(0,10),em=[{_id:"sample_po_1",poNo:"PO-2025-001",requisitionId:"sample_req_1",vendor:"vendor_1",resort:"resort_1",store:"store_1",poDate:new Date().toISOString(),status:"Open",items:[{item:"item_1",qty:10,rate:50,amount:500},{item:"item_2",qty:5,rate:200,amount:1e3}]},{_id:"sample_po_2",poNo:"PO-2025-002",requisitionId:"sample_req_2",vendor:"vendor_2",resort:"resort_1",store:"store_2",poDate:new Date().toISOString(),status:"Open",items:[{item:"item_3",qty:20,rate:30,amount:600}]},{_id:"sample_po_3",poNo:"PO-2025-003",requisitionId:"sample_req_3",vendor:"vendor_1",resort:"resort_2",store:"store_3",poDate:new Date().toISOString(),status:"Closed",items:[{item:"item_2",qty:2,rate:200,amount:400}],grn:{grnNo:"GRN-2025-010",_id:"sample_grn_3"}},{_id:"sample_po_4",poNo:"PO-2025-004",requisitionId:"sample_req_4",vendor:"vendor_3",resort:"resort_2",store:"store_4",poDate:new Date().toISOString(),status:"Open",items:[{item:"item_4",qty:12,rate:75,amount:900},{item:"item_1",qty:6,rate:50,amount:300}]},{_id:"sample_po_5",poNo:"PO-2025-005",requisitionId:"sample_req_5",vendor:"vendor_2",resort:"resort_1",store:"store_1",poDate:new Date().toISOString(),status:"Open",items:[{item:"item_5",qty:3,rate:1500,amount:4500}]}],Fj=()=>{var xe,Pe,De,b;const[e,t]=p.useState([]),[r,s]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState([]),[d,f]=p.useState([]),[h,_]=p.useState(!1),[m,N]=p.useState(!1),[E,y]=p.useState(""),[v,S]=p.useState(!1),[w,$]=p.useState(null),[O,W]=p.useState({requisitionId:"",vendor:"",resort:"",store:"",poDate:new Date().toISOString().slice(0,10),lines:[br()],poNo:""}),[Q,Y]=p.useState({open:!1,po:null,grnNo:kr(pn),receivedBy:"",receivedDate:pn,challanNo:"",billNo:"",items:[]}),M=_n(),[ce,G]=p.useState("ALL"),[L,I]=p.useState(""),[T,q]=p.useState(""),[z,B]=p.useState(""),[P,A]=p.useState(""),[k,te]=p.useState("ALL"),[K,U]=p.useState(""),C=async()=>{var g,R;try{_(!0);const[J,ge,le,we,Ie,Be]=await Promise.all([H.get(`${Kt}/api/po`).catch(()=>({data:[]})),H.get(`${Kt}/api/requisitions?status=Approved`).catch(()=>({data:[]})),H.get(`${Kt}/api/vendors`).catch(()=>({data:[]})),H.get(`${Kt}/api/resorts`).catch(()=>({data:[]})),H.get(`${Kt}/api/stores`).catch(()=>({data:[]})),H.get(`${Kt}/api/items`).catch(()=>({data:[]}))]),qe=Array.isArray(J.data)?J.data:[],ut=new Set(qe.map(Je=>Je._id)),Nr=em.filter(Je=>!ut.has(Je._id));t([...qe,...Nr]);const _t=(Array.isArray(ge.data)?ge.data:[]).filter(Je=>{const Rn=!!(Je.po||Je.poId||Je.po_no||Je.poNo),ga=!!(Je.grn||Je.grnId||Je.grn_no||Je.grnNo);return!Rn&&!ga}),jt=new Set(em.map(Je=>Je.requisitionId)),Jn=_t.filter(Je=>!jt.has(Je._id||Je.id));s(Jn),i(Array.isArray(le.data)?le.data:[]),l(Array.isArray(we.data)?we.data:[]),u(Array.isArray(Ie.data)?Ie.data:[]),f(Array.isArray(Be.data)?Be.data:[])}catch(J){console.error("loadData error",J),y(((R=(g=J.response)==null?void 0:g.data)==null?void 0:R.message)||"Failed to load data")}finally{_(!1)}};p.useEffect(()=>{C()},[]);const ie=g=>{if(!g){W(le=>({...le,requisitionId:"",lines:[br()],vendor:"",resort:"",store:""}));return}const R=r.find(le=>(le._id||le.id)===g);if(!R)return;const ge=(R.lines||R.items||R.requestedItems||[]||[]).map(le=>{var we;return{lineId:`po_${Date.now()}_${Math.floor(Math.random()*1e3)}`,item:((we=le.item)==null?void 0:we._id)||le.item||le.itemId||"",qty:le.qty||le.quantity||1,rate:le.rate||"",amount:(le.qty||le.quantity||0)*(le.rate||0)}});W(le=>({...le,requisitionId:g,vendor:R.vendor||le.vendor||"",resort:R.resort||le.resort||"",store:R.store||le.store||"",lines:ge.length?ge:[br()],poNo:""}))},ne=g=>{$(g._id||g.id),W({requisitionId:g.requisitionId||"",vendor:g.vendor||"",resort:g.resort||"",store:g.store||"",poDate:(g.poDate||g.date||new Date().toISOString()).slice(0,10),lines:g.items&&g.items.map(R=>({lineId:R.lineId||`po_${Math.floor(Math.random()*1e5)}`,item:R.item||R.itemId||"",qty:R.qty||1,rate:R.rate||0,amount:R.amount||(R.qty||1)*(R.rate||0)}))||[br()],poNo:g.poNo||g.po_number||""}),S(!0)},re=g=>{$(null),W({requisitionId:g.requisitionId||"",vendor:g.vendor||"",resort:g.resort||"",store:g.store||"",poDate:new Date().toISOString().slice(0,10),lines:g.items&&g.items.map(R=>({lineId:`dup_${Math.floor(Math.random()*1e5)}`,item:R.item||R.itemId||"",qty:R.qty||1,rate:R.rate||0,amount:R.amount||(R.qty||1)*(R.rate||0)}))||[br()],poNo:`PO-${Date.now()}`}),S(!0)},pe=g=>{const{name:R,value:J}=g.target;W(ge=>({...ge,[R]:J}))},de=(g,R,J)=>{W(ge=>{const le=[...ge.lines];if(le[g][R]=J,R==="qty"||R==="rate"){const we=Number(le[g].qty||0),Ie=Number(le[g].rate||0);le[g].amount=we*Ie}return{...ge,lines:le}})},_e=()=>W(g=>({...g,lines:[...g.lines,br()]})),he=g=>W(R=>({...R,lines:R.lines.filter((J,ge)=>ge!==g)})),F=async g=>{var R,J;if(g.preventDefault(),y(""),!O.vendor)return y("Select vendor");if(!O.resort)return y("Select resort");if(!O.store)return y("Select delivery store");if(!O.lines||O.lines.length===0)return y("Add item lines");for(const ge of O.lines){if(!ge.item)return y("Each line must have item selected");if(!ge.qty||Number(ge.qty)<=0)return y("Each line must have quantity > 0")}try{N(!0);const ge={requisitionId:O.requisitionId||void 0,vendor:O.vendor,resort:O.resort,store:O.store,poDate:O.poDate,poNo:O.poNo||void 0,items:O.lines.map(le=>({item:le.item,qty:Number(le.qty),rate:Number(le.rate||0),amount:Number(le.amount||0)}))};if(w){const le=await H.put(`${Kt}/api/po/${w}`,ge);le!=null&&le.data?t(we=>we.map(Ie=>Ie._id===w||Ie.id===w?le.data:Ie)):await C()}else{const we=(await H.post(`${Kt}/api/po`,ge)).data||null;if(we){t(Be=>[...Be,we]),we.requisitionId&&s(Be=>Be.filter(qe=>(qe._id||qe.id)!==we.requisitionId));const Ie=we._id||we.id||we.poNo||we.po_number;Ie&&M(`/super-admin/po/${Ie}`)}else await C(),M("/super-admin/po")}S(!1),$(null)}catch(ge){console.error("save PO error",ge),y(((J=(R=ge.response)==null?void 0:R.data)==null?void 0:J.message)||"Failed to save PO")}finally{N(!1)}},me=async g=>{var R,J;if(window.confirm(`Delete PO ${g.poNo||g._id||g.id}?`))try{t(ge=>ge.filter(le=>le._id!==g._id&&le.id!==g.id)),await H.delete(`${Kt}/api/po/${g._id||g.id}`)}catch(ge){console.error("delete po error",ge),y(((J=(R=ge.response)==null?void 0:R.data)==null?void 0:J.message)||"Failed to delete PO"),await C()}},se=async g=>{var R,J;if(!(g.status==="Approved"||g.status==="APPROVED")&&window.confirm(`Approve PO ${g.poNo||g._id||g.id}?`))try{const ge=await H.post(`${Kt}/api/po/${g._id||g.id}/approve`).catch(()=>null);ge!=null&&ge.data?t(le=>le.map(we=>we._id===g._id||we.id===g.id?ge.data:we)):t(le=>le.map(we=>we._id===g._id||we.id===g.id?{...we,status:"Approved"}:we))}catch(ge){console.error("approve po error",ge),y(((J=(R=ge.response)==null?void 0:R.data)==null?void 0:J.message)||"Failed to approve PO")}},Ee=g=>{const R=(g.items||[]).map(ge=>{var qe;const le=((qe=ge.item)==null?void 0:qe._id)||ge.item||ge.itemId,we=d.find(ut=>(ut._id||ut.id)===le),Ie=ge.item&&ge.item.name||(we?we.name:""),Be=ge.qty||ge.quantity||0;return{lineId:ge.lineId||`ln_${Math.floor(Math.random()*1e5)}`,item:le,itemName:Ie,qtyRequested:Be,qtyReceived:Be,remark:ge.remark||""}}),J=new Date().toISOString().slice(0,10);Y({open:!0,po:g,grnNo:kr(J),receivedBy:"",receivedDate:J,challanNo:"",billNo:"",items:R})},be=(g,R,J)=>{Y(ge=>{const le=[...ge.items||[]];return le[g]={...le[g],[R]:J},{...ge,items:le}})},D=async()=>{var Be,qe;const{po:g,grnNo:R,receivedBy:J,receivedDate:ge,challanNo:le,billNo:we,items:Ie}=Q;if(g){if(!R)return y("GRN No. is required");if(!le.trim())return y("Challan No is required");if(!Ie||Ie.length===0)return y("GRN must include at least one item");for(const ut of Ie){if(!ut.item)return y("Each GRN line must have an item");if(ut.qtyReceived==null||Number(ut.qtyReceived)<0)return y("Each GRN line received qty must be >= 0")}try{N(!0);const ut=Ie.map(_t=>({item:_t.item,qtyRequested:Number(_t.qtyRequested||0),qtyReceived:Number(_t.qtyReceived||0),remark:_t.remark||""})),Nr={grnNo:R,receivedBy:J||void 0,receivedDate:ge,challanNo:le.trim(),billNo:(we==null?void 0:we.trim())||void 0,items:ut,store:g.store||void 0},rn=await H.post(`${Kt}/api/po/${g._id||g.id}/create-grn`,Nr).catch(()=>null);if(rn!=null&&rn.data){const _t=rn.data.po||rn.data,jt=rn.data.grn||_t.grn||null;t(Je=>Je.map(Rn=>Rn._id===(g._id||g.id)||Rn.id===(g._id||g.id)?_t:Rn));const Jn=(jt==null?void 0:jt._id)||(jt==null?void 0:jt.grnNo)||R;Jn&&M(`/super-admin/grn/${Jn}`)}else t(_t=>_t.map(jt=>jt._id===(g._id||g.id)?{...jt,grn:{grnNo:R}}:jt)),M(`/super-admin/grn/${R}`);Y({open:!1,po:null,grnNo:kr(pn),receivedBy:"",receivedDate:pn,challanNo:"",billNo:"",items:[]})}catch(ut){console.error("create grn error",ut),y(((qe=(Be=ut.response)==null?void 0:Be.data)==null?void 0:qe.message)||"Failed to create GRN")}finally{N(!1)}}},Z=g=>{const R=g._id||g.id||g.poNo||g.po_number;R&&M(`/super-admin/po/${R}`)},ae=g=>{const R=g._id||g.id||g.grnNo||g.grn_number;R&&M(`/super-admin/grn/${R}`)},Re=g=>{var R;return((R=a.find(J=>J._id===g||J.id===g))==null?void 0:R.name)||g||"-"},Oe=g=>{var R;return((R=o.find(J=>J._id===g||J.id===g))==null?void 0:R.name)||g||"-"},Te=g=>{var R;return((R=c.find(J=>J._id===g||J.id===g))==null?void 0:R.name)||g||"-"},j=g=>{var R;return((R=r.find(J=>(J._id||J.id)===g))==null?void 0:R.requisitionNo)||g||"-"},je=e.filter(g=>{if(ce!=="ALL"&&(g.status||"").toString().toLowerCase()!==ce.toLowerCase())return!1;if(k!=="ALL"){const R=!!g.grn,J=(g.status||"").toString().toLowerCase()==="approved";if(k==="NeedsGRN"&&R||k==="HasGRN"&&!R||k==="Approved"&&!J||k==="Open"&&(g.status||"").toString().toLowerCase()!=="open")return!1}if(z&&!(g.resort||g.resortName||g.resortId||"").toString().toLowerCase().includes(z.toString().toLowerCase())||P&&!(g.vendor||"").toString().toLowerCase().includes(P.toString().toLowerCase()))return!1;if(L){const R=g.poDate?new Date(g.poDate).setHours(0,0,0,0):null,J=new Date(L).setHours(0,0,0,0);if(!R||R<J)return!1}if(T){const R=g.poDate?new Date(g.poDate).setHours(0,0,0,0):null,J=new Date(T).setHours(0,0,0,0);if(!R||R>J)return!1}if(K&&K.trim()){const R=K.trim().toLowerCase();if(![g.poNo,g.po_number,g.requisitionId,g.vendor,g.store,g.resort].filter(Boolean).join(" ").toLowerCase().includes(R))return!1}return!0}),ve=()=>{G("ALL"),I(""),q(""),B(""),A(""),te("ALL"),U("")},ee={display:"inline-block",marginLeft:6,cursor:"pointer",padding:"6px",borderRadius:6,position:"relative"};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",style:{alignItems:"flex-start"},children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Purchase Orders"}),n.jsx("p",{children:"Generate & manage purchase orders created from approved requisitions."})]}),n.jsx("div",{style:{display:"flex",gap:8},children:n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>{C(),ve()},children:"Refresh"})})]}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:12},children:[n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Status",n.jsxs("select",{value:ce,onChange:g=>G(g.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"ALL",children:"All"}),n.jsx("option",{value:"Open",children:"Open"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Closed",children:"Closed"})]})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Action",n.jsxs("select",{value:k,onChange:g=>te(g.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"ALL",children:"All"}),n.jsx("option",{value:"NeedsGRN",children:"Needs GRN"}),n.jsx("option",{value:"HasGRN",children:"Has GRN"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Open",children:"Open"})]})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Resort",n.jsxs("select",{value:z,onChange:g=>B(g.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"",children:"All Resorts"}),o.length>0?o.map(g=>n.jsx("option",{value:g._id||g.name||g.id,children:g.name},g._id||g.id)):Array.from(new Set(e.map(g=>g.resort))).map(g=>n.jsx("option",{value:g,children:g},g))]})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Vendor",n.jsxs("select",{value:P,onChange:g=>A(g.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"",children:"All Vendors"}),a.length>0?a.map(g=>n.jsx("option",{value:g._id||g.name||g.id,children:g.name},g._id||g.id)):Array.from(new Set(e.map(g=>g.vendor))).map(g=>n.jsx("option",{value:g,children:g},g))]})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Date from",n.jsx("input",{type:"date",value:L,onChange:g=>I(g.target.value),style:{marginLeft:6}})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Date to",n.jsx("input",{type:"date",value:T,onChange:g=>q(g.target.value),style:{marginLeft:6}})]}),n.jsxs("label",{style:{flex:1,minWidth:220},children:["Search",n.jsx("input",{placeholder:"PO no / requisition / vendor / store",value:K,onChange:g=>U(g.target.value),style:{marginLeft:8,width:"80%"}})]}),n.jsx("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:n.jsx("button",{className:"sa-secondary-button",onClick:ve,children:"Clear"})})]}),E&&n.jsx("div",{className:"sa-modal-error",children:E}),n.jsx("div",{className:"sa-card",children:h?n.jsx("div",{children:"Loading purchase orders..."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{marginBottom:8,color:"#6b7280",fontSize:"0.9rem"},children:["Showing ",je.length," of"," ",e.length," purchase orders"]}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"PO No."}),n.jsx("th",{children:"Requisition"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Resort"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:je.map(g=>n.jsxs("tr",{children:[n.jsx("td",{style:{cursor:"pointer",color:"#0b69ff"},onClick:()=>Z(g),children:g.poNo||g.po_number||g._id||"-"}),n.jsx("td",{children:j(g.requisitionId)}),n.jsx("td",{children:Re(g.vendor)}),n.jsx("td",{children:Oe(g.resort)}),n.jsx("td",{children:Te(g.store)}),n.jsx("td",{children:(g.poDate||g.date||"").slice(0,10)}),n.jsx("td",{children:g.status||"Open"}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("span",{style:ee,onClick:()=>Z(g),title:"View",children:n.jsx("i",{className:"ri-eye-line"})}),n.jsx("span",{style:ee,onClick:()=>re(g),title:"Create (Duplicate)",children:n.jsx("i",{className:"ri-file-copy-line"})}),n.jsx("span",{style:ee,onClick:()=>ne(g),title:"Edit",children:n.jsx("i",{className:"ri-edit-line"})}),n.jsx("span",{style:{...ee,background:g.status==="Approved"||g.status==="APPROVED"?"#052e16":"transparent"},onClick:()=>se(g),title:g.status==="Approved"||g.status==="APPROVED"?"Already approved":"Approve",children:n.jsx("i",{className:"ri-checkbox-circle-line"})}),g.grn?n.jsx("span",{style:ee,title:"View GRN",onClick:()=>ae(g.grn),children:n.jsx("i",{className:"ri-inbox-line"})}):n.jsx("span",{style:ee,title:"Create GRN",onClick:()=>Ee(g),children:n.jsx("i",{className:"ri-add-box-line"})}),n.jsx("span",{style:ee,onClick:()=>me(g),title:"Delete",children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},g._id||g.id||g.poNo))})]})]})}),v&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!m&&(S(!1),$(null)),children:n.jsxs("div",{className:"sa-modal",onClick:g=>g.stopPropagation(),children:[n.jsx("h3",{children:w?"Edit PO":"Create PO"}),n.jsx("p",{className:"sa-modal-sub",children:"Create or edit a purchase order."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:F,children:[n.jsxs("label",{children:["Approved Requisition (optional)",n.jsxs("select",{name:"requisitionId",value:O.requisitionId||"",onChange:g=>ie(g.target.value),children:[n.jsx("option",{value:"",children:"-- Select Approved Requisition --"}),r.map(g=>{var R;return n.jsxs("option",{value:g._id||g.id,children:[g.requisitionNo||g._id||g.id," ",""," ",g.resortName||g.resort||"-"," ",""," ",((R=g.date)==null?void 0:R.slice(0,10))||"-"]},g._id||g.id)})]}),n.jsx("small",{style:{display:"block",color:"#6b7280",marginTop:6},children:"Only approved requisitions that don't already have PO/GRN are listed."})]}),n.jsxs("label",{children:["PO No.",n.jsx("input",{name:"poNo",value:O.poNo||"",onChange:pe,placeholder:"PO-YYYY-XXX"})]}),n.jsxs("label",{children:["Vendor",n.jsxs("select",{name:"vendor",value:O.vendor||"",onChange:pe,required:!0,children:[n.jsx("option",{value:"",children:"-- Select Vendor --"}),a.map(g=>n.jsx("option",{value:g._id||g.id,children:g.name},g._id||g.id))]})]}),n.jsxs("label",{children:["Resort",n.jsxs("select",{name:"resort",value:O.resort||"",onChange:pe,required:!0,children:[n.jsx("option",{value:"",children:"-- Select Resort --"}),o.map(g=>n.jsx("option",{value:g._id||g.id,children:g.name},g._id||g.id))]})]}),n.jsxs("label",{children:["Delivery Store",n.jsxs("select",{name:"store",value:O.store||"",onChange:pe,required:!0,children:[n.jsx("option",{value:"",children:"-- Select Store --"}),c.filter(g=>!O.resort||g.resort===O.resort).map(g=>n.jsx("option",{value:g._id||g.id,children:g.name},g._id||g.id))]})]}),n.jsxs("label",{children:["PO Date",n.jsx("input",{type:"date",name:"poDate",value:O.poDate,onChange:pe,required:!0})]}),n.jsxs("div",{style:{marginTop:10},children:[n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Rate"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{})]})}),n.jsx("tbody",{children:O.lines.map((g,R)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("select",{value:g.item||"",onChange:J=>de(R,"item",J.target.value),required:!0,children:[n.jsx("option",{value:"",children:"-- Select Item --"}),d.map(J=>n.jsx("option",{value:J._id||J.id,children:J.name},J._id||J.id))]})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"1",value:g.qty,onChange:J=>de(R,"qty",J.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:g.rate,onChange:J=>de(R,"rate",J.target.value),required:!0})}),n.jsx("td",{style:{textAlign:"center"},children:g.amount}),n.jsx("td",{children:O.lines.length>1&&n.jsx("button",{type:"button",onClick:()=>he(R),children:"Remove"})})]},g.lineId))})]}),n.jsx("button",{type:"button",onClick:_e,style:{marginTop:6},children:"+ Add Line"})]}),E&&n.jsx("div",{className:"sa-modal-error",style:{marginTop:8},children:E}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!m&&(S(!1),$(null)),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:m,children:m?"Saving...":w?"Update PO":"Save PO"})]})]})]})}),Q.open&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!m&&Y({open:!1,po:null,grnNo:kr(pn),receivedBy:"",receivedDate:pn,challanNo:"",billNo:"",items:[]}),children:n.jsxs("div",{className:"sa-modal large",onClick:g=>g.stopPropagation(),style:{maxWidth:980},children:[n.jsx("h3",{children:"Create GRN"}),n.jsx("p",{className:"sa-modal-sub",children:"Record goods received against the approved purchase order."}),n.jsxs("div",{className:"sa-modal-form",children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[n.jsxs("label",{children:["Approved PO (read-only)",n.jsx("input",{value:((xe=Q.po)==null?void 0:xe.poNo)||((Pe=Q.po)==null?void 0:Pe.po_number)||((De=Q.po)==null?void 0:De._id)||"",readOnly:!0})]}),n.jsxs("label",{children:["GRN No.",n.jsx("input",{value:Q.grnNo||"",onChange:g=>Y(R=>({...R,grnNo:g.target.value}))})]}),n.jsxs("label",{children:["Received By",n.jsx("input",{value:Q.receivedBy||"",onChange:g=>Y(R=>({...R,receivedBy:g.target.value}))})]}),n.jsxs("label",{children:["Received Date",n.jsx("input",{type:"date",value:Q.receivedDate||pn,onChange:g=>{const R=g.target.value;Y(J=>({...J,receivedDate:R,grnNo:kr(R)}))}})]}),n.jsxs("label",{children:["Challan No",n.jsxs("span",{style:{color:"red"},children:[" ","*"]}),n.jsx("input",{value:Q.challanNo||"",onChange:g=>Y(R=>({...R,challanNo:g.target.value})),required:!0})]}),n.jsxs("label",{children:["Bill No (optional)",n.jsx("input",{value:Q.billNo||"",onChange:g=>Y(R=>({...R,billNo:g.target.value}))})]}),n.jsxs("label",{children:["Store (from PO)",n.jsx("input",{value:Te((b=Q.po)==null?void 0:b.store)||"",readOnly:!0})]})]}),n.jsx("div",{style:{marginTop:12},children:n.jsxs("table",{className:"sa-table",style:{width:"100%"},children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"45%"},children:"Item"}),n.jsx("th",{style:{width:"12%"},children:"Requested Qty"}),n.jsx("th",{style:{width:"12%"},children:"Received Qty"}),n.jsx("th",{style:{width:"12%"},children:"Balance"}),n.jsx("th",{style:{width:"19%"},children:"Remark"})]})}),n.jsx("tbody",{children:(Q.items||[]).map((g,R)=>n.jsxs("tr",{children:[n.jsx("td",{children:g.itemName||Mj(g.item)||g.item}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:g.qtyRequested,readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:g.qtyReceived,onChange:J=>{const ge=Number(J.target.value||0);be(R,"qtyReceived",ge)}})}),n.jsx("td",{children:Number((g.qtyRequested||0)-(g.qtyReceived||0)).toFixed(2)}),n.jsx("td",{children:n.jsx("input",{value:g.remark||"",onChange:J=>be(R,"remark",J.target.value)})})]},g.lineId||R))})]})}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>Y({open:!1,po:null,grnNo:kr(pn),receivedBy:"",receivedDate:pn,challanNo:"",billNo:"",items:[]}),children:"Cancel"}),n.jsx("button",{type:"button",className:"sa-primary-button",onClick:D,disabled:m,children:m?"Creating...":"Create GRN"})]})]})]})}),n.jsx("style",{children:`
        td .action-btn .tooltip { display:none; }
        td .action-btn:hover .tooltip { display:block; }
        .sa-modal.large { max-height: 85vh; overflow: auto; }
      `})]})},Mj=e=>e,nr="http://localhost:5000",tm=()=>({lineId:`grn_${Date.now()}_${Math.floor(Math.random()*1e3)}`,item:"",poQty:0,receivedQty:"",rejectedQty:"",acceptedQty:0}),Uj=[{_id:"sample_grn_1",grnNo:"GRN-2025-101",poId:"sample_po_1",vendor:"vendor_1",resort:"resort_1",store:"store_1",grnDate:new Date().toISOString(),status:"Open",lines:[{lineId:"ln1",item:"item_1",poQty:10,receivedQty:10,rejectedQty:0,acceptedQty:10},{lineId:"ln2",item:"item_2",poQty:5,receivedQty:5,rejectedQty:0,acceptedQty:5}]}],qj=()=>{const[e,t]=p.useState([]),[r,s]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState([]),[d,f]=p.useState([]),[h,_]=p.useState(!1),[m,N]=p.useState(!1),[E,y]=p.useState(""),[v,S]=p.useState(!1),[w,$]=p.useState(null),[O,W]=p.useState({resort:"",store:"",vendor:"",poId:"",grnDate:new Date().toISOString().slice(0,10),lines:[tm()],grnNo:""}),Q=_n(),[Y,M]=p.useState("ALL"),[ce,G]=p.useState("ALL"),[L,I]=p.useState(""),[T,q]=p.useState(""),[z,B]=p.useState(""),[P,A]=p.useState(""),[k,te]=p.useState(""),K=async()=>{var ne,re;try{_(!0);const[pe,de,_e,he,F,me]=await Promise.all([H.get(`${nr}/api/grn`).catch(()=>({data:[]})),H.get(`${nr}/api/po`).catch(()=>({data:[]})),H.get(`${nr}/api/vendors`).catch(()=>({data:[]})),H.get(`${nr}/api/resorts`).catch(()=>({data:[]})),H.get(`${nr}/api/stores`).catch(()=>({data:[]})),H.get(`${nr}/api/items`).catch(()=>({data:[]}))]),se=Array.isArray(pe.data)?pe.data:[],Ee=new Set(se.map(D=>D._id)),be=Uj.filter(D=>!Ee.has(D._id));t([...se,...be]),s(Array.isArray(de.data)?de.data:[]),i(Array.isArray(_e.data)?_e.data:[]),l(Array.isArray(he.data)?he.data:[]),u(Array.isArray(F.data)?F.data:[]),f(Array.isArray(me.data)?me.data:[])}catch(pe){console.error(pe),y(((re=(ne=pe.response)==null?void 0:ne.data)==null?void 0:re.message)||"Failed to load")}finally{_(!1)}};p.useEffect(()=>{K()},[]);const U=ne=>{const re=ne._id||ne.grnNo;re&&Q(`/super-admin/grn/${re}`)},C=ne=>{if(ne.status==="Approved")return alert("Approved GRN cannot be edited");$(ne._id||ne.id),W({grnNo:ne.grnNo||"",resort:ne.resort||"",store:ne.store||"",vendor:ne.vendor||"",poId:ne.poId||"",grnDate:(ne.grnDate||ne.date||new Date().toISOString()).slice(0,10),lines:ne.lines&&ne.lines.map(re=>({lineId:re.lineId||`grn_${Math.floor(Math.random()*1e5)}`,item:re.item||"",poQty:re.poQty||0,receivedQty:re.receivedQty||"",rejectedQty:re.rejectedQty||"",acceptedQty:re.acceptedQty||0}))||[tm()]}),S(!0)},ie=async ne=>{if(ne.status==="Approved")return alert("Approved GRN cannot be deleted");if(window.confirm(` Delete GRN ${ne.grnNo}?`))try{t(re=>re.filter(pe=>pe._id!==ne._id)),await H.delete(`${nr}/api/grn/${ne._id}`)}catch(re){console.error(re),y("Failed to delete"),await K()}};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",style:{alignItems:"flex-start"},children:[n.jsxs("div",{children:[n.jsx("h2",{children:"GRN (Goods Receipt)"}),n.jsx("p",{children:"GRNs created from Purchase Orders. Manual GRN creation disabled."})]}),n.jsx("div",{style:{display:"flex",gap:8},children:n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>{K()},children:"Refresh"})})]}),n.jsx("div",{className:"sa-card",children:h?n.jsx("div",{children:"Loading"}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"GRN No"}),n.jsx("th",{children:"PO No"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Resort"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(ne=>{var re;return n.jsxs("tr",{children:[n.jsx("td",{onClick:()=>U(ne),style:{cursor:"pointer",color:"#0b69ff"},children:ne.grnNo}),n.jsx("td",{children:ne.poId}),n.jsx("td",{children:ne.vendor}),n.jsx("td",{children:ne.resort}),n.jsx("td",{children:ne.store}),n.jsx("td",{children:(re=ne.grnDate)==null?void 0:re.slice(0,10)}),n.jsx("td",{children:ne.status||"Open"}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("span",{style:{cursor:"pointer",padding:6},title:"View",onClick:()=>U(ne),children:n.jsx("i",{className:"ri-eye-line"})}),ne.status==="Approved"?n.jsx("span",{style:{opacity:.4,padding:6},children:n.jsx("i",{className:"ri-edit-line"})}):n.jsx("span",{style:{cursor:"pointer",padding:6},title:"Edit",onClick:()=>C(ne),children:n.jsx("i",{className:"ri-edit-line"})}),ne.status==="Approved"?n.jsx("span",{style:{opacity:.4,padding:6},children:n.jsx("i",{className:"ri-delete-bin-6-line"})}):n.jsx("span",{style:{cursor:"pointer",padding:6},title:"Delete",onClick:()=>ie(ne),children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},ne._id)})})]})})]})},$j=()=>{const[e,t]=p.useState("snapshot"),[r,s]=p.useState({resort:"all",store:"all",item:"",from:"",to:""}),a=i=>{s(o=>({...o,[i.target.name]:i.target.value}))};return n.jsxs("div",{className:"sa-page",children:[n.jsx("div",{className:"sa-page-header",children:n.jsxs("div",{children:[n.jsx("h2",{children:"Inventory"}),n.jsx("p",{children:"High level stock overview & reorder alerts across all resorts."})]})}),n.jsxs("div",{className:"sa-card sa-report-filters",children:[n.jsxs("div",{className:"sa-tabs",children:[n.jsx("button",{type:"button",className:`sa-tab ${e==="snapshot"?"active":""}`,onClick:()=>t("snapshot"),children:"Snapshot"}),n.jsx("button",{type:"button",className:`sa-tab ${e==="store"?"active":""}`,onClick:()=>t("store"),children:"Store-wise Stock"}),n.jsx("button",{type:"button",className:`sa-tab ${e==="ledger"?"active":""}`,onClick:()=>t("ledger"),children:"Item Stock Ledger"}),n.jsx("button",{type:"button",className:`sa-tab ${e==="reorder"?"active":""}`,onClick:()=>t("reorder"),children:"Low Stock / Reorder"})]}),n.jsxs("div",{className:"sa-report-filter-row",children:[n.jsxs("div",{className:"sa-report-filter-group",children:[n.jsx("label",{children:"Resort"}),n.jsxs("select",{name:"resort",value:r.resort,onChange:a,children:[n.jsx("option",{value:"all",children:"All Resorts"}),n.jsx("option",{value:"beachside",children:"Beachside Resort"}),n.jsx("option",{value:"hillview",children:"Hillview Resort"})]})]}),(e==="store"||e==="ledger"||e==="reorder")&&n.jsxs("div",{className:"sa-report-filter-group",children:[n.jsx("label",{children:"Store"}),n.jsxs("select",{name:"store",value:r.store,onChange:a,children:[n.jsx("option",{value:"all",children:"All Stores"}),n.jsx("option",{value:"main",children:"Main Store"}),n.jsx("option",{value:"bar",children:"Bar Store"}),n.jsx("option",{value:"hk",children:"HK Store"})]})]}),e==="ledger"&&n.jsxs("div",{className:"sa-report-filter-group",children:[n.jsx("label",{children:"Item"}),n.jsx("input",{name:"item",value:r.item,onChange:a,placeholder:"Search item..."})]}),(e==="store"||e==="ledger"||e==="reorder")&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"sa-report-filter-group",children:[n.jsx("label",{children:"From"}),n.jsx("input",{type:"date",name:"from",value:r.from,onChange:a})]}),n.jsxs("div",{className:"sa-report-filter-group",children:[n.jsx("label",{children:"To"}),n.jsx("input",{type:"date",name:"to",value:r.to,onChange:a})]})]})]})]}),e==="snapshot"&&n.jsx(Bj,{}),e==="store"&&n.jsx(zj,{}),e==="ledger"&&n.jsx(Vj,{}),e==="reorder"&&n.jsx(Qj,{})]})},Bj=()=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"sa-grid-4",children:[n.jsxs("div",{className:"sa-card sa-report-kpi",children:[n.jsx("div",{className:"sa-report-kpi-label",children:"Total Stock Value"}),n.jsx("div",{className:"sa-report-kpi-value",children:" 18,40,000"}),n.jsx("div",{className:"sa-report-kpi-sub",children:"All resorts  Last valuation"})]}),n.jsxs("div",{className:"sa-card sa-report-kpi",children:[n.jsx("div",{className:"sa-report-kpi-label",children:"Items in Stock"}),n.jsx("div",{className:"sa-report-kpi-value",children:"462"}),n.jsx("div",{className:"sa-report-kpi-sub",children:"Unique SKUs"})]}),n.jsxs("div",{className:"sa-card sa-report-kpi",children:[n.jsx("div",{className:"sa-report-kpi-label",children:"Slow Moving"}),n.jsx("div",{className:"sa-report-kpi-value",children:"27"}),n.jsx("div",{className:"sa-report-kpi-sub",children:"No movement in 90 days"})]}),n.jsxs("div",{className:"sa-card sa-report-kpi",children:[n.jsx("div",{className:"sa-report-kpi-label",children:"Near Expiry"}),n.jsx("div",{className:"sa-report-kpi-value",children:"9"}),n.jsx("div",{className:"sa-report-kpi-sub",children:"Next 30 days"})]})]}),n.jsxs("div",{className:"sa-grid-2",style:{marginTop:16},children:[n.jsxs("div",{className:"sa-card",children:[n.jsx("div",{className:"sa-card-title",children:"Top 5 items by value"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Value"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Imported Whisky 750ml"}),n.jsx("td",{children:"Beachside - Bar Store"}),n.jsx("td",{children:"120"}),n.jsx("td",{children:" 3,60,000"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"House Wine"}),n.jsx("td",{children:"Beachside - Bar Store"}),n.jsx("td",{children:"80"}),n.jsx("td",{children:" 1,80,000"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Room Linen Set"}),n.jsx("td",{children:"Hillview - HK Store"}),n.jsx("td",{children:"150"}),n.jsx("td",{children:" 1,25,000"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Coffee Beans"}),n.jsx("td",{children:"Beachside - Main Store"}),n.jsx("td",{children:"60"}),n.jsx("td",{children:" 95,000"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"LED Bulbs"}),n.jsx("td",{children:"Hillview - Engineering"}),n.jsx("td",{children:"200"}),n.jsx("td",{children:" 75,000"})]})]})]})]}),n.jsxs("div",{className:"sa-card",children:[n.jsx("div",{className:"sa-card-title",children:"Slow moving items"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Last Issue"}),n.jsx("th",{children:"Qty in Stock"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Decorative Candles"}),n.jsx("td",{children:"Beachside - Main Store"}),n.jsx("td",{children:"12 Aug 2025"}),n.jsx("td",{children:"45"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Spare Kettles"}),n.jsx("td",{children:"Hillview - HK Store"}),n.jsx("td",{children:"03 Jul 2025"}),n.jsx("td",{children:"18"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Engineering Tool Kit"}),n.jsx("td",{children:"City Hotel - Engineering"}),n.jsx("td",{children:"10 Jun 2025"}),n.jsx("td",{children:"6"})]})]})]})]})]})]}),zj=()=>{const e=[{resort:"Beachside Resort",store:"Main Store",item:"Mineral Water 1L",uom:"Bottle",closing:320,value:" 9,600"},{resort:"Beachside Resort",store:"Bar Store",item:"Imported Whisky 750ml",uom:"Bottle",closing:120,value:" 3,60,000"},{resort:"Hillview Resort",store:"HK Store",item:"Room Freshener",uom:"Bottle",closing:140,value:" 21,000"}];return n.jsxs("div",{className:"sa-card",children:[n.jsx("div",{className:"sa-card-title",children:"Store-wise current stock"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Resort"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Item"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Closing Qty"}),n.jsx("th",{children:"Stock Value"})]})}),n.jsx("tbody",{children:e.map((t,r)=>n.jsxs("tr",{children:[n.jsx("td",{children:t.resort}),n.jsx("td",{children:t.store}),n.jsx("td",{children:t.item}),n.jsx("td",{children:t.uom}),n.jsx("td",{children:t.closing}),n.jsx("td",{children:t.value})]},r))})]})]})},Vj=()=>{const e=[{date:"20 Nov 2025",docType:"GRN",ref:"GRN-2025-0060",store:"Beachside - Main Store",inQty:80,outQty:0,balance:320},{date:"18 Nov 2025",docType:"Issue",ref:"ISS-2025-0214",store:"Beachside - F&B",inQty:0,outQty:40,balance:240},{date:"15 Nov 2025",docType:"GRN",ref:"GRN-2025-0052",store:"Beachside - Main Store",inQty:120,outQty:0,balance:280}];return n.jsxs("div",{className:"sa-card",children:[n.jsx("div",{className:"sa-card-title",children:"Item stock ledger (example item)"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Doc Type"}),n.jsx("th",{children:"Ref No"}),n.jsx("th",{children:"Store / Dept"}),n.jsx("th",{children:"In"}),n.jsx("th",{children:"Out"}),n.jsx("th",{children:"Balance"})]})}),n.jsx("tbody",{children:e.map((t,r)=>n.jsxs("tr",{children:[n.jsx("td",{children:t.date}),n.jsx("td",{children:t.docType}),n.jsx("td",{children:t.ref}),n.jsx("td",{children:t.store}),n.jsx("td",{children:t.inQty}),n.jsx("td",{children:t.outQty}),n.jsx("td",{children:t.balance})]},r))})]})]})},Qj=()=>{const e=[{resort:"Beachside Resort",store:"Main Store",item:"Mineral Water 1L",uom:"Bottle",min:200,reorder:250,max:600,stock:180,status:"Below Min"},{resort:"Hillview Resort",store:"HK Store",item:"Room Linen Set",uom:"Set",min:80,reorder:100,max:200,stock:70,status:"Below Min"},{resort:"Beachside Resort",store:"Bar Store",item:"House Wine",uom:"Bottle",min:40,reorder:60,max:150,stock:45,status:"Reorder"}];return n.jsxs("div",{className:"sa-card",children:[n.jsx("div",{className:"sa-card-title",children:"Items below min / reorder level"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Resort"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Item"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Min"}),n.jsx("th",{children:"Reorder"}),n.jsx("th",{children:"Max"}),n.jsx("th",{children:"Stock"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Create"})]})}),n.jsx("tbody",{children:e.map((t,r)=>n.jsxs("tr",{children:[n.jsx("td",{children:t.resort}),n.jsx("td",{children:t.store}),n.jsx("td",{children:t.item}),n.jsx("td",{children:t.uom}),n.jsx("td",{children:t.min}),n.jsx("td",{children:t.reorder}),n.jsx("td",{children:t.max}),n.jsx("td",{children:t.stock}),n.jsx("td",{children:n.jsx("span",{className:t.status==="Below Min"?"sa-badge sa-badge-danger":"sa-badge sa-badge-warning",children:t.status})}),n.jsx("td",{children:n.jsxs("button",{className:"sa-table-action",children:[n.jsx("i",{className:"ri-add-line"}),"Req."]})})]},r))})]})]})},rr="http://localhost:5000",sr=[{_id:"item_rice",name:"Rice",uom:"Kg",itemCategory:"Pantry"},{_id:"item_oil",name:"Oil",uom:"Ltr",itemCategory:"Cooking Oil"},{_id:"item_chicken",name:"Chicken",uom:"Kg",itemCategory:"Meat"},{_id:"item_paneer",name:"Paneer",uom:"Kg",itemCategory:"Dairy"},{_id:"item_spice",name:"Spice Mix",uom:"Kg",itemCategory:"Pantry"}],Wo=[{_id:"rc_cat_1",name:"Lumpsum",code:"LUMP",type:"LUMPSUM"},{_id:"rc_cat_2",name:"By Portion",code:"PORT",type:"RECIPE_PORTION"},{_id:"rc_cat_3",name:"By Recipe Lumpsum",code:"R_LUMP",type:"RECIPE_LUMPSUM"}],nm=[{_id:"dev_rcp_1",code:"RCP-001",name:"Plain Rice",recipeCategoryId:"rc_cat_1",type:"LUMPSUM",yieldQty:1,yieldUom:"Kg",lines:[{itemId:"item_rice",qty:10,itemCategory:"Pantry"}]},{_id:"dev_rcp_3",code:"RCP-003",name:"Chicken Curry (50 portions)",recipeCategoryId:"rc_cat_2",type:"RECIPE_PORTION",yieldQty:50,yieldUom:"Nos",lines:[{itemId:"item_chicken",qty:10,itemCategory:"Meat"},{itemId:"item_spice",qty:.3,itemCategory:"Pantry"}]}],Ma=()=>({id:`ln_${Date.now()}_${Math.floor(Math.random()*1e3)}`,itemCategory:"",itemId:"",qty:""}),rm=["Kg","Ltr","Nos","Pax"],Wj=()=>{var be;const[e,t]=p.useState([]),[r,s]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState(!1),[d,f]=p.useState(""),[h,_]=p.useState(""),[m,N]=p.useState(""),[E,y]=p.useState(!1),[v,S]=p.useState(null),[w,$]=p.useState(!1),[O,W]=p.useState(null),Q=()=>({code:"",recipeCategoryId:"",type:"",name:"",yieldQty:"",yieldUom:"",lines:[Ma()]}),[Y,M]=p.useState(Q()),[ce,G]=p.useState(!1),[L,I]=p.useState(""),T=async()=>{try{u(!0),f("");const[D,Z,ae,Re]=await Promise.all([H.get(`${rr}/api/recipes`).catch(()=>({data:[]})),H.get(`${rr}/api/items`).catch(()=>({data:sr})),H.get(`${rr}/api/recipe-categories`).catch(()=>({data:Wo})),H.get(`${rr}/api/item-categories`).catch(()=>({data:null}))]),Oe=Array.isArray(D.data)?D.data:[],j=(Array.isArray(Z.data)?Z.data:sr).map(ee=>{const xe=ee.uom||ee.measurement||ee.unit||ee.unitOfMeasure||ee.unit_of_measure||ee.uomName||ee.measurementUnit||"";return{_id:ee._id||ee.id,id:ee.id||ee._id,name:ee.name||ee.title||"",uom:xe,itemCategory:ee.itemCategory||ee.category||ee.item_category||ee.group||"",...ee}}),oe=Array.isArray(ae.data)?ae.data:Wo;let je=[];Re&&Array.isArray(Re.data)&&Re.data.length?je=Re.data.map(ee=>typeof ee=="string"?ee:ee.name||ee.code||ee._id||ee.id):je=Array.from(new Set((j||sr).map(ee=>ee.itemCategory||"Uncategorized")));const ve=(Array.isArray(Oe)?Oe:[]).map(ee=>({_id:ee._id||ee.id,code:ee.code||"",name:ee.name||"",recipeCategoryId:ee.recipeCategoryId||ee.recipeCategory||"",type:ee.type||"",yieldQty:ee.yieldQty??ee.yield_qty??"",yieldUom:ee.yieldUom||ee.yield_uom||"",lines:Array.isArray(ee.lines)?ee.lines.map(xe=>({id:xe.id||`ln_${Math.floor(Math.random()*1e5)}`,itemCategory:xe.itemCategory||xe.item_category||(()=>{const Pe=(j||sr).find(De=>De._id===xe.itemId||De.id===xe.itemId);return(Pe==null?void 0:Pe.itemCategory)||(Pe==null?void 0:Pe.category)||""})(),itemId:xe.itemId||xe.item||"",qty:xe.qty??""})):[]}));t(ve.length?ve:nm),s(j),l(oe),i(je.length?je:Array.from(new Set(sr.map(ee=>ee.itemCategory||"Uncategorized"))))}catch(D){console.error(D),f("Failed to load recipe data; using sample data"),t(nm),s(sr),l(Wo),i(Array.from(new Set(sr.map(Z=>Z.itemCategory||"Uncategorized"))))}finally{u(!1)}};p.useEffect(()=>{T()},[]);const q=D=>o.find(Z=>Z._id===D||Z.id===D)||null,z=D=>r.find(Z=>Z._id===D||Z.id===D)||null,B=D=>z(D)?z(D).name:D,P=p.useMemo(()=>o,[o]),A=p.useMemo(()=>e.filter(D=>{if(h&&(D.recipeCategoryId||"")!==h)return!1;if(m&&m.trim()){const Z=m.trim().toLowerCase();if(![D.code,D.name,D._id].filter(Boolean).join(" ").toLowerCase().includes(Z))return!1}return!0}),[e,h,m]),k=(D,Z)=>M(ae=>({...ae,[D]:Z})),te=(D,Z,ae)=>M(Re=>{const Oe=[...Re.lines];return Oe[D]={...Oe[D],[Z]:ae},{...Re,lines:Oe}}),K=()=>M(D=>({...D,lines:[...D.lines,Ma()]})),U=D=>M(Z=>({...Z,lines:Z.lines.filter((ae,Re)=>Re!==D)})),C=D=>r.filter(Z=>(Z.itemCategory||Z.category||Z.item_category||"").toString()===(D||"").toString()),ie=D=>rm.includes(D)?D:void 0,ne=(D,Z)=>{if(te(D,"itemCategory",Z),te(D,"itemId",""),te(D,"qty",""),!Z)return;const ae=C(Z);if(ae.length===1){const Re=ae[0];te(D,"itemId",Re._id||Re.id);const Oe=ie(Re.uom);Oe&&M(Te=>({...Te,yieldUom:Te.yieldUom||Oe}))}},re=(D,Z)=>{const ae=z(Z);te(D,"itemId",Z),ae&&ae.itemCategory&&te(D,"itemCategory",ae.itemCategory);const Re=ae?ie(ae.uom):void 0;Re&&M(Oe=>({...Oe,yieldUom:Oe.yieldUom||Re}))};p.useEffect(()=>{const D=Y.lines.map(ae=>{const Re=z(ae.itemId);return Re?ie(Re.uom):void 0}).filter(Boolean);if(!D.length)return;D.every(ae=>ae===D[0])&&M(ae=>({...ae,yieldUom:ae.yieldUom||D[0]}))},[Y.lines.map(D=>D.itemId).join("||")]);const pe=D=>{const Z=q(D);M(ae=>({...ae,recipeCategoryId:D,type:Z&&Z.type||ae.type}))},de=()=>{S(null),M(Q()),I(""),y(!0)},_e=D=>{S(D),M({code:D.code||"",recipeCategoryId:D.recipeCategoryId||"",type:D.type||"",name:D.name||"",yieldQty:D.yieldQty??D.yield_qty??"",yieldUom:D.yieldUom||D.yield_uom||"",lines:D.lines&&D.lines.map(Z=>{var ae;return{id:Z.id||`ln_${Math.floor(Math.random()*1e5)}`,itemCategory:Z.itemCategory||((ae=z(Z.itemId))==null?void 0:ae.itemCategory)||"",itemId:Z.itemId||Z.item||"",qty:Z.qty??""}})||[Ma()]}),I(""),y(!0)},he=D=>{W(D),$(!0)},F=D=>{S(null),M({code:`${D.code||"RCP"}-COPY`,recipeCategoryId:D.recipeCategoryId||"",type:D.type||"",name:`${D.name||"Copy"} (Copy)`,yieldQty:D.yieldQty??D.yield_qty??"",yieldUom:D.yieldUom||D.yield_uom||"",lines:D.lines&&D.lines.map(Z=>{var ae;return{id:`dup_${Math.floor(Math.random()*1e5)}`,itemCategory:Z.itemCategory||((ae=z(Z.itemId))==null?void 0:ae.itemCategory)||"",itemId:Z.itemId||"",qty:Z.qty??""}})||[Ma()]}),I(""),y(!0)},me=()=>{if(!Y.code||!Y.code.trim())return"Recipe code required";if(!Y.name||!Y.name.trim())return"Recipe name required";if(!Y.recipeCategoryId)return"Select Recipe Category";if(!Y.lines||Y.lines.length===0)return"Add at least one ingredient";for(const D of Y.lines){if(!D.itemCategory)return"Each ingredient must have an item category";if(!D.itemId)return"Each ingredient must have an item";if(!D.qty||Number(D.qty)<=0)return"Each ingredient must have quantity > 0"}return Y.yieldQty&&Number(Y.yieldQty)<=0?"Yield Qty must be > 0":Y.yieldQty&&!Y.yieldUom?"Provide Yield UOM when Yield Qty is set":null},se=async D=>{var Re,Oe;D.preventDefault(),I("");const Z=me();if(Z)return I(Z);const ae={code:Y.code,name:Y.name,recipeCategoryId:Y.recipeCategoryId,type:Y.type||void 0,yieldQty:Y.yieldQty?Number(Y.yieldQty):void 0,yieldUom:Y.yieldUom||void 0,lines:(Y.lines||[]).map(Te=>({itemId:Te.itemId,qty:Number(Te.qty),itemCategory:Te.itemCategory}))};try{if(G(!0),v&&v._id){const Te=await H.put(`${rr}/api/recipes/${v._id}`,ae).catch(()=>null);Te&&Te.data?t(j=>j.map(oe=>oe._id===v._id?Te.data:oe)):t(j=>j.map(oe=>oe._id===v._id?{...oe,...ae}:oe))}else{const Te=await H.post(`${rr}/api/recipes`,ae).catch(()=>null);Te&&Te.data?t(j=>[Te.data,...j]):t(j=>[{...ae,_id:`local_${Date.now()}`},...j])}y(!1),S(null)}catch(Te){console.error(Te),I(((Oe=(Re=Te.response)==null?void 0:Re.data)==null?void 0:Oe.message)||"Failed to save recipe")}finally{G(!1)}},Ee=async D=>{if(window.confirm(`Delete recipe ${D.code||D.name}?`))try{t(Z=>Z.filter(ae=>ae._id!==D._id)),await H.delete(`${rr}/api/recipes/${D._id}`).catch(()=>null)}catch(Z){console.error(Z),f("Failed to delete recipe"),await T()}};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",style:{alignItems:"flex-start"},children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Recipe Master"}),n.jsx("p",{children:"Create and manage recipes (minimal fields)."})]}),n.jsxs("div",{style:{display:"flex",gap:8},children:[n.jsx("button",{className:"sa-secondary-button",onClick:()=>T(),children:"Refresh"}),n.jsxs("button",{className:"sa-primary-button",onClick:de,children:[n.jsx("i",{className:"ri-add-line"})," New Recipe"]})]})]}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:10,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[n.jsxs("label",{children:["Recipe Category",n.jsxs("select",{value:h,onChange:D=>_(D.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),P.map(D=>n.jsx("option",{value:D._id,children:D.name},D._id))]})]}),n.jsxs("label",{style:{flex:1,minWidth:200},children:["Search",n.jsx("input",{value:m,onChange:D=>N(D.target.value),placeholder:"name / code ...",style:{marginLeft:8,width:"70%"}})]}),n.jsxs("div",{style:{marginLeft:"auto",color:"#9ca3af"},children:["Showing ",A.length," / ",e.length]})]}),d&&n.jsx("div",{className:"sa-modal-error",children:d}),n.jsx("div",{className:"sa-card",children:c?n.jsx("div",{children:"Loading recipes..."}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:A.map(D=>{var Z;return n.jsxs("tr",{children:[n.jsx("td",{style:{color:"#0b69ff",cursor:"pointer"},onClick:()=>he(D),children:D.code}),n.jsx("td",{children:D.name}),n.jsx("td",{children:((Z=q(D.recipeCategoryId))==null?void 0:Z.name)||"-"}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("span",{title:"View",style:{cursor:"pointer",marginRight:6},onClick:()=>he(D),children:n.jsx("i",{className:"ri-eye-line"})}),n.jsx("span",{title:"Duplicate",style:{cursor:"pointer",marginRight:6},onClick:()=>F(D),children:n.jsx("i",{className:"ri-file-copy-line"})}),n.jsx("span",{title:"Edit",style:{cursor:"pointer",marginRight:6},onClick:()=>_e(D),children:n.jsx("i",{className:"ri-edit-line"})}),n.jsx("span",{title:"Delete",style:{cursor:"pointer",marginRight:6},onClick:()=>Ee(D),children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},D._id)})})]})}),E&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!ce&&(y(!1),S(null)),children:n.jsxs("div",{className:"sa-modal",onClick:D=>D.stopPropagation(),children:[n.jsx("h3",{children:v?"Edit Recipe":"Create Recipe"}),n.jsx("p",{className:"sa-modal-sub",children:"Minimal recipe: code, category, name, yield and ingredient lines."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:se,children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:10},children:[n.jsxs("label",{children:["Code",n.jsx("input",{value:Y.code,onChange:D=>k("code",D.target.value),required:!0})]}),n.jsxs("label",{children:["Recipe Category *",n.jsxs("select",{value:Y.recipeCategoryId,onChange:D=>pe(D.target.value),required:!0,children:[n.jsx("option",{value:"",children:"-- Select Recipe Category --"}),P.map(D=>n.jsx("option",{value:D._id,children:D.name},D._id))]})]}),n.jsxs("label",{children:["Name",n.jsx("input",{value:Y.name,onChange:D=>k("name",D.target.value),required:!0})]}),n.jsxs("label",{children:["Yield Qty",n.jsx("input",{type:"number",min:"0",step:"any",value:Y.yieldQty,onChange:D=>k("yieldQty",D.target.value),placeholder:"e.g. 50"})]}),n.jsxs("label",{children:["Yield UOM",n.jsxs("select",{value:Y.yieldUom||"",onChange:D=>k("yieldUom",D.target.value),children:[n.jsx("option",{value:"",children:"-- Select UOM --"}),rm.map(D=>n.jsx("option",{value:D,children:D==="Pax"?"Pax (persons)":D},D))]})]})]}),n.jsx("h4",{style:{marginTop:8},children:"Ingredients"}),n.jsxs("div",{className:"sa-card",style:{padding:10},children:[n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"35%"},children:"Item Category"}),n.jsx("th",{style:{width:"45%"},children:"Item"}),n.jsx("th",{style:{width:"20%"},children:"Qty"}),n.jsx("th",{})]})}),n.jsx("tbody",{children:Y.lines.map((D,Z)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("select",{value:D.itemCategory||"",onChange:ae=>ne(Z,ae.target.value),required:!0,children:[n.jsx("option",{value:"",children:"-- Select category --"}),a.map(ae=>n.jsx("option",{value:ae,children:ae},ae))]})}),n.jsx("td",{children:n.jsxs("select",{value:D.itemId||"",onChange:ae=>re(Z,ae.target.value),required:!0,children:[n.jsx("option",{value:"",children:"-- Select item --"}),C(D.itemCategory).map(ae=>n.jsx("option",{value:ae._id||ae.id,children:ae.name},ae._id||ae.id))]})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",step:"any",value:D.qty,onChange:ae=>te(Z,"qty",ae.target.value),required:!0,placeholder:"Qty",style:{width:"100%"}})}),n.jsx("td",{children:Y.lines.length>1&&n.jsx("button",{type:"button",onClick:()=>U(Z),children:"Remove"})})]},D.id))})]}),n.jsx("button",{type:"button",className:"sa-secondary-button",style:{marginTop:8},onClick:K,children:"+ Add Ingredient"})]}),L&&n.jsx("div",{className:"sa-modal-error",style:{marginTop:8},children:L}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!ce&&y(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:ce,children:ce?"Saving...":v?"Update Recipe":"Save Recipe"})]})]})]})}),w&&O&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>$(!1),children:n.jsxs("div",{className:"sa-modal",onClick:D=>D.stopPropagation(),children:[n.jsxs("h3",{children:[O.code,"  ",O.name]}),n.jsxs("p",{className:"sa-modal-sub",children:["Category: ",((be=q(O.recipeCategoryId))==null?void 0:be.name)||"-"]}),n.jsxs("p",{children:["Yield: ",O.yieldQty??O.yield_qty??"-"," ",O.yieldUom??O.yield_uom??""]}),n.jsx("h4",{style:{marginTop:8},children:"Ingredients"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Qty"})]})}),n.jsx("tbody",{children:(O.lines||[]).map((D,Z)=>{var ae;return n.jsxs("tr",{children:[n.jsx("td",{children:B(D.itemId)}),n.jsx("td",{children:D.itemCategory||((ae=z(D.itemId))==null?void 0:ae.itemCategory)||"-"}),n.jsx("td",{children:D.qty})]},Z)})})]}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>$(!1),children:"Close"}),n.jsx("button",{type:"button",className:"sa-primary-button",onClick:()=>{$(!1),_e(O)},children:"Edit"})]})]})})]})},_s="http://localhost:5000",sm=[{_id:"dev_ic_1",name:"Utensils",code:"UTEN_101",departmentId:"",departmentName:""},{_id:"dev_ic_2",name:"Glassware",code:"GLAS_102",departmentId:"",departmentName:""},{_id:"dev_ic_3",name:"Cleaning Tools",code:"CLEAN_103",departmentId:"",departmentName:""},{_id:"dev_ic_4",name:"Consumables",code:"CONS_104",departmentId:"",departmentName:""},{_id:"dev_ic_5",name:"Electrics",code:"ELEC_105",departmentId:"",departmentName:""}],Ho=()=>({_id:void 0,name:"",code:"",departmentId:""}),ai=(e="")=>{const t=e.trim().toUpperCase().replace(/[^A-Z0-9\s]/g,"").split(/\s+/).filter(Boolean).slice(0,2).map(s=>s.length<=4?s:s.slice(0,4)).join("_")||"IC",r=Math.floor(Math.random()*900+100);return`${t}_${r}`.slice(0,20)},Go=e=>{const t=e.department||e.departmentCategory||e.dept||"",r=typeof t=="object"?t._id||t.id||"":t||"",s=typeof t=="object"?t.name||t.code||"":e.departmentName||"";return{_id:e._id||e.id,name:e.name||"",code:e.code||ai(e.name||""),departmentId:r,departmentName:s}},Hj=e=>({_id:e._id||e.id,name:e.name||e.departmentName||e.code||"",code:e.code||""}),Gj=()=>{const[e,t]=p.useState([]),[r,s]=p.useState([]),[a,i]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(""),[d,f]=p.useState(!1),[h,_]=p.useState(Ho()),[m,N]=p.useState(""),[E,y]=p.useState(""),v=async()=>{try{i(!0),u("");const[M,ce]=await Promise.all([H.get(`${_s}/api/item-categories`).catch(()=>({data:[]})),H.get(`${_s}/api/departments`).catch(()=>({data:[]}))]),G=Array.isArray(M.data)?M.data.map(Go):[],L=Array.isArray(ce.data)?ce.data.map(Hj):[],I=G.length?G:sm;t(I),s(L)}catch(M){console.error("load error",M),u("Failed to load item categories / departments; using sample data"),t(sm),s([])}finally{i(!1)}};p.useEffect(()=>{v()},[]);const S=p.useMemo(()=>e.filter(M=>{var ce;return!(m&&!((ce=M.name)!=null&&ce.toLowerCase().includes(m.toLowerCase()))||E&&M.departmentId!==E)}),[e,m,E]),w=()=>{_(Ho()),u(""),f(!0)},$=M=>{_({_id:M._id||M.id,name:M.name||"",code:M.code||ai(M.name),departmentId:M.departmentId||""}),u(""),f(!0)},O=M=>{const{name:ce,value:G}=M.target;_(L=>({...L,[ce]:G}))},W=async M=>{var ce,G;if(M.preventDefault(),u(""),!h.name||!h.name.trim())return u("Item Category name required");if(!h.departmentId||!h.departmentId.trim())return u("Select Department Category");try{l(!0);const L={name:h.name.trim(),code:h.code&&h.code.trim()?h.code.trim():ai(h.name),department:h.departmentId,departmentCategory:h.departmentId};if(h._id){const I=await H.put(`${_s}/api/item-categories/${h._id}`,L).catch(()=>null);if(I!=null&&I.data){const T=Go(I.data);t(q=>q.map(z=>z._id===h._id||z.id===h._id?T:z))}else{const T=r.find(q=>q._id===h.departmentId);t(q=>q.map(z=>z._id===h._id||z.id===h._id?{...z,name:L.name,code:L.code,departmentId:h.departmentId,departmentName:(T==null?void 0:T.name)||z.departmentName}:z))}}else{const I=await H.post(`${_s}/api/item-categories`,L).catch(()=>null),T=I!=null&&I.data?Go(I.data):(()=>{const q=r.find(z=>z._id===h.departmentId);return{_id:`local_${Date.now()}`,name:L.name,code:L.code,departmentId:h.departmentId,departmentName:(q==null?void 0:q.name)||""}})();t(q=>[T,...q])}f(!1),_(Ho())}catch(L){console.error("save error",L),u(((G=(ce=L.response)==null?void 0:ce.data)==null?void 0:G.message)||"Failed to save item category")}finally{l(!1)}},Q=async M=>{if(window.confirm(`Delete item category ${M.name||M._id}?`))try{t(ce=>ce.filter(G=>(G._id||G.id)!==(M._id||M.id))),await H.delete(`${_s}/api/item-categories/${M._id||M.id}`).catch(()=>null)}catch(ce){console.error("delete error",ce),u("Failed to delete item category"),await v()}},Y=(M,ce="")=>{if(!M&&ce)return ce;if(!M)return"-";const G=r.find(L=>L._id===M);return(G==null?void 0:G.name)||ce||"-"};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Item Categories (Master)"}),n.jsx("p",{children:"Create and manage item categories. Assign each item-category to an existing Department."})]}),n.jsx("div",{style:{display:"flex",gap:8,alignItems:"center"},children:n.jsxs("button",{className:"sa-primary-button",type:"button",onClick:w,children:[n.jsx("i",{className:"ri-add-line"})," Add Category"]})})]}),c&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:c}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[n.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("span",{children:"Item Category"}),n.jsx("input",{value:m,onChange:M=>N(M.target.value),placeholder:"Search category..."})]}),n.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("span",{children:"Department Category"}),n.jsxs("select",{value:E,onChange:M=>y(M.target.value),children:[n.jsx("option",{value:"",children:"All"}),r.map(M=>n.jsx("option",{value:M._id,children:M.name},M._id))]})]}),n.jsxs("div",{style:{marginLeft:"auto",color:"#9ca3af",fontSize:13},children:["Showing ",S.length," / ",e.length]})]}),n.jsx("div",{className:"sa-card",children:a?n.jsx("div",{children:"Loading item categories..."}):S.length===0?n.jsx("div",{children:'No item categories found. Add one using "Add Category".'}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item Category"}),n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Department"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:S.map(M=>n.jsxs("tr",{children:[n.jsx("td",{children:M.name}),n.jsx("td",{children:M.code}),n.jsx("td",{children:Y(M.departmentId,M.departmentName)}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("button",{className:"sa-secondary-button",onClick:()=>$(M),title:"Edit",children:n.jsx("i",{className:"ri-edit-line"})}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>{var ce;(ce=navigator.clipboard)==null||ce.writeText(JSON.stringify(M)),alert("Copied")},title:"Copy JSON",children:n.jsx("i",{className:"ri-file-copy-line"})}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>Q(M),title:"Delete",children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},M._id||M.id||M.code))})]})}),d&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!o&&f(!1),children:n.jsxs("div",{className:"sa-modal",onClick:M=>M.stopPropagation(),style:{maxWidth:700},children:[n.jsx("h3",{style:{marginBottom:6},children:h._id?"Edit Item Category":"Add Item Category"}),n.jsx("p",{className:"sa-modal-sub",children:"Give a name, code (auto) and assign a Department Category."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:W,children:[n.jsxs("label",{children:["Item Category Name *",n.jsx("input",{name:"name",value:h.name,onChange:O,placeholder:"e.g. Utensils",required:!0})]}),n.jsxs("label",{children:["Code (auto)",n.jsx("input",{name:"code",value:h.code||ai(h.name),disabled:!0})]}),n.jsxs("label",{children:["Department Category *",n.jsxs("select",{name:"departmentId",value:h.departmentId,onChange:O,required:!0,children:[n.jsx("option",{value:"",children:"-- Select Department --"}),r.map(M=>n.jsx("option",{value:M._id,children:M.name},M._id))]})]}),c&&n.jsx("div",{className:"sa-modal-error",style:{marginTop:8},children:c}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!o&&f(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:o,children:o?"Saving...":h._id?"Update Category":"Save Category"})]})]})]})})]})},kn="http://localhost:5000",Ko=[{_id:"item_rice",name:"Rice",uom:"Kg",unitCost:40},{_id:"item_oil",name:"Oil",uom:"Ltr",unitCost:150},{_id:"item_chicken",name:"Chicken",uom:"Kg",unitCost:200},{_id:"item_paneer",name:"Paneer",uom:"Kg",unitCost:320},{_id:"item_spice",name:"Spice Mix",uom:"Kg",unitCost:500}],Yo=[{_id:"rc_cat_1",name:"Lumpsum - Single fixed cost (Lumpsum)",code:"LUMP_101",type:"LUMPSUM",description:"Single fixed-cost recipe"},{_id:"rc_cat_2",name:"By Portion - Recipe scaled per portion",code:"PORT_102",type:"RECIPE_PORTION",description:"Recipe measured per portion"},{_id:"rc_cat_3",name:"By Lumpsum (Recipe) - Lumpsum measured as recipe batch",code:"R_LUMP_103",type:"RECIPE_LUMPSUM",description:"Lumpsum measured as recipe batch"}],am=[{_id:"dev_rcp_1",code:"RCP-001",name:"Plain Rice",recipeCategoryId:"rc_cat_1",type:"LUMPSUM",resort:"Resort A",department:"Kitchen",yieldQty:10,yieldUOM:"Kg",yieldPortions:null,instructions:"Boil rice in salted water.",lines:[{itemId:"item_rice",qty:10,uom:"Kg",wastePercent:2}],status:"ACTIVE",createdAt:new Date().toISOString()},{_id:"dev_rcp_3",code:"RCP-003",name:"Chicken Curry (50 portions)",recipeCategoryId:"rc_cat_2",type:"RECIPE_PORTION",resort:"Resort B",department:"Kitchen",yieldQty:null,yieldUOM:"Portion",yieldPortions:50,instructions:"Recipe for 50 portions.",lines:[{itemId:"item_chicken",qty:10,uom:"Kg",wastePercent:5},{itemId:"item_spice",qty:.3,uom:"Kg",wastePercent:.5}],status:"ACTIVE",createdAt:new Date().toISOString()}],Ua=()=>({id:`ln_${Date.now()}_${Math.floor(Math.random()*1e3)}`,itemId:"",qty:"",uom:"",wastePercent:0}),Kj=[{key:"LUMPSUM",label:"Lumpsum - Single fixed cost (Lumpsum)"},{key:"RECIPE_PORTION",label:"By Portion - Recipe scaled per portion"},{key:"RECIPE_LUMPSUM",label:"By Lumpsum (Recipe) - Lumpsum measured as recipe batch"}],Yj=()=>{var De;const[e,t]=p.useState([]),[r,s]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState(!1),[c,u]=p.useState(""),[d,f]=p.useState(""),[h,_]=p.useState(""),[m,N]=p.useState(""),[E,y]=p.useState(""),[v,S]=p.useState(""),[w,$]=p.useState(""),[O,W]=p.useState(!1),[Q,Y]=p.useState(null),[M,ce]=p.useState(!1),[G,L]=p.useState(null),[I,T]=p.useState(!1),[q,z]=p.useState({name:"",type:"LUMPSUM",description:""}),[B,P]=p.useState(""),A=()=>({code:"",recipeCategoryId:"",recipeCategoryName:"",type:"LUMPSUM",name:"",resort:"",department:"",yieldQty:"",yieldUOM:"",yieldPortions:"",instructions:"",lines:[Ua()],status:"DRAFT"}),[k,te]=p.useState(A()),[K,U]=p.useState(!1),[C,ie]=p.useState(""),ne=async()=>{try{l(!0),u("");const[b,g,R]=await Promise.all([H.get(`${kn}/api/recipes`).catch(()=>({data:[]})),H.get(`${kn}/api/items`).catch(()=>({data:Ko})),H.get(`${kn}/api/recipe-categories`).catch(()=>({data:Yo}))]),J=Array.isArray(b.data)?b.data:[],ge=Array.isArray(g.data)?g.data:Ko,le=Array.isArray(R.data)?R.data:Yo,we=J.map(Be=>({...Be,recipeCategoryId:Be.recipeCategoryId||Be.recipeCategory||Be.categoryId||"",type:Be.type||"LUMPSUM",lines:Array.isArray(Be.lines)?Be.lines:[]})),Ie=we.length?we:am;t(Ie),s(ge),i(le)}catch(b){console.error("load error",b),u("Failed to load recipes/categories/items; using sample data"),t(am),s(Ko),i(Yo)}finally{l(!1)}};p.useEffect(()=>{ne()},[]);const re=b=>a.find(g=>g._id===b||g.id===b)||null,pe=p.useMemo(()=>a,[a]),de=p.useMemo(()=>Array.from(new Set(e.map(b=>(b.resort||"").toString()).filter(Boolean))),[e]),_e=p.useMemo(()=>Array.from(new Set(e.map(b=>(b.department||"").toString()).filter(Boolean))),[e]),he=p.useMemo(()=>e.filter(b=>{if(d&&(b.recipeCategoryId||"")!==d||h&&b.type!==h||m&&!(b.resort||"").toLowerCase().includes(m.toLowerCase())||E&&!(b.department||"").toLowerCase().includes(E.toLowerCase())||v&&(b.status||"").toLowerCase()!==v.toLowerCase())return!1;if(w&&w.trim()){const g=w.trim().toLowerCase();if(![b.code,b.name,b.instructions,b._id,b.resort,b.department].filter(Boolean).join(" ").toLowerCase().includes(g))return!1}return!0}),[e,d,h,m,E,v,w]),F=(b,g)=>te(R=>({...R,[b]:g})),me=(b,g,R)=>te(J=>{const ge=[...J.lines];return ge[b]={...ge[b],[g]:R},{...J,lines:ge}}),se=()=>te(b=>({...b,lines:[...b.lines,Ua()]})),Ee=b=>te(g=>({...g,lines:g.lines.filter((R,J)=>J!==b)})),be=b=>r.find(g=>g._id===b||g.id===b)||null,D=b=>be(b)?be(b).name:b,Z=b=>{const g=re(b);te(R=>({...R,recipeCategoryId:b,recipeCategoryName:g?g.name:"",type:g&&g.type||R.type}))},ae=()=>{Y(null),te(A()),ie(""),W(!0)},Re=b=>{var g;Y(b),te({code:b.code||"",recipeCategoryId:b.recipeCategoryId||b.recipeCategory||"",recipeCategoryName:((g=re(b.recipeCategoryId||b.recipeCategory||""))==null?void 0:g.name)||"",type:b.type||"LUMPSUM",name:b.name||"",resort:b.resort||"",department:b.department||"",yieldQty:b.yieldQty??"",yieldUOM:b.yieldUOM||"",yieldPortions:b.yieldPortions??"",instructions:b.instructions||"",lines:b.lines&&b.lines.map(R=>({id:R.id||`ln_${Math.floor(Math.random()*1e5)}`,itemId:R.itemId||R.item||"",qty:R.qty??"",uom:R.uom||"",wastePercent:R.wastePercent??0}))||[Ua()],status:b.status||"DRAFT"}),ie(""),W(!0)},Oe=b=>{var g;Y(null),te({code:`${b.code||"RCP"}-COPY`,recipeCategoryId:b.recipeCategoryId||b.recipeCategory||"",recipeCategoryName:((g=re(b.recipeCategoryId||b.recipeCategory||""))==null?void 0:g.name)||"",type:b.type||"LUMPSUM",name:`${b.name||"Copy"} (Copy)`,resort:b.resort||"",department:b.department||"",yieldQty:b.yieldQty??"",yieldUOM:b.yieldUOM||"",yieldPortions:b.yieldPortions??"",instructions:b.instructions||"",lines:b.lines&&b.lines.map(R=>({id:`dup_${Math.floor(Math.random()*1e5)}`,itemId:R.itemId||R.item||"",qty:R.qty??"",uom:R.uom||"",wastePercent:R.wastePercent??0}))||[Ua()],status:"DRAFT"}),ie(""),W(!0)},Te=b=>{L(b),ce(!0)},j=p.useMemo(()=>{let b=0;for(const J of k.lines||[]){const ge=be(J.itemId),le=(ge==null?void 0:ge.unitCost)??0,we=Number(J.qty||0),Ie=Number(J.wastePercent||0),Be=we*(1+Ie/100);b+=Be*le}let g=null,R=null;if(k.type==="RECIPE_LUMPSUM"){const J=Number(k.yieldQty||1);g=b}if(k.type==="RECIPE_PORTION"){const J=Number(k.yieldPortions||1);R=J?b/J:b}return{totalIngredientCost:b,perYieldCost:g,perPortionCost:R}},[k,r]),oe=()=>{if(!k.code||!k.code.trim())return"Recipe code required";if(!k.name||!k.name.trim())return"Recipe name required";if(!k.recipeCategoryId)return"Select Recipe Category";if(!k.resort)return"Resort required";if(k.type==="RECIPE_LUMPSUM"&&(!k.yieldQty||Number(k.yieldQty)<=0))return"Yield qty required for lumpsum recipe";if(k.type==="RECIPE_PORTION"&&(!k.yieldPortions||Number(k.yieldPortions)<=0))return"Yield portions required for portion recipe";if(!k.lines||k.lines.length===0)return"Add at least one ingredient";for(const b of k.lines){if(!b.itemId)return"Each ingredient must have an item";if(!b.qty||Number(b.qty)<=0)return"Each ingredient must have quantity > 0"}return null},je=async b=>{var J,ge;b.preventDefault(),ie("");const g=oe();if(g)return ie(g);const R={code:k.code,name:k.name,recipeCategoryId:k.recipeCategoryId,type:k.type,resort:k.resort,department:k.department||void 0,yieldQty:k.type==="RECIPE_LUMPSUM"?Number(k.yieldQty||0):void 0,yieldUOM:k.type==="RECIPE_LUMPSUM"&&k.yieldUOM||void 0,yieldPortions:k.type==="RECIPE_PORTION"?Number(k.yieldPortions||0):void 0,instructions:k.instructions||void 0,status:k.status||"DRAFT",lines:(k.lines||[]).map(le=>{var we;return{itemId:le.itemId,qty:Number(le.qty),uom:le.uom||((we=be(le.itemId))==null?void 0:we.uom)||"",wastePercent:Number(le.wastePercent||0)}})};try{if(U(!0),Q&&Q._id){const le=await H.put(`${kn}/api/recipes/${Q._id}`,R).catch(()=>null);le&&le.data?t(we=>we.map(Ie=>Ie._id===Q._id?le.data:Ie)):t(we=>we.map(Ie=>Ie._id===Q._id?{...Ie,...R,_id:Ie._id}:Ie))}else{const le=await H.post(`${kn}/api/recipes`,R).catch(()=>null);if(le&&le.data)t(we=>[le.data,...we]);else{const we={...R,_id:`local_${Date.now()}`,createdAt:new Date().toISOString()};t(Ie=>[we,...Ie])}}W(!1),Y(null)}catch(le){console.error("save recipe error",le),ie(((ge=(J=le.response)==null?void 0:J.data)==null?void 0:ge.message)||"Failed to save recipe")}finally{U(!1)}},ve=async b=>{if(window.confirm(`Delete recipe ${b.code||b.name}?`))try{t(g=>g.filter(R=>R._id!==b._id)),await H.delete(`${kn}/api/recipes/${b._id}`).catch(()=>null)}catch(g){console.error("delete error",g),u("Failed to delete recipe"),await ne()}},ee=async b=>{if(window.confirm(`Activate recipe ${b.code||b.name}?`))try{const g=await H.post(`${kn}/api/recipes/${b._id}/activate`).catch(()=>null);g&&g.data?t(R=>R.map(J=>J._id===b._id?g.data:J)):t(R=>R.map(J=>J._id===b._id?{...J,status:"ACTIVE"}:J))}catch(g){console.error("activate error",g),u("Failed to activate recipe")}},xe=async()=>{if(P(""),!(q.name||"").trim())return P("Name required");const g={name:q.name.trim(),type:q.type,description:q.description||""};try{const R=await H.post(`${kn}/api/recipe-categories`,g).catch(()=>null),J=R!=null&&R.data?{_id:R.data._id||R.data.id,...R.data}:{...g,_id:`local_rc_${Date.now()}`};i(ge=>[J,...ge]),te(ge=>({...ge,recipeCategoryId:J._id,recipeCategoryName:J.name,type:J.type||ge.type})),z({name:"",type:"LUMPSUM",description:""}),T(!1),P("")}catch(R){console.error("create category error",R),P("Failed to create category")}},Pe=b=>typeof b=="number"?b.toFixed(2):"-";return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",style:{alignItems:"flex-start"},children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Recipe Master"}),n.jsx("p",{children:"Create and manage recipes. Recipe Category is selected from Recipe Category master (you can add here)."})]}),n.jsxs("div",{style:{display:"flex",gap:8},children:[n.jsx("button",{className:"sa-secondary-button",onClick:()=>ne(),children:"Refresh"}),n.jsxs("button",{className:"sa-primary-button",onClick:ae,children:[n.jsx("i",{className:"ri-add-line"})," New Recipe"]})]})]}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:10,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[n.jsxs("label",{children:["Recipe Category",n.jsxs("select",{value:d,onChange:b=>f(b.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),pe.map(b=>n.jsx("option",{value:b._id,children:b.name},b._id))]})]}),n.jsxs("label",{children:["Type",n.jsxs("select",{value:h,onChange:b=>_(b.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),n.jsx("option",{value:"LUMPSUM",children:"Lumpsum"}),n.jsx("option",{value:"RECIPE_LUMPSUM",children:"By Recipe - Lumpsum"}),n.jsx("option",{value:"RECIPE_PORTION",children:"By Recipe - Portion"})]})]}),n.jsxs("label",{children:["Resort",n.jsxs("select",{value:m,onChange:b=>N(b.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),de.map(b=>n.jsx("option",{value:b,children:b},b))]})]}),n.jsxs("label",{children:["Department",n.jsxs("select",{value:E,onChange:b=>y(b.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),_e.map(b=>n.jsx("option",{value:b,children:b},b))]})]}),n.jsxs("label",{children:["Status",n.jsxs("select",{value:v,onChange:b=>S(b.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),n.jsx("option",{value:"DRAFT",children:"Draft"}),n.jsx("option",{value:"ACTIVE",children:"Active"}),n.jsx("option",{value:"ARCHIVED",children:"Archived"})]})]}),n.jsxs("label",{style:{flex:1,minWidth:200},children:["Search",n.jsx("input",{value:w,onChange:b=>$(b.target.value),placeholder:"name / code ...",style:{marginLeft:8,width:"70%"}})]}),n.jsxs("div",{style:{marginLeft:"auto",color:"#9ca3af"},children:["Showing ",he.length," / ",e.length]})]}),c&&n.jsx("div",{className:"sa-modal-error",children:c}),n.jsx("div",{className:"sa-card",children:o?n.jsx("div",{children:"Loading recipes..."}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Resort"}),n.jsx("th",{children:"Dept"}),n.jsx("th",{children:"Yield"}),n.jsx("th",{children:"Cost Preview"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:he.map(b=>{const g=(b.lines||[]).reduce((ge,le)=>{const we=be(le.itemId),Ie=((we==null?void 0:we.unitCost)??0)*(Number(le.qty||0)*(1+Number(le.wastePercent||0)/100));return ge+Ie},0),R=b.type==="RECIPE_PORTION"?`${b.yieldPortions||"-"} portions`:b.yieldQty?`${b.yieldQty} ${b.yieldUOM||""}`:"-",J=re(b.recipeCategoryId);return n.jsxs("tr",{children:[n.jsx("td",{style:{color:"#0b69ff",cursor:"pointer"},onClick:()=>Te(b),children:b.code}),n.jsx("td",{children:b.name}),n.jsx("td",{children:J?J.name:"-"}),n.jsx("td",{children:b.type}),n.jsx("td",{children:b.resort||"-"}),n.jsx("td",{children:b.department||"-"}),n.jsx("td",{children:R}),n.jsx("td",{children:Pe(g)}),n.jsx("td",{children:b.status||"DRAFT"}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("span",{title:"View",style:{cursor:"pointer",marginRight:6},onClick:()=>Te(b),children:n.jsx("i",{className:"ri-eye-line"})}),n.jsx("span",{title:"Duplicate",style:{cursor:"pointer",marginRight:6},onClick:()=>Oe(b),children:n.jsx("i",{className:"ri-file-copy-line"})}),n.jsx("span",{title:"Edit",style:{cursor:"pointer",marginRight:6},onClick:()=>Re(b),children:n.jsx("i",{className:"ri-edit-line"})}),n.jsx("span",{title:"Activate",style:{cursor:"pointer",marginRight:6},onClick:()=>ee(b),children:n.jsx("i",{className:"ri-checkbox-circle-line"})}),n.jsx("span",{title:"Delete",style:{cursor:"pointer",marginRight:6},onClick:()=>ve(b),children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},b._id)})})]})}),O&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!K&&(W(!1),Y(null)),children:n.jsxs("div",{className:"sa-modal",onClick:b=>b.stopPropagation(),children:[n.jsx("h3",{children:Q?"Edit Recipe":"Create Recipe"}),n.jsx("p",{className:"sa-modal-sub",children:"Fill recipe details and ingredient lines. Recipe Category drives the recipe type."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:je,children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:10},children:[n.jsxs("label",{children:["Code",n.jsx("input",{value:k.code,onChange:b=>F("code",b.target.value),required:!0})]}),n.jsxs("label",{children:["Recipe Category *",n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[n.jsxs("select",{value:k.recipeCategoryId,onChange:b=>Z(b.target.value),required:!0,children:[n.jsx("option",{value:"",children:"-- Select Recipe Category --"}),pe.map(b=>n.jsx("option",{value:b._id,children:b.name},b._id))]}),n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>{T(!0),P("")},title:"Add Category",children:"+ Add Category"})]})]}),n.jsxs("label",{children:["Name",n.jsx("input",{value:k.name,onChange:b=>F("name",b.target.value),required:!0})]}),n.jsxs("label",{children:["Type",n.jsx("input",{value:k.type,disabled:!0})]}),n.jsxs("label",{children:["Resort",n.jsx("input",{value:k.resort,onChange:b=>F("resort",b.target.value),required:!0})]}),n.jsxs("label",{children:["Department",n.jsx("input",{value:k.department,onChange:b=>F("department",b.target.value)})]}),k.type==="RECIPE_LUMPSUM"&&n.jsxs(n.Fragment,{children:[n.jsxs("label",{children:["Yield Qty",n.jsx("input",{type:"number",min:"0",value:k.yieldQty,onChange:b=>F("yieldQty",b.target.value)}),n.jsx("small",{style:{display:"block",color:"#6b7280"},children:"Yield amount produced per batch"})]}),n.jsxs("label",{children:["Yield UOM",n.jsx("input",{value:k.yieldUOM,onChange:b=>F("yieldUOM",b.target.value)})]})]}),k.type==="RECIPE_PORTION"&&n.jsxs("label",{children:["Yield Portions",n.jsx("input",{type:"number",min:"1",value:k.yieldPortions,onChange:b=>F("yieldPortions",b.target.value)}),n.jsx("small",{style:{display:"block",color:"#6b7280"},children:"Number of portions this recipe yields"})]}),n.jsxs("label",{children:["Status",n.jsxs("select",{value:k.status,onChange:b=>F("status",b.target.value),children:[n.jsx("option",{value:"DRAFT",children:"Draft"}),n.jsx("option",{value:"ACTIVE",children:"Active"}),n.jsx("option",{value:"ARCHIVED",children:"Archived"})]})]})]}),n.jsxs("label",{style:{marginTop:10},children:["Instructions",n.jsx("textarea",{rows:3,value:k.instructions,onChange:b=>F("instructions",b.target.value)})]}),n.jsx("h4",{style:{marginTop:8},children:"Ingredients"}),n.jsxs("div",{className:"sa-card",style:{padding:10},children:[n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"40%"},children:"Item"}),n.jsx("th",{style:{width:"15%"},children:"Qty"}),n.jsx("th",{style:{width:"15%"},children:"UOM"}),n.jsx("th",{style:{width:"15%"},children:"Waste %"}),n.jsx("th",{})]})}),n.jsx("tbody",{children:k.lines.map((b,g)=>{var R;return n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("select",{value:b.itemId,onChange:J=>me(g,"itemId",J.target.value),required:!0,children:[n.jsx("option",{value:"",children:"-- Select item --"}),r.map(J=>n.jsx("option",{value:J._id||J.id,children:J.name},J._id||J.id))]})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:b.qty,onChange:J=>me(g,"qty",J.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{value:b.uom||((R=be(b.itemId))==null?void 0:R.uom)||"",onChange:J=>me(g,"uom",J.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:b.wastePercent,onChange:J=>me(g,"wastePercent",J.target.value)})}),n.jsx("td",{children:k.lines.length>1&&n.jsx("button",{type:"button",onClick:()=>Ee(g),children:"Remove"})})]},b.id)})})]}),n.jsx("button",{type:"button",className:"sa-secondary-button",style:{marginTop:8},onClick:se,children:"+ Add Ingredient"}),n.jsxs("div",{style:{marginTop:12,borderTop:"1px dashed #e5e7eb",paddingTop:8},children:[n.jsx("strong",{children:"Cost Preview"}),n.jsxs("div",{style:{marginTop:6},children:["Total ingredient cost: ",n.jsxs("strong",{children:[" ",Pe(j.totalIngredientCost)]}),k.type==="RECIPE_LUMPSUM"&&n.jsxs("div",{children:["Cost per yield: ",n.jsxs("strong",{children:[" ",Pe(j.perYieldCost??j.totalIngredientCost)]})]}),k.type==="RECIPE_PORTION"&&n.jsxs("div",{children:["Cost per portion: ",n.jsxs("strong",{children:[" ",Pe(j.perPortionCost??j.totalIngredientCost)]})]})]})]})]}),C&&n.jsx("div",{className:"sa-modal-error",style:{marginTop:8},children:C}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!K&&W(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:K,children:K?"Saving...":Q?"Update Recipe":"Save Recipe"})]})]})]})}),I&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>T(!1),children:n.jsxs("div",{className:"sa-modal",onClick:b=>b.stopPropagation(),style:{maxWidth:520},children:[n.jsx("h3",{children:"Add Recipe Category"}),n.jsx("p",{className:"sa-modal-sub",children:"Create a recipe category (type determines recipe behaviour)."}),n.jsxs("label",{children:["Name *",n.jsx("input",{value:q.name,onChange:b=>z(g=>({...g,name:b.target.value})),placeholder:"e.g. Lumpsum - Single fixed cost (Lumpsum)"})]}),n.jsxs("label",{children:["Type *",n.jsx("select",{value:q.type,onChange:b=>z(g=>({...g,type:b.target.value})),children:Kj.map(b=>n.jsx("option",{value:b.key,children:b.label},b.key))})]}),n.jsxs("label",{children:["Description",n.jsx("input",{value:q.description,onChange:b=>z(g=>({...g,description:b.target.value})),placeholder:"Optional description"})]}),B&&n.jsx("div",{className:"sa-modal-error",children:B}),n.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[n.jsx("button",{className:"sa-secondary-button",onClick:()=>T(!1),children:"Cancel"}),n.jsx("button",{className:"sa-primary-button",onClick:xe,children:"Save Category"})]})]})}),M&&G&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>ce(!1),children:n.jsxs("div",{className:"sa-modal",onClick:b=>b.stopPropagation(),children:[n.jsxs("h3",{children:[G.code,"  ",G.name]}),n.jsxs("p",{className:"sa-modal-sub",children:["Category: ",((De=re(G.recipeCategoryId))==null?void 0:De.name)||"-","  Type: ",G.type]}),n.jsxs("div",{style:{marginTop:8},children:[n.jsx("strong",{children:"Resort:"})," ",G.resort||"-"," ",n.jsx("br",{}),n.jsx("strong",{children:"Department:"})," ",G.department||"-"," ",n.jsx("br",{}),n.jsx("strong",{children:"Yield:"})," ",G.type==="RECIPE_PORTION"?`${G.yieldPortions||"-"} portions`:`${G.yieldQty||"-"} ${G.yieldUOM||""}`," ",n.jsx("br",{})]}),n.jsx("h4",{style:{marginTop:8},children:"Ingredients"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Waste %"})]})}),n.jsx("tbody",{children:(G.lines||[]).map((b,g)=>n.jsxs("tr",{children:[n.jsx("td",{children:D(b.itemId)}),n.jsx("td",{children:b.qty}),n.jsx("td",{children:b.uom}),n.jsx("td",{children:b.wastePercent??0})]},g))})]}),n.jsx("h4",{style:{marginTop:8},children:"Instructions"}),n.jsx("div",{style:{whiteSpace:"pre-wrap",color:"#374151"},children:G.instructions||"-"}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>ce(!1),children:"Close"}),n.jsx("button",{type:"button",className:"sa-primary-button",onClick:()=>{ce(!1),Re(G)},children:"Edit"})]})]})})]})},Pr="",qa={id:"user_1",name:"Amit",role:"RESORT_USER",resorts:["resort_1"]},$a=({title:e,value:t,hint:r})=>n.jsxs("div",{className:"sa-card",style:{padding:18,borderRadius:12},children:[n.jsx("div",{style:{fontSize:13,color:"#98a1b3"},children:e}),n.jsx("div",{style:{marginTop:12,fontSize:28,fontWeight:700},children:t}),r&&n.jsx("div",{style:{marginTop:8,fontSize:12,color:"#6b7a93"},children:r})]}),Jj=()=>{const[e,t]=p.useState([]),[r,s]=p.useState(""),[a,i]=p.useState({}),[o,l]=p.useState([]),[c,u]=p.useState([]),[d,f]=p.useState([]),[h,_]=p.useState(!1),[m,N]=p.useState(!1),[E,y]=p.useState(!1),[v,S]=p.useState(""),[w,$]=p.useState({resort:"",department:"",store:"",requiredBy:"",lines:[{lineId:`ln_${Date.now()}`,item:"",qty:1,remark:""}],type:"INTERNAL",vendor:""}),O={headers:{"x-demo-user":JSON.stringify(qa)}};p.useEffect(()=>{(async()=>{try{_(!0);const I=await H.get(`${Pr}/api/resorts`).catch(()=>({data:[{_id:"resort_1",name:"Blue Lagoon"}]}));t(I.data||[]);const T=qa.resorts&&qa.resorts[0]||I.data&&I.data[0]&&I.data[0]._id;s(T||"")}finally{_(!1)}})()},[]),p.useEffect(()=>{r&&W(r)},[r]);const W=async L=>{try{_(!0);const[I,T,q,z]=await Promise.all([H.get(`${Pr}/api/dashboard/resort/${L}/kpi`,O).catch(()=>({data:{openRequisitions:0,pendingApprovals:0,openPOs:0,lowStockCount:0}})),H.get(`${Pr}/api/requisitions?createdBy=${qa.id}&resort=${L}`,O).catch(()=>({data:[]})),H.get(`${Pr}/api/po?resort=${L}`,O).catch(()=>({data:[]})),H.get(`${Pr}/api/items?resort=${L}`,O).catch(()=>({data:[]}))]);i(I.data||{}),l(T.data||[]),u(q.data||[]),f(z.data||[])}catch(I){console.error("fetchAll error",I)}finally{_(!1)}},Q=()=>{$(L=>({...L,lines:[...L.lines,{lineId:`ln_${Date.now()}_${Math.random()}`,item:"",qty:1,remark:""}]}))},Y=L=>$(I=>({...I,lines:I.lines.filter((T,q)=>q!==L)})),M=(L,I,T)=>{$(q=>{const z=[...q.lines];return z[L][I]=T,{...q,lines:z}})},ce=()=>{S(""),$({resort:r||"",department:"",store:"",requiredBy:"",lines:[{lineId:`ln_${Date.now()}`,item:"",qty:1,remark:""}],type:"INTERNAL",vendor:""}),N(!0)},G=async L=>{var I,T;if(L.preventDefault(),S(""),!w.resort)return S("Select resort");if(!w.lines||w.lines.length===0)return S("Add at least one item line");if(w.type==="VENDOR"&&!w.vendor)return S("Select vendor for vendor requisition");try{y(!0);const q={resort:w.resort,department:w.department,store:w.store,requiredBy:w.requiredBy||new Date,type:w.type,vendor:w.vendor||null,lines:w.lines.map(B=>({item:B.item,qty:Number(B.qty)||1,remark:B.remark}))},z=await H.post(`${Pr}/api/requisitions`,q,O);W(w.resort),N(!1)}catch(q){console.error(q),S(((T=(I=q.response)==null?void 0:I.data)==null?void 0:T.message)||"Failed to create requisition")}finally{y(!1)}};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{children:[n.jsx("h2",{style:{margin:0},children:"Resort Dashboard"}),n.jsx("p",{style:{margin:"4px 0 0 0",color:"#9aa3b2"},children:"Quick overview & actions for your assigned resort"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("div",{style:{color:"#98a1b3",fontSize:13},children:"Current Resort"}),n.jsxs("select",{value:r||"",onChange:L=>s(L.target.value),style:{background:"#0f1720",color:"#fff",borderRadius:6,padding:"8px 10px",border:"1px solid rgba(255,255,255,0.06)"},children:[n.jsx("option",{value:"",children:"-- Select Resort --"}),e.map(L=>n.jsx("option",{value:L._id,children:L.name},L._id))]})]}),n.jsx("button",{className:"sa-primary-button",onClick:ce,style:{background:"#16a34a",borderRadius:20,padding:"8px 16px"},children:"+ New Requisition"})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:16,marginTop:18},children:[n.jsx($a,{title:"Open Requisitions",value:a.openRequisitions??0,hint:"Waiting for approval"}),n.jsx($a,{title:"Pending Approvals",value:a.pendingApprovals??0,hint:"Need your review"}),n.jsx($a,{title:"Open POs",value:a.openPOs??0,hint:"POs open for receipt"}),n.jsx($a,{title:"Low Stock Items",value:a.lowStockCount??0,hint:"Below reorder level"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:18,marginTop:20},children:[n.jsxs("div",{className:"sa-card",style:{padding:18},children:[n.jsx("h3",{style:{marginTop:0},children:"My Recent Requisitions"}),h?n.jsx("div",{children:"Loading..."}):o.length===0?n.jsx("div",{className:"text-muted",children:"No requisitions created by you."}):n.jsxs("table",{className:"sa-table",style:{width:"100%",marginTop:8},children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Req No"}),n.jsx("th",{children:"Lines"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Date"})]})}),n.jsx("tbody",{children:o.map(L=>{var I;return n.jsxs("tr",{children:[n.jsx("td",{children:L.requisitionNo}),n.jsx("td",{children:(I=L.lines)==null?void 0:I.map(T=>`${T.item} x ${T.qty}`).join(", ")}),n.jsx("td",{children:n.jsx("span",{style:{padding:"4px 8px",borderRadius:12,background:"#0b1220",color:"#fff"},children:L.status})}),n.jsx("td",{children:new Date(L.createdAt).toLocaleDateString()})]},L._id)})})]})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[n.jsxs("div",{className:"sa-card",style:{padding:18},children:[n.jsx("h3",{style:{marginTop:0},children:"Open POs"}),c.length===0?n.jsx("div",{className:"text-muted",children:"No open POs for this resort."}):n.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:c.map(L=>n.jsxs("li",{style:{padding:10,borderRadius:8,background:"rgba(255,255,255,0.01)",marginBottom:8},children:[n.jsx("div",{style:{fontWeight:600},children:L.poNo}),n.jsx("div",{style:{color:"#98a1b3",fontSize:13},children:L.vendor||"Vendor"}),n.jsx("div",{style:{marginTop:6,fontSize:12,color:"#6b7a93"},children:L.status})]},L._id))})]}),n.jsxs("div",{className:"sa-card",style:{padding:18},children:[n.jsx("h3",{style:{marginTop:0},children:"Low / Important Items"}),d.length===0?n.jsx("div",{className:"text-muted",children:"No items data."}):n.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:d.slice(0,6).map(L=>n.jsxs("li",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,0.02)"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:600},children:L.name}),n.jsx("div",{style:{color:"#98a1b3",fontSize:12},children:L.sku||""})]}),n.jsxs("div",{style:{fontWeight:600},children:[Object.values(L.stockByStore||{}).reduce((I,T)=>I+T,0)," in stock"]})]},L._id))})]})]})]}),m&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!E&&N(!1),children:n.jsxs("div",{className:"sa-modal",onClick:L=>L.stopPropagation(),style:{maxWidth:900},children:[n.jsx("h3",{children:"Create Requisition"}),n.jsx("p",{className:"sa-modal-sub",children:"Fill the following details to raise a requisition."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:G,children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[n.jsxs("label",{children:["Resort",n.jsxs("select",{name:"resort",value:w.resort,onChange:L=>$(I=>({...I,resort:L.target.value})),required:!0,children:[n.jsx("option",{value:"",children:"-- Select Resort --"}),e.map(L=>n.jsx("option",{value:L._id,children:L.name},L._id))]})]}),n.jsxs("label",{children:["Requisition Type",n.jsxs("select",{name:"type",value:w.type,onChange:L=>$(I=>({...I,type:L.target.value})),children:[n.jsx("option",{value:"INTERNAL",children:"Internal (Store to Store)"}),n.jsx("option",{value:"VENDOR",children:"Vendor (Buy from vendor)"})]})]}),n.jsxs("label",{children:["Department",n.jsx("input",{name:"department",value:w.department,onChange:L=>$(I=>({...I,department:L.target.value}))})]}),n.jsxs("label",{children:["Store",n.jsx("input",{name:"store",value:w.store,onChange:L=>$(I=>({...I,store:L.target.value}))})]}),w.type==="VENDOR"&&n.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Vendor",n.jsx("input",{name:"vendor",value:w.vendor,onChange:L=>$(I=>({...I,vendor:L.target.value})),placeholder:"Vendor name or id"})]}),n.jsxs("label",{children:["Required By",n.jsx("input",{type:"date",name:"requiredBy",value:w.requiredBy,onChange:L=>$(I=>({...I,requiredBy:L.target.value}))})]})]}),n.jsxs("div",{style:{marginTop:12},children:[n.jsxs("table",{className:"sa-table",style:{width:"100%"},children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Remark"}),n.jsx("th",{})]})}),n.jsx("tbody",{children:w.lines.map((L,I)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("input",{value:L.item,onChange:T=>M(I,"item",T.target.value),placeholder:"Item id or name",required:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"1",value:L.qty,onChange:T=>M(I,"qty",T.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{value:L.remark,onChange:T=>M(I,"remark",T.target.value)})}),n.jsx("td",{children:w.lines.length>1&&n.jsx("button",{type:"button",onClick:()=>Y(I),children:"Remove"})})]},L.lineId))})]}),n.jsx("button",{type:"button",onClick:Q,style:{marginTop:8},className:"sa-secondary-button",children:"+ Add Line"})]}),v&&n.jsx("div",{className:"sa-modal-error",style:{marginTop:8},children:v}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!E&&N(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:E,children:E?"Saving...":"Save Requisition"})]})]})]})})]})},Zj="http://localhost:5000",ps=H.create({baseURL:Zj,headers:{"Content-Type":"application/json"}});try{const e=localStorage.getItem("auth");if(e){const t=JSON.parse(e);t.token&&(ps.defaults.headers.common.Authorization=`Bearer ${t.token}`)}}catch{}const ya=({selected:e,onChange:t})=>{const[r,s]=p.useState([]);return p.useEffect(()=>{async function a(){try{const i=await ps.get("/resort-user/assigned-resorts");s(i.data.resorts||[])}catch(i){console.error("Failed to load resorts",i)}}a()},[]),n.jsxs("select",{value:e||"",onChange:a=>t(a.target.value),children:[n.jsx("option",{value:"",children:"-- Select Resort --"}),r.map(a=>n.jsx("option",{value:a._id,children:a.name},a._id))]})},Xj=({title:e,children:t,onClose:r})=>n.jsx("div",{className:"sa-modal-backdrop",onClick:r,children:n.jsxs("div",{className:"sa-modal",onClick:s=>s.stopPropagation(),children:[n.jsxs("div",{className:"sa-modal-header",children:[n.jsx("h3",{children:e}),n.jsx("button",{className:"sa-modal-close",onClick:r,children:""})]}),n.jsx("div",{className:"sa-modal-body",children:t})]})}),af=({onClose:e})=>{const[t,r]=p.useState(""),[s,a]=p.useState(""),[i,o]=p.useState([{item:"",qty:1,remark:""}]),[l,c]=p.useState(""),u=()=>o(h=>[...h,{item:"",qty:1,remark:""}]),d=h=>o(_=>_.filter((m,N)=>N!==h)),f=async h=>{h.preventDefault();try{const _={resort:t,department:s,lines:i},m=await ps.post("/resort-user/requisitions",_);c("Requisition created: "+(m.data.requisition.requisitionNo||"")),e&&setTimeout(()=>e(),800)}catch(_){console.error(_),c("Failed to create requisition")}};return n.jsxs("div",{children:[n.jsx(ya,{selected:t,onChange:r}),n.jsxs("form",{onSubmit:f,children:[n.jsx("div",{style:{marginTop:8},children:n.jsxs("label",{children:["Department / Store",n.jsx("br",{}),n.jsx("input",{value:s,onChange:h=>a(h.target.value),required:!0})]})}),n.jsxs("table",{style:{width:"100%",marginTop:8},children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Remark"}),n.jsx("th",{})]})}),n.jsx("tbody",{children:i.map((h,_)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("input",{value:h.item,onChange:m=>{const N=m.target.value;o(E=>{const y=[...E];return y[_].item=N,y})},required:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"1",value:h.qty,onChange:m=>{const N=Number(m.target.value);o(E=>{const y=[...E];return y[_].qty=N,y})}})}),n.jsx("td",{children:n.jsx("input",{value:h.remark,onChange:m=>{const N=m.target.value;o(E=>{const y=[...E];return y[_].remark=N,y})}})}),n.jsx("td",{children:_>0&&n.jsx("button",{type:"button",onClick:()=>d(_),children:"Remove"})})]},_))})]}),n.jsxs("div",{style:{marginTop:8},children:[n.jsx("button",{type:"button",onClick:u,children:"Add Line"})," ",n.jsx("button",{type:"submit",children:"Submit Requisition"})," ",e&&n.jsx("button",{type:"button",onClick:e,children:"Close"})]})]}),l&&n.jsx("div",{style:{marginTop:8},children:l})]})},Ba=({title:e,value:t,subtitle:r,actionText:s,actionLink:a})=>n.jsxs("div",{className:"sa-stat-card",children:[n.jsx("div",{className:"sa-stat-title",children:e}),n.jsx("div",{className:"sa-stat-value",children:t}),n.jsx("div",{className:"sa-stat-sub",children:r}),s&&a&&n.jsx(Ph,{to:a,className:"sa-stat-action",children:s})]}),e0=()=>{const[e,t]=p.useState(""),[r,s]=p.useState({totalResorts:0,openRequisitions:0,pendingGRN:0,lowStockItems:0}),[a,i]=p.useState(!1),[o,l]=p.useState(!1);return p.useEffect(()=>{e&&(i(!0),ps.get(`/resort-user/dashboard-stats/${e}`).then(c=>{s(c.data||{})}).catch(c=>{console.error("Failed to load dashboard stats",c)}).finally(()=>i(!1)))},[e]),n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("h2",{children:"Resort User Dashboard"}),n.jsx("div",{style:{display:"flex",gap:12,alignItems:"center"},children:n.jsx("button",{className:"btn btn-primary",onClick:()=>l(!0),children:"+ New Requisition"})})]}),n.jsxs("div",{style:{marginTop:10,marginBottom:20},children:[n.jsx("label",{style:{marginRight:10},children:"Current Resort: "}),n.jsx(ya,{selected:e,onChange:t})]}),n.jsxs("div",{className:"sa-card-grid",style:{display:"grid",gridTemplateColumns:"repeat(4,1fr)",gap:16},children:[n.jsx(Ba,{title:"Total Resorts",value:r.totalResorts,subtitle:"Active properties"}),n.jsx(Ba,{title:"Open Requisitions",value:r.openRequisitions,subtitle:"Waiting for approval",actionText:"+ view",actionLink:"/resort/requisitions"}),n.jsx(Ba,{title:"Pending GRN",value:r.pendingGRN,subtitle:"PO received, GRN not done",actionText:"Review",actionLink:"/resort/grn"}),n.jsx(Ba,{title:"Low Stock Items",value:r.lowStockItems,subtitle:"Below reorder level",actionText:"Check now",actionLink:"/resort/reports"})]}),a&&n.jsx("div",{style:{marginTop:20},children:"Loading stats..."}),o&&n.jsx(Xj,{title:"Create Requisition",onClose:()=>l(!1),children:n.jsx(af,{onClose:()=>l(!1)})})]})},t0=()=>{const[e,t]=p.useState(""),[r,s]=p.useState(""),[a,i]=p.useState([{item:"",qty:1,rate:0}]),[o,l]=p.useState(""),c=()=>i(d=>[...d,{item:"",qty:1,rate:0}]),u=async()=>{try{const d=await ps.post("/resort-user/po",{resort:e,vendor:r,items:a});l("PO created: "+(d.data.po.poNo||""))}catch(d){console.error(d),l("Failed to create PO")}};return n.jsxs("div",{className:"sa-page",children:[n.jsx("h2",{children:"Create PO"}),n.jsx(ya,{selected:e,onChange:t}),n.jsxs("label",{children:["Vendor ",n.jsx("input",{value:r,onChange:d=>s(d.target.value)})]}),n.jsx("div",{children:a.map((d,f)=>n.jsxs("div",{children:[n.jsx("input",{placeholder:"Item",value:d.item,onChange:h=>{const _=h.target.value;i(m=>{const N=[...m];return N[f].item=_,N})}}),n.jsx("input",{type:"number",value:d.qty,onChange:h=>{const _=Number(h.target.value);i(m=>{const N=[...m];return N[f].qty=_,N})}}),n.jsx("input",{type:"number",value:d.rate,onChange:h=>{const _=Number(h.target.value);i(m=>{const N=[...m];return N[f].rate=_,N})}})]},f))}),n.jsx("button",{onClick:c,children:"Add Item"}),n.jsx("button",{onClick:u,children:"Create PO"}),o&&n.jsx("div",{children:o})]})},n0=()=>{const[e,t]=p.useState(""),[r,s]=p.useState(""),[a,i]=p.useState(""),[o,l]=p.useState(""),[c,u]=p.useState([{item:"",receivedQty:0,rejectedQty:0}]),[d,f]=p.useState(""),h=async()=>{try{const _=await ps.post("/resort-user/grn",{resort:e,store:r,vendor:a,po:o,items:c});f("GRN created: "+(_.data.grn.grnNo||""))}catch(_){console.error(_),f("Failed to create GRN")}};return n.jsxs("div",{className:"sa-page",children:[n.jsx("h2",{children:"GRN Entry"}),n.jsx(ya,{selected:e,onChange:t}),n.jsxs("label",{children:["Store ",n.jsx("input",{value:r,onChange:_=>s(_.target.value)})]}),n.jsxs("label",{children:["Vendor ",n.jsx("input",{value:a,onChange:_=>i(_.target.value)})]}),n.jsxs("label",{children:["PO ",n.jsx("input",{value:o,onChange:_=>l(_.target.value)})]}),n.jsx("button",{onClick:h,children:"Create GRN"}),d&&n.jsx("div",{children:d})]})},r0=()=>n.jsxs("div",{className:"sa-page",children:[n.jsx("h2",{children:"Purchase Reports"}),n.jsx(ya,{onChange:()=>{}}),n.jsxs("ul",{children:[n.jsx("li",{children:n.jsx("a",{href:"#",onClick:e=>{e.preventDefault(),alert("Report: Requisition Register (stub)")},children:"Requisition Register"})}),n.jsx("li",{children:n.jsx("a",{href:"#",onClick:e=>{e.preventDefault(),alert("Report: Pending Requisition (stub)")},children:"Pending Requisition"})}),n.jsx("li",{children:n.jsx("a",{href:"#",onClick:e=>{e.preventDefault(),alert("Report: PO Register (stub)")},children:"PO Register"})})]})]}),s0=()=>{const[e,t]=p.useState("purchase"),[r,s]=p.useState({resort:"all",from:"",to:""}),a=i=>{s(o=>({...o,[i.target.name]:i.target.value}))};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Reports"}),n.jsx("p",{children:"Purchase, stock & consumption analytics for all resorts."})]}),n.jsxs("button",{className:"sa-primary-button",type:"button",children:[n.jsx("i",{className:"ri-download-2-line"})," Export"]})]}),n.jsxs("div",{className:"sa-card sa-report-filters",children:[n.jsxs("div",{className:"sa-tabs",children:[n.jsx("button",{type:"button",className:`sa-tab ${e==="purchase"?"active":""}`,onClick:()=>t("purchase"),children:"Purchase Summary"}),n.jsx("button",{type:"button",className:`sa-tab ${e==="stock"?"active":""}`,onClick:()=>t("stock"),children:"Stock Ledger"}),n.jsx("button",{type:"button",className:`sa-tab ${e==="consumption"?"active":""}`,onClick:()=>t("consumption"),children:"Consumption Report"})]}),n.jsxs("div",{className:"sa-report-filter-row",children:[n.jsxs("div",{className:"sa-report-filter-group",children:[n.jsx("label",{children:"Resort"}),n.jsxs("select",{name:"resort",value:r.resort,onChange:a,children:[n.jsx("option",{value:"all",children:"All Resorts"}),n.jsx("option",{value:"beachside",children:"Beachside Resort"}),n.jsx("option",{value:"hillview",children:"Hillview Resort"})]})]}),n.jsxs("div",{className:"sa-report-filter-group",children:[n.jsx("label",{children:"From"}),n.jsx("input",{type:"date",name:"from",value:r.from,onChange:a})]}),n.jsxs("div",{className:"sa-report-filter-group",children:[n.jsx("label",{children:"To"}),n.jsx("input",{type:"date",name:"to",value:r.to,onChange:a})]})]})]}),e==="purchase"&&n.jsx(a0,{}),e==="stock"&&n.jsx(i0,{}),e==="consumption"&&n.jsx(o0,{})]})},a0=()=>{const e=[{resort:"Beachside Resort",vendor:"FreshFoods Supplier",orders:12,value:" 4,25,000"},{resort:"Hillview Resort",vendor:"Beverage Distributors",orders:8,value:" 2,10,000"}];return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"sa-grid-3",children:[n.jsxs("div",{className:"sa-card sa-report-kpi",children:[n.jsx("div",{className:"sa-report-kpi-label",children:"Total PO Value"}),n.jsx("div",{className:"sa-report-kpi-value",children:" 9,80,000"}),n.jsx("div",{className:"sa-report-kpi-sub",children:"Last 30 days"})]}),n.jsxs("div",{className:"sa-card sa-report-kpi",children:[n.jsx("div",{className:"sa-report-kpi-label",children:"Vendors"}),n.jsx("div",{className:"sa-report-kpi-value",children:"18"}),n.jsx("div",{className:"sa-report-kpi-sub",children:"With active PO"})]}),n.jsxs("div",{className:"sa-card sa-report-kpi",children:[n.jsx("div",{className:"sa-report-kpi-label",children:"Avg. PO Value"}),n.jsx("div",{className:"sa-report-kpi-value",children:" 54,000"}),n.jsx("div",{className:"sa-report-kpi-sub",children:"Per order"})]})]}),n.jsxs("div",{className:"sa-card",style:{marginTop:16},children:[n.jsx("div",{className:"sa-card-title",children:"Resort & vendor-wise purchase"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Resort"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"No. of POs"}),n.jsx("th",{children:"Total Value"})]})}),n.jsx("tbody",{children:e.map((t,r)=>n.jsxs("tr",{children:[n.jsx("td",{children:t.resort}),n.jsx("td",{children:t.vendor}),n.jsx("td",{children:t.orders}),n.jsx("td",{children:t.value})]},r))})]})]})]})},i0=()=>{const e=[{item:"Mineral Water 1L",store:"Beachside - Main Store",opening:120,inQty:80,outQty:60,closing:140},{item:"Room Freshener",store:"Hillview - HK Store",opening:40,inQty:30,outQty:20,closing:50}];return n.jsxs("div",{className:"sa-card",children:[n.jsx("div",{className:"sa-card-title",children:"Item-wise in/out balance"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Opening"}),n.jsx("th",{children:"In"}),n.jsx("th",{children:"Out"}),n.jsx("th",{children:"Closing"})]})}),n.jsx("tbody",{children:e.map((t,r)=>n.jsxs("tr",{children:[n.jsx("td",{children:t.item}),n.jsx("td",{children:t.store}),n.jsx("td",{children:t.opening}),n.jsx("td",{children:t.inQty}),n.jsx("td",{children:t.outQty}),n.jsx("td",{children:t.closing})]},r))})]})]})},o0=()=>{const e=[{resort:"Beachside Resort",department:"F&B",item:"Mineral Water 1L",qty:220},{resort:"Hillview Resort",department:"Housekeeping",item:"Room Freshener",qty:65}];return n.jsxs("div",{className:"sa-card",children:[n.jsx("div",{className:"sa-card-title",children:"Department / outlet-wise usage"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Resort"}),n.jsx("th",{children:"Department"}),n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Consumed Qty"})]})}),n.jsx("tbody",{children:e.map((t,r)=>n.jsxs("tr",{children:[n.jsx("td",{children:t.resort}),n.jsx("td",{children:t.department}),n.jsx("td",{children:t.item}),n.jsx("td",{children:t.qty})]},r))})]})]})},l0=({children:e,allowedRoles:t})=>{const{user:r}=od();return r?t&&!t.includes(r.role)?n.jsx(Ii,{to:"/login",replace:!0}):e:n.jsx(Ii,{to:"/login",replace:!0})},za="http://localhost:5000",Jo={SUPER_ADMIN:{label:"Super Admin (full access)",modules:{USERS:["CREATE","READ","UPDATE","DELETE"],ROLES:["CREATE","READ","UPDATE","DELETE"],RESORTS:["CREATE","READ","UPDATE","DELETE"],VENDORS:["CREATE","READ","UPDATE","DELETE"],ITEMS:["CREATE","READ","UPDATE","DELETE"],REQUISITIONS:["CREATE","READ","UPDATE","DELETE","APPROVE"],PO:["CREATE","READ","UPDATE","DELETE"],GRN:["CREATE","READ","UPDATE","DELETE"],REPORTS:["READ"]}},RESORT_USER:{label:"Resort User (operational)",modules:{REQUISITIONS:["CREATE","READ"],ITEMS:["READ"],STORES:["READ"],REPORTS:["READ"]}},APPROVER:{label:"Approver (requisition approvals)",modules:{REQUISITIONS:["READ","APPROVE","COMMENT"],REPORTS:["READ"]}},PURCHASE_MANAGER:{label:"Purchase Manager (PO & vendor)",modules:{REQUISITIONS:["READ"],PO:["CREATE","READ","UPDATE"],VENDORS:["READ","UPDATE"],ITEMS:["READ","UPDATE"],REPORTS:["READ"]}},STORE_USER:{label:"Store / Store Incharge",modules:{GRN:["CREATE","READ"],ITEMS:["READ","UPDATE_STOCK"],REQUISITIONS:["READ"]}}},c0=()=>{const[e,t]=p.useState([]),[r,s]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState(null),[c,u]=p.useState(""),[d,f]=p.useState({name:"",key:"",description:"",type:"CUSTOM",storeMode:"MULTI",permissions:[]}),[h,_]=p.useState(!1),[m,N]=p.useState(!1),[E,y]=p.useState(""),v=async()=>{try{const T=await H.get(`${za}/api/roles/meta`);s(T.data.modules||[]),i(T.data.actions||[])}catch(T){console.error("Failed to load roles meta",T),s(q=>q.length?q:["USERS","ROLES","RESORTS","REQUISITIONS","PO","GRN","ITEMS","VENDORS","REPORTS"]),i(q=>q.length?q:["CREATE","READ","UPDATE","DELETE","APPROVE","COMMENT"])}},S=async()=>{try{_(!0);const T=await H.get(`${za}/api/roles`);t(T.data||[])}catch(T){console.error("Failed to load roles",T),y("Failed to load roles")}finally{_(!1)}};p.useEffect(()=>{v(),S()},[]);const w=()=>y(""),$=T=>{l(T._id),f({name:T.name||"",key:T.key||"",description:T.description||"",type:T.type||"CUSTOM",storeMode:T.storeMode||"MULTI",permissions:T.permissions||[]}),u(""),w()},O=()=>{l(null),f({name:"",key:"",description:"",type:"CUSTOM",storeMode:"MULTI",permissions:[]}),u(""),w()},W=T=>{const{name:q,value:z}=T.target;o&&d.type==="SYSTEM"&&q==="key"||(f(B=>({...B,[q]:z})),w())},Q=(T,q)=>{const z=d.permissions.find(B=>B.module===T);return z?z.actions.includes(q):!1},Y=(T,q)=>{f(z=>{const B=[...z.permissions],P=B.findIndex(k=>k.module===T);if(P===-1)B.push({module:T,actions:[q]});else{const k=new Set(B[P].actions||[]);k.has(q)?k.delete(q):k.add(q),B[P].actions=Array.from(k)}const A=B.filter(k=>k.actions&&k.actions.length);return{...z,permissions:A}}),w()},M=(T,q=!0)=>{if(!T)return;const z=Jo[T];if(!z)return;const B=r.map(P=>{const k=(z.modules&&z.modules[P]||z.modules&&z.modules[P.toUpperCase()]||[]).filter(te=>a.includes(te));return k.length?{module:P,actions:k}:null}).filter(Boolean);f(P=>{const A=q?B:ce(P.permissions,B);return{...P,permissions:A,type:T==="SUPER_ADMIN"?"SYSTEM":P.type,key:P.key||T,name:P.name||z.label||P.name}}),u(T),w()},ce=(T=[],q=[])=>{const z=new Map;return T.forEach(P=>z.set(P.module,new Set(P.actions||[]))),q.forEach(P=>{const A=z.get(P.module)||new Set;(P.actions||[]).forEach(k=>A.add(k)),z.set(P.module,A)}),Array.from(z.entries()).map(([P,A])=>({module:P,actions:Array.from(A)}))},G=T=>{f(q=>({...q,permissions:q.permissions.filter(z=>z.module!==T)}))},L=async()=>{var T,q;if(!d.name||!d.key){y("Role name & key are required");return}if(d.type==="SYSTEM"&&o===null){y("Cannot create new SYSTEM role from UI. Use custom roles or ask system admin.");return}try{if(N(!0),y(""),o){const z=await H.put(`${za}/api/roles/${o}`,{name:d.name,description:d.description,permissions:d.permissions,storeMode:d.storeMode});t(B=>B.map(P=>P._id===o?z.data:P))}else{const z=await H.post(`${za}/api/roles`,{name:d.name,key:d.key,description:d.description,type:"CUSTOM",permissions:d.permissions,storeMode:d.storeMode});t(B=>[...B,z.data]),l(z.data._id)}w()}catch(z){console.error("save error",z),y(((q=(T=z.response)==null?void 0:T.data)==null?void 0:q.message)||"Failed to save role")}finally{N(!1)}},I=T=>typeof T=="string"?T.replace(/_/g," "):T;return n.jsxs("div",{className:"sa-page sa-page-roles",children:[n.jsx("div",{className:"sa-page-header",children:n.jsxs("div",{children:[n.jsx("h2",{children:"User Roles"}),n.jsx("p",{children:"Define system & custom roles with module-wise permissions and store access."})]})}),n.jsxs("div",{className:"sa-roles-layout",children:[n.jsxs("div",{className:"sa-roles-left",children:[n.jsx("div",{className:"sa-roles-section-title",children:"Roles"}),h?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Loading roles..."}):n.jsxs("ul",{className:"sa-roles-list",children:[e.map(T=>n.jsxs("li",{className:"sa-role-pill "+(o===T._id?"active":"")+(T.type==="SYSTEM"?" system":""),onClick:()=>$(T),children:[n.jsx("div",{className:"sa-role-name",children:T.name}),n.jsxs("div",{className:"sa-role-sub",children:[(T.type||"CUSTOM").toLowerCase(),"  ",T.key," "," ",(T.storeMode||"MULTI")==="SINGLE"?"Single Store":"Multi Store"]})]},T._id)),!h&&e.length===0&&n.jsx("li",{className:"sa-role-sub",children:"No roles created yet."})]}),n.jsxs("button",{className:"sa-primary-button",onClick:O,children:[n.jsx("i",{className:"ri-add-line"})," New Custom Role"]})]}),n.jsxs("div",{className:"sa-roles-right",children:[n.jsxs("div",{className:"sa-card",style:{marginBottom:12},children:[n.jsx("h3",{children:"Basic Details"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 1fr) minmax(0, 1fr)",gap:16,marginTop:8},children:[n.jsxs("div",{children:[n.jsx("label",{children:"Role Name"}),n.jsx("input",{name:"name",value:d.name,onChange:W,placeholder:"Store Incharge / Front Office..."})]}),n.jsxs("div",{children:[n.jsx("label",{children:"Key"}),n.jsx("input",{name:"key",value:d.key,onChange:W,placeholder:"STORE_USER",disabled:!!o&&d.type==="SYSTEM"})]}),n.jsxs("div",{children:[n.jsx("label",{children:"Type"}),n.jsxs("select",{name:"type",value:d.type,onChange:W,disabled:!!o&&d.type==="SYSTEM",children:[n.jsx("option",{value:"CUSTOM",children:"CUSTOM"}),n.jsx("option",{value:"SYSTEM",children:"SYSTEM"})]})]})]}),n.jsxs("div",{style:{marginTop:16},children:[n.jsx("div",{style:{fontSize:14,fontWeight:600,marginBottom:4},children:"Store Access"}),n.jsxs("div",{style:{display:"flex",gap:24,fontSize:14,flexWrap:"wrap"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[n.jsx("input",{type:"radio",name:"storeMode",value:"SINGLE",checked:d.storeMode==="SINGLE",onChange:W}),"Single Store (user can be mapped to only one store)"]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[n.jsx("input",{type:"radio",name:"storeMode",value:"MULTI",checked:d.storeMode==="MULTI",onChange:W}),"Multi Store (user can be mapped to multiple stores)"]})]})]}),n.jsxs("div",{style:{marginTop:16},children:[n.jsx("label",{children:"Description"}),n.jsx("textarea",{name:"description",value:d.description,onChange:W,rows:2,placeholder:"Short description for this role..."})]}),n.jsxs("div",{style:{marginTop:16,paddingTop:12,borderTop:"1px solid rgba(255,255,255,0.05)"},children:[n.jsx("div",{style:{fontSize:13,fontWeight:600,marginBottom:6},children:"Copy permissions from template (optional)"}),n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[n.jsxs("select",{value:c,onChange:T=>u(T.target.value),style:{flex:1,minWidth:240},children:[n.jsx("option",{value:"",children:"-- Select a template --"}),Object.keys(Jo).map(T=>n.jsxs("option",{value:T,children:[T,"  ",Jo[T].label]},T))]}),n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>M(c,!0),disabled:!c,children:"Apply"}),n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>M(c,!1),disabled:!c,title:"Merge template with existing permissions",children:"Merge"})]})]})]}),n.jsxs("div",{className:"sa-card",children:[n.jsx("h3",{children:"Permissions"}),n.jsx("p",{className:"sa-modal-sub",children:"Tick what this role can do in each module."}),n.jsx("div",{className:"sa-role-permission-table",style:{overflowX:"auto"},children:n.jsxs("table",{children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Module"}),a.map(T=>n.jsx("th",{style:{whiteSpace:"nowrap"},children:T},T)),n.jsx("th",{style:{width:60},children:"Clear"})]})}),n.jsxs("tbody",{children:[r.map(T=>n.jsxs("tr",{children:[n.jsx("td",{style:{minWidth:160},children:I(T)}),a.map(q=>n.jsx("td",{style:{textAlign:"center"},children:n.jsx("input",{type:"checkbox",checked:Q(T,q),onChange:()=>Y(T,q),"aria-label":`${T}-${q}`})},q)),n.jsx("td",{style:{textAlign:"center"},children:n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>G(T),children:"Clear"})})]},T)),r.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:a.length+2,children:"No modules metadata loaded."})})]})]})}),E&&n.jsx("div",{className:"sa-modal-error",style:{marginTop:8},children:E}),n.jsx("div",{className:"sa-modal-actions",style:{marginTop:12},children:n.jsx("button",{type:"button",className:"sa-primary-button",onClick:L,disabled:m,children:m?"Saving...":"Save Role"})})]})]})]})]})},d0="http://localhost:5000",u0=[{value:"",label:"All Types"},{value:"LUMPSUM",label:"Lumpsum"},{value:"RECIPE_LUMPSUM",label:"Lumpsum by Recipe"},{value:"RECIPE_PORTION",label:"Portion by Recipe"},{value:"REPLACEMENT",label:"Store Replacement"}],m0=e=>e?e==="LUMPSUM"?"Lumpsum":e==="RECIPE_LUMPSUM"?"Lumpsum by Recipe":e==="RECIPE_PORTION"?"Portion by Recipe":e==="REPLACEMENT"?"Store Replacement":e:"-",Zo=[{_id:"dev_cons_1",date:new Date().toISOString(),type:"LUMPSUM",eventName:"Staff Meal - Kitchen",menuName:null,resort:"Resort A",department:"Kitchen",storeFrom:{_id:"store_cold",name:"Cold Store"},storeTo:null,lines:[{item:"Rice",qty:10,uom:"Kg"}],notes:"Daily staff meal lumpsum"},{_id:"dev_cons_2",date:new Date().toISOString(),type:"RECIPE_LUMPSUM",eventName:"Wedding Dinner",menuName:"Veg Buffet",resort:"Resort A",department:null,storeFrom:{_id:"store_main",name:"Main Store"},storeTo:null,lines:[{item:"Paneer",qty:8,uom:"Kg"}],notes:"Recipe lumpsum for wedding"},{_id:"dev_cons_3",date:new Date().toISOString(),type:"RECIPE_PORTION",eventName:"Catering - 50 pax",menuName:"Set Menu B",resort:"Resort B",department:null,storeFrom:{_id:"store_cold",name:"Cold Store"},storeTo:null,lines:[{item:"Chicken",qty:25,uom:"Kg"}],notes:"Portion consumption by recipe"},{_id:"dev_cons_4",date:new Date().toISOString(),type:"LUMPSUM",eventName:"Banquet - Lumpsum",menuName:"Banquet Menu",resort:"Resort C",department:null,storeFrom:{_id:"store_freezer",name:"Freezer"},storeTo:null,lines:[{item:"Oil",qty:20,uom:"Ltr"}],notes:"Lumpsum for banquet"},{_id:"dev_rep_1",date:new Date().toISOString(),type:"REPLACEMENT",referenceNo:"REP-2025-001",resort:"Resort A",department:null,storeFrom:{_id:"store_main",name:"Main Store"},storeTo:{_id:"store_bar",name:"Bar Store"},lines:[{item:"Beer",qty:50,uom:"Nos"}],notes:"Transfer to bar"},{_id:"dev_rep_2",date:new Date().toISOString(),type:"REPLACEMENT",referenceNo:"REP-2025-002",resort:"Resort A",department:null,storeFrom:{_id:"store_main",name:"Main Store"},storeTo:{_id:"store_spa",name:"Spa Store"},lines:[{item:"Towel",qty:30,uom:"Nos"}],notes:"Towels transfer"},{_id:"dev_rep_3",date:new Date().toISOString(),type:"REPLACEMENT",referenceNo:"REP-2025-003",resort:"Resort B",department:null,storeFrom:{_id:"store_cold",name:"Cold Store"},storeTo:{_id:"store_kitchen2",name:"Kitchen 2"},lines:[{item:"Vegetables",qty:100,uom:"Kg"}],notes:"Veg transfer"},{_id:"dev_rep_4",date:new Date().toISOString(),type:"REPLACEMENT",referenceNo:"REP-2025-004",resort:"Resort C",department:null,storeFrom:{_id:"store_freezer",name:"Freezer"},storeTo:{_id:"store_main",name:"Main Store"},lines:[{item:"Frozen Fish",qty:40,uom:"Kg"}],notes:"Frozen goods to main"},{_id:"dev_rep_5",date:new Date().toISOString(),type:"REPLACEMENT",referenceNo:"REP-2025-005",resort:"Resort B",department:null,storeFrom:{_id:"store_tools",name:"Tools Store"},storeTo:{_id:"store_maint",name:"Maintenance Store"},lines:[{item:"Screws",qty:500,uom:"Nos"}],notes:"Maintenance transfer"}],p0=()=>{const[e,t]=p.useState([]),[r,s]=p.useState([]),[a,i]=p.useState(""),[o,l]=p.useState(!1),[c,u]=p.useState(""),[d,f]=p.useState("consume"),[h,_]=p.useState(""),[m,N]=p.useState(""),[E,y]=p.useState(""),[v,S]=p.useState(""),[w,$]=p.useState(""),O=_n();p.useEffect(()=>{a==="REPLACEMENT"?f("transfer"):a&&f("consume")},[a]);const W=()=>{const L={};return a&&(L.type=a),L},Q=async()=>{try{l(!0),u("");const L=W();let I;try{I=await H.get(`${d0}/api/consumption`,{params:L})}catch(P){console.warn("API call failed (consumption). Falling back to samples.",P),I={data:[]}}const T=Array.isArray(I.data)?I.data:[],q=new Set(T.map(P=>P._id)),z=Zo.filter(P=>!q.has(P._id)),B=[...T,...z];s(B),t(Y(B))}catch(L){console.error("load consumption error",L),u("Failed to load consumption entries"),s(Zo),t(Y(Zo))}finally{l(!1)}};p.useEffect(()=>{Q()},[]);const Y=L=>L.filter(I=>{var T,q,z,B,P,A,k;if(d==="transfer"){if(I.type!=="REPLACEMENT")return!1}else if(a){if(I.type!==a)return!1}else if(I.type==="REPLACEMENT")return!1;if(h&&!(I.resort||I.resortName||"").toString().toLowerCase().includes(h.toLowerCase())||m&&![(T=I.storeFrom)==null?void 0:T.name,(q=I.storeTo)==null?void 0:q.name,(z=I.department)==null?void 0:z.name,(B=I.store)==null?void 0:B.name].filter(Boolean).join(" ").toLowerCase().includes(m.toLowerCase()))return!1;if(E){const te=I.date?new Date(I.date).setHours(0,0,0,0):null,K=new Date(E).setHours(0,0,0,0);if(!te||te<K)return!1}if(v){const te=I.date?new Date(I.date).setHours(0,0,0,0):null,K=new Date(v).setHours(0,0,0,0);if(!te||te>K)return!1}if(w&&w.trim()){const te=w.trim().toLowerCase();if(![I._id,I.referenceNo,I.eventName,I.menuName,I.type,I.resort,(P=I.storeFrom)==null?void 0:P.name,(A=I.storeTo)==null?void 0:A.name,(k=I.department)==null?void 0:k.name,...(I.lines||[]).map(U=>U.item)].filter(Boolean).join(" ").toLowerCase().includes(te))return!1}return!0});p.useEffect(()=>{t(Y(r))},[a,d,h,m,E,v,w,r]);const M=()=>{O(d==="transfer"||a==="REPLACEMENT"?"/super-admin/consumption/new?type=REPLACEMENT":"/super-admin/consumption/new")},ce=L=>{O(`/super-admin/consumption/${L._id}`)},G=()=>{i(""),_(""),N(""),y(""),S(""),$(""),f("consume")};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",style:{alignItems:"flex-start"},children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Consumption"}),n.jsx("p",{children:"Record stock consumption by lumpsum/recipe and store replacement."})]}),n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[n.jsxs("div",{style:{display:"flex",gap:8},children:[n.jsx("button",{className:`sa-secondary-button ${d==="consume"?"active":""}`,onClick:()=>{f("consume"),a==="REPLACEMENT"&&i("")},children:"Consume"}),n.jsx("button",{className:`sa-secondary-button ${d==="transfer"?"active":""}`,onClick:()=>{f("transfer"),i("REPLACEMENT")},children:"Store Transfer"})]}),n.jsxs("button",{className:"sa-primary-button",onClick:M,children:[n.jsx("i",{className:"ri-add-line"})," New"]}),n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>{Q()},children:"Refresh"})]})]}),n.jsxs("div",{className:"sa-card",style:{display:"flex",alignItems:"center",gap:12,marginBottom:12,flexWrap:"wrap"},children:[n.jsxs("label",{style:{fontSize:"0.9rem"},children:["Type",n.jsx("select",{value:a,onChange:L=>i(L.target.value),style:{marginLeft:8,marginTop:4},children:u0.map(L=>n.jsx("option",{value:L.value,children:L.label},L.value??"all"))})]}),n.jsxs("label",{style:{fontSize:"0.9rem"},children:["Resort",n.jsx("input",{placeholder:"Resort name",value:h,onChange:L=>_(L.target.value),style:{marginLeft:8}})]}),n.jsxs("label",{style:{fontSize:"0.9rem"},children:["Store / Dept",n.jsx("input",{placeholder:"Store or Department",value:m,onChange:L=>N(L.target.value),style:{marginLeft:8}})]}),n.jsxs("label",{style:{fontSize:"0.9rem"},children:["Date from",n.jsx("input",{type:"date",value:E,onChange:L=>y(L.target.value),style:{marginLeft:8}})]}),n.jsxs("label",{style:{fontSize:"0.9rem"},children:["Date to",n.jsx("input",{type:"date",value:v,onChange:L=>S(L.target.value),style:{marginLeft:8}})]}),n.jsxs("label",{style:{flex:1,minWidth:200},children:["Search",n.jsx("input",{placeholder:"GRN/Ref/Event/Menu/Store/Item...",value:w,onChange:L=>$(L.target.value),style:{marginLeft:8,width:"80%"}})]}),n.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:[n.jsx("button",{className:"sa-secondary-button",onClick:G,children:"Clear"}),n.jsxs("div",{style:{fontSize:"0.9rem",color:"#9ca3af",alignSelf:"center"},children:["Showing: ",e.length," / ",r.length]})]})]}),n.jsxs("div",{className:"sa-card",children:[c&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:c}),o?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Loading..."}):e.length===0?n.jsxs("div",{style:{fontSize:"0.9rem"},children:["No ",d==="transfer"?"transfer":"consumption"," entries found. Click New to add one."]}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:d==="transfer"?"Reference":"Event / Reference"}),n.jsx("th",{children:"Store / Dept"}),n.jsx("th",{children:"Lines"}),n.jsx("th",{children:"Notes"})]})}),n.jsx("tbody",{children:e.map(L=>{var I,T,q;return n.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>ce(L),children:[n.jsx("td",{children:L.date?new Date(L.date).toLocaleDateString():"-"}),n.jsx("td",{children:m0(L.type)}),n.jsx("td",{children:L.type==="REPLACEMENT"?L.referenceNo||"-":L.eventName||L.menuName||"-"}),n.jsxs("td",{children:[((I=L.storeFrom)==null?void 0:I.name)||""," ",L.storeTo?` ${L.storeTo.name}`:(T=L.department)!=null&&T.name?`(${L.department.name})`:""]}),n.jsx("td",{children:((q=L.lines)==null?void 0:q.length)||0}),n.jsx("td",{style:{maxWidth:220,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:L.notes||"-"})]},L._id)})})]})]})]})},Ir="http://localhost:5000",h0=[{value:"LUMPSUM",label:"Lumpsum"},{value:"RECIPE_LUMPSUM",label:"By Recipe  Lumpsum"},{value:"RECIPE_PORTION",label:"By Recipe  Portion"},{value:"REPLACEMENT",label:"Store Replacement"}],Xo=()=>({category:"",item:"",recipe:"",qty:"",uom:"",remarks:""}),im=()=>{const{id:e}=mv(),t=_n(),[r,s]=p.useState("LUMPSUM"),[a,i]=p.useState(""),[o,l]=p.useState(""),[c,u]=p.useState(""),[d,f]=p.useState(new Date().toISOString().slice(0,10)),[h,_]=p.useState(""),[m,N]=p.useState([Xo()]),[E,y]=p.useState([]),[v,S]=p.useState([]),[w,$]=p.useState([]),[O,W]=p.useState(!1),[Q,Y]=p.useState(""),M=r==="RECIPE_LUMPSUM"||r==="RECIPE_PORTION",ce=async()=>{try{const[A,k,te]=await Promise.all([H.get(`${Ir}/api/stores`).catch(()=>({data:[]})),H.get(`${Ir}/api/items`).catch(()=>({data:[]})),H.get(`${Ir}/api/recipes`).catch(()=>({data:[]}))]);y(Array.isArray(A.data)?A.data:[]),S(Array.isArray(k.data)?k.data:[]),$(Array.isArray(te.data)?te.data:[])}catch(A){console.error("load masters error",A)}},G=async()=>{var A,k;if(e)try{const K=(await H.get(`${Ir}/api/consumption/${e}`)).data||{},U=K.type||"LUMPSUM",C=U==="RECIPE_LUMPSUM"||U==="RECIPE_PORTION";s(U),i(((A=K.storeFrom)==null?void 0:A._id)||K.storeFrom||""),l(((k=K.storeTo)==null?void 0:k._id)||K.storeTo||""),u(K.referenceNo||""),f(K.date?K.date.slice(0,10):new Date().toISOString().slice(0,10)),_(K.notes||""),N((K.lines||[]).map(ie=>{var ne,re;return{category:"",recipe:C&&(((ne=ie.recipe)==null?void 0:ne._id)||ie.recipe)||"",item:C?"":((re=ie.item)==null?void 0:re._id)||ie.item||"",qty:ie.qty??"",uom:ie.uom||"",remarks:ie.remarks||""}})||[Xo()])}catch(te){console.error("load consumption error",te),Y("Failed to load existing consumption entry")}};p.useEffect(()=>{ce(),G()},[]);const L=Array.from(new Set(v.map(A=>A.category||A.itemCategory||A.categoryName||A.categoryId||"").filter(Boolean))),I=(A,k,te)=>{N(K=>{const U=[...K];let C={...U[A]};if(k==="category")C.category=te,C.item="",C.uom="";else if(k==="item"){C.item=te;const ie=v.find(ne=>(ne._id||ne.id)===te);ie&&(C.uom=ie.uom||C.uom)}else k==="recipe"?C.recipe=te:C[k]=te;return U[A]=C,U})},T=()=>N(A=>[...A,Xo()]),q=A=>N(k=>k.filter((te,K)=>K!==A)),z=()=>{if(!r)return Y("Type is required."),!1;if(!a)return Y("Store From is required."),!1;if(r==="REPLACEMENT"){if(!o)return Y("Store To is required for replacement."),!1;if(!c)return Y("Reference No. is required for replacement."),!1}let A;return M?A=m.filter(k=>k.recipe&&k.qty&&Number(k.qty)>0):A=m.filter(k=>k.item&&k.qty&&Number(k.qty)>0),A.length===0?(Y(M?"Add at least one recipe with quantity.":"Add at least one item line with quantity."),!1):(Y(""),!0)},B=async A=>{var K,U;if(A.preventDefault(),!z())return;let k;M?k=m.filter(C=>C.recipe&&C.qty&&Number(C.qty)>0).map(C=>({recipe:C.recipe,qty:Number(C.qty),remarks:C.remarks||""})):k=m.filter(C=>C.item&&C.qty&&Number(C.qty)>0).map(C=>({item:C.item,qty:Number(C.qty),uom:C.uom||"",remarks:C.remarks||""}));const te={type:r,storeFrom:a,storeTo:r==="REPLACEMENT"?o:void 0,referenceNo:r==="REPLACEMENT"?c:void 0,date:d,notes:h||void 0,lines:k};try{W(!0),e?await H.put(`${Ir}/api/consumption/${e}`,te):await H.post(`${Ir}/api/consumption`,te),t("/super-admin/consumption")}catch(C){console.error("save consumption error",C),Y(((U=(K=C.response)==null?void 0:K.data)==null?void 0:U.message)||"Failed to save consumption entry")}finally{W(!1)}},P=e?"Edit Consumption":"New Consumption";return n.jsxs("div",{className:"sa-page",children:[n.jsx("div",{className:"sa-page-header",children:n.jsxs("div",{children:[n.jsx("h2",{children:P}),n.jsx("p",{children:r==="REPLACEMENT"?"Record stock movement between stores.":"Record stock consumption (lumpsum / recipe / portion)."})]})}),n.jsxs("form",{className:"sa-card",onSubmit:B,children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:12,marginBottom:16},children:[n.jsxs("label",{children:["Type",n.jsx("select",{value:r,onChange:A=>s(A.target.value),required:!0,children:h0.map(A=>n.jsx("option",{value:A.value,children:A.label},A.value))})]}),n.jsxs("label",{children:["Date",n.jsx("input",{type:"date",value:d,disabled:!0})]}),n.jsxs("label",{children:["Store From",n.jsxs("select",{value:a,onChange:A=>i(A.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Select store"}),E.map(A=>n.jsx("option",{value:A._id||A.id,children:A.name},A._id||A.id))]})]}),r==="REPLACEMENT"&&n.jsxs(n.Fragment,{children:[n.jsxs("label",{children:["Store To",n.jsxs("select",{value:o,onChange:A=>l(A.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Select store"}),E.map(A=>n.jsx("option",{value:A._id||A.id,children:A.name},A._id||A.id))]})]}),n.jsxs("label",{children:["Reference No.",n.jsx("input",{value:c,onChange:A=>u(A.target.value),placeholder:"e.g. REP-2025-001"})]})]})]}),n.jsx("div",{style:{marginBottom:16},children:n.jsxs("label",{children:["Notes (optional)",n.jsx("textarea",{value:h,onChange:A=>_(A.target.value),rows:2,placeholder:"Any remarks..."})]})}),n.jsx("h3",{style:{marginBottom:8},children:M?"Recipes":"Items"}),n.jsxs("div",{className:"sa-card",style:{padding:12,marginBottom:16},children:[n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:M?n.jsxs("tr",{children:[n.jsx("th",{style:{width:"45%"},children:"Recipe"}),n.jsx("th",{style:{width:"15%"},children:"Consumed Qty"}),n.jsx("th",{children:"Remarks"}),n.jsx("th",{style:{width:"5%"}})]}):n.jsxs("tr",{children:[n.jsx("th",{style:{width:"20%"},children:"Category"}),n.jsx("th",{style:{width:"30%"},children:"Item"}),n.jsx("th",{style:{width:"15%"},children:"Qty"}),n.jsx("th",{style:{width:"15%"},children:"UOM"}),n.jsx("th",{children:"Remarks"}),n.jsx("th",{style:{width:"5%"}})]})}),n.jsx("tbody",{children:m.map((A,k)=>{if(M)return n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("select",{value:A.recipe,onChange:K=>I(k,"recipe",K.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Select recipe"}),w.map(K=>n.jsx("option",{value:K._id||K.id,children:K.name},K._id||K.id))]})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:A.qty,onChange:K=>I(k,"qty",K.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{value:A.remarks,onChange:K=>I(k,"remarks",K.target.value),placeholder:"optional"})}),n.jsx("td",{children:m.length>1&&n.jsx("button",{type:"button",onClick:()=>q(k),className:"sa-secondary-button",children:"-"})})]},k);const te=v.filter(K=>{const U=K.category||K.itemCategory||K.categoryName||K.categoryId||"";return A.category?U===A.category:!0});return n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("select",{value:A.category,onChange:K=>I(k,"category",K.target.value),children:[n.jsx("option",{value:"",children:"Select category"}),L.map(K=>n.jsx("option",{value:K,children:K},K))]})}),n.jsx("td",{children:n.jsxs("select",{value:A.item,onChange:K=>I(k,"item",K.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Select item"}),te.map(K=>n.jsx("option",{value:K._id||K.id,children:K.name},K._id||K.id))]})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:A.qty,onChange:K=>I(k,"qty",K.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{value:A.uom,readOnly:!0,placeholder:"Auto",style:{backgroundColor:"#020617",opacity:.85}})}),n.jsx("td",{children:n.jsx("input",{value:A.remarks,onChange:K=>I(k,"remarks",K.target.value),placeholder:"optional"})}),n.jsx("td",{children:m.length>1&&n.jsx("button",{type:"button",onClick:()=>q(k),className:"sa-secondary-button",children:"-"})})]},k)})})]}),n.jsx("button",{type:"button",className:"sa-secondary-button",style:{marginTop:8},onClick:T,children:M?"+ Add Recipe":"+ Add Item"})]}),Q&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:12},children:Q}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:8},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>t("/super-admin/consumption"),disabled:O,children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:O,children:O?"Saving...":"Save Consumption"})]})]})]})},ar="http://localhost:5000",el=[{_id:"store_main",name:"Main Store"},{_id:"store_cold",name:"Cold Store"}],tl=[{_id:"item_1",name:"Milk 1L"},{_id:"item_2",name:"Bread Loaf"},{_id:"item_3",name:"Egg Tray"}],nl=[{_id:"vend_1",name:"Demo Vendor 1"},{_id:"vend_2",name:"Demo Vendor 2"}],rl=[{_id:"rep_1",replNo:"REP-2025-001",storeId:"store_main",date:new Date().toISOString(),status:"OPEN",vendorId:null,lines:[{lineId:"ln1",itemId:"item_1",qty:2,issuedQty:0,remark:"Damaged pack"},{lineId:"ln2",itemId:"item_2",qty:5,issuedQty:0,remark:""}]}],sl=()=>({lineId:`ln_${Date.now()}_${Math.floor(Math.random()*1e3)}`,itemId:"",qty:"",remark:""}),Rs=()=>new Date().toISOString().slice(0,10),f0=()=>{var C,ie,ne,re,pe,de,_e,he;const[e,t]=p.useState([]),[r,s]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState("ADD"),[d,f]=p.useState({storeId:"",lines:[sl()]}),[h,_]=p.useState(!1),[m,N]=p.useState(!1),[E,y]=p.useState(""),[v,S]=p.useState({open:!1,replacement:null,vendorId:"",lines:[]}),[w,$]=p.useState({open:!1,replacement:null,storeId:"",date:Rs(),lines:[]}),O=F=>{var me;return((me=e.find(se=>se._id===F||se.id===F))==null?void 0:me.name)||F||"-"},W=F=>r.find(me=>me._id===F||me.id===F)||null,Q=F=>{var me;return((me=W(F))==null?void 0:me.name)||F||"-"},Y=F=>{var me;return((me=a.find(se=>se._id===F||se.id===F))==null?void 0:me.name)||F||"-"},M=()=>{const F=new Date,me=F.getFullYear(),se=String(F.getMonth()+1).padStart(2,"0"),Ee=String(F.getDate()).padStart(2,"0"),be=String(F.getHours()*3600+F.getMinutes()*60+F.getSeconds()).padStart(5,"0");return`REP-${me}${se}${Ee}-${be}`},ce=async()=>{try{_(!0),y("");const[F,me,se,Ee]=await Promise.all([H.get(`${ar}/api/stores`).catch(()=>({data:el})),H.get(`${ar}/api/items`).catch(()=>({data:tl})),H.get(`${ar}/api/vendors`).catch(()=>({data:nl})),H.get(`${ar}/api/store-replacements`).catch(()=>({data:rl}))]);t(Array.isArray(F.data)&&F.data.length?F.data:el),s(Array.isArray(me.data)&&me.data.length?me.data:tl),i(Array.isArray(se.data)&&se.data.length?se.data:nl);const D=(Array.isArray(Ee.data)?Ee.data:[]).map(Z=>({_id:Z._id||Z.id,replNo:Z.replNo||Z.repl_no||Z.code||"",storeId:Z.storeId||Z.store||Z.storeFrom||"",date:Z.date||Z.createdAt||new Date().toISOString(),status:Z.status||"OPEN",vendorId:Z.vendorId||Z.vendor||null,lines:(Z.lines||[]).map(ae=>({lineId:ae.lineId||ae._id||`ln_${Math.floor(Math.random()*1e5)}`,itemId:ae.itemId||ae.item||"",qty:ae.qty??ae.quantity??0,issuedQty:ae.issuedQty??0,remark:ae.remark||""}))||[]}));l(D.length?D:rl)}catch(F){console.error("load store replacement error",F),y("Failed to load store replacement data, using demo data."),t(el),s(tl),i(nl),l(rl)}finally{_(!1)}};p.useEffect(()=>{ce()},[]);const G=(F,me)=>f(se=>({...se,[F]:me})),L=(F,me,se)=>{f(Ee=>{const be=[...Ee.lines];return be[F]={...be[F],[me]:se},{...Ee,lines:be}})},I=()=>f(F=>({...F,lines:[...F.lines,sl()]})),T=F=>f(me=>({...me,lines:me.lines.filter((se,Ee)=>Ee!==F)})),q=()=>d.storeId?d.lines.filter(me=>me.itemId&&me.qty&&Number(me.qty)>0).length?null:"Add at least one Item with Qty.":"Select Store Name.",z=async F=>{var be,D;F.preventDefault();const me=q();if(me){y(me);return}y("");const Ee={replNo:M(),storeId:d.storeId,date:new Date().toISOString(),status:"OPEN",lines:d.lines.filter(Z=>Z.itemId&&Z.qty&&Number(Z.qty)>0).map(Z=>({itemId:Z.itemId,qty:Number(Z.qty),remark:Z.remark||""}))};try{N(!0);const ae=(await H.post(`${ar}/api/store-replacements`,Ee).catch(()=>({data:{...Ee,_id:`local_${Date.now()}`}}))).data||Ee;l(Re=>[ae,...Re]),f({storeId:"",lines:[sl()]})}catch(Z){console.error("save replacement error",Z),y(((D=(be=Z.response)==null?void 0:be.data)==null?void 0:D.message)||"Failed to save replacement")}finally{N(!1)}},B=F=>{const me=(F.lines||[]).map(se=>({lineId:se.lineId,itemId:se.itemId,itemName:Q(se.itemId),replQty:se.qty,issueQty:se.qty-(se.issuedQty||0),remark:se.remark||""}));S({open:!0,replacement:F,vendorId:F.vendorId||"",lines:me}),y("")},P=(F,me,se)=>{S(Ee=>{const be=[...Ee.lines];return be[F]={...be[F],[me]:se},{...Ee,lines:be}})},A=async()=>{var be,D;const{replacement:F,vendorId:me,lines:se}=v;if(!F)return;if(!me){y("Select Vendor before issuing.");return}for(const Z of se){const ae=Number(Z.issueQty||0);if(ae<0)return y("Issue quantity cannot be negative.");if(ae>Number(Z.replQty||0))return y("Issue quantity cannot be more than replacement quantity.")}const Ee={vendorId:me,lines:se.map(Z=>({lineId:Z.lineId,itemId:Z.itemId,issueQty:Number(Z.issueQty||0),remark:Z.remark||""}))};try{N(!0);const Z=await H.patch(`${ar}/api/store-replacements/${F._id||F.id}/issue-vendor`,Ee).catch(()=>null);if(Z&&Z.data){const ae=Z.data;l(Re=>Re.map(Oe=>Oe._id===(F._id||F.id)?ae:Oe))}else l(ae=>ae.map(Re=>{if(Re._id!==(F._id||F.id))return Re;const Oe=(Re.lines||[]).map(Te=>{const j=se.find(oe=>oe.lineId===Te.lineId);return j?{...Te,issuedQty:Number(j.issueQty||0),remark:j.remark||Te.remark}:Te});return{...Re,vendorId:me,status:"SENT_TO_VENDOR",lines:Oe}}));S({open:!1,replacement:null,vendorId:"",lines:[]})}catch(Z){console.error("issue to vendor error",Z),y(((D=(be=Z.response)==null?void 0:be.data)==null?void 0:D.message)||"Failed to issue to vendor")}finally{N(!1)}},k=F=>{if(!F.vendorId){y("Vendor not set for this replacement. Please Issue to Vendor first.");return}const me=(F.lines||[]).map(se=>({lineId:se.lineId,itemId:se.itemId,itemName:Q(se.itemId),issuedQty:se.issuedQty||se.qty||0,receivedQty:se.issuedQty||se.qty||0,remark:""}));$({open:!0,replacement:F,storeId:F.storeId||"",date:Rs(),lines:me}),y("")},te=(F,me,se)=>{$(Ee=>{const be=[...Ee.lines];return be[F]={...be[F],[me]:se},{...Ee,lines:be}})},K=async()=>{var D,Z;const{replacement:F,storeId:me,date:se,lines:Ee}=w;if(!F)return;if(!me){y("Select Store for GRN.");return}for(const ae of Ee){const Re=Number(ae.receivedQty||0);if(Re<0)return y("Received quantity cannot be negative.");if(Re>Number(ae.issuedQty||0))return y("Received qty cannot be more than issued qty.")}const be={storeId:me,grnDate:se,lines:Ee.map(ae=>({lineId:ae.lineId,itemId:ae.itemId,issuedQty:Number(ae.issuedQty||0),receivedQty:Number(ae.receivedQty||0),remark:ae.remark||""}))};try{N(!0);const ae=await H.post(`${ar}/api/store-replacements/${F._id||F.id}/create-grn`,be).catch(()=>null);if(ae&&ae.data){const Re=ae.data;l(Oe=>Oe.map(Te=>Te._id===(F._id||F.id)?Re:Te))}else l(Re=>Re.map(Oe=>Oe._id===(F._id||F.id)?{...Oe,status:"CLOSED"}:Oe));$({open:!1,replacement:null,storeId:"",date:Rs(),lines:[]})}catch(ae){console.error("replacement grn error",ae),y(((Z=(D=ae.response)==null?void 0:D.data)==null?void 0:Z.message)||"Failed to create replacement GRN")}finally{N(!1)}},U=F=>({padding:"6px 14px",borderRadius:999,border:"none",cursor:"pointer",fontSize:"0.9rem",background:c===F?"#10b981":"#111827",color:c===F?"#0b1120":"#e5e7eb"});return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",style:{alignItems:"flex-start"},children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Store Replacement"}),n.jsx("p",{children:"Add replacement against store, issue to vendor and finally create replacement GRN."})]}),n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:ce,children:"Refresh"})]}),n.jsxs("div",{className:"sa-card",style:{marginBottom:12,display:"flex",gap:8},children:[n.jsx("button",{style:U("ADD"),onClick:()=>u("ADD"),children:"Add Replacement"}),n.jsx("button",{style:U("ISSUE"),onClick:()=>u("ISSUE"),children:"Replacement Store / Issue Vendor"}),n.jsx("button",{style:U("GRN"),onClick:()=>u("GRN"),children:"Replacement GRN"})]}),E&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:10},children:E}),c==="ADD"&&n.jsxs("div",{className:"sa-card",style:{marginBottom:16},children:[n.jsx("h3",{style:{marginBottom:8},children:"Add Replacement"}),n.jsxs("form",{onSubmit:z,children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[n.jsxs("label",{children:["Store Name",n.jsxs("select",{value:d.storeId,onChange:F=>G("storeId",F.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Select store"}),e.map(F=>n.jsx("option",{value:F._id||F.id,children:F.name},F._id||F.id))]})]}),n.jsxs("label",{children:["Replacement No.",n.jsx("input",{value:"Auto Generated on Save",readOnly:!0})]})]}),n.jsx("h4",{style:{marginBottom:6},children:"Items"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"40%"},children:"Item Name"}),n.jsx("th",{style:{width:"15%"},children:"Item Qty"}),n.jsx("th",{children:"Reason / Remarks"}),n.jsx("th",{style:{width:"8%"}})]})}),n.jsx("tbody",{children:d.lines.map((F,me)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("select",{value:F.itemId,onChange:se=>L(me,"itemId",se.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Select item"}),r.map(se=>n.jsx("option",{value:se._id||se.id,children:se.name},se._id||se.id))]})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:F.qty,onChange:se=>L(me,"qty",se.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{value:F.remark,onChange:se=>L(me,"remark",se.target.value),placeholder:"Damaged / Expired / Others"})}),n.jsx("td",{children:d.lines.length>1&&n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>T(me),children:"-"})})]},F.lineId))})]}),n.jsx("button",{type:"button",className:"sa-secondary-button",style:{marginTop:8},onClick:I,children:"+ Add Item"}),n.jsx("div",{className:"sa-modal-actions",style:{marginTop:12},children:n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:m,children:m?"Saving...":"Save Replacement"})})]})]}),c==="ISSUE"&&n.jsxs("div",{className:"sa-card",children:[n.jsx("h3",{style:{marginBottom:8},children:"Replacement Store"}),h?n.jsx("div",{children:"Loading replacements..."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{marginBottom:8,color:"#9ca3af"},children:["Showing ",o.length," replacements"]}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Repl No"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Items"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:o.map(F=>n.jsxs("tr",{children:[n.jsx("td",{children:F.replNo||F._id}),n.jsx("td",{children:O(F.storeId)}),n.jsx("td",{children:(F.date||"").slice(0,10)}),n.jsx("td",{children:(F.lines||[]).length}),n.jsx("td",{children:F.vendorId?Y(F.vendorId):"-"}),n.jsx("td",{children:F.status||"OPEN"}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",style:{padding:"4px 8px",marginRight:6},onClick:()=>B(F),children:"Issue to Vendor"}),n.jsx("button",{type:"button",className:"sa-secondary-button",style:{padding:"4px 8px"},onClick:()=>k(F),children:"Create GRN"})]})]},F._id))})]})]})]}),c==="GRN"&&n.jsxs("div",{className:"sa-card",children:[n.jsx("h3",{style:{marginBottom:8},children:"Replacement Issued Items"}),n.jsxs("p",{style:{marginBottom:8,color:"#9ca3af"},children:['Select any replacement (with vendor) from "Replacement Store" tab and click ',n.jsx("strong",{children:"Create GRN"})," to record GRN  Replacement for a store."]}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Repl No"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:o.filter(F=>F.vendorId).map(F=>n.jsxs("tr",{children:[n.jsx("td",{children:F.replNo}),n.jsx("td",{children:O(F.storeId)}),n.jsx("td",{children:Y(F.vendorId)}),n.jsx("td",{children:F.status}),n.jsx("td",{children:n.jsx("button",{type:"button",className:"sa-secondary-button",style:{padding:"4px 8px"},onClick:()=>k(F),children:"GRN - Replacement"})})]},F._id))})]})]}),v.open&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!m&&S({open:!1,replacement:null,vendorId:"",lines:[]}),children:n.jsxs("div",{className:"sa-modal",onClick:F=>F.stopPropagation(),style:{maxWidth:900},children:[n.jsx("h3",{children:"Issue to Vendor (Replacement)"}),n.jsxs("p",{className:"sa-modal-sub",children:["Repl No: ",((C=v.replacement)==null?void 0:C.replNo)||"-","  Store:"," ",O((ie=v.replacement)==null?void 0:ie.storeId)]}),n.jsxs("div",{className:"sa-modal-form",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[n.jsxs("label",{children:["Repl No",n.jsx("input",{value:((ne=v.replacement)==null?void 0:ne.replNo)||"",readOnly:!0})]}),n.jsxs("label",{children:["Store Name",n.jsx("input",{value:O((re=v.replacement)==null?void 0:re.storeId),readOnly:!0})]}),n.jsxs("label",{children:["Select Vendor",n.jsxs("select",{value:v.vendorId,onChange:F=>S(me=>({...me,vendorId:F.target.value})),required:!0,children:[n.jsx("option",{value:"",children:"Select Vendor"}),a.map(F=>n.jsx("option",{value:F._id||F.id,children:F.name},F._id||F.id))]})]})]}),n.jsx("h4",{style:{marginBottom:6},children:"Items to Issue"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Replacement Qty"}),n.jsx("th",{children:"Issue Qty"}),n.jsx("th",{children:"Remarks"})]})}),n.jsx("tbody",{children:v.lines.map((F,me)=>n.jsxs("tr",{children:[n.jsx("td",{children:F.itemName}),n.jsx("td",{children:F.replQty}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:F.issueQty,onChange:se=>P(me,"issueQty",se.target.value)})}),n.jsx("td",{children:n.jsx("input",{value:F.remark,onChange:se=>P(me,"remark",se.target.value),placeholder:"optional"})})]},F.lineId))})]}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>S({open:!1,replacement:null,vendorId:"",lines:[]}),children:"Cancel"}),n.jsx("button",{type:"button",className:"sa-primary-button",onClick:A,disabled:m,children:m?"Saving...":"Save Issue to Vendor"})]})]})}),w.open&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!m&&$({open:!1,replacement:null,storeId:"",date:Rs(),lines:[]}),children:n.jsxs("div",{className:"sa-modal",onClick:F=>F.stopPropagation(),style:{maxWidth:900},children:[n.jsx("h3",{children:"GRN  Replacement"}),n.jsxs("p",{className:"sa-modal-sub",children:["Repl No: ",((pe=w.replacement)==null?void 0:pe.replNo)||"-","  Vendor:"," ",Y((de=w.replacement)==null?void 0:de.vendorId)]}),n.jsxs("div",{className:"sa-modal-form",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[n.jsxs("label",{children:["Repl No",n.jsx("input",{value:((_e=w.replacement)==null?void 0:_e.replNo)||"",readOnly:!0})]}),n.jsxs("label",{children:["Vendor",n.jsx("input",{value:Y((he=w.replacement)==null?void 0:he.vendorId),readOnly:!0})]}),n.jsxs("label",{children:["Select Store",n.jsxs("select",{value:w.storeId,onChange:F=>$(me=>({...me,storeId:F.target.value})),required:!0,children:[n.jsx("option",{value:"",children:"Select store"}),e.map(F=>n.jsx("option",{value:F._id||F.id,children:F.name},F._id||F.id))]})]}),n.jsxs("label",{children:["GRN Date",n.jsx("input",{type:"date",value:w.date,onChange:F=>$(me=>({...me,date:F.target.value})),required:!0})]})]}),n.jsx("h4",{style:{marginBottom:6},children:"Items"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Issued Qty"}),n.jsx("th",{children:"Received Qty"}),n.jsx("th",{children:"Remarks"})]})}),n.jsx("tbody",{children:w.lines.map((F,me)=>n.jsxs("tr",{children:[n.jsx("td",{children:F.itemName}),n.jsx("td",{children:F.issuedQty}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:F.receivedQty,onChange:se=>te(me,"receivedQty",se.target.value)})}),n.jsx("td",{children:n.jsx("input",{value:F.remark,onChange:se=>te(me,"remark",se.target.value),placeholder:"optional"})})]},F.lineId))})]}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>$({open:!1,replacement:null,storeId:"",date:Rs(),lines:[]}),children:"Cancel"}),n.jsx("button",{type:"button",className:"sa-primary-button",onClick:K,disabled:m,children:m?"Saving...":"Save Replacement GRN"})]})]})})]})},y0=()=>n.jsxs(kv,{children:[n.jsx(Fe,{path:"/login",element:n.jsx(Nj,{})}),n.jsxs(Fe,{path:"/super-admin",element:n.jsx(l0,{allowedRoles:["SUPER_ADMIN"],children:n.jsx(_j,{})}),children:[n.jsx(Fe,{index:!0,element:n.jsx(Ii,{to:"dashboard",replace:!0})}),n.jsx(Fe,{path:"dashboard",element:n.jsx(Rj,{})}),n.jsx(Fe,{path:"resorts",element:n.jsx(kj,{})}),n.jsx(Fe,{path:"departments",element:n.jsx(Ij,{})}),n.jsx(Fe,{path:"stores",element:n.jsx(Aj,{})}),n.jsx(Fe,{path:"vendors",element:n.jsx(Tj,{})}),n.jsx(Fe,{path:"recipes",element:n.jsx(Wj,{})}),n.jsx(Fe,{path:"item-categories",element:n.jsx(Gj,{})}),n.jsx(Fe,{path:"recipe-categories",element:n.jsx(Yj,{})}),n.jsx(Fe,{path:"items",element:n.jsx(Lj,{})}),n.jsx(Fe,{path:"users",element:n.jsx(Dj,{})}),n.jsx(Fe,{path:"roles",element:n.jsx(c0,{})}),n.jsx(Fe,{path:"consumption",element:n.jsx(p0,{})}),n.jsx(Fe,{path:"consumption/new",element:n.jsx(im,{})}),n.jsx(Fe,{path:"consumption/:id",element:n.jsx(im,{})}),n.jsx(Fe,{path:"store-replacement",element:n.jsx(f0,{})}),n.jsx(Fe,{path:"requisitions",element:n.jsx(zu,{})}),n.jsx(Fe,{path:"po",element:n.jsx(Fj,{})}),n.jsx(Fe,{path:"grn",element:n.jsx(qj,{})}),n.jsx(Fe,{path:"inventory",element:n.jsx($j,{})}),n.jsx(Fe,{path:"reports",element:n.jsx(s0,{})})]}),n.jsxs(Fe,{path:"/resort",children:[n.jsx(Fe,{index:!0,element:n.jsx(e0,{})}),n.jsx(Fe,{path:"requisitions",element:n.jsx(zu,{})}),n.jsx(Fe,{path:"requisitions/create",element:n.jsx(af,{})}),n.jsx(Fe,{path:"po",element:n.jsx(t0,{})}),n.jsx(Fe,{path:"grn",element:n.jsx(n0,{})}),n.jsx(Fe,{path:"reports",element:n.jsx(r0,{})})]}),n.jsx(Fe,{path:"/dashboard/resort",element:n.jsx(Jj,{})}),n.jsx(Fe,{path:"*",element:n.jsx(Ii,{to:"/login",replace:!0})})]});al.createRoot(document.getElementById("root")).render(n.jsx(gm.StrictMode,{children:n.jsx(Fv,{children:n.jsx(Sj,{children:n.jsx(y0,{})})})}));
