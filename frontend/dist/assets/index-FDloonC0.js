function af(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function of(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var im={exports:{}},Mi={},om={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var la=Symbol.for("react.element"),lf=Symbol.for("react.portal"),cf=Symbol.for("react.fragment"),df=Symbol.for("react.strict_mode"),uf=Symbol.for("react.profiler"),mf=Symbol.for("react.provider"),pf=Symbol.for("react.context"),hf=Symbol.for("react.forward_ref"),ff=Symbol.for("react.suspense"),yf=Symbol.for("react.memo"),gf=Symbol.for("react.lazy"),fd=Symbol.iterator;function vf(e){return e===null||typeof e!="object"?null:(e=fd&&e[fd]||e["@@iterator"],typeof e=="function"?e:null)}var lm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cm=Object.assign,dm={};function ss(e,t,r){this.props=e,this.context=t,this.refs=dm,this.updater=r||lm}ss.prototype.isReactComponent={};ss.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ss.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function um(){}um.prototype=ss.prototype;function ac(e,t,r){this.props=e,this.context=t,this.refs=dm,this.updater=r||lm}var ic=ac.prototype=new um;ic.constructor=ac;cm(ic,ss.prototype);ic.isPureReactComponent=!0;var yd=Array.isArray,mm=Object.prototype.hasOwnProperty,oc={current:null},pm={key:!0,ref:!0,__self:!0,__source:!0};function hm(e,t,r){var s,a={},i=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)mm.call(t,s)&&!pm.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:la,type:e,key:i,ref:o,props:a,_owner:oc.current}}function xf(e,t){return{$$typeof:la,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function lc(e){return typeof e=="object"&&e!==null&&e.$$typeof===la}function jf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var gd=/\/+/g;function co(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jf(""+e.key):t.toString(36)}function Ga(e,t,r,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case la:case lf:o=!0}}if(o)return o=e,a=a(o),e=s===""?"."+co(o,0):s,yd(a)?(r="",e!=null&&(r=e.replace(gd,"$&/")+"/"),Ga(a,t,r,"",function(u){return u})):a!=null&&(lc(a)&&(a=xf(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(gd,"$&/")+"/")+e)),t.push(a)),1;if(o=0,s=s===""?".":s+":",yd(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+co(i,l);o+=Ga(i,t,r,c,a)}else if(c=vf(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+co(i,l++),o+=Ga(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ja(e,t,r){if(e==null)return e;var s=[],a=0;return Ga(e,s,"","",function(i){return t.call(r,i,a++)}),s}function Sf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Rt={current:null},Ka={transition:null},Cf={ReactCurrentDispatcher:Rt,ReactCurrentBatchConfig:Ka,ReactCurrentOwner:oc};function fm(){throw Error("act(...) is not supported in production builds of React.")}De.Children={map:ja,forEach:function(e,t,r){ja(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ja(e,function(){t++}),t},toArray:function(e){return ja(e,function(t){return t})||[]},only:function(e){if(!lc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};De.Component=ss;De.Fragment=cf;De.Profiler=uf;De.PureComponent=ac;De.StrictMode=df;De.Suspense=ff;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cf;De.act=fm;De.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=cm({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=oc.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)mm.call(t,c)&&!pm.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:la,type:e.type,key:a,ref:i,props:s,_owner:o}};De.createContext=function(e){return e={$$typeof:pf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:mf,_context:e},e.Consumer=e};De.createElement=hm;De.createFactory=function(e){var t=hm.bind(null,e);return t.type=e,t};De.createRef=function(){return{current:null}};De.forwardRef=function(e){return{$$typeof:hf,render:e}};De.isValidElement=lc;De.lazy=function(e){return{$$typeof:gf,_payload:{_status:-1,_result:e},_init:Sf}};De.memo=function(e,t){return{$$typeof:yf,type:e,compare:t===void 0?null:t}};De.startTransition=function(e){var t=Ka.transition;Ka.transition={};try{e()}finally{Ka.transition=t}};De.unstable_act=fm;De.useCallback=function(e,t){return Rt.current.useCallback(e,t)};De.useContext=function(e){return Rt.current.useContext(e)};De.useDebugValue=function(){};De.useDeferredValue=function(e){return Rt.current.useDeferredValue(e)};De.useEffect=function(e,t){return Rt.current.useEffect(e,t)};De.useId=function(){return Rt.current.useId()};De.useImperativeHandle=function(e,t,r){return Rt.current.useImperativeHandle(e,t,r)};De.useInsertionEffect=function(e,t){return Rt.current.useInsertionEffect(e,t)};De.useLayoutEffect=function(e,t){return Rt.current.useLayoutEffect(e,t)};De.useMemo=function(e,t){return Rt.current.useMemo(e,t)};De.useReducer=function(e,t,r){return Rt.current.useReducer(e,t,r)};De.useRef=function(e){return Rt.current.useRef(e)};De.useState=function(e){return Rt.current.useState(e)};De.useSyncExternalStore=function(e,t,r){return Rt.current.useSyncExternalStore(e,t,r)};De.useTransition=function(){return Rt.current.useTransition()};De.version="18.3.1";om.exports=De;var m=om.exports;const cc=of(m),Nf=af({__proto__:null,default:cc},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wf=m,Rf=Symbol.for("react.element"),bf=Symbol.for("react.fragment"),Ef=Object.prototype.hasOwnProperty,_f=wf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kf={key:!0,ref:!0,__self:!0,__source:!0};function ym(e,t,r){var s,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)Ef.call(t,s)&&!kf.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:Rf,type:e,key:i,ref:o,props:a,_owner:_f.current}}Mi.Fragment=bf;Mi.jsx=ym;Mi.jsxs=ym;im.exports=Mi;var n=im.exports,sl={},gm={exports:{}},$t={},vm={exports:{}},xm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,Y){var $=M.length;M.push(Y);e:for(;0<$;){var I=$-1>>>1,ce=M[I];if(0<a(ce,Y))M[I]=Y,M[$]=ce,$=I;else break e}}function r(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var Y=M[0],$=M.pop();if($!==Y){M[0]=$;e:for(var I=0,ce=M.length,T=ce>>>1;I<T;){var le=2*(I+1)-1,h=M[le],X=le+1,se=M[X];if(0>a(h,$))X<ce&&0>a(se,h)?(M[I]=se,M[X]=$,I=X):(M[I]=h,M[le]=$,I=le);else if(X<ce&&0>a(se,$))M[I]=se,M[X]=$,I=X;else break e}}return Y}function a(M,Y){var $=M.sortIndex-Y.sortIndex;return $!==0?$:M.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,g=null,f=3,b=!1,p=!1,R=!1,_=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(M){for(var Y=r(u);Y!==null;){if(Y.callback===null)s(u);else if(Y.startTime<=M)s(u),Y.sortIndex=Y.expirationTime,t(c,Y);else break;Y=r(u)}}function C(M){if(R=!1,N(M),!p)if(r(c)!==null)p=!0,O(V);else{var Y=r(u);Y!==null&&G(C,Y.startTime-M)}}function V(M,Y){p=!1,R&&(R=!1,j(K),K=-1),b=!0;var $=f;try{for(N(Y),g=r(c);g!==null&&(!(g.expirationTime>Y)||M&&!W());){var I=g.callback;if(typeof I=="function"){g.callback=null,f=g.priorityLevel;var ce=I(g.expirationTime<=Y);Y=e.unstable_now(),typeof ce=="function"?g.callback=ce:g===r(c)&&s(c),N(Y)}else s(c);g=r(c)}if(g!==null)var T=!0;else{var le=r(u);le!==null&&G(C,le.startTime-Y),T=!1}return T}finally{g=null,f=$,b=!1}}var H=!1,F=null,K=-1,ne=5,D=-1;function W(){return!(e.unstable_now()-D<ne)}function U(){if(F!==null){var M=e.unstable_now();D=M;var Y=!0;try{Y=F(!0,M)}finally{Y?q():(H=!1,F=null)}}else H=!1}var q;if(typeof v=="function")q=function(){v(U)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,L=k.port2;k.port1.onmessage=U,q=function(){L.postMessage(null)}}else q=function(){_(U,0)};function O(M){F=M,H||(H=!0,q())}function G(M,Y){K=_(function(){M(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){p||b||(p=!0,O(V))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(M){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var $=f;f=Y;try{return M()}finally{f=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,Y){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var $=f;f=M;try{return Y()}finally{f=$}},e.unstable_scheduleCallback=function(M,Y,$){var I=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?I+$:I):$=I,M){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=$+ce,M={id:d++,callback:Y,priorityLevel:M,startTime:$,expirationTime:ce,sortIndex:-1},$>I?(M.sortIndex=$,t(u,M),r(c)===null&&M===r(u)&&(R?(j(K),K=-1):R=!0,G(C,$-I))):(M.sortIndex=ce,t(c,M),p||b||(p=!0,O(V))),M},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(M){var Y=f;return function(){var $=f;f=Y;try{return M.apply(this,arguments)}finally{f=$}}}})(xm);vm.exports=xm;var Pf=vm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Af=m,Ut=Pf;function de(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jm=new Set,zs={};function vr(e,t){Kr(e,t),Kr(e+"Capture",t)}function Kr(e,t){for(zs[e]=t,e=0;e<t.length;e++)jm.add(t[e])}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),al=Object.prototype.hasOwnProperty,If=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vd={},xd={};function Lf(e){return al.call(xd,e)?!0:al.call(vd,e)?!1:If.test(e)?xd[e]=!0:(vd[e]=!0,!1)}function Tf(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Of(e,t,r,s){if(t===null||typeof t>"u"||Tf(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function bt(e,t,r,s,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ut[e]=new bt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ut[t]=new bt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ut[e]=new bt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ut[e]=new bt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ut[e]=new bt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ut[e]=new bt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ut[e]=new bt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ut[e]=new bt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ut[e]=new bt(e,5,!1,e.toLowerCase(),null,!1,!1)});var dc=/[\-:]([a-z])/g;function uc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dc,uc);ut[t]=new bt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dc,uc);ut[t]=new bt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dc,uc);ut[t]=new bt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ut[e]=new bt(e,1,!1,e.toLowerCase(),null,!1,!1)});ut.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ut[e]=new bt(e,1,!1,e.toLowerCase(),null,!0,!0)});function mc(e,t,r,s){var a=ut.hasOwnProperty(t)?ut[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Of(t,r,a,s)&&(r=null),s||a===null?Lf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var wn=Af.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sa=Symbol.for("react.element"),Ar=Symbol.for("react.portal"),Ir=Symbol.for("react.fragment"),pc=Symbol.for("react.strict_mode"),il=Symbol.for("react.profiler"),Sm=Symbol.for("react.provider"),Cm=Symbol.for("react.context"),hc=Symbol.for("react.forward_ref"),ol=Symbol.for("react.suspense"),ll=Symbol.for("react.suspense_list"),fc=Symbol.for("react.memo"),In=Symbol.for("react.lazy"),Nm=Symbol.for("react.offscreen"),jd=Symbol.iterator;function hs(e){return e===null||typeof e!="object"?null:(e=jd&&e[jd]||e["@@iterator"],typeof e=="function"?e:null)}var Ye=Object.assign,uo;function _s(e){if(uo===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);uo=t&&t[1]||""}return`
`+uo+e}var mo=!1;function po(e,t){if(!e||mo)return"";mo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=s.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{mo=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?_s(e):""}function Df(e){switch(e.tag){case 5:return _s(e.type);case 16:return _s("Lazy");case 13:return _s("Suspense");case 19:return _s("SuspenseList");case 0:case 2:case 15:return e=po(e.type,!1),e;case 11:return e=po(e.type.render,!1),e;case 1:return e=po(e.type,!0),e;default:return""}}function cl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ir:return"Fragment";case Ar:return"Portal";case il:return"Profiler";case pc:return"StrictMode";case ol:return"Suspense";case ll:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Cm:return(e.displayName||"Context")+".Consumer";case Sm:return(e._context.displayName||"Context")+".Provider";case hc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fc:return t=e.displayName||null,t!==null?t:cl(e.type)||"Memo";case In:t=e._payload,e=e._init;try{return cl(e(t))}catch{}}return null}function Ff(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cl(t);case 8:return t===pc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Mf(e){var t=wm(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ca(e){e._valueTracker||(e._valueTracker=Mf(e))}function Rm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=wm(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function ci(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function dl(e,t){var r=t.checked;return Ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Sd(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Gn(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function bm(e,t){t=t.checked,t!=null&&mc(e,"checked",t,!1)}function ul(e,t){bm(e,t);var r=Gn(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ml(e,t.type,r):t.hasOwnProperty("defaultValue")&&ml(e,t.type,Gn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Cd(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ml(e,t,r){(t!=="number"||ci(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ks=Array.isArray;function zr(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Gn(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function pl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(de(91));return Ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nd(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(de(92));if(ks(r)){if(1<r.length)throw Error(de(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Gn(r)}}function Em(e,t){var r=Gn(t.value),s=Gn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function wd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _m(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_m(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Na,km=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Na=Na||document.createElement("div"),Na.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Na.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ts={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Uf=["Webkit","ms","Moz","O"];Object.keys(Ts).forEach(function(e){Uf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ts[t]=Ts[e]})});function Pm(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ts.hasOwnProperty(e)&&Ts[e]?(""+t).trim():t+"px"}function Am(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=Pm(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var $f=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fl(e,t){if(t){if($f[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(de(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(de(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(de(61))}if(t.style!=null&&typeof t.style!="object")throw Error(de(62))}}function yl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gl=null;function yc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vl=null,Vr=null,Qr=null;function Rd(e){if(e=ua(e)){if(typeof vl!="function")throw Error(de(280));var t=e.stateNode;t&&(t=zi(t),vl(e.stateNode,e.type,t))}}function Im(e){Vr?Qr?Qr.push(e):Qr=[e]:Vr=e}function Lm(){if(Vr){var e=Vr,t=Qr;if(Qr=Vr=null,Rd(e),t)for(e=0;e<t.length;e++)Rd(t[e])}}function Tm(e,t){return e(t)}function Om(){}var ho=!1;function Dm(e,t,r){if(ho)return e(t,r);ho=!0;try{return Tm(e,t,r)}finally{ho=!1,(Vr!==null||Qr!==null)&&(Om(),Lm())}}function Qs(e,t){var r=e.stateNode;if(r===null)return null;var s=zi(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(de(231,t,typeof r));return r}var xl=!1;if(jn)try{var fs={};Object.defineProperty(fs,"passive",{get:function(){xl=!0}}),window.addEventListener("test",fs,fs),window.removeEventListener("test",fs,fs)}catch{xl=!1}function qf(e,t,r,s,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Os=!1,di=null,ui=!1,jl=null,Bf={onError:function(e){Os=!0,di=e}};function zf(e,t,r,s,a,i,o,l,c){Os=!1,di=null,qf.apply(Bf,arguments)}function Vf(e,t,r,s,a,i,o,l,c){if(zf.apply(this,arguments),Os){if(Os){var u=di;Os=!1,di=null}else throw Error(de(198));ui||(ui=!0,jl=u)}}function xr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Fm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function bd(e){if(xr(e)!==e)throw Error(de(188))}function Qf(e){var t=e.alternate;if(!t){if(t=xr(e),t===null)throw Error(de(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return bd(a),e;if(i===s)return bd(a),t;i=i.sibling}throw Error(de(188))}if(r.return!==s.return)r=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,s=i;break}if(l===s){o=!0,s=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,s=a;break}if(l===s){o=!0,s=i,r=a;break}l=l.sibling}if(!o)throw Error(de(189))}}if(r.alternate!==s)throw Error(de(190))}if(r.tag!==3)throw Error(de(188));return r.stateNode.current===r?e:t}function Mm(e){return e=Qf(e),e!==null?Um(e):null}function Um(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Um(e);if(t!==null)return t;e=e.sibling}return null}var $m=Ut.unstable_scheduleCallback,Ed=Ut.unstable_cancelCallback,Wf=Ut.unstable_shouldYield,Hf=Ut.unstable_requestPaint,et=Ut.unstable_now,Gf=Ut.unstable_getCurrentPriorityLevel,gc=Ut.unstable_ImmediatePriority,qm=Ut.unstable_UserBlockingPriority,mi=Ut.unstable_NormalPriority,Kf=Ut.unstable_LowPriority,Bm=Ut.unstable_IdlePriority,Ui=null,un=null;function Yf(e){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Ui,e,void 0,(e.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:Zf,Jf=Math.log,Xf=Math.LN2;function Zf(e){return e>>>=0,e===0?32:31-(Jf(e)/Xf|0)|0}var wa=64,Ra=4194304;function Ps(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pi(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?s=Ps(l):(i&=o,i!==0&&(s=Ps(i)))}else o=r&~a,o!==0?s=Ps(o):i!==0&&(s=Ps(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-tn(t),a=1<<r,s|=e[r],t&=~a;return s}function ey(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ty(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-tn(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&s)&&(a[o]=ey(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Sl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zm(){var e=wa;return wa<<=1,!(wa&4194240)&&(wa=64),e}function fo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ca(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tn(t),e[t]=r}function ny(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-tn(r),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~i}}function vc(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-tn(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var qe=0;function Vm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Qm,xc,Wm,Hm,Gm,Cl=!1,ba=[],Un=null,$n=null,qn=null,Ws=new Map,Hs=new Map,Tn=[],ry="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _d(e,t){switch(e){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":qn=null;break;case"pointerover":case"pointerout":Ws.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hs.delete(t.pointerId)}}function ys(e,t,r,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=ua(t),t!==null&&xc(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function sy(e,t,r,s,a){switch(t){case"focusin":return Un=ys(Un,e,t,r,s,a),!0;case"dragenter":return $n=ys($n,e,t,r,s,a),!0;case"mouseover":return qn=ys(qn,e,t,r,s,a),!0;case"pointerover":var i=a.pointerId;return Ws.set(i,ys(Ws.get(i)||null,e,t,r,s,a)),!0;case"gotpointercapture":return i=a.pointerId,Hs.set(i,ys(Hs.get(i)||null,e,t,r,s,a)),!0}return!1}function Km(e){var t=ar(e.target);if(t!==null){var r=xr(t);if(r!==null){if(t=r.tag,t===13){if(t=Fm(r),t!==null){e.blockedOn=t,Gm(e.priority,function(){Wm(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ya(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Nl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);gl=s,r.target.dispatchEvent(s),gl=null}else return t=ua(r),t!==null&&xc(t),e.blockedOn=r,!1;t.shift()}return!0}function kd(e,t,r){Ya(e)&&r.delete(t)}function ay(){Cl=!1,Un!==null&&Ya(Un)&&(Un=null),$n!==null&&Ya($n)&&($n=null),qn!==null&&Ya(qn)&&(qn=null),Ws.forEach(kd),Hs.forEach(kd)}function gs(e,t){e.blockedOn===t&&(e.blockedOn=null,Cl||(Cl=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,ay)))}function Gs(e){function t(a){return gs(a,e)}if(0<ba.length){gs(ba[0],e);for(var r=1;r<ba.length;r++){var s=ba[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Un!==null&&gs(Un,e),$n!==null&&gs($n,e),qn!==null&&gs(qn,e),Ws.forEach(t),Hs.forEach(t),r=0;r<Tn.length;r++)s=Tn[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Tn.length&&(r=Tn[0],r.blockedOn===null);)Km(r),r.blockedOn===null&&Tn.shift()}var Wr=wn.ReactCurrentBatchConfig,hi=!0;function iy(e,t,r,s){var a=qe,i=Wr.transition;Wr.transition=null;try{qe=1,jc(e,t,r,s)}finally{qe=a,Wr.transition=i}}function oy(e,t,r,s){var a=qe,i=Wr.transition;Wr.transition=null;try{qe=4,jc(e,t,r,s)}finally{qe=a,Wr.transition=i}}function jc(e,t,r,s){if(hi){var a=Nl(e,t,r,s);if(a===null)Ro(e,t,s,fi,r),_d(e,s);else if(sy(a,e,t,r,s))s.stopPropagation();else if(_d(e,s),t&4&&-1<ry.indexOf(e)){for(;a!==null;){var i=ua(a);if(i!==null&&Qm(i),i=Nl(e,t,r,s),i===null&&Ro(e,t,s,fi,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else Ro(e,t,s,null,r)}}var fi=null;function Nl(e,t,r,s){if(fi=null,e=yc(s),e=ar(e),e!==null)if(t=xr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Fm(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fi=e,null}function Ym(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gf()){case gc:return 1;case qm:return 4;case mi:case Kf:return 16;case Bm:return 536870912;default:return 16}default:return 16}}var Dn=null,Sc=null,Ja=null;function Jm(){if(Ja)return Ja;var e,t=Sc,r=t.length,s,a="value"in Dn?Dn.value:Dn.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(s=1;s<=o&&t[r-s]===a[i-s];s++);return Ja=a.slice(e,1<s?1-s:void 0)}function Xa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ea(){return!0}function Pd(){return!1}function qt(e){function t(r,s,a,i,o){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ea:Pd,this.isPropagationStopped=Pd,this}return Ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ea)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ea)},persist:function(){},isPersistent:Ea}),t}var as={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cc=qt(as),da=Ye({},as,{view:0,detail:0}),ly=qt(da),yo,go,vs,$i=Ye({},da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vs&&(vs&&e.type==="mousemove"?(yo=e.screenX-vs.screenX,go=e.screenY-vs.screenY):go=yo=0,vs=e),yo)},movementY:function(e){return"movementY"in e?e.movementY:go}}),Ad=qt($i),cy=Ye({},$i,{dataTransfer:0}),dy=qt(cy),uy=Ye({},da,{relatedTarget:0}),vo=qt(uy),my=Ye({},as,{animationName:0,elapsedTime:0,pseudoElement:0}),py=qt(my),hy=Ye({},as,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fy=qt(hy),yy=Ye({},as,{data:0}),Id=qt(yy),gy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xy[e])?!!t[e]:!1}function Nc(){return jy}var Sy=Ye({},da,{key:function(e){if(e.key){var t=gy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nc,charCode:function(e){return e.type==="keypress"?Xa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Cy=qt(Sy),Ny=Ye({},$i,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ld=qt(Ny),wy=Ye({},da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nc}),Ry=qt(wy),by=Ye({},as,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ey=qt(by),_y=Ye({},$i,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ky=qt(_y),Py=[9,13,27,32],wc=jn&&"CompositionEvent"in window,Ds=null;jn&&"documentMode"in document&&(Ds=document.documentMode);var Ay=jn&&"TextEvent"in window&&!Ds,Xm=jn&&(!wc||Ds&&8<Ds&&11>=Ds),Td=" ",Od=!1;function Zm(e,t){switch(e){case"keyup":return Py.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ep(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Lr=!1;function Iy(e,t){switch(e){case"compositionend":return ep(t);case"keypress":return t.which!==32?null:(Od=!0,Td);case"textInput":return e=t.data,e===Td&&Od?null:e;default:return null}}function Ly(e,t){if(Lr)return e==="compositionend"||!wc&&Zm(e,t)?(e=Jm(),Ja=Sc=Dn=null,Lr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xm&&t.locale!=="ko"?null:t.data;default:return null}}var Ty={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ty[e.type]:t==="textarea"}function tp(e,t,r,s){Im(s),t=yi(t,"onChange"),0<t.length&&(r=new Cc("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Fs=null,Ks=null;function Oy(e){mp(e,0)}function qi(e){var t=Dr(e);if(Rm(t))return e}function Dy(e,t){if(e==="change")return t}var np=!1;if(jn){var xo;if(jn){var jo="oninput"in document;if(!jo){var Fd=document.createElement("div");Fd.setAttribute("oninput","return;"),jo=typeof Fd.oninput=="function"}xo=jo}else xo=!1;np=xo&&(!document.documentMode||9<document.documentMode)}function Md(){Fs&&(Fs.detachEvent("onpropertychange",rp),Ks=Fs=null)}function rp(e){if(e.propertyName==="value"&&qi(Ks)){var t=[];tp(t,Ks,e,yc(e)),Dm(Oy,t)}}function Fy(e,t,r){e==="focusin"?(Md(),Fs=t,Ks=r,Fs.attachEvent("onpropertychange",rp)):e==="focusout"&&Md()}function My(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qi(Ks)}function Uy(e,t){if(e==="click")return qi(t)}function $y(e,t){if(e==="input"||e==="change")return qi(t)}function qy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rn=typeof Object.is=="function"?Object.is:qy;function Ys(e,t){if(rn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!al.call(t,a)||!rn(e[a],t[a]))return!1}return!0}function Ud(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $d(e,t){var r=Ud(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ud(r)}}function sp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?sp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ap(){for(var e=window,t=ci();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ci(e.document)}return t}function Rc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function By(e){var t=ap(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&sp(r.ownerDocument.documentElement,r)){if(s!==null&&Rc(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=$d(r,i);var o=$d(r,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zy=jn&&"documentMode"in document&&11>=document.documentMode,Tr=null,wl=null,Ms=null,Rl=!1;function qd(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Rl||Tr==null||Tr!==ci(s)||(s=Tr,"selectionStart"in s&&Rc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ms&&Ys(Ms,s)||(Ms=s,s=yi(wl,"onSelect"),0<s.length&&(t=new Cc("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Tr)))}function _a(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Or={animationend:_a("Animation","AnimationEnd"),animationiteration:_a("Animation","AnimationIteration"),animationstart:_a("Animation","AnimationStart"),transitionend:_a("Transition","TransitionEnd")},So={},ip={};jn&&(ip=document.createElement("div").style,"AnimationEvent"in window||(delete Or.animationend.animation,delete Or.animationiteration.animation,delete Or.animationstart.animation),"TransitionEvent"in window||delete Or.transitionend.transition);function Bi(e){if(So[e])return So[e];if(!Or[e])return e;var t=Or[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ip)return So[e]=t[r];return e}var op=Bi("animationend"),lp=Bi("animationiteration"),cp=Bi("animationstart"),dp=Bi("transitionend"),up=new Map,Bd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yn(e,t){up.set(e,t),vr(t,[e])}for(var Co=0;Co<Bd.length;Co++){var No=Bd[Co],Vy=No.toLowerCase(),Qy=No[0].toUpperCase()+No.slice(1);Yn(Vy,"on"+Qy)}Yn(op,"onAnimationEnd");Yn(lp,"onAnimationIteration");Yn(cp,"onAnimationStart");Yn("dblclick","onDoubleClick");Yn("focusin","onFocus");Yn("focusout","onBlur");Yn(dp,"onTransitionEnd");Kr("onMouseEnter",["mouseout","mouseover"]);Kr("onMouseLeave",["mouseout","mouseover"]);Kr("onPointerEnter",["pointerout","pointerover"]);Kr("onPointerLeave",["pointerout","pointerover"]);vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var As="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wy=new Set("cancel close invalid load scroll toggle".split(" ").concat(As));function zd(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,Vf(s,t,void 0,e),e.currentTarget=null}function mp(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;zd(a,l,u),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;zd(a,l,u),i=c}}}if(ui)throw e=jl,ui=!1,jl=null,e}function Ve(e,t){var r=t[Pl];r===void 0&&(r=t[Pl]=new Set);var s=e+"__bubble";r.has(s)||(pp(t,e,2,!1),r.add(s))}function wo(e,t,r){var s=0;t&&(s|=4),pp(r,e,s,t)}var ka="_reactListening"+Math.random().toString(36).slice(2);function Js(e){if(!e[ka]){e[ka]=!0,jm.forEach(function(r){r!=="selectionchange"&&(Wy.has(r)||wo(r,!1,e),wo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ka]||(t[ka]=!0,wo("selectionchange",!1,t))}}function pp(e,t,r,s){switch(Ym(t)){case 1:var a=iy;break;case 4:a=oy;break;default:a=jc}r=a.bind(null,t,r,e),a=void 0,!xl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Ro(e,t,r,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=ar(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}Dm(function(){var u=i,d=yc(r),g=[];e:{var f=up.get(e);if(f!==void 0){var b=Cc,p=e;switch(e){case"keypress":if(Xa(r)===0)break e;case"keydown":case"keyup":b=Cy;break;case"focusin":p="focus",b=vo;break;case"focusout":p="blur",b=vo;break;case"beforeblur":case"afterblur":b=vo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Ad;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=dy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=Ry;break;case op:case lp:case cp:b=py;break;case dp:b=Ey;break;case"scroll":b=ly;break;case"wheel":b=ky;break;case"copy":case"cut":case"paste":b=fy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Ld}var R=(t&4)!==0,_=!R&&e==="scroll",j=R?f!==null?f+"Capture":null:f;R=[];for(var v=u,N;v!==null;){N=v;var C=N.stateNode;if(N.tag===5&&C!==null&&(N=C,j!==null&&(C=Qs(v,j),C!=null&&R.push(Xs(v,C,N)))),_)break;v=v.return}0<R.length&&(f=new b(f,p,null,r,d),g.push({event:f,listeners:R}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",f&&r!==gl&&(p=r.relatedTarget||r.fromElement)&&(ar(p)||p[Sn]))break e;if((b||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,b?(p=r.relatedTarget||r.toElement,b=u,p=p?ar(p):null,p!==null&&(_=xr(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(b=null,p=u),b!==p)){if(R=Ad,C="onMouseLeave",j="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(R=Ld,C="onPointerLeave",j="onPointerEnter",v="pointer"),_=b==null?f:Dr(b),N=p==null?f:Dr(p),f=new R(C,v+"leave",b,r,d),f.target=_,f.relatedTarget=N,C=null,ar(d)===u&&(R=new R(j,v+"enter",p,r,d),R.target=N,R.relatedTarget=_,C=R),_=C,b&&p)t:{for(R=b,j=p,v=0,N=R;N;N=Nr(N))v++;for(N=0,C=j;C;C=Nr(C))N++;for(;0<v-N;)R=Nr(R),v--;for(;0<N-v;)j=Nr(j),N--;for(;v--;){if(R===j||j!==null&&R===j.alternate)break t;R=Nr(R),j=Nr(j)}R=null}else R=null;b!==null&&Vd(g,f,b,R,!1),p!==null&&_!==null&&Vd(g,_,p,R,!0)}}e:{if(f=u?Dr(u):window,b=f.nodeName&&f.nodeName.toLowerCase(),b==="select"||b==="input"&&f.type==="file")var V=Dy;else if(Dd(f))if(np)V=$y;else{V=My;var H=Fy}else(b=f.nodeName)&&b.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(V=Uy);if(V&&(V=V(e,u))){tp(g,V,r,d);break e}H&&H(e,f,u),e==="focusout"&&(H=f._wrapperState)&&H.controlled&&f.type==="number"&&ml(f,"number",f.value)}switch(H=u?Dr(u):window,e){case"focusin":(Dd(H)||H.contentEditable==="true")&&(Tr=H,wl=u,Ms=null);break;case"focusout":Ms=wl=Tr=null;break;case"mousedown":Rl=!0;break;case"contextmenu":case"mouseup":case"dragend":Rl=!1,qd(g,r,d);break;case"selectionchange":if(zy)break;case"keydown":case"keyup":qd(g,r,d)}var F;if(wc)e:{switch(e){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else Lr?Zm(e,r)&&(K="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(K="onCompositionStart");K&&(Xm&&r.locale!=="ko"&&(Lr||K!=="onCompositionStart"?K==="onCompositionEnd"&&Lr&&(F=Jm()):(Dn=d,Sc="value"in Dn?Dn.value:Dn.textContent,Lr=!0)),H=yi(u,K),0<H.length&&(K=new Id(K,e,null,r,d),g.push({event:K,listeners:H}),F?K.data=F:(F=ep(r),F!==null&&(K.data=F)))),(F=Ay?Iy(e,r):Ly(e,r))&&(u=yi(u,"onBeforeInput"),0<u.length&&(d=new Id("onBeforeInput","beforeinput",null,r,d),g.push({event:d,listeners:u}),d.data=F))}mp(g,t)})}function Xs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function yi(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Qs(e,r),i!=null&&s.unshift(Xs(e,i,a)),i=Qs(e,t),i!=null&&s.push(Xs(e,i,a))),e=e.return}return s}function Nr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Vd(e,t,r,s,a){for(var i=t._reactName,o=[];r!==null&&r!==s;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,a?(c=Qs(r,i),c!=null&&o.unshift(Xs(r,c,l))):a||(c=Qs(r,i),c!=null&&o.push(Xs(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Hy=/\r\n?/g,Gy=/\u0000|\uFFFD/g;function Qd(e){return(typeof e=="string"?e:""+e).replace(Hy,`
`).replace(Gy,"")}function Pa(e,t,r){if(t=Qd(t),Qd(e)!==t&&r)throw Error(de(425))}function gi(){}var bl=null,El=null;function _l(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kl=typeof setTimeout=="function"?setTimeout:void 0,Ky=typeof clearTimeout=="function"?clearTimeout:void 0,Wd=typeof Promise=="function"?Promise:void 0,Yy=typeof queueMicrotask=="function"?queueMicrotask:typeof Wd<"u"?function(e){return Wd.resolve(null).then(e).catch(Jy)}:kl;function Jy(e){setTimeout(function(){throw e})}function bo(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),Gs(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);Gs(t)}function Bn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Hd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var is=Math.random().toString(36).slice(2),dn="__reactFiber$"+is,Zs="__reactProps$"+is,Sn="__reactContainer$"+is,Pl="__reactEvents$"+is,Xy="__reactListeners$"+is,Zy="__reactHandles$"+is;function ar(e){var t=e[dn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Sn]||r[dn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Hd(e);e!==null;){if(r=e[dn])return r;e=Hd(e)}return t}e=r,r=e.parentNode}return null}function ua(e){return e=e[dn]||e[Sn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Dr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(de(33))}function zi(e){return e[Zs]||null}var Al=[],Fr=-1;function Jn(e){return{current:e}}function Qe(e){0>Fr||(e.current=Al[Fr],Al[Fr]=null,Fr--)}function Be(e,t){Fr++,Al[Fr]=e.current,e.current=t}var Kn={},jt=Jn(Kn),kt=Jn(!1),mr=Kn;function Yr(e,t){var r=e.type.contextTypes;if(!r)return Kn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pt(e){return e=e.childContextTypes,e!=null}function vi(){Qe(kt),Qe(jt)}function Gd(e,t,r){if(jt.current!==Kn)throw Error(de(168));Be(jt,t),Be(kt,r)}function hp(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(de(108,Ff(e)||"Unknown",a));return Ye({},r,s)}function xi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kn,mr=jt.current,Be(jt,e),Be(kt,kt.current),!0}function Kd(e,t,r){var s=e.stateNode;if(!s)throw Error(de(169));r?(e=hp(e,t,mr),s.__reactInternalMemoizedMergedChildContext=e,Qe(kt),Qe(jt),Be(jt,e)):Qe(kt),Be(kt,r)}var yn=null,Vi=!1,Eo=!1;function fp(e){yn===null?yn=[e]:yn.push(e)}function eg(e){Vi=!0,fp(e)}function Xn(){if(!Eo&&yn!==null){Eo=!0;var e=0,t=qe;try{var r=yn;for(qe=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}yn=null,Vi=!1}catch(a){throw yn!==null&&(yn=yn.slice(e+1)),$m(gc,Xn),a}finally{qe=t,Eo=!1}}return null}var Mr=[],Ur=0,ji=null,Si=0,Qt=[],Wt=0,pr=null,gn=1,vn="";function rr(e,t){Mr[Ur++]=Si,Mr[Ur++]=ji,ji=e,Si=t}function yp(e,t,r){Qt[Wt++]=gn,Qt[Wt++]=vn,Qt[Wt++]=pr,pr=e;var s=gn;e=vn;var a=32-tn(s)-1;s&=~(1<<a),r+=1;var i=32-tn(t)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,gn=1<<32-tn(t)+a|r<<a|s,vn=i+e}else gn=1<<i|r<<a|s,vn=e}function bc(e){e.return!==null&&(rr(e,1),yp(e,1,0))}function Ec(e){for(;e===ji;)ji=Mr[--Ur],Mr[Ur]=null,Si=Mr[--Ur],Mr[Ur]=null;for(;e===pr;)pr=Qt[--Wt],Qt[Wt]=null,vn=Qt[--Wt],Qt[Wt]=null,gn=Qt[--Wt],Qt[Wt]=null}var Mt=null,Ft=null,We=!1,en=null;function gp(e,t){var r=Ht(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Yd(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mt=e,Ft=Bn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mt=e,Ft=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=pr!==null?{id:gn,overflow:vn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ht(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Mt=e,Ft=null,!0):!1;default:return!1}}function Il(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ll(e){if(We){var t=Ft;if(t){var r=t;if(!Yd(e,t)){if(Il(e))throw Error(de(418));t=Bn(r.nextSibling);var s=Mt;t&&Yd(e,t)?gp(s,r):(e.flags=e.flags&-4097|2,We=!1,Mt=e)}}else{if(Il(e))throw Error(de(418));e.flags=e.flags&-4097|2,We=!1,Mt=e}}}function Jd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mt=e}function Aa(e){if(e!==Mt)return!1;if(!We)return Jd(e),We=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_l(e.type,e.memoizedProps)),t&&(t=Ft)){if(Il(e))throw vp(),Error(de(418));for(;t;)gp(e,t),t=Bn(t.nextSibling)}if(Jd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(de(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ft=Bn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ft=null}}else Ft=Mt?Bn(e.stateNode.nextSibling):null;return!0}function vp(){for(var e=Ft;e;)e=Bn(e.nextSibling)}function Jr(){Ft=Mt=null,We=!1}function _c(e){en===null?en=[e]:en.push(e)}var tg=wn.ReactCurrentBatchConfig;function xs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(de(309));var s=r.stateNode}if(!s)throw Error(de(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(de(284));if(!r._owner)throw Error(de(290,e))}return e}function Ia(e,t){throw e=Object.prototype.toString.call(t),Error(de(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xd(e){var t=e._init;return t(e._payload)}function xp(e){function t(j,v){if(e){var N=j.deletions;N===null?(j.deletions=[v],j.flags|=16):N.push(v)}}function r(j,v){if(!e)return null;for(;v!==null;)t(j,v),v=v.sibling;return null}function s(j,v){for(j=new Map;v!==null;)v.key!==null?j.set(v.key,v):j.set(v.index,v),v=v.sibling;return j}function a(j,v){return j=Wn(j,v),j.index=0,j.sibling=null,j}function i(j,v,N){return j.index=N,e?(N=j.alternate,N!==null?(N=N.index,N<v?(j.flags|=2,v):N):(j.flags|=2,v)):(j.flags|=1048576,v)}function o(j){return e&&j.alternate===null&&(j.flags|=2),j}function l(j,v,N,C){return v===null||v.tag!==6?(v=To(N,j.mode,C),v.return=j,v):(v=a(v,N),v.return=j,v)}function c(j,v,N,C){var V=N.type;return V===Ir?d(j,v,N.props.children,C,N.key):v!==null&&(v.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===In&&Xd(V)===v.type)?(C=a(v,N.props),C.ref=xs(j,v,N),C.return=j,C):(C=ai(N.type,N.key,N.props,null,j.mode,C),C.ref=xs(j,v,N),C.return=j,C)}function u(j,v,N,C){return v===null||v.tag!==4||v.stateNode.containerInfo!==N.containerInfo||v.stateNode.implementation!==N.implementation?(v=Oo(N,j.mode,C),v.return=j,v):(v=a(v,N.children||[]),v.return=j,v)}function d(j,v,N,C,V){return v===null||v.tag!==7?(v=dr(N,j.mode,C,V),v.return=j,v):(v=a(v,N),v.return=j,v)}function g(j,v,N){if(typeof v=="string"&&v!==""||typeof v=="number")return v=To(""+v,j.mode,N),v.return=j,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Sa:return N=ai(v.type,v.key,v.props,null,j.mode,N),N.ref=xs(j,null,v),N.return=j,N;case Ar:return v=Oo(v,j.mode,N),v.return=j,v;case In:var C=v._init;return g(j,C(v._payload),N)}if(ks(v)||hs(v))return v=dr(v,j.mode,N,null),v.return=j,v;Ia(j,v)}return null}function f(j,v,N,C){var V=v!==null?v.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return V!==null?null:l(j,v,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Sa:return N.key===V?c(j,v,N,C):null;case Ar:return N.key===V?u(j,v,N,C):null;case In:return V=N._init,f(j,v,V(N._payload),C)}if(ks(N)||hs(N))return V!==null?null:d(j,v,N,C,null);Ia(j,N)}return null}function b(j,v,N,C,V){if(typeof C=="string"&&C!==""||typeof C=="number")return j=j.get(N)||null,l(v,j,""+C,V);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Sa:return j=j.get(C.key===null?N:C.key)||null,c(v,j,C,V);case Ar:return j=j.get(C.key===null?N:C.key)||null,u(v,j,C,V);case In:var H=C._init;return b(j,v,N,H(C._payload),V)}if(ks(C)||hs(C))return j=j.get(N)||null,d(v,j,C,V,null);Ia(v,C)}return null}function p(j,v,N,C){for(var V=null,H=null,F=v,K=v=0,ne=null;F!==null&&K<N.length;K++){F.index>K?(ne=F,F=null):ne=F.sibling;var D=f(j,F,N[K],C);if(D===null){F===null&&(F=ne);break}e&&F&&D.alternate===null&&t(j,F),v=i(D,v,K),H===null?V=D:H.sibling=D,H=D,F=ne}if(K===N.length)return r(j,F),We&&rr(j,K),V;if(F===null){for(;K<N.length;K++)F=g(j,N[K],C),F!==null&&(v=i(F,v,K),H===null?V=F:H.sibling=F,H=F);return We&&rr(j,K),V}for(F=s(j,F);K<N.length;K++)ne=b(F,j,K,N[K],C),ne!==null&&(e&&ne.alternate!==null&&F.delete(ne.key===null?K:ne.key),v=i(ne,v,K),H===null?V=ne:H.sibling=ne,H=ne);return e&&F.forEach(function(W){return t(j,W)}),We&&rr(j,K),V}function R(j,v,N,C){var V=hs(N);if(typeof V!="function")throw Error(de(150));if(N=V.call(N),N==null)throw Error(de(151));for(var H=V=null,F=v,K=v=0,ne=null,D=N.next();F!==null&&!D.done;K++,D=N.next()){F.index>K?(ne=F,F=null):ne=F.sibling;var W=f(j,F,D.value,C);if(W===null){F===null&&(F=ne);break}e&&F&&W.alternate===null&&t(j,F),v=i(W,v,K),H===null?V=W:H.sibling=W,H=W,F=ne}if(D.done)return r(j,F),We&&rr(j,K),V;if(F===null){for(;!D.done;K++,D=N.next())D=g(j,D.value,C),D!==null&&(v=i(D,v,K),H===null?V=D:H.sibling=D,H=D);return We&&rr(j,K),V}for(F=s(j,F);!D.done;K++,D=N.next())D=b(F,j,K,D.value,C),D!==null&&(e&&D.alternate!==null&&F.delete(D.key===null?K:D.key),v=i(D,v,K),H===null?V=D:H.sibling=D,H=D);return e&&F.forEach(function(U){return t(j,U)}),We&&rr(j,K),V}function _(j,v,N,C){if(typeof N=="object"&&N!==null&&N.type===Ir&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Sa:e:{for(var V=N.key,H=v;H!==null;){if(H.key===V){if(V=N.type,V===Ir){if(H.tag===7){r(j,H.sibling),v=a(H,N.props.children),v.return=j,j=v;break e}}else if(H.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===In&&Xd(V)===H.type){r(j,H.sibling),v=a(H,N.props),v.ref=xs(j,H,N),v.return=j,j=v;break e}r(j,H);break}else t(j,H);H=H.sibling}N.type===Ir?(v=dr(N.props.children,j.mode,C,N.key),v.return=j,j=v):(C=ai(N.type,N.key,N.props,null,j.mode,C),C.ref=xs(j,v,N),C.return=j,j=C)}return o(j);case Ar:e:{for(H=N.key;v!==null;){if(v.key===H)if(v.tag===4&&v.stateNode.containerInfo===N.containerInfo&&v.stateNode.implementation===N.implementation){r(j,v.sibling),v=a(v,N.children||[]),v.return=j,j=v;break e}else{r(j,v);break}else t(j,v);v=v.sibling}v=Oo(N,j.mode,C),v.return=j,j=v}return o(j);case In:return H=N._init,_(j,v,H(N._payload),C)}if(ks(N))return p(j,v,N,C);if(hs(N))return R(j,v,N,C);Ia(j,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,v!==null&&v.tag===6?(r(j,v.sibling),v=a(v,N),v.return=j,j=v):(r(j,v),v=To(N,j.mode,C),v.return=j,j=v),o(j)):r(j,v)}return _}var Xr=xp(!0),jp=xp(!1),Ci=Jn(null),Ni=null,$r=null,kc=null;function Pc(){kc=$r=Ni=null}function Ac(e){var t=Ci.current;Qe(Ci),e._currentValue=t}function Tl(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Hr(e,t){Ni=e,kc=$r=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_t=!0),e.firstContext=null)}function Kt(e){var t=e._currentValue;if(kc!==e)if(e={context:e,memoizedValue:t,next:null},$r===null){if(Ni===null)throw Error(de(308));$r=e,Ni.dependencies={lanes:0,firstContext:e}}else $r=$r.next=e;return t}var ir=null;function Ic(e){ir===null?ir=[e]:ir.push(e)}function Sp(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,Ic(t)):(r.next=a.next,a.next=r),t.interleaved=r,Cn(e,s)}function Cn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ln=!1;function Lc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zn(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Me&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Cn(e,r)}return a=s.interleaved,a===null?(t.next=t,Ic(s)):(t.next=a.next,a.next=t),s.interleaved=t,Cn(e,r)}function Za(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,vc(e,r)}}function Zd(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function wi(e,t,r,s){var a=e.updateQueue;Ln=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var g=a.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,b=l.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:b,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,R=l;switch(f=t,b=r,R.tag){case 1:if(p=R.payload,typeof p=="function"){g=p.call(b,g,f);break e}g=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=R.payload,f=typeof p=="function"?p.call(b,g,f):p,f==null)break e;g=Ye({},g,f);break e;case 2:Ln=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[l]:f.push(l))}else b={eventTime:b,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=b,c=g):d=d.next=b,o|=f;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;f=l,l=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(d===null&&(c=g),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);fr|=o,e.lanes=o,e.memoizedState=g}}function eu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(de(191,a));a.call(s)}}}var ma={},mn=Jn(ma),ea=Jn(ma),ta=Jn(ma);function or(e){if(e===ma)throw Error(de(174));return e}function Tc(e,t){switch(Be(ta,t),Be(ea,e),Be(mn,ma),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hl(t,e)}Qe(mn),Be(mn,t)}function Zr(){Qe(mn),Qe(ea),Qe(ta)}function Np(e){or(ta.current);var t=or(mn.current),r=hl(t,e.type);t!==r&&(Be(ea,e),Be(mn,r))}function Oc(e){ea.current===e&&(Qe(mn),Qe(ea))}var He=Jn(0);function Ri(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _o=[];function Dc(){for(var e=0;e<_o.length;e++)_o[e]._workInProgressVersionPrimary=null;_o.length=0}var ei=wn.ReactCurrentDispatcher,ko=wn.ReactCurrentBatchConfig,hr=0,Ge=null,nt=null,it=null,bi=!1,Us=!1,na=0,ng=0;function yt(){throw Error(de(321))}function Fc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!rn(e[r],t[r]))return!1;return!0}function Mc(e,t,r,s,a,i){if(hr=i,Ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ei.current=e===null||e.memoizedState===null?ig:og,e=r(s,a),Us){i=0;do{if(Us=!1,na=0,25<=i)throw Error(de(301));i+=1,it=nt=null,t.updateQueue=null,ei.current=lg,e=r(s,a)}while(Us)}if(ei.current=Ei,t=nt!==null&&nt.next!==null,hr=0,it=nt=Ge=null,bi=!1,t)throw Error(de(300));return e}function Uc(){var e=na!==0;return na=0,e}function cn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Ge.memoizedState=it=e:it=it.next=e,it}function Yt(){if(nt===null){var e=Ge.alternate;e=e!==null?e.memoizedState:null}else e=nt.next;var t=it===null?Ge.memoizedState:it.next;if(t!==null)it=t,nt=e;else{if(e===null)throw Error(de(310));nt=e,e={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},it===null?Ge.memoizedState=it=e:it=it.next=e}return it}function ra(e,t){return typeof t=="function"?t(e):t}function Po(e){var t=Yt(),r=t.queue;if(r===null)throw Error(de(311));r.lastRenderedReducer=e;var s=nt,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((hr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var g={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=g,o=s):c=c.next=g,Ge.lanes|=d,fr|=d}u=u.next}while(u!==null&&u!==i);c===null?o=s:c.next=l,rn(s,t.memoizedState)||(_t=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Ge.lanes|=i,fr|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ao(e){var t=Yt(),r=t.queue;if(r===null)throw Error(de(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);rn(i,t.memoizedState)||(_t=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function wp(){}function Rp(e,t){var r=Ge,s=Yt(),a=t(),i=!rn(s.memoizedState,a);if(i&&(s.memoizedState=a,_t=!0),s=s.queue,$c(_p.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||it!==null&&it.memoizedState.tag&1){if(r.flags|=2048,sa(9,Ep.bind(null,r,s,a,t),void 0,null),ot===null)throw Error(de(349));hr&30||bp(r,t,a)}return a}function bp(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Ep(e,t,r,s){t.value=r,t.getSnapshot=s,kp(t)&&Pp(e)}function _p(e,t,r){return r(function(){kp(t)&&Pp(e)})}function kp(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!rn(e,r)}catch{return!0}}function Pp(e){var t=Cn(e,1);t!==null&&nn(t,e,1,-1)}function tu(e){var t=cn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:e},t.queue=e,e=e.dispatch=ag.bind(null,Ge,e),[t.memoizedState,e]}function sa(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function Ap(){return Yt().memoizedState}function ti(e,t,r,s){var a=cn();Ge.flags|=e,a.memoizedState=sa(1|t,r,void 0,s===void 0?null:s)}function Qi(e,t,r,s){var a=Yt();s=s===void 0?null:s;var i=void 0;if(nt!==null){var o=nt.memoizedState;if(i=o.destroy,s!==null&&Fc(s,o.deps)){a.memoizedState=sa(t,r,i,s);return}}Ge.flags|=e,a.memoizedState=sa(1|t,r,i,s)}function nu(e,t){return ti(8390656,8,e,t)}function $c(e,t){return Qi(2048,8,e,t)}function Ip(e,t){return Qi(4,2,e,t)}function Lp(e,t){return Qi(4,4,e,t)}function Tp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Op(e,t,r){return r=r!=null?r.concat([e]):null,Qi(4,4,Tp.bind(null,t,e),r)}function qc(){}function Dp(e,t){var r=Yt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Fc(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Fp(e,t){var r=Yt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Fc(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Mp(e,t,r){return hr&21?(rn(r,t)||(r=zm(),Ge.lanes|=r,fr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_t=!0),e.memoizedState=r)}function rg(e,t){var r=qe;qe=r!==0&&4>r?r:4,e(!0);var s=ko.transition;ko.transition={};try{e(!1),t()}finally{qe=r,ko.transition=s}}function Up(){return Yt().memoizedState}function sg(e,t,r){var s=Qn(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},$p(e))qp(t,r);else if(r=Sp(e,t,r,s),r!==null){var a=wt();nn(r,e,s,a),Bp(r,t,s)}}function ag(e,t,r){var s=Qn(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if($p(e))qp(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,rn(l,o)){var c=t.interleaved;c===null?(a.next=a,Ic(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=Sp(e,t,a,s),r!==null&&(a=wt(),nn(r,e,s,a),Bp(r,t,s))}}function $p(e){var t=e.alternate;return e===Ge||t!==null&&t===Ge}function qp(e,t){Us=bi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Bp(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,vc(e,r)}}var Ei={readContext:Kt,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},ig={readContext:Kt,useCallback:function(e,t){return cn().memoizedState=[e,t===void 0?null:t],e},useContext:Kt,useEffect:nu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ti(4194308,4,Tp.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ti(4194308,4,e,t)},useInsertionEffect:function(e,t){return ti(4,2,e,t)},useMemo:function(e,t){var r=cn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=cn();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=sg.bind(null,Ge,e),[s.memoizedState,e]},useRef:function(e){var t=cn();return e={current:e},t.memoizedState=e},useState:tu,useDebugValue:qc,useDeferredValue:function(e){return cn().memoizedState=e},useTransition:function(){var e=tu(!1),t=e[0];return e=rg.bind(null,e[1]),cn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Ge,a=cn();if(We){if(r===void 0)throw Error(de(407));r=r()}else{if(r=t(),ot===null)throw Error(de(349));hr&30||bp(s,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,nu(_p.bind(null,s,i,e),[e]),s.flags|=2048,sa(9,Ep.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=cn(),t=ot.identifierPrefix;if(We){var r=vn,s=gn;r=(s&~(1<<32-tn(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=na++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ng++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},og={readContext:Kt,useCallback:Dp,useContext:Kt,useEffect:$c,useImperativeHandle:Op,useInsertionEffect:Ip,useLayoutEffect:Lp,useMemo:Fp,useReducer:Po,useRef:Ap,useState:function(){return Po(ra)},useDebugValue:qc,useDeferredValue:function(e){var t=Yt();return Mp(t,nt.memoizedState,e)},useTransition:function(){var e=Po(ra)[0],t=Yt().memoizedState;return[e,t]},useMutableSource:wp,useSyncExternalStore:Rp,useId:Up,unstable_isNewReconciler:!1},lg={readContext:Kt,useCallback:Dp,useContext:Kt,useEffect:$c,useImperativeHandle:Op,useInsertionEffect:Ip,useLayoutEffect:Lp,useMemo:Fp,useReducer:Ao,useRef:Ap,useState:function(){return Ao(ra)},useDebugValue:qc,useDeferredValue:function(e){var t=Yt();return nt===null?t.memoizedState=e:Mp(t,nt.memoizedState,e)},useTransition:function(){var e=Ao(ra)[0],t=Yt().memoizedState;return[e,t]},useMutableSource:wp,useSyncExternalStore:Rp,useId:Up,unstable_isNewReconciler:!1};function Xt(e,t){if(e&&e.defaultProps){t=Ye({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ol(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Ye({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Wi={isMounted:function(e){return(e=e._reactInternals)?xr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=wt(),a=Qn(e),i=xn(s,a);i.payload=t,r!=null&&(i.callback=r),t=zn(e,i,a),t!==null&&(nn(t,e,a,s),Za(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=wt(),a=Qn(e),i=xn(s,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=zn(e,i,a),t!==null&&(nn(t,e,a,s),Za(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=wt(),s=Qn(e),a=xn(r,s);a.tag=2,t!=null&&(a.callback=t),t=zn(e,a,s),t!==null&&(nn(t,e,s,r),Za(t,e,s))}};function ru(e,t,r,s,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ys(r,s)||!Ys(a,i):!0}function zp(e,t,r){var s=!1,a=Kn,i=t.contextType;return typeof i=="object"&&i!==null?i=Kt(i):(a=Pt(t)?mr:jt.current,s=t.contextTypes,i=(s=s!=null)?Yr(e,a):Kn),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wi,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function su(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Wi.enqueueReplaceState(t,t.state,null)}function Dl(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Lc(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Kt(i):(i=Pt(t)?mr:jt.current,a.context=Yr(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ol(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Wi.enqueueReplaceState(a,a.state,null),wi(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function es(e,t){try{var r="",s=t;do r+=Df(s),s=s.return;while(s);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Io(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Fl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var cg=typeof WeakMap=="function"?WeakMap:Map;function Vp(e,t,r){r=xn(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){ki||(ki=!0,Hl=s),Fl(e,t)},r}function Qp(e,t,r){r=xn(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){Fl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Fl(e,t),typeof s!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function au(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new cg;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=Ng.bind(null,e,t,r),t.then(e,e))}function iu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ou(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=xn(-1,1),t.tag=2,zn(r,t,1))),r.lanes|=1),e)}var dg=wn.ReactCurrentOwner,_t=!1;function Nt(e,t,r,s){t.child=e===null?jp(t,null,r,s):Xr(t,e.child,r,s)}function lu(e,t,r,s,a){r=r.render;var i=t.ref;return Hr(t,a),s=Mc(e,t,r,s,i,a),r=Uc(),e!==null&&!_t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Nn(e,t,a)):(We&&r&&bc(t),t.flags|=1,Nt(e,t,s,a),t.child)}function cu(e,t,r,s,a){if(e===null){var i=r.type;return typeof i=="function"&&!Kc(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Wp(e,t,i,s,a)):(e=ai(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Ys,r(o,s)&&e.ref===t.ref)return Nn(e,t,a)}return t.flags|=1,e=Wn(i,s),e.ref=t.ref,e.return=t,t.child=e}function Wp(e,t,r,s,a){if(e!==null){var i=e.memoizedProps;if(Ys(i,s)&&e.ref===t.ref)if(_t=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(_t=!0);else return t.lanes=e.lanes,Nn(e,t,a)}return Ml(e,t,r,s,a)}function Hp(e,t,r){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(Br,Dt),Dt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Be(Br,Dt),Dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,Be(Br,Dt),Dt|=s}else i!==null?(s=i.baseLanes|r,t.memoizedState=null):s=r,Be(Br,Dt),Dt|=s;return Nt(e,t,a,r),t.child}function Gp(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ml(e,t,r,s,a){var i=Pt(r)?mr:jt.current;return i=Yr(t,i),Hr(t,a),r=Mc(e,t,r,s,i,a),s=Uc(),e!==null&&!_t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Nn(e,t,a)):(We&&s&&bc(t),t.flags|=1,Nt(e,t,r,a),t.child)}function du(e,t,r,s,a){if(Pt(r)){var i=!0;xi(t)}else i=!1;if(Hr(t,a),t.stateNode===null)ni(e,t),zp(t,r,s),Dl(t,r,s,a),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Kt(u):(u=Pt(r)?mr:jt.current,u=Yr(t,u));var d=r.getDerivedStateFromProps,g=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==u)&&su(t,o,s,u),Ln=!1;var f=t.memoizedState;o.state=f,wi(t,s,o,a),c=t.memoizedState,l!==s||f!==c||kt.current||Ln?(typeof d=="function"&&(Ol(t,r,d,s),c=t.memoizedState),(l=Ln||ru(t,r,l,s,f,c,u))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=u,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,Cp(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Xt(t.type,l),o.props=u,g=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Kt(c):(c=Pt(r)?mr:jt.current,c=Yr(t,c));var b=r.getDerivedStateFromProps;(d=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||f!==c)&&su(t,o,s,c),Ln=!1,f=t.memoizedState,o.state=f,wi(t,s,o,a);var p=t.memoizedState;l!==g||f!==p||kt.current||Ln?(typeof b=="function"&&(Ol(t,r,b,s),p=t.memoizedState),(u=Ln||ru(t,r,u,s,f,p,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),o.props=s,o.state=p,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return Ul(e,t,r,s,i,a)}function Ul(e,t,r,s,a,i){Gp(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return a&&Kd(t,r,!1),Nn(e,t,i);s=t.stateNode,dg.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=Xr(t,e.child,null,i),t.child=Xr(t,null,l,i)):Nt(e,t,l,i),t.memoizedState=s.state,a&&Kd(t,r,!0),t.child}function Kp(e){var t=e.stateNode;t.pendingContext?Gd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Gd(e,t.context,!1),Tc(e,t.containerInfo)}function uu(e,t,r,s,a){return Jr(),_c(a),t.flags|=256,Nt(e,t,r,s),t.child}var $l={dehydrated:null,treeContext:null,retryLane:0};function ql(e){return{baseLanes:e,cachePool:null,transitions:null}}function Yp(e,t,r){var s=t.pendingProps,a=He.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Be(He,a&1),e===null)return Ll(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ki(o,s,0,null),e=dr(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ql(r),t.memoizedState=$l,e):Bc(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return ug(e,t,o,s,l,a,r);if(i){i=s.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Wn(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Wn(l,i):(i=dr(i,o,r,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=e.child.memoizedState,o=o===null?ql(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=$l,s}return i=e.child,e=i.sibling,s=Wn(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Bc(e,t){return t=Ki({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function La(e,t,r,s){return s!==null&&_c(s),Xr(t,e.child,null,r),e=Bc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ug(e,t,r,s,a,i,o){if(r)return t.flags&256?(t.flags&=-257,s=Io(Error(de(422))),La(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=Ki({mode:"visible",children:s.children},a,0,null),i=dr(i,a,o,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&Xr(t,e.child,null,o),t.child.memoizedState=ql(o),t.memoizedState=$l,i);if(!(t.mode&1))return La(e,t,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(de(419)),s=Io(i,s,void 0),La(e,t,o,s)}if(l=(o&e.childLanes)!==0,_t||l){if(s=ot,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Cn(e,a),nn(s,e,a,-1))}return Gc(),s=Io(Error(de(421))),La(e,t,o,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=wg.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Ft=Bn(a.nextSibling),Mt=t,We=!0,en=null,e!==null&&(Qt[Wt++]=gn,Qt[Wt++]=vn,Qt[Wt++]=pr,gn=e.id,vn=e.overflow,pr=t),t=Bc(t,s.children),t.flags|=4096,t)}function mu(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Tl(e.return,t,r)}function Lo(e,t,r,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function Jp(e,t,r){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(Nt(e,t,s.children,r),s=He.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mu(e,r,t);else if(e.tag===19)mu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Be(He,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Ri(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Lo(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ri(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Lo(t,!0,r,null,i);break;case"together":Lo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ni(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Nn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),fr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(de(153));if(t.child!==null){for(e=t.child,r=Wn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Wn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function mg(e,t,r){switch(t.tag){case 3:Kp(t),Jr();break;case 5:Np(t);break;case 1:Pt(t.type)&&xi(t);break;case 4:Tc(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;Be(Ci,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Be(He,He.current&1),t.flags|=128,null):r&t.child.childLanes?Yp(e,t,r):(Be(He,He.current&1),e=Nn(e,t,r),e!==null?e.sibling:null);Be(He,He.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Jp(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Be(He,He.current),s)break;return null;case 22:case 23:return t.lanes=0,Hp(e,t,r)}return Nn(e,t,r)}var Xp,Bl,Zp,eh;Xp=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Bl=function(){};Zp=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,or(mn.current);var i=null;switch(r){case"input":a=dl(e,a),s=dl(e,s),i=[];break;case"select":a=Ye({},a,{value:void 0}),s=Ye({},s,{value:void 0}),i=[];break;case"textarea":a=pl(e,a),s=pl(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=gi)}fl(r,s);var o;r=null;for(u in a)if(!s.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(zs.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var c=s[u];if(l=a!=null?a[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(zs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ve("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};eh=function(e,t,r,s){r!==s&&(t.flags|=4)};function js(e,t){if(!We)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function pg(e,t,r){var s=t.pendingProps;switch(Ec(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(t),null;case 1:return Pt(t.type)&&vi(),gt(t),null;case 3:return s=t.stateNode,Zr(),Qe(kt),Qe(jt),Dc(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Aa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,en!==null&&(Yl(en),en=null))),Bl(e,t),gt(t),null;case 5:Oc(t);var a=or(ta.current);if(r=t.type,e!==null&&t.stateNode!=null)Zp(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(de(166));return gt(t),null}if(e=or(mn.current),Aa(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[dn]=t,s[Zs]=i,e=(t.mode&1)!==0,r){case"dialog":Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":case"embed":Ve("load",s);break;case"video":case"audio":for(a=0;a<As.length;a++)Ve(As[a],s);break;case"source":Ve("error",s);break;case"img":case"image":case"link":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"input":Sd(s,i),Ve("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Ve("invalid",s);break;case"textarea":Nd(s,i),Ve("invalid",s)}fl(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&Pa(s.textContent,l,e),a=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Pa(s.textContent,l,e),a=["children",""+l]):zs.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ve("scroll",s)}switch(r){case"input":Ca(s),Cd(s,i,!0);break;case"textarea":Ca(s),wd(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=gi)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_m(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(r,{is:s.is}):(e=o.createElement(r),r==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,r),e[dn]=t,e[Zs]=s,Xp(e,t,!1,!1),t.stateNode=e;e:{switch(o=yl(r,s),r){case"dialog":Ve("cancel",e),Ve("close",e),a=s;break;case"iframe":case"object":case"embed":Ve("load",e),a=s;break;case"video":case"audio":for(a=0;a<As.length;a++)Ve(As[a],e);a=s;break;case"source":Ve("error",e),a=s;break;case"img":case"image":case"link":Ve("error",e),Ve("load",e),a=s;break;case"details":Ve("toggle",e),a=s;break;case"input":Sd(e,s),a=dl(e,s),Ve("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Ye({},s,{value:void 0}),Ve("invalid",e);break;case"textarea":Nd(e,s),a=pl(e,s),Ve("invalid",e);break;default:a=s}fl(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Am(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&km(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Vs(e,c):typeof c=="number"&&Vs(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(zs.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ve("scroll",e):c!=null&&mc(e,i,c,o))}switch(r){case"input":Ca(e),Cd(e,s,!1);break;case"textarea":Ca(e),wd(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Gn(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?zr(e,!!s.multiple,i,!1):s.defaultValue!=null&&zr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=gi)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gt(t),null;case 6:if(e&&t.stateNode!=null)eh(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(de(166));if(r=or(ta.current),or(mn.current),Aa(t)){if(s=t.stateNode,r=t.memoizedProps,s[dn]=t,(i=s.nodeValue!==r)&&(e=Mt,e!==null))switch(e.tag){case 3:Pa(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Pa(s.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[dn]=t,t.stateNode=s}return gt(t),null;case 13:if(Qe(He),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(We&&Ft!==null&&t.mode&1&&!(t.flags&128))vp(),Jr(),t.flags|=98560,i=!1;else if(i=Aa(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(de(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(de(317));i[dn]=t}else Jr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gt(t),i=!1}else en!==null&&(Yl(en),en=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||He.current&1?rt===0&&(rt=3):Gc())),t.updateQueue!==null&&(t.flags|=4),gt(t),null);case 4:return Zr(),Bl(e,t),e===null&&Js(t.stateNode.containerInfo),gt(t),null;case 10:return Ac(t.type._context),gt(t),null;case 17:return Pt(t.type)&&vi(),gt(t),null;case 19:if(Qe(He),i=t.memoizedState,i===null)return gt(t),null;if(s=(t.flags&128)!==0,o=i.rendering,o===null)if(s)js(i,!1);else{if(rt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ri(e),o!==null){for(t.flags|=128,js(i,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)i=r,e=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Be(He,He.current&1|2),t.child}e=e.sibling}i.tail!==null&&et()>ts&&(t.flags|=128,s=!0,js(i,!1),t.lanes=4194304)}else{if(!s)if(e=Ri(o),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),js(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!We)return gt(t),null}else 2*et()-i.renderingStartTime>ts&&r!==1073741824&&(t.flags|=128,s=!0,js(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=et(),t.sibling=null,r=He.current,Be(He,s?r&1|2:r&1),t):(gt(t),null);case 22:case 23:return Hc(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Dt&1073741824&&(gt(t),t.subtreeFlags&6&&(t.flags|=8192)):gt(t),null;case 24:return null;case 25:return null}throw Error(de(156,t.tag))}function hg(e,t){switch(Ec(t),t.tag){case 1:return Pt(t.type)&&vi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zr(),Qe(kt),Qe(jt),Dc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Oc(t),null;case 13:if(Qe(He),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(de(340));Jr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Qe(He),null;case 4:return Zr(),null;case 10:return Ac(t.type._context),null;case 22:case 23:return Hc(),null;case 24:return null;default:return null}}var Ta=!1,vt=!1,fg=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function qr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Ze(e,t,s)}else r.current=null}function zl(e,t,r){try{r()}catch(s){Ze(e,t,s)}}var pu=!1;function yg(e,t){if(bl=hi,e=ap(),Rc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,g=e,f=null;t:for(;;){for(var b;g!==r||a!==0&&g.nodeType!==3||(l=o+a),g!==i||s!==0&&g.nodeType!==3||(c=o+s),g.nodeType===3&&(o+=g.nodeValue.length),(b=g.firstChild)!==null;)f=g,g=b;for(;;){if(g===e)break t;if(f===r&&++u===a&&(l=o),f===i&&++d===s&&(c=o),(b=g.nextSibling)!==null)break;g=f,f=g.parentNode}g=b}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(El={focusedElem:e,selectionRange:r},hi=!1,Ee=t;Ee!==null;)if(t=Ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ee=e;else for(;Ee!==null;){t=Ee;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var R=p.memoizedProps,_=p.memoizedState,j=t.stateNode,v=j.getSnapshotBeforeUpdate(t.elementType===t.type?R:Xt(t.type,R),_);j.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(C){Ze(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,Ee=e;break}Ee=t.return}return p=pu,pu=!1,p}function $s(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&zl(t,r,i)}a=a.next}while(a!==s)}}function Hi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Vl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function th(e){var t=e.alternate;t!==null&&(e.alternate=null,th(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[dn],delete t[Zs],delete t[Pl],delete t[Xy],delete t[Zy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nh(e){return e.tag===5||e.tag===3||e.tag===4}function hu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ql(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=gi));else if(s!==4&&(e=e.child,e!==null))for(Ql(e,t,r),e=e.sibling;e!==null;)Ql(e,t,r),e=e.sibling}function Wl(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Wl(e,t,r),e=e.sibling;e!==null;)Wl(e,t,r),e=e.sibling}var ct=null,Zt=!1;function _n(e,t,r){for(r=r.child;r!==null;)rh(e,t,r),r=r.sibling}function rh(e,t,r){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Ui,r)}catch{}switch(r.tag){case 5:vt||qr(r,t);case 6:var s=ct,a=Zt;ct=null,_n(e,t,r),ct=s,Zt=a,ct!==null&&(Zt?(e=ct,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ct.removeChild(r.stateNode));break;case 18:ct!==null&&(Zt?(e=ct,r=r.stateNode,e.nodeType===8?bo(e.parentNode,r):e.nodeType===1&&bo(e,r),Gs(e)):bo(ct,r.stateNode));break;case 4:s=ct,a=Zt,ct=r.stateNode.containerInfo,Zt=!0,_n(e,t,r),ct=s,Zt=a;break;case 0:case 11:case 14:case 15:if(!vt&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&zl(r,t,o),a=a.next}while(a!==s)}_n(e,t,r);break;case 1:if(!vt&&(qr(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){Ze(r,t,l)}_n(e,t,r);break;case 21:_n(e,t,r);break;case 22:r.mode&1?(vt=(s=vt)||r.memoizedState!==null,_n(e,t,r),vt=s):_n(e,t,r);break;default:_n(e,t,r)}}function fu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new fg),t.forEach(function(s){var a=Rg.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Jt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ct=l.stateNode,Zt=!1;break e;case 3:ct=l.stateNode.containerInfo,Zt=!0;break e;case 4:ct=l.stateNode.containerInfo,Zt=!0;break e}l=l.return}if(ct===null)throw Error(de(160));rh(i,o,a),ct=null,Zt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Ze(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)sh(t,e),t=t.sibling}function sh(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jt(t,e),on(e),s&4){try{$s(3,e,e.return),Hi(3,e)}catch(R){Ze(e,e.return,R)}try{$s(5,e,e.return)}catch(R){Ze(e,e.return,R)}}break;case 1:Jt(t,e),on(e),s&512&&r!==null&&qr(r,r.return);break;case 5:if(Jt(t,e),on(e),s&512&&r!==null&&qr(r,r.return),e.flags&32){var a=e.stateNode;try{Vs(a,"")}catch(R){Ze(e,e.return,R)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&bm(a,i),yl(l,o);var u=yl(l,i);for(o=0;o<c.length;o+=2){var d=c[o],g=c[o+1];d==="style"?Am(a,g):d==="dangerouslySetInnerHTML"?km(a,g):d==="children"?Vs(a,g):mc(a,d,g,u)}switch(l){case"input":ul(a,i);break;case"textarea":Em(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?zr(a,!!i.multiple,b,!1):f!==!!i.multiple&&(i.defaultValue!=null?zr(a,!!i.multiple,i.defaultValue,!0):zr(a,!!i.multiple,i.multiple?[]:"",!1))}a[Zs]=i}catch(R){Ze(e,e.return,R)}}break;case 6:if(Jt(t,e),on(e),s&4){if(e.stateNode===null)throw Error(de(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(R){Ze(e,e.return,R)}}break;case 3:if(Jt(t,e),on(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Gs(t.containerInfo)}catch(R){Ze(e,e.return,R)}break;case 4:Jt(t,e),on(e);break;case 13:Jt(t,e),on(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Qc=et())),s&4&&fu(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(vt=(u=vt)||d,Jt(t,e),vt=u):Jt(t,e),on(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Ee=e,d=e.child;d!==null;){for(g=Ee=d;Ee!==null;){switch(f=Ee,b=f.child,f.tag){case 0:case 11:case 14:case 15:$s(4,f,f.return);break;case 1:qr(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){s=f,r=f.return;try{t=s,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(R){Ze(s,r,R)}}break;case 5:qr(f,f.return);break;case 22:if(f.memoizedState!==null){gu(g);continue}}b!==null?(b.return=f,Ee=b):gu(g)}d=d.sibling}e:for(d=null,g=e;;){if(g.tag===5){if(d===null){d=g;try{a=g.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Pm("display",o))}catch(R){Ze(e,e.return,R)}}}else if(g.tag===6){if(d===null)try{g.stateNode.nodeValue=u?"":g.memoizedProps}catch(R){Ze(e,e.return,R)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;d===g&&(d=null),g=g.return}d===g&&(d=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Jt(t,e),on(e),s&4&&fu(e);break;case 21:break;default:Jt(t,e),on(e)}}function on(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(nh(r)){var s=r;break e}r=r.return}throw Error(de(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Vs(a,""),s.flags&=-33);var i=hu(e);Wl(e,i,a);break;case 3:case 4:var o=s.stateNode.containerInfo,l=hu(e);Ql(e,l,o);break;default:throw Error(de(161))}}catch(c){Ze(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gg(e,t,r){Ee=e,ah(e)}function ah(e,t,r){for(var s=(e.mode&1)!==0;Ee!==null;){var a=Ee,i=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||Ta;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||vt;l=Ta;var u=vt;if(Ta=o,(vt=c)&&!u)for(Ee=a;Ee!==null;)o=Ee,c=o.child,o.tag===22&&o.memoizedState!==null?vu(a):c!==null?(c.return=o,Ee=c):vu(a);for(;i!==null;)Ee=i,ah(i),i=i.sibling;Ee=a,Ta=l,vt=u}yu(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ee=i):yu(e)}}function yu(e){for(;Ee!==null;){var t=Ee;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:vt||Hi(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!vt)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Xt(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&eu(t,i,s);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}eu(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var g=d.dehydrated;g!==null&&Gs(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}vt||t.flags&512&&Vl(t)}catch(f){Ze(t,t.return,f)}}if(t===e){Ee=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ee=r;break}Ee=t.return}}function gu(e){for(;Ee!==null;){var t=Ee;if(t===e){Ee=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ee=r;break}Ee=t.return}}function vu(e){for(;Ee!==null;){var t=Ee;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Hi(4,t)}catch(c){Ze(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){Ze(t,a,c)}}var i=t.return;try{Vl(t)}catch(c){Ze(t,i,c)}break;case 5:var o=t.return;try{Vl(t)}catch(c){Ze(t,o,c)}}}catch(c){Ze(t,t.return,c)}if(t===e){Ee=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ee=l;break}Ee=t.return}}var vg=Math.ceil,_i=wn.ReactCurrentDispatcher,zc=wn.ReactCurrentOwner,Gt=wn.ReactCurrentBatchConfig,Me=0,ot=null,tt=null,dt=0,Dt=0,Br=Jn(0),rt=0,aa=null,fr=0,Gi=0,Vc=0,qs=null,Et=null,Qc=0,ts=1/0,fn=null,ki=!1,Hl=null,Vn=null,Oa=!1,Fn=null,Pi=0,Bs=0,Gl=null,ri=-1,si=0;function wt(){return Me&6?et():ri!==-1?ri:ri=et()}function Qn(e){return e.mode&1?Me&2&&dt!==0?dt&-dt:tg.transition!==null?(si===0&&(si=zm()),si):(e=qe,e!==0||(e=window.event,e=e===void 0?16:Ym(e.type)),e):1}function nn(e,t,r,s){if(50<Bs)throw Bs=0,Gl=null,Error(de(185));ca(e,r,s),(!(Me&2)||e!==ot)&&(e===ot&&(!(Me&2)&&(Gi|=r),rt===4&&On(e,dt)),At(e,s),r===1&&Me===0&&!(t.mode&1)&&(ts=et()+500,Vi&&Xn()))}function At(e,t){var r=e.callbackNode;ty(e,t);var s=pi(e,e===ot?dt:0);if(s===0)r!==null&&Ed(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&Ed(r),t===1)e.tag===0?eg(xu.bind(null,e)):fp(xu.bind(null,e)),Yy(function(){!(Me&6)&&Xn()}),r=null;else{switch(Vm(s)){case 1:r=gc;break;case 4:r=qm;break;case 16:r=mi;break;case 536870912:r=Bm;break;default:r=mi}r=ph(r,ih.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ih(e,t){if(ri=-1,si=0,Me&6)throw Error(de(327));var r=e.callbackNode;if(Gr()&&e.callbackNode!==r)return null;var s=pi(e,e===ot?dt:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Ai(e,s);else{t=s;var a=Me;Me|=2;var i=lh();(ot!==e||dt!==t)&&(fn=null,ts=et()+500,cr(e,t));do try{Sg();break}catch(l){oh(e,l)}while(!0);Pc(),_i.current=i,Me=a,tt!==null?t=0:(ot=null,dt=0,t=rt)}if(t!==0){if(t===2&&(a=Sl(e),a!==0&&(s=a,t=Kl(e,a))),t===1)throw r=aa,cr(e,0),On(e,s),At(e,et()),r;if(t===6)On(e,s);else{if(a=e.current.alternate,!(s&30)&&!xg(a)&&(t=Ai(e,s),t===2&&(i=Sl(e),i!==0&&(s=i,t=Kl(e,i))),t===1))throw r=aa,cr(e,0),On(e,s),At(e,et()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(de(345));case 2:sr(e,Et,fn);break;case 3:if(On(e,s),(s&130023424)===s&&(t=Qc+500-et(),10<t)){if(pi(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){wt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=kl(sr.bind(null,e,Et,fn),t);break}sr(e,Et,fn);break;case 4:if(On(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-tn(s);i=1<<o,o=t[o],o>a&&(a=o),s&=~i}if(s=a,s=et()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*vg(s/1960))-s,10<s){e.timeoutHandle=kl(sr.bind(null,e,Et,fn),s);break}sr(e,Et,fn);break;case 5:sr(e,Et,fn);break;default:throw Error(de(329))}}}return At(e,et()),e.callbackNode===r?ih.bind(null,e):null}function Kl(e,t){var r=qs;return e.current.memoizedState.isDehydrated&&(cr(e,t).flags|=256),e=Ai(e,t),e!==2&&(t=Et,Et=r,t!==null&&Yl(t)),e}function Yl(e){Et===null?Et=e:Et.push.apply(Et,e)}function xg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!rn(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function On(e,t){for(t&=~Vc,t&=~Gi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-tn(t),s=1<<r;e[r]=-1,t&=~s}}function xu(e){if(Me&6)throw Error(de(327));Gr();var t=pi(e,0);if(!(t&1))return At(e,et()),null;var r=Ai(e,t);if(e.tag!==0&&r===2){var s=Sl(e);s!==0&&(t=s,r=Kl(e,s))}if(r===1)throw r=aa,cr(e,0),On(e,t),At(e,et()),r;if(r===6)throw Error(de(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sr(e,Et,fn),At(e,et()),null}function Wc(e,t){var r=Me;Me|=1;try{return e(t)}finally{Me=r,Me===0&&(ts=et()+500,Vi&&Xn())}}function yr(e){Fn!==null&&Fn.tag===0&&!(Me&6)&&Gr();var t=Me;Me|=1;var r=Gt.transition,s=qe;try{if(Gt.transition=null,qe=1,e)return e()}finally{qe=s,Gt.transition=r,Me=t,!(Me&6)&&Xn()}}function Hc(){Dt=Br.current,Qe(Br)}function cr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Ky(r)),tt!==null)for(r=tt.return;r!==null;){var s=r;switch(Ec(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&vi();break;case 3:Zr(),Qe(kt),Qe(jt),Dc();break;case 5:Oc(s);break;case 4:Zr();break;case 13:Qe(He);break;case 19:Qe(He);break;case 10:Ac(s.type._context);break;case 22:case 23:Hc()}r=r.return}if(ot=e,tt=e=Wn(e.current,null),dt=Dt=t,rt=0,aa=null,Vc=Gi=fr=0,Et=qs=null,ir!==null){for(t=0;t<ir.length;t++)if(r=ir[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,s.next=o}r.pending=s}ir=null}return e}function oh(e,t){do{var r=tt;try{if(Pc(),ei.current=Ei,bi){for(var s=Ge.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}bi=!1}if(hr=0,it=nt=Ge=null,Us=!1,na=0,zc.current=null,r===null||r.return===null){rt=1,aa=t,tt=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=dt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,g=d.tag;if(!(d.mode&1)&&(g===0||g===11||g===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var b=iu(o);if(b!==null){b.flags&=-257,ou(b,o,l,i,t),b.mode&1&&au(i,u,t),t=b,c=u;var p=t.updateQueue;if(p===null){var R=new Set;R.add(c),t.updateQueue=R}else p.add(c);break e}else{if(!(t&1)){au(i,u,t),Gc();break e}c=Error(de(426))}}else if(We&&l.mode&1){var _=iu(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),ou(_,o,l,i,t),_c(es(c,l));break e}}i=c=es(c,l),rt!==4&&(rt=2),qs===null?qs=[i]:qs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var j=Vp(i,c,t);Zd(i,j);break e;case 1:l=c;var v=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Vn===null||!Vn.has(N)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=Qp(i,l,t);Zd(i,C);break e}}i=i.return}while(i!==null)}dh(r)}catch(V){t=V,tt===r&&r!==null&&(tt=r=r.return);continue}break}while(!0)}function lh(){var e=_i.current;return _i.current=Ei,e===null?Ei:e}function Gc(){(rt===0||rt===3||rt===2)&&(rt=4),ot===null||!(fr&268435455)&&!(Gi&268435455)||On(ot,dt)}function Ai(e,t){var r=Me;Me|=2;var s=lh();(ot!==e||dt!==t)&&(fn=null,cr(e,t));do try{jg();break}catch(a){oh(e,a)}while(!0);if(Pc(),Me=r,_i.current=s,tt!==null)throw Error(de(261));return ot=null,dt=0,rt}function jg(){for(;tt!==null;)ch(tt)}function Sg(){for(;tt!==null&&!Wf();)ch(tt)}function ch(e){var t=mh(e.alternate,e,Dt);e.memoizedProps=e.pendingProps,t===null?dh(e):tt=t,zc.current=null}function dh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=hg(r,t),r!==null){r.flags&=32767,tt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rt=6,tt=null;return}}else if(r=pg(r,t,Dt),r!==null){tt=r;return}if(t=t.sibling,t!==null){tt=t;return}tt=t=e}while(t!==null);rt===0&&(rt=5)}function sr(e,t,r){var s=qe,a=Gt.transition;try{Gt.transition=null,qe=1,Cg(e,t,r,s)}finally{Gt.transition=a,qe=s}return null}function Cg(e,t,r,s){do Gr();while(Fn!==null);if(Me&6)throw Error(de(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(de(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(ny(e,i),e===ot&&(tt=ot=null,dt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Oa||(Oa=!0,ph(mi,function(){return Gr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Gt.transition,Gt.transition=null;var o=qe;qe=1;var l=Me;Me|=4,zc.current=null,yg(e,r),sh(r,e),By(El),hi=!!bl,El=bl=null,e.current=r,gg(r),Hf(),Me=l,qe=o,Gt.transition=i}else e.current=r;if(Oa&&(Oa=!1,Fn=e,Pi=a),i=e.pendingLanes,i===0&&(Vn=null),Yf(r.stateNode),At(e,et()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(ki)throw ki=!1,e=Hl,Hl=null,e;return Pi&1&&e.tag!==0&&Gr(),i=e.pendingLanes,i&1?e===Gl?Bs++:(Bs=0,Gl=e):Bs=0,Xn(),null}function Gr(){if(Fn!==null){var e=Vm(Pi),t=Gt.transition,r=qe;try{if(Gt.transition=null,qe=16>e?16:e,Fn===null)var s=!1;else{if(e=Fn,Fn=null,Pi=0,Me&6)throw Error(de(331));var a=Me;for(Me|=4,Ee=e.current;Ee!==null;){var i=Ee,o=i.child;if(Ee.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ee=u;Ee!==null;){var d=Ee;switch(d.tag){case 0:case 11:case 15:$s(8,d,i)}var g=d.child;if(g!==null)g.return=d,Ee=g;else for(;Ee!==null;){d=Ee;var f=d.sibling,b=d.return;if(th(d),d===u){Ee=null;break}if(f!==null){f.return=b,Ee=f;break}Ee=b}}}var p=i.alternate;if(p!==null){var R=p.child;if(R!==null){p.child=null;do{var _=R.sibling;R.sibling=null,R=_}while(R!==null)}}Ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ee=o;else e:for(;Ee!==null;){if(i=Ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$s(9,i,i.return)}var j=i.sibling;if(j!==null){j.return=i.return,Ee=j;break e}Ee=i.return}}var v=e.current;for(Ee=v;Ee!==null;){o=Ee;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,Ee=N;else e:for(o=v;Ee!==null;){if(l=Ee,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Hi(9,l)}}catch(V){Ze(l,l.return,V)}if(l===o){Ee=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,Ee=C;break e}Ee=l.return}}if(Me=a,Xn(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Ui,e)}catch{}s=!0}return s}finally{qe=r,Gt.transition=t}}return!1}function ju(e,t,r){t=es(r,t),t=Vp(e,t,1),e=zn(e,t,1),t=wt(),e!==null&&(ca(e,1,t),At(e,t))}function Ze(e,t,r){if(e.tag===3)ju(e,e,r);else for(;t!==null;){if(t.tag===3){ju(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Vn===null||!Vn.has(s))){e=es(r,e),e=Qp(t,e,1),t=zn(t,e,1),e=wt(),t!==null&&(ca(t,1,e),At(t,e));break}}t=t.return}}function Ng(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=wt(),e.pingedLanes|=e.suspendedLanes&r,ot===e&&(dt&r)===r&&(rt===4||rt===3&&(dt&130023424)===dt&&500>et()-Qc?cr(e,0):Vc|=r),At(e,t)}function uh(e,t){t===0&&(e.mode&1?(t=Ra,Ra<<=1,!(Ra&130023424)&&(Ra=4194304)):t=1);var r=wt();e=Cn(e,t),e!==null&&(ca(e,t,r),At(e,r))}function wg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),uh(e,r)}function Rg(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(de(314))}s!==null&&s.delete(t),uh(e,r)}var mh;mh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||kt.current)_t=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return _t=!1,mg(e,t,r);_t=!!(e.flags&131072)}else _t=!1,We&&t.flags&1048576&&yp(t,Si,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;ni(e,t),e=t.pendingProps;var a=Yr(t,jt.current);Hr(t,r),a=Mc(null,t,s,e,a,r);var i=Uc();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pt(s)?(i=!0,xi(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Lc(t),a.updater=Wi,t.stateNode=a,a._reactInternals=t,Dl(t,s,e,r),t=Ul(null,t,s,!0,i,r)):(t.tag=0,We&&i&&bc(t),Nt(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(ni(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=Eg(s),e=Xt(s,e),a){case 0:t=Ml(null,t,s,e,r);break e;case 1:t=du(null,t,s,e,r);break e;case 11:t=lu(null,t,s,e,r);break e;case 14:t=cu(null,t,s,Xt(s.type,e),r);break e}throw Error(de(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Xt(s,a),Ml(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Xt(s,a),du(e,t,s,a,r);case 3:e:{if(Kp(t),e===null)throw Error(de(387));s=t.pendingProps,i=t.memoizedState,a=i.element,Cp(e,t),wi(t,s,null,r);var o=t.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=es(Error(de(423)),t),t=uu(e,t,s,r,a);break e}else if(s!==a){a=es(Error(de(424)),t),t=uu(e,t,s,r,a);break e}else for(Ft=Bn(t.stateNode.containerInfo.firstChild),Mt=t,We=!0,en=null,r=jp(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Jr(),s===a){t=Nn(e,t,r);break e}Nt(e,t,s,r)}t=t.child}return t;case 5:return Np(t),e===null&&Ll(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,_l(s,a)?o=null:i!==null&&_l(s,i)&&(t.flags|=32),Gp(e,t),Nt(e,t,o,r),t.child;case 6:return e===null&&Ll(t),null;case 13:return Yp(e,t,r);case 4:return Tc(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Xr(t,null,s,r):Nt(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Xt(s,a),lu(e,t,s,a,r);case 7:return Nt(e,t,t.pendingProps,r),t.child;case 8:return Nt(e,t,t.pendingProps.children,r),t.child;case 12:return Nt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Be(Ci,s._currentValue),s._currentValue=o,i!==null)if(rn(i.value,o)){if(i.children===a.children&&!kt.current){t=Nn(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=xn(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Tl(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(de(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Tl(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Nt(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Hr(t,r),a=Kt(a),s=s(a),t.flags|=1,Nt(e,t,s,r),t.child;case 14:return s=t.type,a=Xt(s,t.pendingProps),a=Xt(s.type,a),cu(e,t,s,a,r);case 15:return Wp(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Xt(s,a),ni(e,t),t.tag=1,Pt(s)?(e=!0,xi(t)):e=!1,Hr(t,r),zp(t,s,a),Dl(t,s,a,r),Ul(null,t,s,!0,e,r);case 19:return Jp(e,t,r);case 22:return Hp(e,t,r)}throw Error(de(156,t.tag))};function ph(e,t){return $m(e,t)}function bg(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(e,t,r,s){return new bg(e,t,r,s)}function Kc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Eg(e){if(typeof e=="function")return Kc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hc)return 11;if(e===fc)return 14}return 2}function Wn(e,t){var r=e.alternate;return r===null?(r=Ht(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ai(e,t,r,s,a,i){var o=2;if(s=e,typeof e=="function")Kc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ir:return dr(r.children,a,i,t);case pc:o=8,a|=8;break;case il:return e=Ht(12,r,t,a|2),e.elementType=il,e.lanes=i,e;case ol:return e=Ht(13,r,t,a),e.elementType=ol,e.lanes=i,e;case ll:return e=Ht(19,r,t,a),e.elementType=ll,e.lanes=i,e;case Nm:return Ki(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Sm:o=10;break e;case Cm:o=9;break e;case hc:o=11;break e;case fc:o=14;break e;case In:o=16,s=null;break e}throw Error(de(130,e==null?e:typeof e,""))}return t=Ht(o,r,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function dr(e,t,r,s){return e=Ht(7,e,s,t),e.lanes=r,e}function Ki(e,t,r,s){return e=Ht(22,e,s,t),e.elementType=Nm,e.lanes=r,e.stateNode={isHidden:!1},e}function To(e,t,r){return e=Ht(6,e,null,t),e.lanes=r,e}function Oo(e,t,r){return t=Ht(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _g(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fo(0),this.expirationTimes=fo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fo(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Yc(e,t,r,s,a,i,o,l,c){return e=new _g(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ht(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lc(i),e}function kg(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ar,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function hh(e){if(!e)return Kn;e=e._reactInternals;e:{if(xr(e)!==e||e.tag!==1)throw Error(de(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(de(171))}if(e.tag===1){var r=e.type;if(Pt(r))return hp(e,r,t)}return t}function fh(e,t,r,s,a,i,o,l,c){return e=Yc(r,s,!0,e,a,i,o,l,c),e.context=hh(null),r=e.current,s=wt(),a=Qn(r),i=xn(s,a),i.callback=t??null,zn(r,i,a),e.current.lanes=a,ca(e,a,s),At(e,s),e}function Yi(e,t,r,s){var a=t.current,i=wt(),o=Qn(a);return r=hh(r),t.context===null?t.context=r:t.pendingContext=r,t=xn(i,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=zn(a,t,o),e!==null&&(nn(e,a,o,i),Za(e,a,o)),o}function Ii(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Su(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Jc(e,t){Su(e,t),(e=e.alternate)&&Su(e,t)}function Pg(){return null}var yh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}Ji.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(de(409));Yi(e,t,null,null)};Ji.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yr(function(){Yi(null,e,null,null)}),t[Sn]=null}};function Ji(e){this._internalRoot=e}Ji.prototype.unstable_scheduleHydration=function(e){if(e){var t=Hm();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Tn.length&&t!==0&&t<Tn[r].priority;r++);Tn.splice(r,0,e),r===0&&Km(e)}};function Zc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Cu(){}function Ag(e,t,r,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var u=Ii(o);i.call(u)}}var o=fh(t,s,e,0,null,!1,!1,"",Cu);return e._reactRootContainer=o,e[Sn]=o.current,Js(e.nodeType===8?e.parentNode:e),yr(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var l=s;s=function(){var u=Ii(c);l.call(u)}}var c=Yc(e,0,!1,null,null,!1,!1,"",Cu);return e._reactRootContainer=c,e[Sn]=c.current,Js(e.nodeType===8?e.parentNode:e),yr(function(){Yi(t,c,r,s)}),c}function Zi(e,t,r,s,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Ii(o);l.call(c)}}Yi(t,o,e,a)}else o=Ag(r,t,e,a,s);return Ii(o)}Qm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ps(t.pendingLanes);r!==0&&(vc(t,r|1),At(t,et()),!(Me&6)&&(ts=et()+500,Xn()))}break;case 13:yr(function(){var s=Cn(e,1);if(s!==null){var a=wt();nn(s,e,1,a)}}),Jc(e,1)}};xc=function(e){if(e.tag===13){var t=Cn(e,134217728);if(t!==null){var r=wt();nn(t,e,134217728,r)}Jc(e,134217728)}};Wm=function(e){if(e.tag===13){var t=Qn(e),r=Cn(e,t);if(r!==null){var s=wt();nn(r,e,t,s)}Jc(e,t)}};Hm=function(){return qe};Gm=function(e,t){var r=qe;try{return qe=e,t()}finally{qe=r}};vl=function(e,t,r){switch(t){case"input":if(ul(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=zi(s);if(!a)throw Error(de(90));Rm(s),ul(s,a)}}}break;case"textarea":Em(e,r);break;case"select":t=r.value,t!=null&&zr(e,!!r.multiple,t,!1)}};Tm=Wc;Om=yr;var Ig={usingClientEntryPoint:!1,Events:[ua,Dr,zi,Im,Lm,Wc]},Ss={findFiberByHostInstance:ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lg={bundleType:Ss.bundleType,version:Ss.version,rendererPackageName:Ss.rendererPackageName,rendererConfig:Ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Mm(e),e===null?null:e.stateNode},findFiberByHostInstance:Ss.findFiberByHostInstance||Pg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Da.isDisabled&&Da.supportsFiber)try{Ui=Da.inject(Lg),un=Da}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ig;$t.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zc(t))throw Error(de(200));return kg(e,t,null,r)};$t.createRoot=function(e,t){if(!Zc(e))throw Error(de(299));var r=!1,s="",a=yh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Yc(e,1,!1,null,null,r,!1,s,a),e[Sn]=t.current,Js(e.nodeType===8?e.parentNode:e),new Xc(t)};$t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(de(188)):(e=Object.keys(e).join(","),Error(de(268,e)));return e=Mm(t),e=e===null?null:e.stateNode,e};$t.flushSync=function(e){return yr(e)};$t.hydrate=function(e,t,r){if(!Xi(t))throw Error(de(200));return Zi(null,e,t,!0,r)};$t.hydrateRoot=function(e,t,r){if(!Zc(e))throw Error(de(405));var s=r!=null&&r.hydratedSources||null,a=!1,i="",o=yh;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=fh(t,null,e,1,r??null,a,!1,i,o),e[Sn]=t.current,Js(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Ji(t)};$t.render=function(e,t,r){if(!Xi(t))throw Error(de(200));return Zi(null,e,t,!1,r)};$t.unmountComponentAtNode=function(e){if(!Xi(e))throw Error(de(40));return e._reactRootContainer?(yr(function(){Zi(null,null,e,!1,function(){e._reactRootContainer=null,e[Sn]=null})}),!0):!1};$t.unstable_batchedUpdates=Wc;$t.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Xi(r))throw Error(de(200));if(e==null||e._reactInternals===void 0)throw Error(de(38));return Zi(e,t,r,!1,s)};$t.version="18.3.1-next-f1338f8080-20240426";function gh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gh)}catch(e){console.error(e)}}gh(),gm.exports=$t;var Tg=gm.exports,Nu=Tg;sl.createRoot=Nu.createRoot,sl.hydrateRoot=Nu.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ia(){return ia=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ia.apply(this,arguments)}var Mn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Mn||(Mn={}));const wu="popstate";function Og(e){e===void 0&&(e={});function t(s,a){let{pathname:i,search:o,hash:l}=s.location;return Jl("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:Li(a)}return Fg(t,r,null,e)}function Ke(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ed(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Dg(){return Math.random().toString(36).substr(2,8)}function Ru(e,t){return{usr:e.state,key:e.key,idx:t}}function Jl(e,t,r,s){return r===void 0&&(r=null),ia({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?os(t):t,{state:r,key:t&&t.key||s||Dg()})}function Li(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function os(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function Fg(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,o=a.history,l=Mn.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(ia({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function g(){l=Mn.Pop;let _=d(),j=_==null?null:_-u;u=_,c&&c({action:l,location:R.location,delta:j})}function f(_,j){l=Mn.Push;let v=Jl(R.location,_,j);u=d()+1;let N=Ru(v,u),C=R.createHref(v);try{o.pushState(N,"",C)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;a.location.assign(C)}i&&c&&c({action:l,location:R.location,delta:1})}function b(_,j){l=Mn.Replace;let v=Jl(R.location,_,j);u=d();let N=Ru(v,u),C=R.createHref(v);o.replaceState(N,"",C),i&&c&&c({action:l,location:R.location,delta:0})}function p(_){let j=a.location.origin!=="null"?a.location.origin:a.location.href,v=typeof _=="string"?_:Li(_);return v=v.replace(/ $/,"%20"),Ke(j,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,j)}let R={get action(){return l},get location(){return e(a,o)},listen(_){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(wu,g),c=_,()=>{a.removeEventListener(wu,g),c=null}},createHref(_){return t(a,_)},createURL:p,encodeLocation(_){let j=p(_);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:f,replace:b,go(_){return o.go(_)}};return R}var bu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(bu||(bu={}));function Mg(e,t,r){return r===void 0&&(r="/"),Ug(e,t,r)}function Ug(e,t,r,s){let a=typeof t=="string"?os(t):t,i=ns(a.pathname||"/",r);if(i==null)return null;let o=vh(e);$g(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Jg(i);l=Kg(o[c],u)}return l}function vh(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ke(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=Hn([s,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Ke(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),vh(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:Hg(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of xh(i.path))a(i,o,c)}),t}function xh(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let o=xh(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function $g(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Gg(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const qg=/^:[\w-]+$/,Bg=3,zg=2,Vg=1,Qg=10,Wg=-2,Eu=e=>e==="*";function Hg(e,t){let r=e.split("/"),s=r.length;return r.some(Eu)&&(s+=Wg),t&&(s+=zg),r.filter(a=>!Eu(a)).reduce((a,i)=>a+(qg.test(i)?Bg:i===""?Vg:Qg),s)}function Gg(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function Kg(e,t,r){let{routesMeta:s}=e,a={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=i==="/"?t:t.slice(i.length)||"/",g=Xl({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!g)return null;Object.assign(a,g.params),o.push({params:a,pathname:Hn([i,g.pathname]),pathnameBase:nv(Hn([i,g.pathnameBase])),route:f}),g.pathnameBase!=="/"&&(i=Hn([i,g.pathnameBase]))}return o}function Xl(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=Yg(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((u,d,g)=>{let{paramName:f,isOptional:b}=d;if(f==="*"){let R=l[g]||"";o=i.slice(0,i.length-R.length).replace(/(.)\/+$/,"$1")}const p=l[g];return b&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function Yg(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),ed(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function Jg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ed(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ns(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}const Xg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zg=e=>Xg.test(e);function ev(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?os(e):e,i;if(r)if(Zg(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),ed(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=_u(r.substring(1),"/"):i=_u(r,t)}else i=t;return{pathname:i,search:rv(s),hash:sv(a)}}function _u(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Do(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tv(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function td(e,t){let r=tv(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function nd(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=os(e):(a=ia({},e),Ke(!a.pathname||!a.pathname.includes("?"),Do("?","pathname","search",a)),Ke(!a.pathname||!a.pathname.includes("#"),Do("#","pathname","hash",a)),Ke(!a.search||!a.search.includes("#"),Do("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let g=t.length-1;if(!s&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),g-=1;a.pathname=f.join("/")}l=g>=0?t[g]:"/"}let c=ev(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Hn=e=>e.join("/").replace(/\/\/+/g,"/"),nv=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),rv=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,sv=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function av(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const jh=["post","put","patch","delete"];new Set(jh);const iv=["get",...jh];new Set(iv);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oa(){return oa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},oa.apply(this,arguments)}const eo=m.createContext(null),Sh=m.createContext(null),Rn=m.createContext(null),to=m.createContext(null),pn=m.createContext({outlet:null,matches:[],isDataRoute:!1}),Ch=m.createContext(null);function ov(e,t){let{relative:r}=t===void 0?{}:t;ls()||Ke(!1);let{basename:s,navigator:a}=m.useContext(Rn),{hash:i,pathname:o,search:l}=no(e,{relative:r}),c=o;return s!=="/"&&(c=o==="/"?s:Hn([s,o])),a.createHref({pathname:c,search:l,hash:i})}function ls(){return m.useContext(to)!=null}function cs(){return ls()||Ke(!1),m.useContext(to).location}function Nh(e){m.useContext(Rn).static||m.useLayoutEffect(e)}function bn(){let{isDataRoute:e}=m.useContext(pn);return e?Nv():lv()}function lv(){ls()||Ke(!1);let e=m.useContext(eo),{basename:t,future:r,navigator:s}=m.useContext(Rn),{matches:a}=m.useContext(pn),{pathname:i}=cs(),o=JSON.stringify(td(a,r.v7_relativeSplatPath)),l=m.useRef(!1);return Nh(()=>{l.current=!0}),m.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){s.go(u);return}let g=nd(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:Hn([t,g.pathname])),(d.replace?s.replace:s.push)(g,d.state,d)},[t,s,o,i,e])}const cv=m.createContext(null);function dv(e){let t=m.useContext(pn).outlet;return t&&m.createElement(cv.Provider,{value:e},t)}function uv(){let{matches:e}=m.useContext(pn),t=e[e.length-1];return t?t.params:{}}function no(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=m.useContext(Rn),{matches:a}=m.useContext(pn),{pathname:i}=cs(),o=JSON.stringify(td(a,s.v7_relativeSplatPath));return m.useMemo(()=>nd(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function mv(e,t){return pv(e,t)}function pv(e,t,r,s){ls()||Ke(!1);let{navigator:a}=m.useContext(Rn),{matches:i}=m.useContext(pn),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=cs(),d;if(t){var g;let _=typeof t=="string"?os(t):t;c==="/"||(g=_.pathname)!=null&&g.startsWith(c)||Ke(!1),d=_}else d=u;let f=d.pathname||"/",b=f;if(c!=="/"){let _=c.replace(/^\//,"").split("/");b="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let p=Mg(e,{pathname:b}),R=vv(p&&p.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Hn([c,a.encodeLocation?a.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Hn([c,a.encodeLocation?a.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,r,s);return t&&R?m.createElement(to.Provider,{value:{location:oa({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Mn.Pop}},R):R}function hv(){let e=Cv(),t=av(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),r?m.createElement("pre",{style:a},r):null,null)}const fv=m.createElement(hv,null);class yv extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?m.createElement(pn.Provider,{value:this.props.routeContext},m.createElement(Ch.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gv(e){let{routeContext:t,match:r,children:s}=e,a=m.useContext(eo);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),m.createElement(pn.Provider,{value:t},s)}function vv(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);d>=0||Ke(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let d=0;d<o.length;d++){let g=o[d];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=d),g.route.id){let{loaderData:f,errors:b}=r,p=g.route.loader&&f[g.route.id]===void 0&&(!b||b[g.route.id]===void 0);if(g.route.lazy||p){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,g,f)=>{let b,p=!1,R=null,_=null;r&&(b=l&&g.route.id?l[g.route.id]:void 0,R=g.route.errorElement||fv,c&&(u<0&&f===0?(wv("route-fallback"),p=!0,_=null):u===f&&(p=!0,_=g.route.hydrateFallbackElement||null)));let j=t.concat(o.slice(0,f+1)),v=()=>{let N;return b?N=R:p?N=_:g.route.Component?N=m.createElement(g.route.Component,null):g.route.element?N=g.route.element:N=d,m.createElement(gv,{match:g,routeContext:{outlet:d,matches:j,isDataRoute:r!=null},children:N})};return r&&(g.route.ErrorBoundary||g.route.errorElement||f===0)?m.createElement(yv,{location:r.location,revalidation:r.revalidation,component:R,error:b,children:v(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):v()},null)}var wh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(wh||{}),Rh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Rh||{});function xv(e){let t=m.useContext(eo);return t||Ke(!1),t}function jv(e){let t=m.useContext(Sh);return t||Ke(!1),t}function Sv(e){let t=m.useContext(pn);return t||Ke(!1),t}function bh(e){let t=Sv(),r=t.matches[t.matches.length-1];return r.route.id||Ke(!1),r.route.id}function Cv(){var e;let t=m.useContext(Ch),r=jv(),s=bh();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function Nv(){let{router:e}=xv(wh.UseNavigateStable),t=bh(Rh.UseNavigateStable),r=m.useRef(!1);return Nh(()=>{r.current=!0}),m.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,oa({fromRouteId:t},i)))},[e,t])}const ku={};function wv(e,t,r){ku[e]||(ku[e]=!0)}function Rv(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ti(e){let{to:t,replace:r,state:s,relative:a}=e;ls()||Ke(!1);let{future:i,static:o}=m.useContext(Rn),{matches:l}=m.useContext(pn),{pathname:c}=cs(),u=bn(),d=nd(t,td(l,i.v7_relativeSplatPath),c,a==="path"),g=JSON.stringify(d);return m.useEffect(()=>u(JSON.parse(g),{replace:r,state:s,relative:a}),[u,g,a,r,s]),null}function bv(e){return dv(e.context)}function Fe(e){Ke(!1)}function Ev(e){let{basename:t="/",children:r=null,location:s,navigationType:a=Mn.Pop,navigator:i,static:o=!1,future:l}=e;ls()&&Ke(!1);let c=t.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:c,navigator:i,static:o,future:oa({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof s=="string"&&(s=os(s));let{pathname:d="/",search:g="",hash:f="",state:b=null,key:p="default"}=s,R=m.useMemo(()=>{let _=ns(d,c);return _==null?null:{location:{pathname:_,search:g,hash:f,state:b,key:p},navigationType:a}},[c,d,g,f,b,p,a]);return R==null?null:m.createElement(Rn.Provider,{value:u},m.createElement(to.Provider,{children:r,value:R}))}function _v(e){let{children:t,location:r}=e;return mv(Zl(t),r)}new Promise(()=>{});function Zl(e,t){t===void 0&&(t=[]);let r=[];return m.Children.forEach(e,(s,a)=>{if(!m.isValidElement(s))return;let i=[...t,a];if(s.type===m.Fragment){r.push.apply(r,Zl(s.props.children,i));return}s.type!==Fe&&Ke(!1),!s.props.index||!s.props.children||Ke(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Zl(s.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oi(){return Oi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Oi.apply(this,arguments)}function Eh(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function kv(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Pv(e,t){return e.button===0&&(!t||t==="_self")&&!kv(e)}const Av=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Iv=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Lv="6";try{window.__reactRouterVersion=Lv}catch{}const Tv=m.createContext({isTransitioning:!1}),Ov="startTransition",Pu=Nf[Ov];function Dv(e){let{basename:t,children:r,future:s,window:a}=e,i=m.useRef();i.current==null&&(i.current=Og({window:a,v5Compat:!0}));let o=i.current,[l,c]=m.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},d=m.useCallback(g=>{u&&Pu?Pu(()=>c(g)):c(g)},[c,u]);return m.useLayoutEffect(()=>o.listen(d),[o,d]),m.useEffect(()=>Rv(s),[s]),m.createElement(Ev,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:s})}const Fv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Mv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_h=m.forwardRef(function(t,r){let{onClick:s,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:g}=t,f=Eh(t,Av),{basename:b}=m.useContext(Rn),p,R=!1;if(typeof u=="string"&&Mv.test(u)&&(p=u,Fv))try{let N=new URL(window.location.href),C=u.startsWith("//")?new URL(N.protocol+u):new URL(u),V=ns(C.pathname,b);C.origin===N.origin&&V!=null?u=V+C.search+C.hash:R=!0}catch{}let _=ov(u,{relative:a}),j=qv(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:g});function v(N){s&&s(N),N.defaultPrevented||j(N)}return m.createElement("a",Oi({},f,{href:p||_,onClick:R||i?s:v,ref:r,target:c}))}),Uv=m.forwardRef(function(t,r){let{"aria-current":s="page",caseSensitive:a=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,g=Eh(t,Iv),f=no(c,{relative:g.relative}),b=cs(),p=m.useContext(Sh),{navigator:R,basename:_}=m.useContext(Rn),j=p!=null&&Bv(f)&&u===!0,v=R.encodeLocation?R.encodeLocation(f).pathname:f.pathname,N=b.pathname,C=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;a||(N=N.toLowerCase(),C=C?C.toLowerCase():null,v=v.toLowerCase()),C&&_&&(C=ns(C,_)||C);const V=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let H=N===v||!o&&N.startsWith(v)&&N.charAt(V)==="/",F=C!=null&&(C===v||!o&&C.startsWith(v)&&C.charAt(v.length)==="/"),K={isActive:H,isPending:F,isTransitioning:j},ne=H?s:void 0,D;typeof i=="function"?D=i(K):D=[i,H?"active":null,F?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let W=typeof l=="function"?l(K):l;return m.createElement(_h,Oi({},g,{"aria-current":ne,className:D,ref:r,style:W,to:c,viewTransition:u}),typeof d=="function"?d(K):d)});var ec;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ec||(ec={}));var Au;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Au||(Au={}));function $v(e){let t=m.useContext(eo);return t||Ke(!1),t}function qv(e,t){let{target:r,replace:s,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=bn(),u=cs(),d=no(e,{relative:o});return m.useCallback(g=>{if(Pv(g,r)){g.preventDefault();let f=s!==void 0?s:Li(u)===Li(d);c(e,{replace:f,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,s,a,r,e,i,o,l])}function Bv(e,t){t===void 0&&(t={});let r=m.useContext(Tv);r==null&&Ke(!1);let{basename:s}=$v(ec.useViewTransitionState),a=no(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=ns(r.currentLocation.pathname,s)||r.currentLocation.pathname,o=ns(r.nextLocation.pathname,s)||r.nextLocation.pathname;return Xl(a.pathname,o)!=null||Xl(a.pathname,i)!=null}function kh(e,t){return function(){return e.apply(t,arguments)}}const{toString:zv}=Object.prototype,{getPrototypeOf:rd}=Object,{iterator:ro,toStringTag:Ph}=Symbol,so=(e=>t=>{const r=zv.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),sn=e=>(e=e.toLowerCase(),t=>so(t)===e),ao=e=>t=>typeof t===e,{isArray:ds}=Array,rs=ao("undefined");function pa(e){return e!==null&&!rs(e)&&e.constructor!==null&&!rs(e.constructor)&&It(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ah=sn("ArrayBuffer");function Vv(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ah(e.buffer),t}const Qv=ao("string"),It=ao("function"),Ih=ao("number"),ha=e=>e!==null&&typeof e=="object",Wv=e=>e===!0||e===!1,ii=e=>{if(so(e)!=="object")return!1;const t=rd(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Ph in e)&&!(ro in e)},Hv=e=>{if(!ha(e)||pa(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Gv=sn("Date"),Kv=sn("File"),Yv=sn("Blob"),Jv=sn("FileList"),Xv=e=>ha(e)&&It(e.pipe),Zv=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||It(e.append)&&((t=so(e))==="formdata"||t==="object"&&It(e.toString)&&e.toString()==="[object FormData]"))},ex=sn("URLSearchParams"),[tx,nx,rx,sx]=["ReadableStream","Request","Response","Headers"].map(sn),ax=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fa(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,a;if(typeof e!="object"&&(e=[e]),ds(e))for(s=0,a=e.length;s<a;s++)t.call(null,e[s],s,e);else{if(pa(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(s=0;s<o;s++)l=i[s],t.call(null,e[l],l,e)}}function Lh(e,t){if(pa(e))return null;t=t.toLowerCase();const r=Object.keys(e);let s=r.length,a;for(;s-- >0;)if(a=r[s],t===a.toLowerCase())return a;return null}const lr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Th=e=>!rs(e)&&e!==lr;function tc(){const{caseless:e,skipUndefined:t}=Th(this)&&this||{},r={},s=(a,i)=>{const o=e&&Lh(r,i)||i;ii(r[o])&&ii(a)?r[o]=tc(r[o],a):ii(a)?r[o]=tc({},a):ds(a)?r[o]=a.slice():(!t||!rs(a))&&(r[o]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&fa(arguments[a],s);return r}const ix=(e,t,r,{allOwnKeys:s}={})=>(fa(t,(a,i)=>{r&&It(a)?e[i]=kh(a,r):e[i]=a},{allOwnKeys:s}),e),ox=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),lx=(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},cx=(e,t,r,s)=>{let a,i,o;const l={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!s||s(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&rd(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},dx=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return s!==-1&&s===r},ux=e=>{if(!e)return null;if(ds(e))return e;let t=e.length;if(!Ih(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},mx=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&rd(Uint8Array)),px=(e,t)=>{const s=(e&&e[ro]).call(e);let a;for(;(a=s.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},hx=(e,t)=>{let r;const s=[];for(;(r=e.exec(t))!==null;)s.push(r);return s},fx=sn("HTMLFormElement"),yx=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,a){return s.toUpperCase()+a}),Iu=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),gx=sn("RegExp"),Oh=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};fa(r,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(s[i]=o||a)}),Object.defineProperties(e,s)},vx=e=>{Oh(e,(t,r)=>{if(It(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(It(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},xx=(e,t)=>{const r={},s=a=>{a.forEach(i=>{r[i]=!0})};return ds(e)?s(e):s(String(e).split(t)),r},jx=()=>{},Sx=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Cx(e){return!!(e&&It(e.append)&&e[Ph]==="FormData"&&e[ro])}const Nx=e=>{const t=new Array(10),r=(s,a)=>{if(ha(s)){if(t.indexOf(s)>=0)return;if(pa(s))return s;if(!("toJSON"in s)){t[a]=s;const i=ds(s)?[]:{};return fa(s,(o,l)=>{const c=r(o,a+1);!rs(c)&&(i[l]=c)}),t[a]=void 0,i}}return s};return r(e,0)},wx=sn("AsyncFunction"),Rx=e=>e&&(ha(e)||It(e))&&It(e.then)&&It(e.catch),Dh=((e,t)=>e?setImmediate:t?((r,s)=>(lr.addEventListener("message",({source:a,data:i})=>{a===lr&&i===r&&s.length&&s.shift()()},!1),a=>{s.push(a),lr.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",It(lr.postMessage)),bx=typeof queueMicrotask<"u"?queueMicrotask.bind(lr):typeof process<"u"&&process.nextTick||Dh,Ex=e=>e!=null&&It(e[ro]),Q={isArray:ds,isArrayBuffer:Ah,isBuffer:pa,isFormData:Zv,isArrayBufferView:Vv,isString:Qv,isNumber:Ih,isBoolean:Wv,isObject:ha,isPlainObject:ii,isEmptyObject:Hv,isReadableStream:tx,isRequest:nx,isResponse:rx,isHeaders:sx,isUndefined:rs,isDate:Gv,isFile:Kv,isBlob:Yv,isRegExp:gx,isFunction:It,isStream:Xv,isURLSearchParams:ex,isTypedArray:mx,isFileList:Jv,forEach:fa,merge:tc,extend:ix,trim:ax,stripBOM:ox,inherits:lx,toFlatObject:cx,kindOf:so,kindOfTest:sn,endsWith:dx,toArray:ux,forEachEntry:px,matchAll:hx,isHTMLForm:fx,hasOwnProperty:Iu,hasOwnProp:Iu,reduceDescriptors:Oh,freezeMethods:vx,toObjectSet:xx,toCamelCase:yx,noop:jx,toFiniteNumber:Sx,findKey:Lh,global:lr,isContextDefined:Th,isSpecCompliantForm:Cx,toJSONObject:Nx,isAsyncFn:wx,isThenable:Rx,setImmediate:Dh,asap:bx,isIterable:Ex};function Ie(e,t,r,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}Q.inherits(Ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Q.toJSONObject(this.config),code:this.code,status:this.status}}});const Fh=Ie.prototype,Mh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Mh[e]={value:e}});Object.defineProperties(Ie,Mh);Object.defineProperty(Fh,"isAxiosError",{value:!0});Ie.from=(e,t,r,s,a,i)=>{const o=Object.create(Fh);Q.toFlatObject(e,o,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return Ie.call(o,l,c,r,s,a),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const _x=null;function nc(e){return Q.isPlainObject(e)||Q.isArray(e)}function Uh(e){return Q.endsWith(e,"[]")?e.slice(0,-2):e}function Lu(e,t,r){return e?e.concat(t).map(function(a,i){return a=Uh(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function kx(e){return Q.isArray(e)&&!e.some(nc)}const Px=Q.toFlatObject(Q,{},null,function(t){return/^is[A-Z]/.test(t)});function io(e,t,r){if(!Q.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Q.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,_){return!Q.isUndefined(_[R])});const s=r.metaTokens,a=r.visitor||d,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&Q.isSpecCompliantForm(t);if(!Q.isFunction(a))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(Q.isDate(p))return p.toISOString();if(Q.isBoolean(p))return p.toString();if(!c&&Q.isBlob(p))throw new Ie("Blob is not supported. Use a Buffer instead.");return Q.isArrayBuffer(p)||Q.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function d(p,R,_){let j=p;if(p&&!_&&typeof p=="object"){if(Q.endsWith(R,"{}"))R=s?R:R.slice(0,-2),p=JSON.stringify(p);else if(Q.isArray(p)&&kx(p)||(Q.isFileList(p)||Q.endsWith(R,"[]"))&&(j=Q.toArray(p)))return R=Uh(R),j.forEach(function(N,C){!(Q.isUndefined(N)||N===null)&&t.append(o===!0?Lu([R],C,i):o===null?R:R+"[]",u(N))}),!1}return nc(p)?!0:(t.append(Lu(_,R,i),u(p)),!1)}const g=[],f=Object.assign(Px,{defaultVisitor:d,convertValue:u,isVisitable:nc});function b(p,R){if(!Q.isUndefined(p)){if(g.indexOf(p)!==-1)throw Error("Circular reference detected in "+R.join("."));g.push(p),Q.forEach(p,function(j,v){(!(Q.isUndefined(j)||j===null)&&a.call(t,j,Q.isString(v)?v.trim():v,R,f))===!0&&b(j,R?R.concat(v):[v])}),g.pop()}}if(!Q.isObject(e))throw new TypeError("data must be an object");return b(e),t}function Tu(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function sd(e,t){this._pairs=[],e&&io(e,this,t)}const $h=sd.prototype;$h.append=function(t,r){this._pairs.push([t,r])};$h.toString=function(t){const r=t?function(s){return t.call(this,s,Tu)}:Tu;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function Ax(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function qh(e,t,r){if(!t)return e;const s=r&&r.encode||Ax;Q.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=Q.isURLSearchParams(t)?t.toString():new sd(t,r).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Ou{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Q.forEach(this.handlers,function(s){s!==null&&t(s)})}}const Bh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ix=typeof URLSearchParams<"u"?URLSearchParams:sd,Lx=typeof FormData<"u"?FormData:null,Tx=typeof Blob<"u"?Blob:null,Ox={isBrowser:!0,classes:{URLSearchParams:Ix,FormData:Lx,Blob:Tx},protocols:["http","https","file","blob","url","data"]},ad=typeof window<"u"&&typeof document<"u",rc=typeof navigator=="object"&&navigator||void 0,Dx=ad&&(!rc||["ReactNative","NativeScript","NS"].indexOf(rc.product)<0),Fx=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Mx=ad&&window.location.href||"http://localhost",Ux=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ad,hasStandardBrowserEnv:Dx,hasStandardBrowserWebWorkerEnv:Fx,navigator:rc,origin:Mx},Symbol.toStringTag,{value:"Module"})),xt={...Ux,...Ox};function $x(e,t){return io(e,new xt.classes.URLSearchParams,{visitor:function(r,s,a,i){return xt.isNode&&Q.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function qx(e){return Q.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Bx(e){const t={},r=Object.keys(e);let s;const a=r.length;let i;for(s=0;s<a;s++)i=r[s],t[i]=e[i];return t}function zh(e){function t(r,s,a,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&Q.isArray(a)?a.length:o,c?(Q.hasOwnProp(a,o)?a[o]=[a[o],s]:a[o]=s,!l):((!a[o]||!Q.isObject(a[o]))&&(a[o]=[]),t(r,s,a[o],i)&&Q.isArray(a[o])&&(a[o]=Bx(a[o])),!l)}if(Q.isFormData(e)&&Q.isFunction(e.entries)){const r={};return Q.forEachEntry(e,(s,a)=>{t(qx(s),a,r,0)}),r}return null}function zx(e,t,r){if(Q.isString(e))try{return(t||JSON.parse)(e),Q.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const ya={transitional:Bh,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const s=r.getContentType()||"",a=s.indexOf("application/json")>-1,i=Q.isObject(t);if(i&&Q.isHTMLForm(t)&&(t=new FormData(t)),Q.isFormData(t))return a?JSON.stringify(zh(t)):t;if(Q.isArrayBuffer(t)||Q.isBuffer(t)||Q.isStream(t)||Q.isFile(t)||Q.isBlob(t)||Q.isReadableStream(t))return t;if(Q.isArrayBufferView(t))return t.buffer;if(Q.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return $x(t,this.formSerializer).toString();if((l=Q.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return io(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),zx(t)):t}],transformResponse:[function(t){const r=this.transitional||ya.transitional,s=r&&r.forcedJSONParsing,a=this.responseType==="json";if(Q.isResponse(t)||Q.isReadableStream(t))return t;if(t&&Q.isString(t)&&(s&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?Ie.from(l,Ie.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xt.classes.FormData,Blob:xt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Q.forEach(["delete","get","head","post","put","patch"],e=>{ya.headers[e]={}});const Vx=Q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Qx=e=>{const t={};let r,s,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),s=o.substring(a+1).trim(),!(!r||t[r]&&Vx[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},Du=Symbol("internals");function Cs(e){return e&&String(e).trim().toLowerCase()}function oi(e){return e===!1||e==null?e:Q.isArray(e)?e.map(oi):String(e)}function Wx(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}const Hx=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Fo(e,t,r,s,a){if(Q.isFunction(s))return s.call(this,t,r);if(a&&(t=r),!!Q.isString(t)){if(Q.isString(s))return t.indexOf(s)!==-1;if(Q.isRegExp(s))return s.test(t)}}function Gx(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function Kx(e,t){const r=Q.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(a,i,o){return this[s].call(this,t,a,i,o)},configurable:!0})})}let Lt=class{constructor(t){t&&this.set(t)}set(t,r,s){const a=this;function i(l,c,u){const d=Cs(c);if(!d)throw new Error("header name must be a non-empty string");const g=Q.findKey(a,d);(!g||a[g]===void 0||u===!0||u===void 0&&a[g]!==!1)&&(a[g||c]=oi(l))}const o=(l,c)=>Q.forEach(l,(u,d)=>i(u,d,c));if(Q.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(Q.isString(t)&&(t=t.trim())&&!Hx(t))o(Qx(t),r);else if(Q.isObject(t)&&Q.isIterable(t)){let l={},c,u;for(const d of t){if(!Q.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?Q.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(l,r)}else t!=null&&i(r,t,s);return this}get(t,r){if(t=Cs(t),t){const s=Q.findKey(this,t);if(s){const a=this[s];if(!r)return a;if(r===!0)return Wx(a);if(Q.isFunction(r))return r.call(this,a,s);if(Q.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Cs(t),t){const s=Q.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||Fo(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let a=!1;function i(o){if(o=Cs(o),o){const l=Q.findKey(s,o);l&&(!r||Fo(s,s[l],l,r))&&(delete s[l],a=!0)}}return Q.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let s=r.length,a=!1;for(;s--;){const i=r[s];(!t||Fo(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,s={};return Q.forEach(this,(a,i)=>{const o=Q.findKey(s,i);if(o){r[o]=oi(a),delete r[i];return}const l=t?Gx(i):String(i).trim();l!==i&&delete r[i],r[l]=oi(a),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Q.forEach(this,(s,a)=>{s!=null&&s!==!1&&(r[a]=t&&Q.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(a=>s.set(a)),s}static accessor(t){const s=(this[Du]=this[Du]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=Cs(o);s[l]||(Kx(a,o),s[l]=!0)}return Q.isArray(t)?t.forEach(i):i(t),this}};Lt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Q.reduceDescriptors(Lt.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[r]=s}}});Q.freezeMethods(Lt);function Mo(e,t){const r=this||ya,s=t||r,a=Lt.from(s.headers);let i=s.data;return Q.forEach(e,function(l){i=l.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function Vh(e){return!!(e&&e.__CANCEL__)}function us(e,t,r){Ie.call(this,e??"canceled",Ie.ERR_CANCELED,t,r),this.name="CanceledError"}Q.inherits(us,Ie,{__CANCEL__:!0});function Qh(e,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):t(new Ie("Request failed with status code "+r.status,[Ie.ERR_BAD_REQUEST,Ie.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Yx(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Jx(e,t){e=e||10;const r=new Array(e),s=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),d=s[i];o||(o=u),r[a]=c,s[a]=u;let g=i,f=0;for(;g!==a;)f+=r[g++],g=g%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),u-o<t)return;const b=d&&u-d;return b?Math.round(f*1e3/b):void 0}}function Xx(e,t){let r=0,s=1e3/t,a,i;const o=(u,d=Date.now())=>{r=d,a=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const d=Date.now(),g=d-r;g>=s?o(u,d):(a=u,i||(i=setTimeout(()=>{i=null,o(a)},s-g)))},()=>a&&o(a)]}const Di=(e,t,r=3)=>{let s=0;const a=Jx(50,250);return Xx(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-s,u=a(c),d=o<=l;s=o;const g={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(g)},r)},Fu=(e,t)=>{const r=e!=null;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},Mu=e=>(...t)=>Q.asap(()=>e(...t)),Zx=xt.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,xt.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(xt.origin),xt.navigator&&/(msie|trident)/i.test(xt.navigator.userAgent)):()=>!0,ej=xt.hasStandardBrowserEnv?{write(e,t,r,s,a,i,o){if(typeof document>"u")return;const l=[`${e}=${encodeURIComponent(t)}`];Q.isNumber(r)&&l.push(`expires=${new Date(r).toUTCString()}`),Q.isString(s)&&l.push(`path=${s}`),Q.isString(a)&&l.push(`domain=${a}`),i===!0&&l.push("secure"),Q.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function tj(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function nj(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Wh(e,t,r){let s=!tj(t);return e&&(s||r==!1)?nj(e,t):t}const Uu=e=>e instanceof Lt?{...e}:e;function gr(e,t){t=t||{};const r={};function s(u,d,g,f){return Q.isPlainObject(u)&&Q.isPlainObject(d)?Q.merge.call({caseless:f},u,d):Q.isPlainObject(d)?Q.merge({},d):Q.isArray(d)?d.slice():d}function a(u,d,g,f){if(Q.isUndefined(d)){if(!Q.isUndefined(u))return s(void 0,u,g,f)}else return s(u,d,g,f)}function i(u,d){if(!Q.isUndefined(d))return s(void 0,d)}function o(u,d){if(Q.isUndefined(d)){if(!Q.isUndefined(u))return s(void 0,u)}else return s(void 0,d)}function l(u,d,g){if(g in t)return s(u,d);if(g in e)return s(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,d,g)=>a(Uu(u),Uu(d),g,!0)};return Q.forEach(Object.keys({...e,...t}),function(d){const g=c[d]||a,f=g(e[d],t[d],d);Q.isUndefined(f)&&g!==l||(r[d]=f)}),r}const Hh=e=>{const t=gr({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=Lt.from(o),t.url=qh(Wh(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Q.isFormData(r)){if(xt.hasStandardBrowserEnv||xt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Q.isFunction(r.getHeaders)){const c=r.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([d,g])=>{u.includes(d.toLowerCase())&&o.set(d,g)})}}if(xt.hasStandardBrowserEnv&&(s&&Q.isFunction(s)&&(s=s(t)),s||s!==!1&&Zx(t.url))){const c=a&&i&&ej.read(i);c&&o.set(a,c)}return t},rj=typeof XMLHttpRequest<"u",sj=rj&&function(e){return new Promise(function(r,s){const a=Hh(e);let i=a.data;const o=Lt.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=a,d,g,f,b,p;function R(){b&&b(),p&&p(),a.cancelToken&&a.cancelToken.unsubscribe(d),a.signal&&a.signal.removeEventListener("abort",d)}let _=new XMLHttpRequest;_.open(a.method.toUpperCase(),a.url,!0),_.timeout=a.timeout;function j(){if(!_)return;const N=Lt.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),V={data:!l||l==="text"||l==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:N,config:e,request:_};Qh(function(F){r(F),R()},function(F){s(F),R()},V),_=null}"onloadend"in _?_.onloadend=j:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(j)},_.onabort=function(){_&&(s(new Ie("Request aborted",Ie.ECONNABORTED,e,_)),_=null)},_.onerror=function(C){const V=C&&C.message?C.message:"Network Error",H=new Ie(V,Ie.ERR_NETWORK,e,_);H.event=C||null,s(H),_=null},_.ontimeout=function(){let C=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const V=a.transitional||Bh;a.timeoutErrorMessage&&(C=a.timeoutErrorMessage),s(new Ie(C,V.clarifyTimeoutError?Ie.ETIMEDOUT:Ie.ECONNABORTED,e,_)),_=null},i===void 0&&o.setContentType(null),"setRequestHeader"in _&&Q.forEach(o.toJSON(),function(C,V){_.setRequestHeader(V,C)}),Q.isUndefined(a.withCredentials)||(_.withCredentials=!!a.withCredentials),l&&l!=="json"&&(_.responseType=a.responseType),u&&([f,p]=Di(u,!0),_.addEventListener("progress",f)),c&&_.upload&&([g,b]=Di(c),_.upload.addEventListener("progress",g),_.upload.addEventListener("loadend",b)),(a.cancelToken||a.signal)&&(d=N=>{_&&(s(!N||N.type?new us(null,e,_):N),_.abort(),_=null)},a.cancelToken&&a.cancelToken.subscribe(d),a.signal&&(a.signal.aborted?d():a.signal.addEventListener("abort",d)));const v=Yx(a.url);if(v&&xt.protocols.indexOf(v)===-1){s(new Ie("Unsupported protocol "+v+":",Ie.ERR_BAD_REQUEST,e));return}_.send(i||null)})},aj=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let s=new AbortController,a;const i=function(u){if(!a){a=!0,l();const d=u instanceof Error?u:this.reason;s.abort(d instanceof Ie?d:new us(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{o=null,i(new Ie(`timeout ${t} of ms exceeded`,Ie.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>Q.asap(l),c}},ij=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let s=0,a;for(;s<r;)a=s+t,yield e.slice(s,a),s=a},oj=async function*(e,t){for await(const r of lj(e))yield*ij(r,t)},lj=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:s}=await t.read();if(r)break;yield s}}finally{await t.cancel()}},$u=(e,t,r,s)=>{const a=oj(e,t);let i=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await a.next();if(u){l(),c.close();return}let g=d.byteLength;if(r){let f=i+=g;r(f)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},qu=64*1024,{isFunction:Fa}=Q,cj=(({Request:e,Response:t})=>({Request:e,Response:t}))(Q.global),{ReadableStream:Bu,TextEncoder:zu}=Q.global,Vu=(e,...t)=>{try{return!!e(...t)}catch{return!1}},dj=e=>{e=Q.merge.call({skipUndefined:!0},cj,e);const{fetch:t,Request:r,Response:s}=e,a=t?Fa(t):typeof fetch=="function",i=Fa(r),o=Fa(s);if(!a)return!1;const l=a&&Fa(Bu),c=a&&(typeof zu=="function"?(p=>R=>p.encode(R))(new zu):async p=>new Uint8Array(await new r(p).arrayBuffer())),u=i&&l&&Vu(()=>{let p=!1;const R=new r(xt.origin,{body:new Bu,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!R}),d=o&&l&&Vu(()=>Q.isReadableStream(new s("").body)),g={stream:d&&(p=>p.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!g[p]&&(g[p]=(R,_)=>{let j=R&&R[p];if(j)return j.call(R);throw new Ie(`Response type '${p}' is not supported`,Ie.ERR_NOT_SUPPORT,_)})});const f=async p=>{if(p==null)return 0;if(Q.isBlob(p))return p.size;if(Q.isSpecCompliantForm(p))return(await new r(xt.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(Q.isArrayBufferView(p)||Q.isArrayBuffer(p))return p.byteLength;if(Q.isURLSearchParams(p)&&(p=p+""),Q.isString(p))return(await c(p)).byteLength},b=async(p,R)=>{const _=Q.toFiniteNumber(p.getContentLength());return _??f(R)};return async p=>{let{url:R,method:_,data:j,signal:v,cancelToken:N,timeout:C,onDownloadProgress:V,onUploadProgress:H,responseType:F,headers:K,withCredentials:ne="same-origin",fetchOptions:D}=Hh(p),W=t||fetch;F=F?(F+"").toLowerCase():"text";let U=aj([v,N&&N.toAbortSignal()],C),q=null;const k=U&&U.unsubscribe&&(()=>{U.unsubscribe()});let L;try{if(H&&u&&_!=="get"&&_!=="head"&&(L=await b(K,j))!==0){let I=new r(R,{method:"POST",body:j,duplex:"half"}),ce;if(Q.isFormData(j)&&(ce=I.headers.get("content-type"))&&K.setContentType(ce),I.body){const[T,le]=Fu(L,Di(Mu(H)));j=$u(I.body,qu,T,le)}}Q.isString(ne)||(ne=ne?"include":"omit");const O=i&&"credentials"in r.prototype,G={...D,signal:U,method:_.toUpperCase(),headers:K.normalize().toJSON(),body:j,duplex:"half",credentials:O?ne:void 0};q=i&&new r(R,G);let M=await(i?W(q,D):W(R,G));const Y=d&&(F==="stream"||F==="response");if(d&&(V||Y&&k)){const I={};["status","statusText","headers"].forEach(h=>{I[h]=M[h]});const ce=Q.toFiniteNumber(M.headers.get("content-length")),[T,le]=V&&Fu(ce,Di(Mu(V),!0))||[];M=new s($u(M.body,qu,T,()=>{le&&le(),k&&k()}),I)}F=F||"text";let $=await g[Q.findKey(g,F)||"text"](M,p);return!Y&&k&&k(),await new Promise((I,ce)=>{Qh(I,ce,{data:$,headers:Lt.from(M.headers),status:M.status,statusText:M.statusText,config:p,request:q})})}catch(O){throw k&&k(),O&&O.name==="TypeError"&&/Load failed|fetch/i.test(O.message)?Object.assign(new Ie("Network Error",Ie.ERR_NETWORK,p,q),{cause:O.cause||O}):Ie.from(O,O&&O.code,p,q)}}},uj=new Map,Gh=e=>{let t=e&&e.env||{};const{fetch:r,Request:s,Response:a}=t,i=[s,a,r];let o=i.length,l=o,c,u,d=uj;for(;l--;)c=i[l],u=d.get(c),u===void 0&&d.set(c,u=l?new Map:dj(t)),d=u;return u};Gh();const id={http:_x,xhr:sj,fetch:{get:Gh}};Q.forEach(id,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Qu=e=>`- ${e}`,mj=e=>Q.isFunction(e)||e===null||e===!1;function pj(e,t){e=Q.isArray(e)?e:[e];const{length:r}=e;let s,a;const i={};for(let o=0;o<r;o++){s=e[o];let l;if(a=s,!mj(s)&&(a=id[(l=String(s)).toLowerCase()],a===void 0))throw new Ie(`Unknown adapter '${l}'`);if(a&&(Q.isFunction(a)||(a=a.get(t))))break;i[l||"#"+o]=a}if(!a){const o=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=r?o.length>1?`since :
`+o.map(Qu).join(`
`):" "+Qu(o[0]):"as no adapter specified";throw new Ie("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a}const Kh={getAdapter:pj,adapters:id};function Uo(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new us(null,e)}function Wu(e){return Uo(e),e.headers=Lt.from(e.headers),e.data=Mo.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Kh.getAdapter(e.adapter||ya.adapter,e)(e).then(function(s){return Uo(e),s.data=Mo.call(e,e.transformResponse,s),s.headers=Lt.from(s.headers),s},function(s){return Vh(s)||(Uo(e),s&&s.response&&(s.response.data=Mo.call(e,e.transformResponse,s.response),s.response.headers=Lt.from(s.response.headers))),Promise.reject(s)})}const Yh="1.13.2",oo={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{oo[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const Hu={};oo.transitional=function(t,r,s){function a(i,o){return"[Axios v"+Yh+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(t===!1)throw new Ie(a(o," has been removed"+(r?" in "+r:"")),Ie.ERR_DEPRECATED);return r&&!Hu[o]&&(Hu[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};oo.spelling=function(t){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function hj(e,t,r){if(typeof e!="object")throw new Ie("options must be an object",Ie.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let a=s.length;for(;a-- >0;){const i=s[a],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new Ie("option "+i+" must be "+c,Ie.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ie("Unknown option "+i,Ie.ERR_BAD_OPTION)}}const li={assertOptions:hj,validators:oo},ln=li.validators;let ur=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Ou,response:new Ou}}async request(t,r){try{return await this._request(t,r)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=gr(this.defaults,r);const{transitional:s,paramsSerializer:a,headers:i}=r;s!==void 0&&li.assertOptions(s,{silentJSONParsing:ln.transitional(ln.boolean),forcedJSONParsing:ln.transitional(ln.boolean),clarifyTimeoutError:ln.transitional(ln.boolean)},!1),a!=null&&(Q.isFunction(a)?r.paramsSerializer={serialize:a}:li.assertOptions(a,{encode:ln.function,serialize:ln.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),li.assertOptions(r,{baseUrl:ln.spelling("baseURL"),withXsrfToken:ln.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&Q.merge(i.common,i[r.method]);i&&Q.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),r.headers=Lt.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(r)===!1||(c=c&&R.synchronous,l.unshift(R.fulfilled,R.rejected))});const u=[];this.interceptors.response.forEach(function(R){u.push(R.fulfilled,R.rejected)});let d,g=0,f;if(!c){const p=[Wu.bind(this),void 0];for(p.unshift(...l),p.push(...u),f=p.length,d=Promise.resolve(r);g<f;)d=d.then(p[g++],p[g++]);return d}f=l.length;let b=r;for(;g<f;){const p=l[g++],R=l[g++];try{b=p(b)}catch(_){R.call(this,_);break}}try{d=Wu.call(this,b)}catch(p){return Promise.reject(p)}for(g=0,f=u.length;g<f;)d=d.then(u[g++],u[g++]);return d}getUri(t){t=gr(this.defaults,t);const r=Wh(t.baseURL,t.url,t.allowAbsoluteUrls);return qh(r,t.params,t.paramsSerializer)}};Q.forEach(["delete","get","head","options"],function(t){ur.prototype[t]=function(r,s){return this.request(gr(s||{},{method:t,url:r,data:(s||{}).data}))}});Q.forEach(["post","put","patch"],function(t){function r(s){return function(i,o,l){return this.request(gr(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ur.prototype[t]=r(),ur.prototype[t+"Form"]=r(!0)});let fj=class Jh{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(a=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](a);s._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(a);return o.cancel=function(){s.unsubscribe(i)},o},t(function(i,o,l){s.reason||(s.reason=new us(i,o,l),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=s=>{t.abort(s)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Jh(function(a){t=a}),cancel:t}}};function yj(e){return function(r){return e.apply(null,r)}}function gj(e){return Q.isObject(e)&&e.isAxiosError===!0}const sc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(sc).forEach(([e,t])=>{sc[t]=e});function Xh(e){const t=new ur(e),r=kh(ur.prototype.request,t);return Q.extend(r,ur.prototype,t,{allOwnKeys:!0}),Q.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return Xh(gr(e,a))},r}const Z=Xh(ya);Z.Axios=ur;Z.CanceledError=us;Z.CancelToken=fj;Z.isCancel=Vh;Z.VERSION=Yh;Z.toFormData=io;Z.AxiosError=Ie;Z.Cancel=Z.CanceledError;Z.all=function(t){return Promise.all(t)};Z.spread=yj;Z.isAxiosError=gj;Z.mergeConfig=gr;Z.AxiosHeaders=Lt;Z.formToJSON=e=>zh(Q.isHTMLForm(e)?new FormData(e):e);Z.getAdapter=Kh.getAdapter;Z.HttpStatusCode=sc;Z.default=Z;const{Axios:y0,AxiosError:g0,CanceledError:v0,isCancel:x0,CancelToken:j0,VERSION:S0,all:C0,Cancel:N0,isAxiosError:w0,spread:R0,toFormData:b0,AxiosHeaders:E0,HttpStatusCode:_0,formToJSON:k0,getAdapter:P0,mergeConfig:A0}=Z,Zh=m.createContext(null),vj="",$o=vj.replace(/\/+$/,"");function xj(){return $o.endsWith("/api")?`${$o}/auth/login`:`${$o}/api/auth/login`}Z.defaults.withCredentials=!0;const jj=({children:e})=>{const[t,r]=m.useState(null),[s,a]=m.useState(null);m.useEffect(()=>{try{const l=localStorage.getItem("auth");if(l){const c=JSON.parse(l);r(c.user||null),a(c.token||null),c.token&&(Z.defaults.headers.common.Authorization=`Bearer ${c.token}`)}}catch(l){console.error("Failed to parse stored auth:",l),localStorage.removeItem("auth")}},[]);const i=async(l,c)=>{let u;typeof l=="string"?u={email:l,password:c}:u=l||{};const d=xj();try{const g=await Z.post(d,u,{headers:{"Content-Type":"application/json"}}),f=(g==null?void 0:g.data)||{},b=f.token||f.accessToken||null,p=f.user||f.data||null;return a(b),r(p),b&&(Z.defaults.headers.common.Authorization=`Bearer ${b}`),localStorage.setItem("auth",JSON.stringify({token:b,user:p})),{success:!0,data:f}}catch(g){const f=g==null?void 0:g.response,b=(f==null?void 0:f.data)||g.message||"Login error";return console.error("Login failed:",b),{success:!1,error:b,status:f==null?void 0:f.status}}},o=()=>{r(null),a(null),localStorage.removeItem("auth"),delete Z.defaults.headers.common.Authorization};return n.jsx(Zh.Provider,{value:{user:t,token:s,login:i,logout:o},children:e})},od=()=>m.useContext(Zh),Sj="",Cj=()=>{const{login:e}=od(),t=bn(),[r,s]=m.useState(""),[a,i]=m.useState(""),[o,l]=m.useState(!1),[c,u]=m.useState(""),d=async g=>{var f,b,p;g.preventDefault(),u(""),l(!0);try{if(console.log("login payload:",{email:r,password:a}),!r||!a)throw new Error("Email and password required");const R=await Z.post(`${Sj}/api/auth/login`,{email:r,password:a},{headers:{"Content-Type":"application/json"},withCredentials:!0});if((f=R.data)!=null&&f.token&&localStorage.setItem("authToken",R.data.token),typeof e=="function")try{await e(r,a)}catch(_){console.warn("context login failed (non-fatal)",_)}t("/super-admin/dashboard")}catch(R){console.error(R),u(((p=(b=R.response)==null?void 0:b.data)==null?void 0:p.message)||R.message||"Login failed")}finally{l(!1)}};return n.jsx("div",{className:"auth-wrapper",children:n.jsxs("div",{className:"auth-card",children:[n.jsxs("div",{className:"auth-left",children:[n.jsx("h1",{children:"Resort Purchase CRM"}),n.jsx("p",{children:"Centralised purchase & inventory control for all your resorts."}),n.jsxs("ul",{children:[n.jsx("li",{children:"Multi-resort requisition & PO tracking"}),n.jsx("li",{children:"Real-time stock & consumption visibility"}),n.jsx("li",{children:"Configurable approval workflow"})]})]}),n.jsxs("div",{className:"auth-right",children:[n.jsx("h2",{children:"Login"}),n.jsx("p",{className:"auth-sub",children:"Sign in as Super Admin or Resort User"}),n.jsxs("form",{onSubmit:d,className:"auth-form",children:[n.jsxs("label",{children:["Email",n.jsx("input",{type:"email",name:"email",value:r,onChange:g=>s(g.target.value),placeholder:"you@resort.com",required:!0})]}),n.jsxs("label",{children:["Password",n.jsx("input",{type:"password",name:"password",value:a,onChange:g=>i(g.target.value),placeholder:"",required:!0})]}),c&&n.jsx("div",{className:"auth-error",children:c}),n.jsx("button",{type:"submit",className:"auth-button",disabled:o,children:o?"Signing in...":"Sign in"})]})]})]})})},ms=m.createContext(null),Nj=({children:e,initialResort:t=null})=>{const[r,s]=m.useState(t),a=m.useMemo(()=>({resort:r,setResort:s}),[r]);return n.jsx(ms.Provider,{value:a,children:e})},wj=()=>{const e=m.useContext(ms);return e??{resort:null,setResort:()=>{}}},Rj=[{label:"Dashboard",icon:"ri-dashboard-line",path:"/super-admin/dashboard"},{type:"section",label:"Masters"},{label:"Resorts",icon:"ri-building-4-line",path:"/super-admin/resorts"},{label:"Departments",icon:"ri-team-line",path:"/super-admin/departments"},{label:"Items Category",icon:"ri-archive-2-line",path:"/super-admin/item-categories"},{label:"Items",icon:"ri-archive-2-line",path:"/super-admin/items"},{label:"Stores",icon:"ri-store-2-line",path:"/super-admin/stores"},{label:"Vendors",icon:"ri-truck-line",path:"/super-admin/vendors"},{label:"Recipes",icon:"ri-book-2-line",path:"/super-admin/recipes"},{label:"Users",icon:"ri-user-settings-line",path:"/super-admin/users"},{label:"Roles",icon:"ri-user-star-line",path:"/super-admin/roles"},{type:"section",label:"Purchase"},{label:"Requisitions",icon:"ri-file-list-2-line",path:"/super-admin/requisitions"},{label:"Purchase Orders",icon:"ri-file-paper-line",path:"/super-admin/po"},{label:"GRN",icon:"ri-archive-stack-line",path:"/super-admin/grn"},{label:"Consumption",icon:"ri-goblet-line",path:"/super-admin/consumption"},{label:"Store Replacement",icon:"ri-exchange-box-line",path:"/super-admin/store-replacement"},{type:"section",label:"Inventory & Reports"},{label:"Inventory",icon:"ri-archive-line",path:"/super-admin/inventory"},{label:"Reports",icon:"ri-bar-chart-2-line",path:"/super-admin/reports"}],bj=()=>{const{user:e,logout:t}=od(),r=bn(),{resorts:s=[],activeResort:a="all",setActiveResort:i}=m.useContext(ms),o=()=>{t(),r("/login")},l=c=>{i(c.target.value)};return n.jsxs("div",{className:"sa-app-shell",children:[n.jsxs("aside",{className:"sa-sidebar",children:[n.jsxs("div",{className:"sa-logo-block",children:[n.jsx("div",{className:"sa-logo-circle",children:"R"}),n.jsxs("div",{children:[n.jsx("h1",{className:"sa-app-title",children:"Resort Purchase"}),n.jsx("p",{className:"sa-app-subtitle",children:"Super Admin"})]})]}),n.jsx("nav",{className:"sa-nav",children:Rj.map((c,u)=>c.type==="section"?n.jsx("div",{className:"sa-nav-section",children:c.label},u):n.jsxs(Uv,{to:c.path,className:({isActive:d})=>"sa-nav-item"+(d?" sa-nav-item-active":""),children:[n.jsx("i",{className:`sa-nav-icon ${c.icon}`}),n.jsx("span",{children:c.label})]},c.path))}),n.jsxs("div",{className:"sa-sidebar-footer",children:[n.jsx("div",{className:"sa-mini-badge",children:"v1.0"}),n.jsx("span",{children:"All resorts overview"})]})]}),n.jsxs("div",{className:"sa-main",children:[n.jsxs("header",{className:"sa-topbar",children:[n.jsxs("div",{className:"sa-topbar-left",children:[n.jsxs("select",{className:"sa-resort-switcher",value:a,onChange:l,"aria-label":"Select Resort",children:[n.jsx("option",{value:"all",children:"All Resorts"}),s.map(c=>n.jsx("option",{value:c._id,children:c.name},c._id))]}),n.jsx("div",{className:"sa-topbar-divider"}),n.jsx("div",{className:"sa-breadcrumb",children:"Super Admin / Panel"})]}),n.jsxs("div",{className:"sa-topbar-right",children:[n.jsxs("div",{className:"sa-search-box",children:[n.jsx("i",{className:"ri-search-line"}),n.jsx("input",{placeholder:"Search requisition, PO, vendor..."})]}),n.jsx("button",{className:"sa-icon-button",onClick:o,children:n.jsx("i",{className:"ri-logout-circle-r-line"})}),n.jsxs("div",{className:"sa-user-pill",children:[n.jsx("div",{className:"sa-avatar-circle",children:"SA"}),n.jsxs("div",{className:"sa-user-info",children:[n.jsx("span",{className:"sa-user-name",children:(e==null?void 0:e.name)||"Super Admin"}),n.jsx("span",{className:"sa-user-role",children:e==null?void 0:e.role})]})]})]})]}),n.jsx("main",{className:"sa-content",children:n.jsx(bv,{})})]})]})},Ma=({label:e,value:t,subLabel:r,trend:s,trendType:a})=>n.jsxs("div",{className:"sa-card sa-stat-card",children:[n.jsx("div",{className:"sa-stat-label",children:e}),n.jsx("div",{className:"sa-stat-value",children:t}),n.jsxs("div",{className:"sa-stat-bottom",children:[n.jsx("span",{className:"sa-stat-sublabel",children:r}),s&&n.jsxs("span",{className:`sa-stat-trend ${a==="up"?"up":"down"}`,children:[n.jsx("i",{className:a==="up"?"ri-arrow-up-s-line":"ri-arrow-down-s-line"}),s]})]})]}),Ej=()=>n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Dashboard"}),n.jsx("p",{children:"Overview of all resorts, purchases & inventory."})]}),n.jsxs("button",{className:"sa-primary-button",children:[n.jsx("i",{className:"ri-add-line"}),"New Requisition"]})]}),n.jsxs("div",{className:"sa-grid-4",children:[n.jsx(Ma,{label:"Total Resorts",value:"6",subLabel:"Active properties",trend:"+1 new",trendType:"up"}),n.jsx(Ma,{label:"Open Requisitions",value:"24",subLabel:"Waiting for approval",trend:"+4 today",trendType:"up"}),n.jsx(Ma,{label:"Pending GRN",value:"8",subLabel:"PO received, GRN not done",trend:"-3 vs yesterday",trendType:"down"}),n.jsx(Ma,{label:"Low Stock Items",value:"17",subLabel:"Below reorder level",trend:"Check now",trendType:"up"})]})]}),Ot="http://localhost:5000/api",Ns=()=>({lineId:`ln_${Date.now()}_${Math.floor(Math.random()*1e3)}`,itemCategory:"",item:"",qty:1,remark:""}),er=e=>{const t=e?new Date(e):new Date;if(Number.isNaN(t.getTime()))return`GRN-${Date.now()}`;const r=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),i=Math.floor(Math.random()*900)+100;return`GRN-${r}${s}${a}-${i}`},Gu=()=>{var xa,Sr,ld,cd,dd,ud,md,pd,hd;const{activeResort:e}=m.useContext(ms),[t,r]=m.useState([]),[s,a]=m.useState([]),[i,o]=m.useState([]),[l,c]=m.useState([]),[u,d]=m.useState([]),[g,f]=m.useState([]),[b,p]=m.useState([]),[R,_]=m.useState(!1),[j,v]=m.useState(!1),[N,C]=m.useState(""),[V,H]=m.useState(!1),[F,K]=m.useState(null),[ne,D]=m.useState({type:"INTERNAL",resort:"",department:"",fromStore:"",toStore:"",store:"",vendor:"",requiredBy:"",lines:[Ns()]}),[W,U]=m.useState({open:!1,req:null,poNo:"",poDate:new Date().toISOString().slice(0,10),items:[],subTotal:0,taxPercent:0,taxAmount:0,total:0}),q=new Date().toISOString().slice(0,10),[k,L]=m.useState({open:!1,req:null,grnNo:er(q),receivedBy:"",receivedDate:q,challanNo:"",billNo:"",items:[]}),[O,G]=m.useState("ALL"),[M,Y]=m.useState("ALL"),[$,I]=m.useState(""),[ce,T]=m.useState(""),[le,h]=m.useState(""),[X,se]=m.useState("ALL"),[Ce,Re]=m.useState(""),ue=bn();function ve(x){const z=x.includes("?")?"&":"?";return e&&e!=="all"?`${Ot}${x}${z}resort=${encodeURIComponent(e)}`:`${Ot}${x}`}const Ne=l.filter(x=>{if(!$)return!0;const z=x.resort||x.resortId||x.resortName||x.resort;return String(z)===String($)}),P=x=>Array.isArray(x)?x.map(z=>z?typeof z=="string"?{_id:z,name:z}:{_id:z._id??z.id??z.code??z.name??JSON.stringify(z),name:z.name??z.title??z.code??String(z._id??z.id??""),original:z}:null).filter(Boolean):[],ie=async()=>{var x,z;try{_(!0),C("");const[ae,me,je,_e,Oe,Ue,Xe]=await Promise.all([Z.get(ve("/requisitions")),Z.get(`${Ot}/resorts`),Z.get(`${Ot}/departments`),Z.get(ve("/stores")),Z.get(ve("/items")),Z.get(ve("/vendors")),Z.get(`${Ot}/item-categories`)]);r(Array.isArray(ae.data)?ae.data:[]),a(Array.isArray(me.data)?me.data:[]),o(Array.isArray(je.data)?je.data:[]),c(Array.isArray(_e.data)?_e.data:[]),d(Array.isArray(Oe.data)?Oe.data:[]),f(Array.isArray(Ue.data)?Ue.data:[]),p(P(Array.isArray(Xe.data)?Xe.data:[]))}catch(ae){console.error("load error",ae);const me=((z=(x=ae==null?void 0:ae.response)==null?void 0:x.data)==null?void 0:z.message)||ae.message||"Failed to load data from backend.";C(me),r([]),a([]),o([]),c([]),d([]),f([]),p([])}finally{_(!1)}};m.useEffect(()=>{I(e&&e!=="all"?e:""),ie()},[e]);const A=(x,z)=>{if(!z)return"-";const ae=x.find(me=>me._id===z||me.id===z||me.name===z||me.code===z);return ae&&(ae.name||ae.code)||z},ee=x=>A(s,x),E=x=>A(i,x),re=x=>A(l,x),J=x=>A(g,x),Se=x=>A(u,x),Pe=x=>A(b,x),Ae={type:"INTERNAL",resort:"",department:"",fromStore:"",toStore:"",store:"",vendor:"",requiredBy:"",lines:[Ns()]},Le=()=>{K(null),D(Ae),C(""),H(!0)},$e=x=>{K(x._id),D({type:x.type||"INTERNAL",resort:x.resort||"",department:x.department||"",fromStore:x.fromStore||"",toStore:x.toStore||x.store||"",store:x.store||"",vendor:x.vendor||"",requiredBy:x.requestedBy?x.requestedBy.slice(0,10):"",lines:x.lines&&x.lines.length>0&&x.lines.map(z=>{var ae;return{lineId:z.lineId||`ln_${Math.floor(Math.random()*1e5)}`,itemCategory:z.itemCategory||"",item:((ae=z.item)==null?void 0:ae._id)||z.item||"",qty:z.qty||1,remark:z.remark||""}})||[Ns()]}),C(""),H(!0)},mt=x=>{K(null),D({type:x.type||"INTERNAL",resort:x.resort||"",department:x.department||"",fromStore:x.fromStore||"",toStore:x.toStore||x.store||"",store:x.store||"",vendor:x.vendor||"",requiredBy:x.requestedBy?x.requestedBy.slice(0,10):"",lines:x.lines&&x.lines.length>0&&x.lines.map(z=>{var ae;return{lineId:`dup_${Math.floor(Math.random()*1e5)}`,itemCategory:z.itemCategory||"",item:((ae=z.item)==null?void 0:ae._id)||z.item||"",qty:z.qty||1,remark:z.remark||""}})||[Ns()]}),C(""),H(!0)},S=x=>{const{name:z,value:ae}=x.target;if(z==="type"){D(me=>({...me,type:ae,department:"",fromStore:"",toStore:"",store:"",vendor:""}));return}D(me=>({...me,[z]:ae}))},pe=(x,z,ae)=>{D(me=>{const je=[...me.lines];return je[x][z]=ae,{...me,lines:je}})},te=()=>D(x=>({...x,lines:[...x.lines,Ns()]})),fe=x=>D(z=>({...z,lines:z.lines.filter((ae,me)=>me!==x)})),ye=async x=>{var ae,me;if(x&&x.preventDefault(),C(""),!ne.type)return C("Select requisition type");if(ne.type==="INTERNAL"){if(!ne.fromStore)return C("Select From Store for internal requisition");if(!ne.toStore)return C("Select To Store for internal requisition")}else{if(!ne.vendor)return C("Select vendor for vendor requisition");if(!ne.store)return C("Select store to receive goods for vendor requisition")}if(!ne.lines||ne.lines.length===0)return C("Add at least one item");for(const je of ne.lines){if(!je.item)return C("Each line must have an item selected");if(!je.qty||Number(je.qty)<=0)return C("Each line must have quantity > 0")}let z=ne.resort||void 0;if(ne.type==="INTERNAL"){const je=l.find(_e=>(_e._id||_e.id)===ne.fromStore);je!=null&&je.resort&&(z=je.resort)}else{const je=l.find(_e=>(_e._id||_e.id)===ne.store);je!=null&&je.resort&&(z=je.resort)}try{v(!0);const je={type:ne.type,resort:z,fromStore:ne.type==="INTERNAL"?ne.fromStore:void 0,toStore:ne.type==="INTERNAL"?ne.toStore:void 0,department:ne.department||void 0,vendor:ne.type==="VENDOR"&&ne.vendor||void 0,store:ne.type==="VENDOR"?ne.store||void 0:ne.toStore||void 0,requiredBy:ne.requiredBy||void 0,lines:ne.lines.map(Oe=>({itemCategory:Oe.itemCategory||void 0,item:Oe.item,qty:Number(Oe.qty),remark:Oe.remark}))};let _e;F?(_e=await Z.put(`${Ot}/requisitions/${F}`,je),r(Oe=>Oe.map(Ue=>Ue._id===F?_e.data:Ue))):(_e=await Z.post(`${Ot}/requisitions`,je),r(Oe=>[_e.data,...Oe])),H(!1),K(null)}catch(je){console.error("save requisition error",je),C(((me=(ae=je.response)==null?void 0:ae.data)==null?void 0:me.message)||je.message||"Failed to save requisition")}finally{v(!1)}},xe=async x=>{var z,ae;if(window.confirm(`Delete requisition ${x.requisitionNo||x._id}?`))try{r(me=>me.filter(je=>je._id!==x._id)),await Z.delete(`${Ot}/requisitions/${x._id}`)}catch(me){console.error("delete error",me),C(((ae=(z=me.response)==null?void 0:z.data)==null?void 0:ae.message)||"Failed to delete requisition"),ie()}},w=async x=>{var z,ae;if(x.status!=="APPROVED"&&window.confirm(`Approve requisition ${x.requisitionNo||x._id}?`))try{const me=await Z.post(`${Ot}/requisitions/${x._id}/approve`);me!=null&&me.data?r(je=>je.map(_e=>_e._id===x._id?me.data:_e)):r(je=>je.map(_e=>_e._id===x._id?{..._e,status:"APPROVED"}:_e))}catch(me){console.error("approve error",me),C(((ae=(z=me.response)==null?void 0:z.data)==null?void 0:ae.message)||"Failed to approve requisition")}},he=async x=>{var z,ae;if(window.confirm(`Put requisition ${x.requisitionNo||x._id} on hold?`))try{const me=await Z.post(`${Ot}/requisitions/${x._id}/hold`);me!=null&&me.data?r(je=>je.map(_e=>_e._id===x._id?me.data:_e)):r(je=>je.map(_e=>_e._id===x._id?{..._e,status:"ON_HOLD"}:_e))}catch(me){console.error("hold error",me),C(((ae=(z=me.response)==null?void 0:z.data)==null?void 0:ae.message)||"Failed to put requisition on hold")}},be=async x=>{var ae,me;const z=window.prompt("Enter rejection reason (optional):","");if(z!==null)try{const je=await Z.post(`${Ot}/requisitions/${x._id}/reject`,{reason:z});je!=null&&je.data?r(_e=>_e.map(Oe=>Oe._id===x._id?je.data:Oe)):r(_e=>_e.map(Oe=>Oe._id===x._id?{...Oe,status:"REJECTED"}:Oe))}catch(je){console.error("reject error",je),C(((me=(ae=je.response)==null?void 0:ae.data)==null?void 0:me.message)||"Failed to reject requisition")}},ke=x=>{const z=(x.lines||[]).map(me=>{var Ct;const je=((Ct=me.item)==null?void 0:Ct._id)||me.item,_e=u.find(pt=>(pt._id||pt.id)===je),Oe=me.expectedRate||me.rate||(_e==null?void 0:_e.indicativePrice)||0,Ue=me.item&&me.item.name||(_e?_e.name:""),Xe=me.qty||0;return{lineId:me.lineId||`ln_${Math.floor(Math.random()*1e5)}`,item:je,itemName:Ue,qty:Xe,rate:Oe,amount:Number((Xe*Oe).toFixed(2)),remark:me.remark||""}}),ae=z.reduce((me,je)=>me+Number(je.amount||0),0);U({open:!0,req:x,poNo:`PO-${Date.now()}`,poDate:new Date().toISOString().slice(0,10),items:z,subTotal:ae,taxPercent:0,taxAmount:0,total:ae})},y=async()=>{var Xe,Ct,pt;const{req:x,poNo:z,items:ae,poDate:me,taxPercent:je}=W;if(!z)return C("PO No. is required");const _e=x.vendor||void 0,Oe=x.toStore||x.store||void 0,Ue=x.resort||void 0;if(!_e)return C("Requisition has no vendor assigned (cannot create PO)");if(!Oe)return C("Requisition has no destination store (cannot create PO)");if(!ae||ae.length===0)return C("PO must have at least one item");for(const ht of ae){if(!ht.item)return C("Each PO line must have an item id");if(!ht.qty||Number(ht.qty)<=0)return C("Each PO line qty must be > 0");if(ht.rate==null||Number(ht.rate)<0)return C("Each PO line rate must be >= 0")}try{v(!0);const ht=ae.map(lt=>{const Vt=Number(lt.qty),Cr=Number(lt.rate),En=Vt*Cr;return{item:lt.item,qty:Vt,rate:Cr,amount:En,remark:lt.remark||""}}),an=ht.reduce((lt,Vt)=>lt+Vt.amount,0),ft=Number((je||0)/100*an),Zn=an+ft,lo={poNo:z,vendor:_e,resort:Ue,deliverTo:Oe,poDate:me,items:ht,subTotal:an,taxPercent:je||0,taxAmount:ft,total:Zn},zt=await Z.post(`${Ot}/requisitions/${x._id}/create-po`,lo);if((Xe=zt==null?void 0:zt.data)!=null&&Xe.requisition){r(Cr=>Cr.map(En=>En._id===x._id?zt.data.requisition:En));const lt=zt.data.po,Vt=lt&&(lt._id||lt.code)||z;U({open:!1,req:null,poNo:"",items:[]}),ue(`/super-admin/po/${Vt}`)}else if(zt!=null&&zt.data){const lt=zt.data;r(Cr=>Cr.map(En=>En._id===x._id?{...En,status:"PO_CREATED",po:{code:lt.code||z,_id:lt._id}}:En)),U({open:!1,req:null,poNo:"",items:[]});const Vt=lt._id||lt.code||z;ue(`/super-admin/po/${Vt}`)}else r(lt=>lt.map(Vt=>Vt._id===x._id?{...Vt,status:"PO_CREATED",po:{poNo:z}}:Vt)),U({open:!1,req:null,poNo:"",items:[]}),ue(`/super-admin/po/${z}`)}catch(ht){console.error("create po error",ht),C(((pt=(Ct=ht.response)==null?void 0:Ct.data)==null?void 0:pt.message)||"Failed to create PO")}finally{v(!1)}},B=x=>{if(x.po){C("This requisition already has a PO  create GRN from PO page instead.");return}const z=(x.lines||[]).map(me=>{var Xe;const je=((Xe=me.item)==null?void 0:Xe._id)||me.item,_e=u.find(Ct=>(Ct._id||Ct.id)===je),Oe=me.item&&me.item.name||(_e?_e.name:""),Ue=me.qty||0;return{lineId:me.lineId||`ln_${Math.floor(Math.random()*1e5)}`,item:je,itemName:Oe,qtyRequested:Ue,qtyReceived:Ue,remark:me.remark||""}}),ae=new Date().toISOString().slice(0,10);L({open:!0,req:x,grnNo:er(ae),receivedBy:"",receivedDate:ae,challanNo:"",billNo:"",items:z})},oe=(x,z,ae)=>{L(me=>{const je=[...me.items||[]];return je[x]={...je[x],[z]:ae},{...me,items:je}})},ge=async()=>{var Ue,Xe,Ct;const{req:x,grnNo:z,receivedBy:ae,receivedDate:me,challanNo:je,billNo:_e,items:Oe}=k;if(!z)return C("GRN No. is required");if(!je.trim())return C("Challan No is required");if(!Oe||Oe.length===0)return C("GRN must include at least one item");if(x.po)return C("PO exists for this requisition  create GRN from PO instead.");for(const pt of Oe){if(!pt.item)return C("Each GRN line must have an item");if(pt.qtyReceived==null||Number(pt.qtyReceived)<0)return C("Each GRN line received qty must be >= 0")}try{v(!0);const pt=Oe.map(ft=>({item:ft.item,qtyRequested:Number(ft.qtyRequested||0),qtyReceived:Number(ft.qtyReceived||0),remark:ft.remark||""})),ht={grnNo:z,receivedBy:ae||void 0,receivedDate:me,challanNo:je.trim(),billNo:(_e==null?void 0:_e.trim())||void 0,items:pt,store:x.toStore||x.store||void 0},an=await Z.post(`${Ot}/requisitions/${x._id}/create-grn`,ht);if((Ue=an==null?void 0:an.data)!=null&&Ue.requisition){r(lo=>lo.map(zt=>zt._id===x._id?an.data.requisition:zt));const ft=an.data.grn||an.data,Zn=(ft==null?void 0:ft._id)||(ft==null?void 0:ft.code)||z;L({open:!1,req:null,grnNo:er(q),receivedBy:"",receivedDate:q,challanNo:"",billNo:"",items:[]}),ue(`/super-admin/grn/${Zn}`)}else r(ft=>ft.map(Zn=>Zn._id===x._id?{...Zn,status:"GRN_CREATED",grn:{grnNo:z}}:Zn)),L({open:!1,req:null,grnNo:er(q),receivedBy:"",receivedDate:q,challanNo:"",billNo:"",items:[]}),ue(`/super-admin/grn/${z}`)}catch(pt){console.error("create grn error",pt),C(((Ct=(Xe=pt.response)==null?void 0:Xe.data)==null?void 0:Ct.message)||"Failed to create GRN")}finally{v(!1)}},we=x=>{if(!x)return;const z=x._id||x.code;z&&ue(`/super-admin/po/${z}`)},Te=x=>{if(!x)return;const z=x._id||x.code;z&&ue(`/super-admin/grn/${z}`)},Je=x=>{ue(`/super-admin/requisition/${x._id}`)},st=x=>{window.alert(`Transfer action for internal requisition ${x.requisitionNo||x._id} is not implemented yet.`)},Bt=x=>{const z=u.find(Ue=>Ue._id===x.item||Ue.id===x.item);if(!z)return"-";const ae=z.stockByStore||{},me=Object.keys(ae);if(!me.length)return"-";const je=me.map(Ue=>{const Xe=l.find(ht=>(ht._id||ht.id)===Ue),Ct=(Xe==null?void 0:Xe.name)||Ue,pt=Number(ae[Ue]||0);return{name:Ct,qty:pt}}),_e=je.reduce((Ue,Xe)=>Ue+Xe.qty,0),Oe=je.map(Ue=>`${Ue.name}: ${Ue.qty}`).join(`
`);return n.jsx("span",{title:Oe,style:{cursor:"help"},children:_e})},jr=t.filter(x=>{if(O!=="ALL"&&(x.status||"PENDING").toUpperCase()!==O.toUpperCase()||M!=="ALL"&&(x.type||"INTERNAL").toUpperCase()!==M.toUpperCase())return!1;if($){const z=x.resort||x.resortName||x.resortRef||x.resort;if(!z||!String(z).toLowerCase().includes(String($).toLowerCase()))return!1}if(ce){const z=x.date?new Date(x.date).setHours(0,0,0,0):null,ae=new Date(ce).setHours(0,0,0,0);if(!z||z<ae)return!1}if(le){const z=x.date?new Date(x.date).setHours(0,0,0,0):null,ae=new Date(le).setHours(0,0,0,0);if(!z||z>ae)return!1}if(X!=="ALL"){const z=!!x.po,ae=!!x.grn;if(X==="NeedsPO"&&z||X==="NeedsGRN"&&ae||X==="HasPO"&&!z||X==="HasGRN"&&!ae)return!1}if(Ce&&Ce.trim()){const z=Ce.trim().toLowerCase();if(![x.requisitionNo,x.department,x.store,x.vendor,x.resort].filter(Boolean).join(" ").toLowerCase().includes(z))return!1}return!0}),at=()=>{G("ALL"),Y("ALL"),I(""),T(""),h(""),se("ALL"),Re("")},ze={display:"inline-block",marginLeft:6,cursor:"pointer",padding:6,borderRadius:6,position:"relative"},St={...ze,opacity:.4,cursor:"not-allowed"},va=(x,z)=>{if(!z)return!0;const ae=x.itemCategory||x.category||x.itemCategoryId||x.categoryId||x.categoryName||"";if(!ae)return!1;if(String(ae)===String(z))return!0;const me=String(Pe(ae||"")).toLowerCase(),je=String(Pe(z||"")).toLowerCase();return me&&je&&me===je};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",style:{alignItems:"flex-start"},children:[n.jsxs("div",{style:{flex:1},children:[n.jsx("h2",{children:"Requisitions"}),n.jsx("p",{children:"Create and manage internal and vendor requisitions."})]}),n.jsxs("div",{style:{display:"flex",gap:8},children:[n.jsxs("button",{className:"sa-primary-button",type:"button",onClick:Le,children:[n.jsx("i",{className:"ri-add-line"})," New Requisition"]}),n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>{ie(),at()},children:"Refresh"})]})]}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:12},children:[n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Status",n.jsxs("select",{value:O,onChange:x=>G(x.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"ALL",children:"All"}),n.jsx("option",{value:"PENDING",children:"Pending"}),n.jsx("option",{value:"APPROVED",children:"Approved"}),n.jsx("option",{value:"ON_HOLD",children:"On Hold"}),n.jsx("option",{value:"REJECTED",children:"Rejected"}),n.jsx("option",{value:"PO_CREATED",children:"PO Created"}),n.jsx("option",{value:"GRN_CREATED",children:"GRN Created"})]})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Type",n.jsxs("select",{value:M,onChange:x=>Y(x.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"ALL",children:"All"}),n.jsx("option",{value:"INTERNAL",children:"Internal"}),n.jsx("option",{value:"VENDOR",children:"Vendor"})]})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Resort",n.jsxs("select",{value:$,onChange:x=>I(x.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"",children:"All Resorts"}),s.length>0?s.map(x=>n.jsx("option",{value:x._id||x.name||x.id,children:x.name},x._id||x.id)):Array.from(new Set(t.map(x=>x.resort))).map(x=>n.jsx("option",{value:x,children:x},x))," "]})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Date from",n.jsx("input",{type:"date",value:ce,onChange:x=>T(x.target.value),style:{marginLeft:6}})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Date to",n.jsx("input",{type:"date",value:le,onChange:x=>h(x.target.value),style:{marginLeft:6}})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Action",n.jsxs("select",{value:X,onChange:x=>se(x.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"ALL",children:"All"}),n.jsx("option",{value:"NeedsPO",children:"Needs PO"}),n.jsx("option",{value:"NeedsGRN",children:"Needs GRN"}),n.jsx("option",{value:"HasPO",children:"Has PO"}),n.jsx("option",{value:"HasGRN",children:"Has GRN"})]})]}),n.jsxs("label",{style:{flex:1,minWidth:220},children:["Search",n.jsx("input",{placeholder:"Requisition no / dept / store / vendor",value:Ce,onChange:x=>Re(x.target.value),style:{marginLeft:8,width:"80%"}})]}),n.jsx("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:n.jsx("button",{className:"sa-secondary-button",onClick:at,children:"Clear"})})]}),N&&n.jsx("div",{className:"sa-modal-error",children:N}),n.jsx("div",{className:"sa-card",children:R?n.jsx("div",{children:"Loading requisitions..."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{marginBottom:8,color:"#6b7280",fontSize:"0.9rem"},children:["Showing ",jr.length," of ",t.length," requisitions"]}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Requisition No."}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Resort"}),n.jsx("th",{children:"Dept / Store / Vendor"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:jr.map(x=>n.jsxs("tr",{children:[n.jsx("td",{children:x.requisitionNo||x._id}),n.jsx("td",{children:x.type||"INTERNAL"}),n.jsx("td",{children:ee(x.resort)}),n.jsx("td",{children:x.type==="VENDOR"?n.jsxs(n.Fragment,{children:[J(x.vendor),x.store?`  ${re(x.store)}`:""]}):x.fromStore||x.toStore?n.jsxs(n.Fragment,{children:[re(x.fromStore),"  ",re(x.toStore||x.store)]}):E(x.department)!=="-"?E(x.department):re(x.store)}),n.jsx("td",{children:x.status||"PENDING"}),n.jsx("td",{children:x.date?x.date.slice(0,10):"-"}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("span",{style:ze,onClick:()=>Je(x),title:"View",children:n.jsx("i",{className:"ri-eye-line"})}),n.jsx("span",{style:ze,onClick:()=>mt(x),title:"Create (Duplicate)",children:n.jsx("i",{className:"ri-file-copy-line"})}),n.jsx("span",{style:ze,onClick:()=>$e(x),title:"Edit",children:n.jsx("i",{className:"ri-edit-line"})}),n.jsx("span",{style:{...ze,background:x.status==="APPROVED"?"#052e16":"transparent"},onClick:()=>w(x),title:x.status==="APPROVED"?"Already approved":"Approve",children:n.jsx("i",{className:"ri-checkbox-circle-line"})}),n.jsx("span",{style:ze,onClick:()=>he(x),title:"Hold",children:n.jsx("i",{className:"ri-pause-line"})}),n.jsx("span",{style:ze,onClick:()=>be(x),title:"Reject",children:n.jsx("i",{className:"ri-close-circle-line"})}),x.type==="VENDOR"&&n.jsxs(n.Fragment,{children:[x.po?n.jsx("span",{style:ze,title:"View PO",onClick:()=>we(x.po),children:n.jsx("i",{className:"ri-file-paper-line"})}):x.grn?n.jsx("span",{style:St,title:"GRN already created  PO cannot be created from this requisition",children:n.jsx("i",{className:"ri-file-paper-line"})}):n.jsx("span",{style:ze,onClick:()=>ke(x),title:"Create Purchase Order (PO)",children:n.jsx("i",{className:"ri-shopping-cart-line"})}),x.grn?n.jsx("span",{style:ze,title:"View GRN",onClick:()=>Te(x.grn),children:n.jsx("i",{className:"ri-inbox-line"})}):x.po?n.jsx("span",{style:St,title:"PO created  cannot create GRN from requisition (create GRN from PO page)",children:n.jsx("i",{className:"ri-inbox-line"})}):n.jsx("span",{style:ze,onClick:()=>B(x),title:"Create GRN",children:n.jsx("i",{className:"ri-add-box-line"})})]}),x.type==="INTERNAL"&&n.jsx("span",{style:ze,onClick:()=>st(x),title:"Transfer",children:n.jsx("i",{className:"ri-arrow-left-right-line"})}),n.jsx("span",{style:ze,onClick:()=>xe(x),title:"Delete",children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},x._id))})]})]})}),V&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!j&&H(!1),children:n.jsxs("div",{className:"sa-modal",onClick:x=>x.stopPropagation(),children:[n.jsx("h3",{children:F?"Edit Requisition":"Create Requisition"}),n.jsx("p",{className:"sa-modal-sub",children:"Fill the following details to raise a requisition."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:ye,children:[n.jsxs("label",{children:["Requisition Type",n.jsxs("select",{name:"type",value:ne.type,onChange:S,required:!0,children:[n.jsx("option",{value:"INTERNAL",children:"Internal (Store  Store transfer)"}),n.jsx("option",{value:"VENDOR",children:"Vendor (Direct purchase from vendor)"})]})]}),ne.type==="INTERNAL"?n.jsxs(n.Fragment,{children:[n.jsxs("label",{children:["From Store",n.jsxs("select",{name:"fromStore",value:ne.fromStore,onChange:S,required:!0,children:[n.jsx("option",{value:"",children:"-- Select From Store --"}),Ne.map(x=>n.jsx("option",{value:x._id||x.id,children:x.name},x._id||x.id))]})]}),n.jsxs("label",{children:["To Store",n.jsxs("select",{name:"toStore",value:ne.toStore,onChange:S,required:!0,children:[n.jsx("option",{value:"",children:"-- Select To Store --"}),Ne.map(x=>n.jsx("option",{value:x._id||x.id,children:x.name},x._id||x.id))]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("label",{children:["Vendor",n.jsxs("select",{name:"vendor",value:ne.vendor,onChange:S,required:!0,children:[n.jsx("option",{value:"",children:"-- Select Vendor --"}),g.map(x=>n.jsx("option",{value:x._id||x.id,children:x.name},x._id||x.id))]})]}),n.jsxs("label",{children:["Store (to receive goods)",n.jsxs("select",{name:"store",value:ne.store,onChange:S,required:!0,children:[n.jsx("option",{value:"",children:"-- Select Store --"}),Ne.map(x=>n.jsx("option",{value:x._id||x.id,children:x.name},x._id||x.id))]})]})]}),n.jsxs("label",{children:["Required On",n.jsx("input",{type:"date",name:"requiredBy",value:ne.requiredBy,onChange:S})]}),n.jsxs("div",{style:{marginTop:10},children:[n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Current Stock"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Remark"}),n.jsx("th",{})]})}),n.jsx("tbody",{children:ne.lines.map((x,z)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("select",{value:x.itemCategory||"",onChange:ae=>pe(z,"itemCategory",ae.target.value),children:[n.jsx("option",{value:"",children:"-- Category --"}),b.map(ae=>n.jsx("option",{value:ae._id||ae.name,children:ae.name},ae._id||ae.name))]})}),n.jsx("td",{children:n.jsxs("select",{value:x.item,onChange:ae=>pe(z,"item",ae.target.value),required:!0,children:[n.jsx("option",{value:"",children:"-- Select Item --"}),u.filter(ae=>{if(!x.itemCategory)return!0;const me=x.itemCategory;return va(ae,me)}).map(ae=>n.jsx("option",{value:ae._1d||ae._id||ae.code,children:ae.name},ae._id||ae.code))]})}),n.jsx("td",{style:{textAlign:"center"},children:Bt(x)}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"1",value:x.qty,onChange:ae=>pe(z,"qty",ae.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{value:x.remark,onChange:ae=>pe(z,"remark",ae.target.value)})}),n.jsx("td",{children:ne.lines.length>1&&n.jsx("button",{type:"button",onClick:()=>fe(z),children:"Remove"})})]},x.lineId))})]}),n.jsx("button",{type:"button",onClick:te,style:{marginTop:5},children:"+ Add Line"})]}),N&&n.jsx("div",{className:"sa-modal-error",children:N}),n.jsxs("div",{className:"sa-modal-actions",children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!j&&H(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:j,children:j?"Saving...":F?"Update Requisition":"Save Requisition"})]})]})]})}),W.open&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!j&&U({open:!1,req:null,poNo:"",items:[]}),children:n.jsxs("div",{className:"sa-modal large",onClick:x=>x.stopPropagation(),style:{maxWidth:980},children:[n.jsx("h3",{children:"Create Purchase Order"}),n.jsx("p",{className:"sa-modal-sub",children:"This PO will be created from the selected requisition. Vendor and delivery store are taken from the requisition."}),n.jsxs("div",{className:"sa-modal-form",children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[n.jsxs("label",{children:["Approved Requisition (read-only)",n.jsx("input",{value:((xa=W.req)==null?void 0:xa.requisitionNo)||((Sr=W.req)==null?void 0:Sr._id)||"",readOnly:!0})]}),n.jsxs("label",{children:["PO No.",n.jsx("input",{value:W.poNo||"",onChange:x=>U(z=>({...z,poNo:x.target.value})),placeholder:"PO-YYYY-XXX"})]}),n.jsxs("label",{children:["Vendor (from requisition)",n.jsx("input",{value:J((ld=W.req)==null?void 0:ld.vendor)||"",readOnly:!0})]}),n.jsxs("label",{children:["Delivery Store (from requisition)",n.jsx("input",{value:re(((cd=W.req)==null?void 0:cd.toStore)||((dd=W.req)==null?void 0:dd.store))||"",readOnly:!0})]}),n.jsxs("label",{children:["PO Date",n.jsx("input",{type:"date",value:W.poDate||new Date().toISOString().slice(0,10),onChange:x=>U(z=>({...z,poDate:x.target.value}))})]})]}),n.jsx("div",{style:{marginTop:12},children:n.jsxs("table",{className:"sa-table",style:{width:"100%"},children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"45%"},children:"Item"}),n.jsx("th",{style:{width:"12%"},children:"Qty"}),n.jsx("th",{style:{width:"12%"},children:"Rate"}),n.jsx("th",{style:{width:"12%"},children:"Amount"}),n.jsx("th",{style:{width:"19%"},children:"Remark"})]})}),n.jsx("tbody",{children:(W.items||[]).map((x,z)=>n.jsxs("tr",{children:[n.jsx("td",{children:x.itemName||Se(x.item)||x.item}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:x.qty,readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:x.rate,onChange:ae=>{const me=Number(ae.target.value||0);U(je=>{const _e=[...je.items||[]];_e[z]={..._e[z],rate:me,amount:Number((me*Number(_e[z].qty||0)).toFixed(2))};const Oe=_e.reduce((Xe,Ct)=>Xe+Number(Ct.amount||0),0),Ue=(je.taxPercent||0)/100*Oe;return{...je,items:_e,subTotal:Oe,taxAmount:Ue,total:Oe+Ue}})}})}),n.jsx("td",{children:Number(x.amount||0).toFixed(2)}),n.jsx("td",{children:n.jsx("input",{value:x.remark||"",onChange:ae=>{const me=ae.target.value;U(je=>{const _e=[...je.items||[]];return _e[z]={..._e[z],remark:me},{...je,items:_e}})}})})]},x.lineId||z))})]})}),n.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:12,marginTop:12},children:n.jsxs("div",{style:{width:360,textAlign:"right"},children:[n.jsxs("div",{style:{marginBottom:6},children:["Subtotal: ",n.jsx("strong",{children:(W.subTotal||0).toFixed(2)})]}),n.jsxs("div",{style:{marginBottom:6},children:["Tax %"," ",n.jsx("input",{type:"number",min:"0",value:W.taxPercent||0,onChange:x=>{const z=Number(x.target.value||0);U(ae=>{var _e;const me=((_e=ae.items)==null?void 0:_e.reduce((Oe,Ue)=>Oe+Number(Ue.amount||0),0))||0,je=z/100*me;return{...ae,taxPercent:z,taxAmount:je,subTotal:me,total:me+je}})},style:{width:70,marginLeft:8}})]}),n.jsxs("div",{style:{marginBottom:6},children:["Tax Amount: ",n.jsx("strong",{children:(W.taxAmount||0).toFixed(2)})]}),n.jsxs("div",{style:{marginTop:8,fontSize:"1.05rem"},children:["Total: ",n.jsx("strong",{children:(W.total||W.subTotal||0).toFixed(2)})]})]})}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>U({open:!1,req:null,poNo:"",items:[]}),children:"Cancel"}),n.jsx("button",{type:"button",className:"sa-primary-button",onClick:y,disabled:j,children:j?"Creating...":"Create PO"})]})]})]})}),k.open&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!j&&L({open:!1,req:null,grnNo:er(q),receivedBy:"",receivedDate:q,challanNo:"",billNo:"",items:[]}),children:n.jsxs("div",{className:"sa-modal large",onClick:x=>x.stopPropagation(),style:{maxWidth:980},children:[n.jsx("h3",{children:"Create GRN"}),n.jsx("p",{className:"sa-modal-sub",children:"Record goods received against the selected requisition. Store is taken from the requisition."}),n.jsxs("div",{className:"sa-modal-form",children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[n.jsxs("label",{children:["Approved Requisition (read-only)",n.jsx("input",{value:((ud=k.req)==null?void 0:ud.requisitionNo)||((md=k.req)==null?void 0:md._id)||"",readOnly:!0})]}),n.jsxs("label",{children:["GRN No.",n.jsx("input",{value:k.grnNo||"",onChange:x=>L(z=>({...z,grnNo:x.target.value}))})]}),n.jsxs("label",{children:["Received By",n.jsx("input",{value:k.receivedBy||"",onChange:x=>L(z=>({...z,receivedBy:x.target.value}))})]}),n.jsxs("label",{children:["Received Date",n.jsx("input",{type:"date",value:k.receivedDate||new Date().toISOString().slice(0,10),onChange:x=>{const z=x.target.value;L(ae=>({...ae,receivedDate:z,grnNo:er(z)}))}})]}),n.jsxs("label",{children:["Challan No",n.jsx("span",{style:{color:"red"},children:" *"}),n.jsx("input",{value:k.challanNo||"",onChange:x=>L(z=>({...z,challanNo:x.target.value})),required:!0})]}),n.jsxs("label",{children:["Bill No (optional)",n.jsx("input",{value:k.billNo||"",onChange:x=>L(z=>({...z,billNo:x.target.value}))})]}),n.jsxs("label",{children:["Store (from requisition)",n.jsx("input",{value:re(((pd=k.req)==null?void 0:pd.toStore)||((hd=k.req)==null?void 0:hd.store))||"",readOnly:!0})]})]}),n.jsx("div",{style:{marginTop:12},children:n.jsxs("table",{className:"sa-table",style:{width:"100%"},children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"45%"},children:"Item"}),n.jsx("th",{style:{width:"12%"},children:"Requested Qty"}),n.jsx("th",{style:{width:"12%"},children:"Received Qty"}),n.jsx("th",{style:{width:"12%"},children:"Balance"}),n.jsx("th",{style:{width:"19%"},children:"Remark"})]})}),n.jsx("tbody",{children:(k.items||[]).map((x,z)=>n.jsxs("tr",{children:[n.jsx("td",{children:x.itemName||Se(x.item)||x.item}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:x.qtyRequested,readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:x.qtyReceived,onChange:ae=>{const me=Number(ae.target.value||0);oe(z,"qtyReceived",me)}})}),n.jsx("td",{children:Number((x.qtyRequested||0)-(x.qtyReceived||0)).toFixed(2)}),n.jsx("td",{children:n.jsx("input",{value:x.remark||"",onChange:ae=>oe(z,"remark",ae.target.value)})})]},x.lineId||z))})]})}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>L({open:!1,req:null,grnNo:er(q),receivedBy:"",receivedDate:q,challanNo:"",billNo:"",items:[]}),children:"Cancel"}),n.jsx("button",{type:"button",className:"sa-primary-button",onClick:ge,disabled:j,children:j?"Creating...":"Create GRN"})]})]})]})}),n.jsx("style",{children:`
        td .action-btn .tooltip { display:none; }
        td .action-btn:hover .tooltip { display:block; }
        .sa-modal.large { max-height: 85vh; overflow: auto; }
      `})]})},_j=()=>{const e=window.location.hostname==="localhost"?"http://localhost:5000":"https://resort-crm.onrender.com";return e.endsWith("/api")?e:e.replace(/\/+$/,"")+"/api"},ef=_j();console.log("ResortList API_BASE =",ef);const Is=Z.create({baseURL:ef});Is.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const kj=["Mumbai","Pune","Nagpur","Nashik","Thane","Aurangabad","Solapur","Kolhapur","Amravati","Nanded","Ahmednagar","Jalgaon","Akola","Latur","Sangli","Satara","Ratnagiri","Sindhudurg","Palghar","Raigad","Chandrapur","Gondia","Buldhana","Yavatmal","Beed","Parbhani","Osmanabad","Hingoli","Jalna","Washim","Wardha","Kalyan","Dombivli","Panvel","Lonavala","Alibaug","Mahabaleshwar","Matheran","Shirdi"],Fi=e=>String(e).padStart(2,"0"),qo=e=>{if(!e)return"";const t=new Date(e);return isNaN(t)?"":`${Fi(t.getDate())}/${Fi(t.getMonth()+1)}/${t.getFullYear()}`},tf=e=>{if(!e)return"";const t=e.split("/");if(t.length!==3)return"";const[r,s,a]=t.map(c=>c.trim());if(!r||!s||!a)return"";const i=Number(r),o=Number(s),l=Number(a);return!Number.isFinite(i)||!Number.isFinite(o)||!Number.isFinite(l)?"":`${l}-${Fi(o)}-${Fi(i)}`},Ku=e=>{const t=tf(e);if(!t)return null;const r=new Date(t);return isNaN(r)?null:r},Bo=()=>({_id:void 0,name:"",code:"",address:"",locationZone:"",ownerName:"",ownerContact:"",ownerEmail:"",ownerResdAddress:"",ownerOffAddress:"",noOfKeys:"",tieUpCategory:"",qualityCategory:"",locationCategory:"",fssaiNumber:"",fssaiStatus:"",renewalDate:"",isActive:!0}),Ua=(e="")=>{if(!e)return"";const t=e.trim().split(/\s+/).filter(Boolean);return t.length===1?t[0].slice(0,3).toUpperCase():t.map(r=>r[0]).join("").slice(0,4).toUpperCase()},Yu=["Managed","Marketed","Owned","Commissionable"],Ju=["5-Star","4-Star","3-Star","Budget"],Xu=["Mainstream","Offbeat"],Pj=()=>{const[e,t]=m.useState([]),[r,s]=m.useState(!1),[a,i]=m.useState(!1),[o,l]=m.useState(""),[c,u]=m.useState(!1),[d,g]=m.useState(!1),[f,b]=m.useState(null),[p,R]=m.useState(Bo()),[_,j]=m.useState({}),[v,N]=m.useState(""),[C,V]=m.useState(""),[H,F]=m.useState(""),[K,ne]=m.useState(""),[D,W]=m.useState(""),[U,q]=m.useState(""),[k,L]=m.useState(""),O=async()=>{var h,X,se,Ce;try{s(!0),l("");const Re=await Is.get("/resorts");console.log("resorts response:",Re.status,Re.data);const ve=(Array.isArray((h=Re.data)==null?void 0:h.resorts)?Re.data.resorts:Array.isArray(Re.data)?Re.data:[]).map(Ne=>({...Ne,_id:Ne._id||Ne.id}));t(ve)}catch(Re){console.error("loadResorts error",(X=Re.response)==null?void 0:X.status,(se=Re.response)==null?void 0:se.data),l(`Failed to load resorts from backend${(Ce=Re.response)!=null&&Ce.status?` (Status ${Re.response.status})`:""}`),t([])}finally{s(!1)}};m.useEffect(()=>{O()},[]),m.useEffect(()=>{if(!p.renewalDate)return;const h=Ku(p.renewalDate);if(!h)return;const X=new Date,se=new Date(X.toDateString()),Ce=h<se?"expired":"active";R(Re=>({...Re,fssaiStatus:Ce}))},[p.renewalDate]);const G=m.useMemo(()=>e.filter(h=>{var X,se,Ce;return!(v&&!((X=h.name)!=null&&X.toLowerCase().includes(v.toLowerCase()))||C&&!((se=h.code)!=null&&se.toLowerCase().includes(C.toLowerCase()))||H&&!((Ce=h.locationZone)!=null&&Ce.toLowerCase().includes(H.toLowerCase()))||K&&(K==="active"&&h.isActive===!1||K==="inactive"&&h.isActive!==!1)||D&&(h.tieUpCategory||"")!==D||U&&(h.qualityCategory||"")!==U||k&&(h.locationCategory||"")!==k)}),[e,v,C,H,K,D,U,k]),M=()=>{R(Bo()),j({}),l(""),u(!0)},Y=h=>{R({_id:h._id||h.id,name:h.name||"",code:h.code||Ua(h.name||""),address:h.address||"",locationZone:h.locationZone||"",ownerName:h.ownerName||"",ownerContact:h.ownerContact||"",ownerEmail:h.ownerEmail||"",ownerResdAddress:h.ownerResdAddress||"",ownerOffAddress:h.ownerOffAddress||"",noOfKeys:h.noOfKeys??"",tieUpCategory:h.tieUpCategory||"",qualityCategory:h.qualityCategory||"",locationCategory:h.locationCategory||"",fssaiNumber:h.fssaiNumber||"",fssaiStatus:h.fssaiStatus||"",renewalDate:h.renewalDate?qo(h.renewalDate):"",isActive:h.isActive!==!1}),j({}),l(""),u(!0)},$=h=>{b(h),g(!0)},I=h=>{const{name:X,value:se,type:Ce,checked:Re}=h.target;R(ue=>{const ve={...ue,[X]:Ce==="checkbox"?Re:se};if(X==="name"){const Ne=Ua(se);(!ue.code||ue.code===Ua(ue.name||""))&&(ve.code=Ne)}return ve}),j(ue=>({...ue,[X]:""}))},ce=()=>{var X,se,Ce,Re,ue;const h={};if((X=p.name)!=null&&X.trim()||(h.name="Resort name is required"),(se=p.address)!=null&&se.trim()||(h.address="Address is required"),(Ce=p.locationZone)!=null&&Ce.trim()||(h.locationZone="Location/Zone is required"),(Re=p.ownerName)!=null&&Re.trim()||(h.ownerName="Owner name is required"),(ue=p.ownerContact)!=null&&ue.trim()?(p.ownerContact||"").replace(/\D/g,"").length!==10&&(h.ownerContact="Owner contact must be 10 digits"):h.ownerContact="Owner contact is required",p.ownerEmail&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p.ownerEmail)||(h.ownerEmail="Invalid email")),p.noOfKeys!==""&&p.noOfKeys!==null){const ve=Number(p.noOfKeys);(!Number.isFinite(ve)||ve<0)&&(h.noOfKeys="Enter a valid number")}return p.renewalDate&&(Ku(p.renewalDate)||(h.renewalDate="Enter renewal date as DD/MM/YYYY")),j(h),Object.keys(h).length===0},T=async h=>{var X,se,Ce,Re;if(h.preventDefault(),l(""),!ce()){l("Please fix the highlighted errors.");return}try{i(!0);const ue={name:p.name.trim(),code:p.code||Ua(p.name||""),address:p.address,locationZone:p.locationZone,ownerName:p.ownerName,ownerContact:(p.ownerContact||"").replace(/\D/g,""),ownerEmail:p.ownerEmail||void 0,ownerResdAddress:p.ownerResdAddress||void 0,ownerOffAddress:p.ownerOffAddress||void 0,noOfKeys:p.noOfKeys?Number(p.noOfKeys):void 0,tieUpCategory:p.tieUpCategory||void 0,qualityCategory:p.qualityCategory||void 0,locationCategory:p.locationCategory||void 0,fssaiNumber:p.fssaiNumber||void 0,fssaiStatus:p.fssaiStatus||void 0,renewalDate:p.renewalDate?tf(p.renewalDate):void 0,isActive:!!p.isActive};if(p._id){const ve=await Is.put(`/resorts/${p._id}`,ue);console.log("update resort res:",ve.data)}else{const ve=await Is.post("/resorts",ue);console.log("create resort res:",ve.data)}await O(),u(!1),R(Bo()),j({})}catch(ue){console.error("save resort error",(X=ue.response)==null?void 0:X.status,(se=ue.response)==null?void 0:se.data,ue.message),l(((Re=(Ce=ue==null?void 0:ue.response)==null?void 0:Ce.data)==null?void 0:Re.message)||"Failed to save resort")}finally{i(!1)}},le=async h=>{var X,se;if(window.confirm(`Delete resort ${h.name||h._id}?`))try{t(Ce=>Ce.filter(Re=>(Re._id||Re.id)!==(h._id||h.id)));try{await Is.delete(`/resorts/${h._id||h.id}`)}catch(Ce){console.error("delete resort error",(X=Ce.response)==null?void 0:X.status,(se=Ce.response)==null?void 0:se.data),await O()}}catch(Ce){console.error("delete resort error",Ce),l("Failed to delete resort"),await O()}};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Resorts"}),n.jsx("p",{children:"All resorts load from backend only. Create/Edit/Delete will persist to database."})]}),n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[n.jsx("button",{className:"sa-secondary-button",onClick:()=>{},children:"Download"}),n.jsxs("button",{className:"sa-primary-button",type:"button",onClick:M,children:[n.jsx("i",{className:"ri-add-line"})," New Resort"]})]})]}),o&&n.jsx("div",{style:{fontSize:"0.85rem",marginBottom:8,color:"#b91c1c",background:"rgba(250,204,210,0.3)",padding:8,borderRadius:8},children:o}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap",marginBottom:12},children:[n.jsxs("label",{children:["Name",n.jsx("input",{value:v,onChange:h=>N(h.target.value),placeholder:"Search name",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Code",n.jsx("input",{value:C,onChange:h=>V(h.target.value),placeholder:"Code",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Location/Zone",n.jsx("input",{list:"maha-cities",value:H,onChange:h=>F(h.target.value),placeholder:"Type or select city/place",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Status",n.jsxs("select",{value:K,onChange:h=>ne(h.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"})]})]}),n.jsxs("label",{children:["Tie-up Category",n.jsxs("select",{value:D,onChange:h=>W(h.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"--"}),Yu.map(h=>n.jsx("option",{value:h,children:h},h))]})]}),n.jsxs("label",{children:["Quality Category",n.jsxs("select",{value:U,onChange:h=>q(h.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"--"}),Ju.map(h=>n.jsx("option",{value:h,children:h},h))]})]}),n.jsxs("label",{children:["Location Category",n.jsxs("select",{value:k,onChange:h=>L(h.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"--"}),Xu.map(h=>n.jsx("option",{value:h,children:h},h))]})]}),n.jsxs("div",{style:{marginLeft:"auto",color:"#6b7280"},children:["Showing ",G.length," of ",e.length]})]}),n.jsx("div",{className:"sa-card",children:r?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Loading resorts..."}):G.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"No resorts found. Add one to get started."}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Location/Zone"}),n.jsx("th",{children:"Owner"}),n.jsx("th",{children:"No of Keys"}),n.jsx("th",{children:"Tie-up"}),n.jsx("th",{children:"Quality"}),n.jsx("th",{children:"Loc Category"}),n.jsx("th",{children:"FSSAI"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:G.map(h=>{const X=h.renewalDate?qo(h.renewalDate):"-";return n.jsxs("tr",{children:[n.jsx("td",{children:h.code}),n.jsx("td",{children:h.name}),n.jsx("td",{children:h.locationZone}),n.jsxs("td",{children:[n.jsx("div",{style:{fontWeight:500},children:h.ownerName}),n.jsx("div",{style:{fontSize:12,color:"#6b7280"},children:h.ownerContact})]}),n.jsx("td",{children:h.noOfKeys??"-"}),n.jsx("td",{children:h.tieUpCategory??"-"}),n.jsx("td",{children:h.qualityCategory??"-"}),n.jsx("td",{children:h.locationCategory??"-"}),n.jsxs("td",{children:[n.jsx("div",{children:h.fssaiNumber||"-"}),n.jsx("div",{style:{fontSize:11,color:"#6b7280"},children:h.fssaiStatus?h.fssaiStatus.toUpperCase():"-"}),n.jsxs("div",{style:{fontSize:11,color:"#6b7280"},children:["Renewal: ",X]})]}),n.jsx("td",{children:n.jsx("span",{className:`sa-badge ${h.isActive===!1?"sa-badge-muted":"sa-badge-success"}`,children:h.isActive===!1?"Inactive":"Active"})}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("button",{title:"View",className:"sa-icon-button",onClick:()=>$(h),style:{marginRight:6},children:n.jsx("i",{className:"ri-eye-line"})}),n.jsx("button",{title:"Edit",className:"sa-icon-button",onClick:()=>Y(h),style:{marginRight:6},children:n.jsx("i",{className:"ri-edit-line"})}),n.jsx("button",{title:"Delete",className:"sa-icon-button",onClick:()=>le(h),children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},h._id||h.id||h.code)})})]})}),c&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!a&&u(!1),children:n.jsxs("div",{className:"sa-modal",onClick:h=>h.stopPropagation(),style:{maxHeight:"85vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[n.jsx("h3",{style:{marginBottom:6},children:p._id?"Edit Resort":"New Resort"}),n.jsx("p",{className:"sa-modal-sub",style:{marginBottom:10},children:"Add or update a property which will be available for transactions."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:T,style:{overflow:"auto",paddingRight:8},children:[n.jsxs("label",{children:["Resort Name *",n.jsx("input",{name:"name",value:p.name,onChange:I,placeholder:"Resort Name",required:!0}),_.name&&n.jsx("div",{className:"field-error",children:_.name})]}),n.jsxs("label",{children:["Code (auto)",n.jsx("input",{name:"code",value:p.code,onChange:()=>{},placeholder:"Auto-generated code",readOnly:!0}),n.jsx("small",{style:{display:"block",color:"#6b7280"},children:"Auto-generated from name; backend will store this."})]}),n.jsxs("label",{children:["Address *",n.jsx("textarea",{name:"address",value:p.address,onChange:I,placeholder:"Street, area, pin",required:!0}),_.address&&n.jsx("div",{className:"field-error",children:_.address})]}),n.jsxs("label",{children:["Location / Zone *",n.jsx("input",{list:"maha-cities",name:"locationZone",value:p.locationZone,onChange:I,placeholder:"e.g. Mumbai / Pune / Lonavala",required:!0}),_.locationZone&&n.jsx("div",{className:"field-error",children:_.locationZone}),n.jsx("small",{style:{display:"block",color:"#6b7280"},children:"Select from Maharashtra cities or type any other place."})]}),n.jsxs("label",{children:["Owner Name *",n.jsx("input",{name:"ownerName",value:p.ownerName,onChange:I,placeholder:"Owner full name",required:!0}),_.ownerName&&n.jsx("div",{className:"field-error",children:_.ownerName})]}),n.jsxs("label",{children:["Owner Contact *",n.jsx("input",{name:"ownerContact",value:p.ownerContact,onChange:I,placeholder:"+91-XXXXXXXXXX",required:!0}),_.ownerContact&&n.jsx("div",{className:"field-error",children:_.ownerContact})]}),n.jsxs("label",{children:["Owner Email",n.jsx("input",{type:"email",name:"ownerEmail",value:p.ownerEmail,onChange:I,placeholder:"owner@example.com"}),_.ownerEmail&&n.jsx("div",{className:"field-error",children:_.ownerEmail})]}),n.jsxs("label",{children:["Owner Resd. Address",n.jsx("input",{name:"ownerResdAddress",value:p.ownerResdAddress,onChange:I,placeholder:"Residential address"})]}),n.jsxs("label",{children:["Owner Off. Address",n.jsx("input",{name:"ownerOffAddress",value:p.ownerOffAddress,onChange:I,placeholder:"Office address"})]}),n.jsxs("label",{children:["No of Keys",n.jsx("input",{type:"number",name:"noOfKeys",min:"0",value:p.noOfKeys,onChange:I,placeholder:"e.g. 20"}),_.noOfKeys&&n.jsx("div",{className:"field-error",children:_.noOfKeys})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:[n.jsxs("label",{children:["Tie-up Category",n.jsxs("select",{name:"tieUpCategory",value:p.tieUpCategory,onChange:I,children:[n.jsx("option",{value:"",children:"--"}),Yu.map(h=>n.jsx("option",{value:h,children:h},h))]})]}),n.jsxs("label",{children:["Quality Category",n.jsxs("select",{name:"qualityCategory",value:p.qualityCategory,onChange:I,children:[n.jsx("option",{value:"",children:"--"}),Ju.map(h=>n.jsx("option",{value:h,children:h},h))]})]}),n.jsxs("label",{children:["Location Category",n.jsxs("select",{name:"locationCategory",value:p.locationCategory,onChange:I,children:[n.jsx("option",{value:"",children:"--"}),Xu.map(h=>n.jsx("option",{value:h,children:h},h))]})]})]}),n.jsxs("label",{children:["FSSAI License Number",n.jsx("input",{name:"fssaiNumber",value:p.fssaiNumber,onChange:I,placeholder:"FSSAI / license no"})]}),n.jsxs("label",{children:["FSSAI License Status",n.jsxs("select",{name:"fssaiStatus",value:p.fssaiStatus,onChange:I,children:[n.jsx("option",{value:"",children:"Select status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"expired",children:"Expired"}),n.jsx("option",{value:"pending",children:"Pending"})]}),n.jsx("small",{style:{display:"block",color:"#6b7280"},children:"Auto-updates from Renewal Date but you can override."})]}),n.jsxs("label",{children:["Renewal Date (dd/mm/yyyy)",n.jsx("input",{name:"renewalDate",value:p.renewalDate,onChange:I,placeholder:"dd/mm/yyyy"}),_.renewalDate&&n.jsx("div",{className:"field-error",children:_.renewalDate}),n.jsx("small",{style:{display:"block",color:"#6b7280"},children:"Enter date as DD/MM/YYYY. Status will auto-update based on this date."})]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",name:"isActive",checked:!!p.isActive,onChange:I}),"Active"]}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!a&&u(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:a,children:a?"Saving...":p._id?"Update Resort":"Save Resort"})]})]})]})}),d&&f&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>g(!1),children:n.jsxs("div",{className:"sa-modal",onClick:h=>h.stopPropagation(),style:{maxWidth:800},children:[n.jsxs("h3",{children:[f.name," ",n.jsxs("small",{style:{color:"#6b7280"},children:["(",f.code,")"]})]}),n.jsx("p",{className:"sa-modal-sub",children:"Full resort details (read-only)"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:10},children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Address"}),n.jsx("div",{style:{color:"#374151"},children:f.address||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Location / Zone"}),n.jsx("div",{style:{color:"#374151"},children:f.locationZone||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Owner Name"}),n.jsx("div",{style:{color:"#374151"},children:f.ownerName||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Owner Contact"}),n.jsx("div",{style:{color:"#374151"},children:f.ownerContact||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Owner Email"}),n.jsx("div",{style:{color:"#374151"},children:f.ownerEmail||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"No of Keys"}),n.jsx("div",{style:{color:"#374151"},children:f.noOfKeys??"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Tie-up Category"}),n.jsx("div",{style:{color:"#374151"},children:f.tieUpCategory||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Quality Category"}),n.jsx("div",{style:{color:"#374151"},children:f.qualityCategory||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"FSSAI Number"}),n.jsx("div",{style:{color:"#374151"},children:f.fssaiNumber||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"FSSAI Status"}),n.jsx("div",{style:{color:"#374151"},children:f.fssaiStatus||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Renewal Date"}),n.jsx("div",{style:{color:"#374151"},children:f.renewalDate?qo(f.renewalDate):"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Residential Address"}),n.jsx("div",{style:{color:"#374151"},children:f.ownerResdAddress||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Office Address"}),n.jsx("div",{style:{color:"#374151"},children:f.ownerOffAddress||"-"})]})]}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>g(!1),children:"Close"}),n.jsx("button",{type:"button",className:"sa-primary-button",onClick:()=>{g(!1),Y(f)},children:"Edit"})]})]})}),n.jsx("datalist",{id:"maha-cities",children:kj.map(h=>n.jsx("option",{value:h},h))})]})},Aj=()=>{const e=window.location.hostname==="localhost"?"http://localhost:5000":"https://resort-crm.onrender.com";return e.endsWith("/api")?e:e.replace(/\/+$/,"")+"/api"},nf=Aj();console.log("DepartmentList API_BASE =",nf);const Ls=Z.create({baseURL:nf});Ls.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const zo=()=>({_id:void 0,name:"",code:""}),wr=(e="")=>{const t=e.trim().toUpperCase().replace(/[^A-Z0-9\s]/g,"").split(/\s+/).filter(Boolean).slice(0,3).map(a=>a.length<=4?a:a.slice(0,4)).join("_"),r=Math.floor(Math.random()*900+100);return((t||"DEPT")+"_"+r).slice(0,20)},Ij=()=>{const[e,t]=m.useState([]),[r,s]=m.useState(!1),[a,i]=m.useState(!1),[o,l]=m.useState(""),[c,u]=m.useState(!1),[d,g]=m.useState(zo()),[f,b]=m.useState(!1),[p,R]=m.useState(null),[_,j]=m.useState(""),[v,N]=m.useState(""),C=async()=>{var U,q,k,L;try{s(!0),l("");const O=await Ls.get("/departments");console.log("departments response:",O.status,O.data);const M=(Array.isArray((U=O.data)==null?void 0:U.departments)?O.data.departments:Array.isArray(O.data)?O.data:[]).map(Y=>({_id:Y._id||Y.id,name:Y.name||"",code:Y.code||wr(Y.name||"")}));t(M)}catch(O){console.error("load error",(q=O.response)==null?void 0:q.status,(k=O.response)==null?void 0:k.data,O.message),l(`Failed to load departments from backend.${(L=O.response)!=null&&L.status?` (Status ${O.response.status})`:""}`),t([])}finally{s(!1)}};m.useEffect(()=>{C()},[]);const V=m.useMemo(()=>e.filter(U=>{var q,k;return!(_&&!((q=U.name)!=null&&q.toLowerCase().includes(_.toLowerCase()))||v&&!((k=U.code)!=null&&k.toLowerCase().includes(v.toLowerCase())))}),[e,_,v]),H=()=>{g({...zo(),code:wr("")}),l(""),u(!0)},F=U=>{g({_id:U._id||U.id,name:U.name||"",code:U.code||wr(U.name||"")}),l(""),u(!0)},K=U=>{const{name:q,value:k}=U.target;g(q==="name"?L=>({...L,name:k,code:wr(k)}):L=>({...L,[q]:k}))},ne=async U=>{var q,k,L,O,G,M;if(U.preventDefault(),l(""),!d.name||!d.name.trim())return l("Department name is required");try{i(!0);const Y={name:d.name.trim(),code:wr(d.name)};if(d._id)try{const $=await Ls.put(`/departments/${d._id}`,Y);console.log("update department res:",$.data)}catch($){throw console.error("update error",(q=$.response)==null?void 0:q.status,(k=$.response)==null?void 0:k.data,$.message),$}else try{const $=await Ls.post("/departments",Y);console.log("create department res:",$.data)}catch($){throw console.error("create error",(L=$.response)==null?void 0:L.status,(O=$.response)==null?void 0:O.data,$.message),$}await C(),u(!1),g(zo())}catch(Y){console.error("save error",(G=Y.response)==null?void 0:G.status,(M=Y.response)==null?void 0:M.data,Y.message),l("Failed to save department")}finally{i(!1)}},D=async U=>{var q,k,L,O;if(window.confirm(`Delete department ${U.name||U._id}?`))try{t(G=>G.filter(M=>(M._id||M.id)!==(U._id||U.id)));try{await Ls.delete(`/departments/${U._id||U.id}`)}catch(G){console.error("delete error",(q=G.response)==null?void 0:q.status,(k=G.response)==null?void 0:k.data,G.message),await C()}}catch(G){console.error("delete error",(L=G.response)==null?void 0:L.status,(O=G.response)==null?void 0:O.data,G.message),l("Failed to delete department"),await C()}},W=U=>{R(U),b(!0)};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Departments"}),n.jsx("p",{children:"Departments are loaded from backend only."})]}),n.jsx("div",{style:{display:"flex",gap:8,alignItems:"center"},children:n.jsxs("button",{className:"sa-primary-button",type:"button",onClick:H,children:[n.jsx("i",{className:"ri-add-line"})," New Department"]})})]}),o&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:o}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[n.jsxs("label",{children:["Department Name",n.jsx("input",{value:_,onChange:U=>j(U.target.value),placeholder:"Search name...",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Code",n.jsx("input",{value:v,onChange:U=>N(U.target.value),placeholder:"Code...",style:{marginLeft:8}})]}),n.jsxs("div",{style:{marginLeft:"auto",color:"#9ca3af"},children:["Showing ",V.length," / ",e.length]})]}),n.jsx("div",{className:"sa-card",children:r?n.jsx("div",{children:"Loading departments..."}):V.length===0?n.jsx("div",{children:"No departments found. Add one to get started."}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Department"}),n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:V.map(U=>n.jsxs("tr",{children:[n.jsx("td",{children:U.name}),n.jsx("td",{children:U.code}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("button",{className:"sa-secondary-button",onClick:()=>W(U),title:"View",style:{marginRight:6},children:n.jsx("i",{className:"ri-eye-line"})}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>F(U),title:"Edit",style:{marginRight:6},children:n.jsx("i",{className:"ri-edit-line"})}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>D(U),title:"Delete",children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},U._id||U.id||U.name))})]})}),c&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!a&&u(!1),children:n.jsxs("div",{className:"sa-modal",onClick:U=>U.stopPropagation(),style:{maxHeight:"85vh",display:"flex",flexDirection:"column"},children:[n.jsx("h3",{style:{marginBottom:6},children:d._id?"Edit Department":"New Department"}),n.jsx("p",{className:"sa-modal-sub",children:"Enter department name; code is auto-generated."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:ne,style:{overflow:"auto",paddingRight:8},children:[n.jsxs("label",{children:["Department Name *",n.jsx("input",{name:"name",value:d.name,onChange:K,placeholder:"e.g. Food & Beverage",required:!0})]}),n.jsxs("label",{children:["Code (auto)",n.jsx("input",{name:"code",value:d.code||wr(d.name),onChange:()=>{},placeholder:"Auto-generated",disabled:!0,style:{background:"#f3f4f6"}})]}),o&&n.jsx("div",{className:"sa-modal-error",style:{marginTop:8},children:o}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!a&&u(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:a,children:a?"Saving...":d._id?"Update Department":"Save Department"})]})]})]})}),f&&p&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>b(!1),children:n.jsxs("div",{className:"sa-modal",onClick:U=>U.stopPropagation(),style:{maxWidth:600},children:[n.jsx("h3",{children:p.name}),n.jsx("p",{className:"sa-modal-sub",children:"Department details (read-only)"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:10},children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Name"}),n.jsx("div",{style:{color:"#374151"},children:p.name||"-"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Code"}),n.jsx("div",{style:{color:"#374151"},children:p.code||"-"})]})]}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>b(!1),children:"Close"}),n.jsx("button",{type:"button",className:"sa-primary-button",onClick:()=>{b(!1),F(p)},children:"Edit"})]})]})})]})},Rr="http://localhost:5000/api",Vo=()=>({_id:void 0,resort:"",name:"",code:""}),Lj=()=>{const{selectedResort:e}=wj(),[t,r]=m.useState([]),[s,a]=m.useState([]),[i,o]=m.useState(!1),[l,c]=m.useState(!1),[u,d]=m.useState(""),[g,f]=m.useState(!1),[b,p]=m.useState(Vo()),[R,_]=m.useState(""),[j,v]=m.useState(""),[N,C]=m.useState(""),[V,H]=m.useState(!1),[F,K]=m.useState(""),ne=T=>T?Array.isArray(T)?T:Array.isArray(T.data)?T.data:Array.isArray(T.resorts)?T.resorts:[]:[],D=T=>T?Array.isArray(T)?T:Array.isArray(T.data)?T.data:Array.isArray(T.stores)?T.stores:[]:[],W=T=>{if(!T)return null;const le=String(T).trim().toLowerCase(),h=s.find(X=>(X.name||"").trim().toLowerCase()===le);return h?h._id||h.id:null},U=async()=>{o(!0),d("");try{let T=[],le=[];try{const h=await Z.get(`${Rr}/stores`);console.log("STORES API DATA:",h.data),T=D(h.data)}catch(h){console.error("Error loading stores:",h),d(X=>X||"Failed to load stores from server")}try{const h=await Z.get(`${Rr}/resorts`);console.log("RESORTS API DATA:",h.data),le=ne(h.data)}catch(h){console.error("Error loading resorts:",h),d(X=>X||"Failed to load resorts from server")}r(T),a(le)}finally{o(!1)}};m.useEffect(()=>{U()},[]);const q=T=>{if(!T)return"-";if(typeof T=="object"){if(T.name)return T.name;const h=T._id||T.id,X=s.find(se=>(se._id||se.id)===h);return X?X.name:h||"-"}const le=s.find(h=>(h._id||h.id)===T);return le?le.name:T},k=m.useMemo(()=>t.filter(T=>{var h,X;const le=typeof T.resort=="object"?T.resort._id||T.resort.id:T.resort;return!(e&&le!==e||R&&le!==R||j&&!((h=T.name)!=null&&h.toLowerCase().includes(j.toLowerCase()))||N&&!((X=T.code)!=null&&X.toLowerCase().includes(N.toLowerCase())))}),[t,R,j,N,e]),L=()=>{p(Vo()),d(""),e&&p(T=>({...T,resort:e})),f(!0)},O=T=>{const le=typeof T.resort=="object"?T.resort._id||T.resort.id:T.resort||T.resortId||"";p({_id:T._id||T.id,resort:le,name:T.name||"",code:T.code||""}),d(""),f(!0)},G=T=>{const{name:le,value:h}=T.target;p(X=>({...X,[le]:h}))},M=async T=>{var le,h;if(T.preventDefault(),d(""),!b.resort||!b.name){d("Resort and Store name required");return}try{c(!0);const X={resort:b.resort,name:b.name,code:b.code||void 0};if(b._id){const se=await Z.put(`${Rr}/stores/${b._id}`,X).catch(()=>null);se!=null&&se.data?r(Ce=>Ce.map(Re=>Re._id===b._id||Re.id===b._id?se.data:Re)):r(Ce=>Ce.map(Re=>Re._id===b._id||Re.id===b._id?{...Re,...X}:Re))}else{const se=await Z.post(`${Rr}/stores`,X).catch(()=>null),Ce=(se==null?void 0:se.data)||{...X,_id:`local_${Date.now()}`};r(Re=>[Ce,...Re])}f(!1),p(Vo())}catch(X){console.error("save store error",X),d(((h=(le=X.response)==null?void 0:le.data)==null?void 0:h.message)||"Failed to save store")}finally{c(!1)}},Y=async T=>{if(window.confirm(`Delete store ${T.name||T._id}?`))try{r(le=>le.filter(h=>(h._id||h.id)!==(T._id||T.id))),await Z.delete(`${Rr}/stores/${T._id||T.id}`).catch(()=>null)}catch(le){console.error("delete error",le),d("Failed to delete store"),await U()}},$=T=>{if(K(""),!T)return;H(!0);const le=new FileReader;le.onload=async h=>{const se=h.target.result.split(/\r?\n/).map(P=>P.trim()).filter(Boolean);if(se.length<=1){K("CSV has no data"),H(!1);return}const Ce=se[0].split(",").map(P=>P.trim().toLowerCase()),Re=["name","resort"];for(const P of Re)if(!Ce.includes(P)){K(`CSV must include columns: ${Re.join(",")}`),H(!1);return}const ue=[];for(let P=1;P<se.length;P++){const ie=se[P].split(",").map(ee=>ee.trim());if(ie.length===0)continue;const A={};for(let ee=0;ee<Ce.length;ee++)A[Ce[ee]]=ie[ee]??"";ue.push(A)}if(!ue.length){K("No rows found in CSV"),H(!1);return}const ve=ue.map(P=>{const ie=P.resort??"",A=W(ie);return{...P,resolvedResort:A||ie}}),Ne=ve.map(P=>({_id:`local_${Date.now()}_${Math.floor(Math.random()*1e4)}`,resort:P.resolvedResort,name:P.name,code:P.code||""}));r(P=>[...Ne,...P]);try{for(const P of ve){const ie={resort:P.resolvedResort,name:P.name,code:P.code||void 0};try{await Z.post(`${Rr}/stores`,ie).catch(()=>null)}catch(A){console.warn("store csv create failed for",P,A)}}}catch(P){console.error("CSV create sequence failed",P)}finally{H(!1)}},le.onerror=()=>{K("Failed to read file"),H(!1)},le.readAsText(T)},I=T=>{const le=["resort","name","code"],X=[le.join(",")].concat(T.map(ue=>le.map(ve=>{let Ne=ue[ve];ve==="resort"&&(Ne=q(ue.resort));const P=String(Ne??"");return P.includes(",")||P.includes(`
`)?`"${P.replace(/"/g,'""')}"`:P}).join(","))).join(`
`),se=new Blob([X],{type:"text/csv"}),Ce=URL.createObjectURL(se),Re=document.createElement("a");Re.href=Ce,Re.download=`stores-export-${Date.now()}.csv`,Re.click(),URL.revokeObjectURL(Ce)},ce=m.useMemo(()=>s.map(T=>({id:T._id||T.id,name:T.name})),[s]);return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Stores"}),n.jsx("p",{children:"Define physical stores for each resort to track inventory."})]}),n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[n.jsx("input",{type:"file",accept:".csv,text/csv",onChange:T=>{var h;const le=(h=T.target.files)==null?void 0:h[0];$(le),T.target.value=""},title:"Upload CSV (columns: resort,name,code)  resort should be resort NAME"}),n.jsx("span",{style:{marginLeft:6},children:V?"Uploading...":"Upload CSV"})]}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>I(k),children:"Export CSV"}),n.jsxs("button",{className:"sa-primary-button",type:"button",onClick:L,children:[n.jsx("i",{className:"ri-add-line"})," New Store"]})]})]}),u&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:u}),F&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:F}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[n.jsxs("label",{children:["Resort",n.jsxs("select",{value:R,onChange:T=>_(T.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),ce.map(T=>n.jsx("option",{value:T.id,children:T.name},T.id))]})]}),n.jsxs("label",{children:["Store Name",n.jsx("input",{value:j,onChange:T=>v(T.target.value),placeholder:"Search name...",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Code",n.jsx("input",{value:N,onChange:T=>C(T.target.value),placeholder:"Code...",style:{marginLeft:8}})]}),n.jsxs("div",{style:{marginLeft:"auto",color:"#9ca3af"},children:["Showing ",k.length," / ",t.length]})]}),n.jsx("div",{className:"sa-card",children:i?n.jsx("div",{children:"Loading stores..."}):k.length===0?n.jsx("div",{children:"No stores found. Try clearing filters or add a new store."}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Resort"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:k.map(T=>n.jsxs("tr",{children:[n.jsx("td",{children:q(T.resort)}),n.jsx("td",{children:T.name}),n.jsx("td",{children:T.code}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("button",{className:"sa-secondary-button",onClick:()=>O(T),title:"Edit",children:n.jsx("i",{className:"ri-edit-line"})}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>{var le;(le=navigator.clipboard)==null||le.writeText(JSON.stringify(T))},title:"Copy JSON",children:n.jsx("i",{className:"ri-file-copy-line"})}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>Y(T),title:"Delete",children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},T._id||T.id))})]})}),g&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!l&&f(!1),children:n.jsxs("div",{className:"sa-modal",onClick:T=>T.stopPropagation(),children:[n.jsx("h3",{children:b._id?"Edit Store":"New Store"}),n.jsx("p",{className:"sa-modal-sub",children:"Add a physical store for a resort (Main Store / Bar Store / HK Store)."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:M,children:[n.jsxs("label",{children:["Resort",n.jsxs("select",{name:"resort",value:b.resort,onChange:G,required:!0,children:[n.jsx("option",{value:"",children:"Select resort"}),ce.map(T=>n.jsx("option",{value:T.id,children:T.name},T.id))]})]}),n.jsxs("label",{children:["Store Name",n.jsx("input",{name:"name",value:b.name,onChange:G,placeholder:"Main Store / Bar Store...",required:!0})]}),n.jsxs("label",{children:["Code",n.jsx("input",{name:"code",value:b.code,onChange:G,placeholder:"MAIN / BAR / HK"})]}),u&&n.jsx("div",{className:"sa-modal-error",children:u}),n.jsxs("div",{className:"sa-modal-actions",children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!l&&f(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:l,children:l?"Saving...":b._id?"Update Store":"Save Store"})]})]})]})})]})},tr="http://localhost:5000",Qo=()=>({_id:void 0,code:"",name:"",vendorType:"",categories:[],resorts:[],contactPerson:"",phone:"",whatsapp:"",alternatePhone:"",email:"",addressLine1:"",addressLine2:"",city:"",state:"",pincode:"",country:"",gstNumber:"",panNumber:"",fssaiNumber:"",paymentTerms:"",creditLimit:"",paymentMode:"",bankName:"",accountNumber:"",ifsc:"",branch:"",deliveryTime:"",minOrderQty:"",status:"Active",notes:""}),Tj=()=>{const[e,t]=m.useState([]),[r,s]=m.useState(!1),[a,i]=m.useState(!1),[o,l]=m.useState(""),[c,u]=m.useState(!1),[d,g]=m.useState(Qo()),[f,b]=m.useState({}),[p,R]=m.useState([]),[_,j]=m.useState([]),[v,N]=m.useState(""),[C,V]=m.useState(""),[H,F]=m.useState(""),[K,ne]=m.useState(""),[D,W]=m.useState(""),[U,q]=m.useState(""),[k,L]=m.useState(""),[O,G]=m.useState(!1),M=async()=>{var S,pe;try{s(!0),l("");const te=await Z.get(`${tr}/api/vendors`),ye=(Array.isArray(te.data)?te.data:[]).map(xe=>({...xe,categories:xe.categories&&Array.isArray(xe.categories)?xe.categories:xe.category?[xe.category]:[],resorts:xe.resorts&&Array.isArray(xe.resorts)?xe.resorts:xe.resort?[xe.resort]:[]}));t(ye)}catch(te){console.error("load vendors error",(S=te==null?void 0:te.response)==null?void 0:S.status,(pe=te==null?void 0:te.response)==null?void 0:pe.data),l("Failed to load vendors"),t([])}finally{s(!1)}},Y=async()=>{try{const S=await Z.get(`${tr}/api/item-categories`).catch(()=>({data:[]})),te=(Array.isArray(S.data)?S.data:[]).map(fe=>typeof fe=="string"?fe:fe.name||fe.code||JSON.stringify(fe));R(te)}catch(S){console.warn("Failed to load categories",S),R([])}},$=async()=>{try{const S=await Z.get(`${tr}/api/resorts`).catch(()=>({data:[]}));let pe=[];Array.isArray(S.data)?pe=S.data:S.data&&Array.isArray(S.data.resorts)&&(pe=S.data.resorts);const te=pe.map(ye=>({id:ye._id||ye.id||ye.code||ye.name,name:ye.name||ye.code||ye._id})),fe=[{id:"resort_a",name:"Demo Resort A"},{id:"resort_b",name:"Demo Resort B"}];j(te.length?te:fe)}catch(S){console.warn("Failed to load resorts",S),j([{id:"resort_a",name:"Demo Resort A"},{id:"resort_b",name:"Demo Resort B"}])}};m.useEffect(()=>{M(),Y(),$()},[]);const I=S=>String(S||"").replace(/[^A-Za-z ]+/g,""),ce=S=>String(S||"").replace(/\D+/g,""),T=S=>String(S||"").replace(/[^0-9.]/g,""),le=S=>S==null||String(S).trim()==="",h={name:/^[A-Za-z ]+$/,phone:/^\d{10}$/,whatsapp:/^\d{10}$/,alternatePhone:/^\d{10}$/,email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,gst:/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/,pan:/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,ifsc:/^[A-Z]{4}0[A-Z0-9]{6}$/,pincode:/^[1-9][0-9]{5}$/,accountNumber:/^[0-9]{6,20}$/,integer:/^\d+$/,decimal:/^\d+(\.\d+)?$/,codeAllowed:/^[A-Z0-9_]+$/},X=S=>{if(!S)return`VEND_${String(Date.now()).slice(-6)}`;const fe=S.replace(/[^A-Za-z0-9 ]/g," ").split(/\s+/).filter(Boolean).slice(0,4).map(w=>w.slice(0,3).toUpperCase()).join("").slice(0,12)||"VEND";let ye=0;for(let w=0;w<S.length;w++)ye=ye*31+S.charCodeAt(w)&4294967295;const xe=Math.abs(ye).toString().slice(-4).padStart(4,"0");return`${fe}_${xe}`},se=S=>{if(!S)return S;const pe=S.toUpperCase(),te=new Set(e.map(fe=>(fe.code||"").toUpperCase()));if(!te.has(pe))return pe;for(let fe=1;fe<1e3;fe++){const ye=`${pe}_${fe}`;if(!te.has(ye))return ye}return`${pe}_${Date.now().toString().slice(-4)}`},Ce={code:S=>{if(!S)return"Vendor code is required";if(!h.codeAllowed.test(String(S).toUpperCase()))return"Code may contain only A-Z,0-9 and underscore"},name:S=>{if(!S)return"Vendor name is required";if(!h.name.test(String(S).trim()))return"Name must contain only letters and spaces"},phone:S=>{if(!le(S)&&!h.phone.test(String(S).trim()))return"Phone must be exactly 10 digits"},whatsapp:S=>{if(!le(S)&&!h.whatsapp.test(String(S).trim()))return"WhatsApp must be exactly 10 digits"},alternatePhone:S=>{if(!le(S)&&!h.alternatePhone.test(String(S).trim()))return"Alternate phone must be exactly 10 digits"},email:S=>{if(!le(S)&&!h.email.test(String(S).trim()))return"Invalid email format"},gstNumber:S=>{if(!le(S)&&!h.gst.test(String(S).trim()))return"GSTIN invalid (must follow 15-char GSTIN pattern)"},panNumber:S=>{if(!le(S)&&!h.pan.test(String(S).trim()))return"PAN invalid (format AAAAA9999A)"},ifsc:S=>{if(!le(S)&&!h.ifsc.test(String(S).trim()))return"IFSC invalid (e.g. SBIN0000001)"},pincode:S=>{if(!le(S)&&!h.pincode.test(String(S).trim()))return"Pincode must be 6 digits and not start with 0"},accountNumber:S=>{if(!le(S)&&!h.accountNumber.test(String(S).trim()))return"Account number must be 6-20 digits"},creditLimit:S=>{if(!le(S)&&!h.decimal.test(String(S).trim()))return"Credit limit must be a number"},deliveryTime:S=>{if(!le(S)&&!h.integer.test(String(S).trim()))return"Delivery time must be whole days (integer)"},minOrderQty:S=>{if(!le(S)&&!h.integer.test(String(S).trim()))return"MOQ must be a whole number"},category:S=>{if(!S||!Array.isArray(S)||S.length===0)return"At least one category is required"}},Re=()=>{const S={};return Object.keys(Ce).forEach(pe=>{const te=pe==="category"?d.categories:d[pe],fe=Ce[pe](te);fe&&(S[pe]=fe)}),b(S),Object.keys(S).length===0},ue=()=>{g(Qo()),b({}),l(""),u(!0)},ve=S=>{g({_id:S._id||S.id,code:S.code||"",name:S.name||"",vendorType:S.vendorType||"",categories:S.categories&&Array.isArray(S.categories)?S.categories:S.category?[S.category]:[],resorts:S.resorts&&Array.isArray(S.resorts)?S.resorts:S.resort?[S.resort]:[],contactPerson:S.contactPerson||"",phone:S.phone||"",whatsapp:S.whatsapp||"",alternatePhone:S.alternatePhone||"",email:S.email||"",addressLine1:S.addressLine1||"",addressLine2:S.addressLine2||"",city:S.city||S.address||"",state:S.state||"",pincode:S.pincode||"",country:S.country||"",gstNumber:S.gstNumber||"",panNumber:S.panNumber||"",fssaiNumber:S.fssaiNumber||"",paymentTerms:S.paymentTerms||"",creditLimit:S.creditLimit||"",paymentMode:S.paymentMode||"",bankName:S.bankName||"",accountNumber:S.accountNumber||"",ifsc:S.ifsc||"",branch:S.branch||"",deliveryTime:S.deliveryTime||"",minOrderQty:S.minOrderQty||"",status:S.status||"Active",notes:S.notes||""}),b({}),l(""),u(!0)},Ne=S=>{const{name:pe,value:te}=S.target;g(fe=>{let ye=te;pe==="name"||pe==="contactPerson"?ye=I(te):pe==="phone"||pe==="whatsapp"||pe==="alternatePhone"||pe==="pincode"||pe==="accountNumber"||pe==="minOrderQty"||pe==="deliveryTime"?ye=ce(te):pe==="creditLimit"?ye=T(te):pe==="code"&&(ye=String(te||"").toUpperCase().replace(/\s+/g,"_").replace(/[^A-Z0-9_]/g,""));const xe={...fe,[pe]:ye};if(pe==="name"&&(fe.code===""||fe.code===void 0)){const w=X(ye);xe.code=se(w)}return xe}),b(fe=>{const ye={...fe};return delete ye[pe],ye})},P=S=>{g(pe=>{const te=new Set(pe.categories||[]);te.has(S)?te.delete(S):te.add(S);const fe={...pe,categories:Array.from(te)};return b(ye=>{const xe={...ye};return delete xe.category,xe}),fe})},ie=S=>{g(pe=>{const te=new Set(pe.resorts||[]);return te.has(S)?te.delete(S):te.add(S),{...pe,resorts:Array.from(te)}})},A=(S,pe)=>{S.preventDefault();const te=(S.clipboardData||window.clipboardData).getData("text"),fe=I(te);g(ye=>{const xe={...ye,[pe]:fe};return pe==="name"&&(ye.code===""||ye.code===void 0)&&(xe.code=se(X(fe))),xe}),b(ye=>{const xe={...ye};return delete xe[pe],xe})},ee=(S,pe,te)=>{S.preventDefault();const fe=(S.clipboardData||window.clipboardData).getData("text");let ye=ce(fe);te&&(ye=ye.slice(0,te)),g(xe=>({...xe,[pe]:ye})),b(xe=>{const w={...xe};return delete w[pe],w})},E=(S,pe)=>{S.preventDefault();const te=(S.clipboardData||window.clipboardData).getData("text"),fe=T(te);g(ye=>({...ye,[pe]:fe})),b(ye=>{const xe={...ye};return delete xe[pe],xe})},re=()=>{const S=X(d.name||"");g(pe=>({...pe,code:se(S)})),b(pe=>{const te={...pe};return delete te.code,te})},J=async S=>{var pe,te;if(S.preventDefault(),l(""),!Re()){l("Please fix validation errors.");return}try{i(!0);const fe={...d,categories:d.categories||[],resorts:d.resorts||[]};if(!fe.category&&fe.categories&&fe.categories.length&&(fe.category=fe.categories[0]),fe.code||delete fe.code,d._id){const ye=await Z.put(`${tr}/api/vendors/${d._id}`,fe).catch(()=>null);if(ye!=null&&ye.data){const xe={...ye.data,categories:ye.data.categories||(ye.data.category?[ye.data.category]:[]),resorts:ye.data.resorts||(ye.data.resort?[ye.data.resort]:[])};t(w=>w.map(he=>he._id===d._id||he.id===d._id?xe:he))}else{const xe={...e.find(w=>w._id===d._id)||{},...fe};t(w=>w.map(he=>he._id===d._id||he.id===d._id?xe:he))}}else{fe.code=se(String(fe.code||"").toUpperCase());const ye=await Z.post(`${tr}/api/vendors`,fe).catch(()=>null),xe=(ye==null?void 0:ye.data)||{...fe,_id:`local_${Date.now()}`};xe.categories=xe.categories||(xe.category?[xe.category]:[]),xe.resorts=xe.resorts||(xe.resort?[xe.resort]:[]),t(w=>[xe,...w])}u(!1),g(Qo()),b({})}catch(fe){console.error("save vendor error",fe),l(((te=(pe=fe==null?void 0:fe.response)==null?void 0:pe.data)==null?void 0:te.message)||"Failed to save vendor")}finally{i(!1)}},Se=async S=>{if(window.confirm(`Delete vendor ${S.name||S.code}?`))try{t(pe=>pe.filter(te=>(te._id||te.id||te.code)!==(S._id||S.id||S.code))),await Z.delete(`${tr}/api/vendors/${S._id||S.id||S.code}`).catch(()=>null)}catch(pe){console.error("delete vendor error",pe),l("Failed to delete vendor"),await M()}},Pe=S=>{if(L(""),!S)return;G(!0);const pe=new FileReader;pe.onload=async te=>{const ye=te.target.result.split(/\r?\n/).map(y=>y.trim()).filter(Boolean);if(ye.length===0){L("Empty CSV file"),G(!1);return}const xe=ye[0].split(",").map(y=>y.trim().toLowerCase()),w=new Set(xe);if(!w.has("code")||!w.has("name")){L("CSV must contain at least: code,name columns"),G(!1);return}const he=[];for(let y=1;y<ye.length;y++){const B=ye[y].split(",").map(ge=>ge.trim());if(B.length===0)continue;const oe={};for(let ge=0;ge<xe.length;ge++)oe[xe[ge]]=B[ge]??"";he.push(oe)}if(he.length===0){L("No data rows in CSV"),G(!1);return}const be=he.map(y=>{const B=y.name||"",oe=y.code||X(B),ge=y.categories||y.category||"",we=ge?ge.split(/[,;]+/).map(st=>st.trim()).filter(Boolean):[],Te=y.resorts||y.resort||"",Je=Te?Te.split(/[,;]+/).map(st=>st.trim()).filter(Boolean):[];return{code:se(String(oe).toUpperCase()),name:B,vendorType:y.vendortype||y.vendor_type||"",categories:we,category:we.length?we[0]:"",resorts:Je,contactPerson:y.contactperson||y.contact_person||y.contact||"",phone:y.phone||y.contact||"",whatsapp:y.whatsapp||"",alternatePhone:y.alternatephone||y.altphone||y.alt_phone||"",email:y.email||"",addressLine1:y.address||"",addressLine2:y.addressline2||"",city:y.city||"",state:y.state||"",pincode:y.pincode||"",country:y.country||"",gstNumber:y.gstnumber||"",panNumber:y.pannumber||"",paymentTerms:y.paymentterms||"",creditLimit:y.creditlimit||"",paymentMode:y.paymentmode||"",bankName:y.bankname||"",accountNumber:y.accountnumber||"",ifsc:y.ifsc||"",branch:y.branch||"",deliveryTime:y.deliverytime||"",minOrderQty:y.minqty||"",status:y.status||"Active",notes:y.notes||""}}),ke=be.map(y=>({...y,_id:`local_${Date.now()}_${Math.floor(Math.random()*1e3)}`}));t(y=>[...ke,...y]);try{for(const y of be)try{const B=await Z.post(`${tr}/api/vendors`,y).catch(()=>null);B!=null&&B.data&&t(oe=>oe.map(ge=>ge.code===y.code?B.data:ge))}catch(B){console.warn("vendor CSV create failed for",y.code,B)}}catch(y){console.error("CSV bulk create error",y)}finally{G(!1)}},pe.onerror=()=>{L("Failed to read file"),G(!1)},pe.readAsText(S)},Ae=S=>{const pe=["code","name","vendorType","categories","resorts","contactPerson","phone","whatsapp","alternatePhone","email","addressLine1","addressLine2","city","state","pincode","country","gstNumber","panNumber","fssaiNumber","paymentTerms","creditLimit","paymentMode","bankName","accountNumber","ifsc","branch","deliveryTime","minOrderQty","status","notes"],fe=[pe.join(","),...S.map(he=>pe.map(be=>{const ke=be==="categories"?Array.isArray(he.categories)?he.categories.join(";"):he.categories||he.category||"":be==="resorts"?Array.isArray(he.resorts)?he.resorts.join(";"):he.resorts||he.resort||"":String(he[be]??"");return ke.includes(",")||ke.includes(`
`)?`"${ke.replace(/"/g,'""')}"`:ke}).join(","))].join(`
`),ye=new Blob([fe],{type:"text/csv"}),xe=URL.createObjectURL(ye),w=document.createElement("a");w.href=xe,w.download=`vendors-export-${Date.now()}.csv`,w.click(),URL.revokeObjectURL(xe)},Le=m.useMemo(()=>e.filter(S=>{var pe,te,fe,ye,xe;return!(v&&!((pe=S.name)!=null&&pe.toLowerCase().includes(v.toLowerCase()))||C&&!((te=S.code)!=null&&te.toLowerCase().includes(C.toLowerCase()))||H&&!((fe=S.city)!=null&&fe.toLowerCase().includes(H.toLowerCase()))||K&&!((ye=S.phone)!=null&&ye.toLowerCase().includes(K.toLowerCase()))||D&&!((xe=S.email)!=null&&xe.toLowerCase().includes(D.toLowerCase()))||U&&!(Array.isArray(S.resorts)?S.resorts:S.resorts?[S.resorts]:S.resort?[S.resort]:[]).some(be=>String(be)===String(U)))}),[e,v,C,H,K,D,U]),$e=m.useMemo(()=>Array.from(new Set(e.map(S=>S.city).filter(Boolean))),[e]),mt=S=>{const pe=_.find(te=>te.id===S||te._id===S||te.id===String(S));return pe?pe.name:S};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Vendors"}),n.jsx("p",{children:"Approved suppliers for all resort purchases."})]}),n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[n.jsx("input",{type:"file",accept:".csv,text/csv",onChange:S=>{var te;const pe=(te=S.target.files)==null?void 0:te[0];Pe(pe),S.target.value=""},title:"Upload CSV (columns: code,name,... )"}),O?n.jsx("span",{style:{marginLeft:6},children:"Uploading..."}):n.jsx("span",{style:{marginLeft:6},children:"Upload CSV"})]}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>Ae(Le),children:"Export CSV"}),n.jsxs("button",{className:"sa-primary-button",type:"button",onClick:ue,children:[n.jsx("i",{className:"ri-add-line"})," New Vendor"]})]})]}),o&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:o}),k&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:k}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[n.jsxs("label",{children:["Name",n.jsx("input",{value:v,onChange:S=>N(S.target.value),placeholder:"Search name...",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Code",n.jsx("input",{value:C,onChange:S=>V(S.target.value),placeholder:"Code...",style:{marginLeft:8}})]}),n.jsxs("label",{children:["City",n.jsxs("select",{value:H,onChange:S=>F(S.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),$e.map(S=>n.jsx("option",{value:S,children:S},S))]})]}),n.jsxs("label",{children:["Phone",n.jsx("input",{value:K,onChange:S=>ne(S.target.value),placeholder:"Phone...",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Email",n.jsx("input",{value:D,onChange:S=>W(S.target.value),placeholder:"Email...",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Resort",n.jsxs("select",{value:U,onChange:S=>q(S.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All Resorts"}),_.map(S=>n.jsx("option",{value:S.id,children:S.name},S.id))]})]}),n.jsxs("div",{style:{marginLeft:"auto",color:"#9ca3af"},children:["Showing ",Le.length," / ",e.length]})]}),n.jsx("div",{className:"sa-card",children:r?n.jsx("div",{children:"Loading vendors..."}):Le.length===0?n.jsx("div",{children:"No vendors match the filters. Add vendor or try clearing filters."}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Vendor Name"}),n.jsx("th",{children:"Contact"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"City"}),n.jsx("th",{children:"Categories"}),n.jsx("th",{children:"Resorts"}),n.jsx("th",{children:"GST"}),n.jsx("th",{children:"Payment Terms"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:Le.map(S=>n.jsxs("tr",{children:[n.jsx("td",{children:S.code}),n.jsx("td",{children:S.name}),n.jsxs("td",{children:[S.contactPerson?n.jsx("div",{children:S.contactPerson}):null,n.jsxs("div",{children:[S.phone,S.whatsapp?` (wa: ${S.whatsapp})`:""]})]}),n.jsx("td",{children:S.email}),n.jsx("td",{children:S.city}),n.jsx("td",{children:Array.isArray(S.categories)?S.categories.join(", "):S.category||""}),n.jsx("td",{children:Array.isArray(S.resorts)?S.resorts.map(mt).join(", "):S.resort?mt(S.resort):""}),n.jsx("td",{children:S.gstNumber}),n.jsx("td",{children:S.paymentTerms}),n.jsx("td",{children:S.status}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("button",{className:"sa-secondary-button",onClick:()=>ve(S),title:"Edit",children:n.jsx("i",{className:"ri-edit-line"})}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>{var pe;(pe=navigator.clipboard)==null||pe.writeText(JSON.stringify(S))},title:"Copy JSON",children:n.jsx("i",{className:"ri-file-copy-line"})}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>Se(S),title:"Delete",children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},S._id||S.id||S.code))})]})}),c&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!a&&u(!1),children:n.jsxs("div",{className:"sa-modal",onClick:S=>S.stopPropagation(),style:{maxWidth:980},children:[n.jsx("h3",{children:d._id?"Edit Vendor":"New Vendor"}),n.jsx("p",{className:"sa-modal-sub",children:"Add or update a supplier used in purchase orders. (Strict validations enabled)"}),n.jsxs("form",{className:"sa-modal-form",onSubmit:J,children:[n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[n.jsxs("label",{style:{flex:1},children:["Vendor Name *",n.jsx("input",{name:"name",value:d.name,onChange:Ne,onPaste:S=>A(S,"name"),placeholder:"Only letters and spaces"}),f.name&&n.jsx("div",{className:"sa-field-error",children:f.name})]}),n.jsxs("label",{style:{width:260},children:["Code *",n.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[n.jsx("input",{name:"code",value:d.code,onChange:Ne,onPaste:S=>{S.preventDefault();const pe=(S.clipboardData||window.clipboardData).getData("text"),te=String(pe||"").toUpperCase().replace(/\s+/g,"_").replace(/[^A-Z0-9_]/g,"");g(fe=>({...fe,code:se(te)})),b(fe=>{const ye={...fe};return delete ye.code,ye})},placeholder:"Auto generated from name"}),n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:re,children:"Generate"})]}),f.code&&n.jsx("div",{className:"sa-field-error",children:f.code})]})]}),n.jsxs("label",{children:["Vendor Type",n.jsxs("select",{name:"vendorType",value:d.vendorType,onChange:Ne,children:[n.jsx("option",{value:"",children:"Select type"}),n.jsx("option",{value:"Company",children:"Company"}),n.jsx("option",{value:"Individual",children:"Individual"}),n.jsx("option",{value:"Distributor",children:"Distributor"}),n.jsx("option",{value:"Manufacturer",children:"Manufacturer"})]})]}),n.jsxs("label",{children:["Categories * (select one or more)",n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:6},children:p.length===0?n.jsx("div",{style:{color:"#9ca3af"},children:"(no categories)"}):p.map(S=>n.jsxs("label",{style:{display:"flex",gap:6,alignItems:"center"},children:[n.jsx("input",{type:"checkbox",checked:d.categories.includes(S),onChange:()=>P(S)}),n.jsx("span",{children:S})]},S))}),f.category&&n.jsx("div",{className:"sa-field-error",children:f.category})]}),n.jsxs("label",{children:["Resorts (which this vendor supplies)  select one or more",n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:6},children:_.map(S=>n.jsxs("label",{style:{display:"flex",gap:6,alignItems:"center"},children:[n.jsx("input",{type:"checkbox",checked:(d.resorts||[]).includes(S.id),onChange:()=>ie(S.id)}),n.jsx("span",{children:S.name})]},S.id))})]}),n.jsxs("label",{children:["Contact Person",n.jsx("input",{name:"contactPerson",value:d.contactPerson,onChange:Ne,onPaste:S=>A(S,"contactPerson"),placeholder:"Only letters and spaces"}),d.contactPerson&&!/^[A-Za-z ]+$/.test(String(d.contactPerson).trim())&&n.jsx("div",{className:"sa-field-error",children:"Contact person must be letters and spaces only"})]}),n.jsxs("label",{children:["Phone",n.jsx("input",{name:"phone",value:d.phone,onChange:Ne,onPaste:S=>ee(S,"phone",10),placeholder:"10 digits"}),f.phone&&n.jsx("div",{className:"sa-field-error",children:f.phone})]}),n.jsxs("label",{children:["WhatsApp",n.jsx("input",{name:"whatsapp",value:d.whatsapp,onChange:Ne,onPaste:S=>ee(S,"whatsapp",10),placeholder:"10 digits"}),f.whatsapp&&n.jsx("div",{className:"sa-field-error",children:f.whatsapp})]}),n.jsxs("label",{children:["Alternate Phone",n.jsx("input",{name:"alternatePhone",value:d.alternatePhone,onChange:Ne,onPaste:S=>ee(S,"alternatePhone",10),placeholder:"10 digits"}),f.alternatePhone&&n.jsx("div",{className:"sa-field-error",children:f.alternatePhone})]}),n.jsxs("label",{children:["Email",n.jsx("input",{type:"email",name:"email",value:d.email,onChange:Ne,placeholder:"vendor@example.com"}),f.email&&n.jsx("div",{className:"sa-field-error",children:f.email})]}),n.jsxs("label",{children:["Address Line 1",n.jsx("input",{name:"addressLine1",value:d.addressLine1,onChange:Ne})]}),n.jsxs("label",{children:["Address Line 2",n.jsx("input",{name:"addressLine2",value:d.addressLine2,onChange:Ne})]}),n.jsxs("label",{children:["City",n.jsx("input",{name:"city",value:d.city,onChange:Ne})]}),n.jsxs("label",{children:["State",n.jsx("input",{name:"state",value:d.state,onChange:Ne})]}),n.jsxs("label",{children:["Pincode",n.jsx("input",{name:"pincode",value:d.pincode,onChange:Ne,onPaste:S=>ee(S,"pincode",6),placeholder:"6 digits"}),f.pincode&&n.jsx("div",{className:"sa-field-error",children:f.pincode})]}),n.jsxs("label",{children:["Country",n.jsx("input",{name:"country",value:d.country,onChange:Ne})]}),n.jsxs("label",{children:["GST Number",n.jsx("input",{name:"gstNumber",value:d.gstNumber,onChange:Ne,placeholder:"15 char GSTIN"}),f.gstNumber&&n.jsx("div",{className:"sa-field-error",children:f.gstNumber})]}),n.jsxs("label",{children:["PAN Number",n.jsx("input",{name:"panNumber",value:d.panNumber,onChange:Ne,placeholder:"PAN (AAAAA9999A)"}),f.panNumber&&n.jsx("div",{className:"sa-field-error",children:f.panNumber})]}),n.jsxs("label",{children:["FSSAI Number",n.jsx("input",{name:"fssaiNumber",value:d.fssaiNumber,onChange:Ne})]}),n.jsxs("label",{children:["Payment Terms",n.jsxs("select",{name:"paymentTerms",value:d.paymentTerms,onChange:Ne,children:[n.jsx("option",{value:"",children:"Select"}),n.jsx("option",{value:"Advance",children:"Advance"}),n.jsx("option",{value:"7 Days",children:"7 Days"}),n.jsx("option",{value:"15 Days",children:"15 Days"}),n.jsx("option",{value:"30 Days",children:"30 Days"})]})]}),n.jsxs("label",{children:["Credit Limit",n.jsx("input",{name:"creditLimit",value:d.creditLimit,onChange:Ne,onPaste:S=>E(S,"creditLimit"),placeholder:"Numeric"}),f.creditLimit&&n.jsx("div",{className:"sa-field-error",children:f.creditLimit})]}),n.jsxs("label",{children:["Payment Mode",n.jsx("input",{name:"paymentMode",value:d.paymentMode,onChange:Ne,placeholder:"UPI / Bank / Cash"})]}),n.jsxs("label",{children:["Bank Name",n.jsx("input",{name:"bankName",value:d.bankName,onChange:Ne})]}),n.jsxs("label",{children:["Account Number",n.jsx("input",{name:"accountNumber",value:d.accountNumber,onChange:Ne,onPaste:S=>ee(S,"accountNumber",20),placeholder:"6-20 digits"}),f.accountNumber&&n.jsx("div",{className:"sa-field-error",children:f.accountNumber})]}),n.jsxs("label",{children:["IFSC",n.jsx("input",{name:"ifsc",value:d.ifsc,onChange:Ne,placeholder:"IFSC"}),f.ifsc&&n.jsx("div",{className:"sa-field-error",children:f.ifsc})]}),n.jsxs("label",{children:["Branch",n.jsx("input",{name:"branch",value:d.branch,onChange:Ne})]}),n.jsxs("label",{children:["Delivery Time (days)",n.jsx("input",{name:"deliveryTime",value:d.deliveryTime,onChange:Ne,onPaste:S=>ee(S,"deliveryTime"),placeholder:"Integer days"}),f.deliveryTime&&n.jsx("div",{className:"sa-field-error",children:f.deliveryTime})]}),n.jsxs("label",{children:["Minimum Order Qty",n.jsx("input",{name:"minOrderQty",value:d.minOrderQty,onChange:Ne,onPaste:S=>ee(S,"minOrderQty"),placeholder:"Integer"}),f.minOrderQty&&n.jsx("div",{className:"sa-field-error",children:f.minOrderQty})]}),n.jsxs("label",{children:["Status",n.jsxs("select",{name:"status",value:d.status,onChange:Ne,children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"}),n.jsx("option",{value:"Blacklisted",children:"Blacklisted"})]})]}),n.jsxs("label",{children:["Notes",n.jsx("textarea",{name:"notes",value:d.notes,onChange:Ne,rows:3})]}),o&&n.jsx("div",{className:"sa-modal-error",children:o}),n.jsxs("div",{className:"sa-modal-actions",children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!a&&u(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:a,children:a?"Saving...":d._id?"Update Vendor":"Save Vendor"})]})]})]})})]})},br="http://localhost:5000",Zu=["Kg","Ltr","Nos"],Wo=()=>({_id:void 0,name:"",code:"",itemCategory:"",uom:"",brand:"",indicativePrice:""}),Oj=()=>{const[e,t]=m.useState([]),[r,s]=m.useState([]),[a,i]=m.useState([]),[o,l]=m.useState(!1),[c,u]=m.useState(!1),[d,g]=m.useState(""),[f,b]=m.useState(!1),[p,R]=m.useState(Wo()),[_,j]=m.useState(""),[v,N]=m.useState(""),[C,V]=m.useState(""),[H,F]=m.useState(""),[K,ne]=m.useState(""),[D,W]=m.useState(""),[U,q]=m.useState(!1),k=h=>{if(!h)return"-";const X=r.find(se=>se._id===h||se.name===h)||null;return(X==null?void 0:X.name)||h},L=async()=>{try{l(!0),g("");const[h,X]=await Promise.all([Z.get(`${br}/api/items`).catch(ue=>(console.error("load items error",ue),{data:[]})),Z.get(`${br}/api/item-categories`).catch(ue=>(console.error("load item-categories error",ue),{data:[]}))]),se=Array.isArray(X.data)?X.data.map(ue=>({_id:ue._id||ue.id,name:ue.name||ue.code||""})):[];s(se);const Ce=Array.isArray(h.data)?h.data.map(ue=>({_id:ue._id||ue.id,code:ue.code||"",name:ue.name||"",itemCategory:typeof ue.itemCategory=="object"?ue.itemCategory._id||ue.itemCategory.id:ue.itemCategory||"",uom:ue.uom||"",brand:ue.brand||"",indicativePrice:ue.indicativePrice??""})):[];t(Ce);const Re=new Set(Ce.map(ue=>ue.brand).filter(Boolean));i(Array.from(Re))}catch(h){console.error("loadItems fatal error",h),g("Failed to load items")}finally{l(!1)}};m.useEffect(()=>{L()},[]);const O=()=>{R(Wo()),g(""),b(!0)},G=h=>{R({_id:h._id||h.id,code:h.code||"",name:h.name||"",itemCategory:h.itemCategory||"",uom:h.uom||"",brand:h.brand||"",indicativePrice:h.indicativePrice??""}),g(""),b(!0)},M=h=>{const{name:X,value:se}=h.target;R(Ce=>({...Ce,[X]:se}))},Y=async h=>{var X,se,Ce,Re;if(h.preventDefault(),g(""),!((X=p.name)!=null&&X.trim())||!((se=p.code)!=null&&se.trim())||!p.uom){g("Item Name, Code & Measurement (UOM) required");return}try{u(!0);const ue={name:p.name.trim(),code:p.code.trim(),itemCategory:p.itemCategory||void 0,uom:p.uom,brand:p.brand||"",indicativePrice:p.indicativePrice?Number(p.indicativePrice):void 0};if(p._id){const ve=await Z.put(`${br}/api/items/${p._id}`,ue).catch(()=>null);if(ve!=null&&ve.data){const Ne={_id:ve.data._id||ve.data.id,code:ve.data.code||"",name:ve.data.name||"",itemCategory:typeof ve.data.itemCategory=="object"?ve.data.itemCategory._id||ve.data.itemCategory.id:ve.data.itemCategory||"",uom:ve.data.uom||"",brand:ve.data.brand||"",indicativePrice:ve.data.indicativePrice??""};t(P=>P.map(ie=>ie._id===p._id||ie.id===p._id?Ne:ie))}else t(Ne=>Ne.map(P=>P._id===p._id||P.id===p._id?{...P,...ue}:P))}else{const ve=await Z.post(`${br}/api/items`,ue).catch(()=>null),Ne=ve!=null&&ve.data?{_id:ve.data._id||ve.data.id,code:ve.data.code||"",name:ve.data.name||"",itemCategory:typeof ve.data.itemCategory=="object"?ve.data.itemCategory._id||ve.data.itemCategory.id:ve.data.itemCategory||"",uom:ve.data.uom||"",brand:ve.data.brand||"",indicativePrice:ve.data.indicativePrice??""}:{...ue,_id:`local_${Date.now()}`};t(P=>[Ne,...P])}p.brand&&!a.includes(p.brand)&&i(ve=>[p.brand,...ve]),b(!1),R(Wo())}catch(ue){console.error("save error",ue),g(((Re=(Ce=ue.response)==null?void 0:Ce.data)==null?void 0:Re.message)||"Failed to save item")}finally{u(!1)}},$=async h=>{if(window.confirm(`Delete item ${h.name||h.code}?`))try{t(X=>X.filter(se=>(se._id||se.id||se.code)!==(h._id||h.id||h.code))),await Z.delete(`${br}/api/items/${h._id||h.id||h.code}`).catch(()=>null)}catch(X){console.error("delete item error",X),g("Failed to delete item"),await L()}},I=m.useMemo(()=>e.filter(h=>{var X,se;return!(_&&!((X=h.name)!=null&&X.toLowerCase().includes(_.toLowerCase()))||v&&!((se=h.code)!=null&&se.toLowerCase().includes(v.toLowerCase()))||C&&(h.itemCategory||"").toString()!==C||H&&(h.uom||"").toLowerCase()!==H.toLowerCase()||K&&(h.brand||"").toLowerCase()!==K.toLowerCase())}),[e,_,v,C,H,K]),ce=h=>{if(W(""),!h)return;q(!0);const X=new FileReader;X.onload=async se=>{const ue=se.target.result.split(/\r?\n/).map(ee=>ee.trim()).filter(Boolean).filter(ee=>!ee.startsWith("#"));if(ue.length===0){W("Empty CSV"),q(!1);return}const ve=ue[0].split(",").map(ee=>ee.trim().toLowerCase()),Ne=new Set(ve);if(!Ne.has("code")||!Ne.has("name")||!Ne.has("uom")){W("CSV must contain at least: code, name, uom columns"),q(!1);return}const P=[];for(let ee=1;ee<ue.length;ee++){const E=ue[ee].split(",").map(J=>J.trim());if(E.length===0)continue;const re={};for(let J=0;J<ve.length;J++)re[ve[J]]=E[J]??"";P.push(re)}if(P.length===0){W("No data rows found in CSV"),q(!1);return}const ie=P.map(ee=>{const E=ee.itemcategory||ee.itemCategory||ee.category||"",re=r.find(J=>J.name.toLowerCase()===E.toLowerCase()||J._id===E)||null;return{code:ee.code,name:ee.name,itemCategory:re==null?void 0:re._id,uom:ee.uom,brand:ee.brand||"",indicativePrice:ee.indicativeprice?Number(ee.indicativeprice):void 0}}),A=ie.map(ee=>({...ee,_id:`local_${Date.now()}_${Math.floor(Math.random()*1e3)}`}));t(ee=>[...ee,...A]);try{for(const ee of ie)try{const E=await Z.post(`${br}/api/items`,ee).catch(()=>null);if(E!=null&&E.data){const re={_id:E.data._id||E.data.id,code:E.data.code||"",name:E.data.name||"",itemCategory:typeof E.data.itemCategory=="object"?E.data.itemCategory._id||E.data.itemCategory.id:E.data.itemCategory||"",uom:E.data.uom||"",brand:E.data.brand||"",indicativePrice:E.data.indicativePrice??""};t(J=>J.map(Se=>{var Pe;return(Pe=Se._id)!=null&&Pe.startsWith("local_")&&Se.code===ee.code?re:Se}))}}catch(E){console.warn("failed to create item from CSV:",ee.code,E)}}catch(ee){console.error("CSV upload server error",ee)}finally{q(!1)}},X.onerror=()=>{W("Failed to read file"),q(!1)},X.readAsText(h)},T=()=>{const h=["code","name","itemCategory","uom","brand","indicativePrice"],se=[h.join(",")].concat(I.map(ve=>h.map(Ne=>{let P=ve[Ne];Ne==="itemCategory"&&(P=k(ve.itemCategory));const ie=String(P??"");return ie.includes(",")||ie.includes(`
`)?`"${ie.replace(/"/g,'""')}"`:ie}).join(","))).join(`
`),Ce=new Blob([se],{type:"text/csv"}),Re=URL.createObjectURL(Ce),ue=document.createElement("a");ue.href=Re,ue.download=`items-export-${Date.now()}.csv`,ue.click(),URL.revokeObjectURL(Re)},le=()=>{var P;const h=["code","name","itemCategory","uom","brand","indicativePrice"],X=r.map(ie=>ie.name),se=["RICE1","Basmati Rice 5kg",X[0]||"","Kg","BrandName","60"],Ce=[];Ce.push(h.join(",")),Ce.push(se.join(",")),Ce.push(`#CATEGORIES:${X.join("|")}`);const Re=Ce.join(`
`),ue=new Blob([Re],{type:"text/csv"}),ve=URL.createObjectURL(ue),Ne=document.createElement("a");Ne.href=ve,Ne.download=`items-csv-format-${Date.now()}.csv`,Ne.click(),URL.revokeObjectURL(ve);try{(P=navigator.clipboard)==null||P.writeText(Re),alert("CSV format downloaded and copied to clipboard (categories provided in metadata lines).")}catch{alert("CSV format downloaded.")}};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Items"}),n.jsx("p",{children:"Central item master  Item Category, Brand, UOM and Indicative Price."})]}),n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[n.jsx("input",{type:"file",accept:".csv,text/csv",onChange:h=>{var se;const X=(se=h.target.files)==null?void 0:se[0];ce(X),h.target.value=""},title:"Upload CSV (columns: code,name,itemCategory,uom,brand,indicativePrice)"}),U?n.jsx("span",{style:{marginLeft:6},children:"Uploading..."}):n.jsx("span",{style:{marginLeft:6},children:"Upload CSV"})]}),n.jsx("button",{className:"sa-secondary-button",onClick:le,title:"Download CSV format with sample row and allowed categories",children:"CSV Format"}),n.jsx("button",{className:"sa-secondary-button",onClick:T,title:"Export filtered items to CSV",children:"Export CSV"}),n.jsxs("button",{className:"sa-primary-button",type:"button",onClick:O,children:[n.jsx("i",{className:"ri-add-line"})," Add New Item"]})]})]}),d&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:d}),D&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:D}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[n.jsxs("label",{children:["Name",n.jsx("input",{value:_,onChange:h=>j(h.target.value),placeholder:"Search name...",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Code",n.jsx("input",{value:v,onChange:h=>N(h.target.value),placeholder:"Search code...",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Item Category",n.jsxs("select",{value:C,onChange:h=>V(h.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),r.map(h=>n.jsx("option",{value:h._id,children:h.name},h._id))]})]}),n.jsxs("label",{children:["Measurement (UOM)",n.jsxs("select",{value:H,onChange:h=>F(h.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),Zu.map(h=>n.jsx("option",{value:h,children:h},h))]})]}),n.jsxs("label",{children:["Brand",n.jsxs("select",{value:K,onChange:h=>ne(h.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),a.map(h=>n.jsx("option",{value:h,children:h},h))]})]}),n.jsxs("div",{style:{marginLeft:"auto",color:"#9ca3af"},children:["Showing ",I.length," / ",e.length]})]}),n.jsx("div",{className:"sa-card",children:o?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Loading items..."}):I.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"No items found. Add your first item or upload a CSV."}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Item Name"}),n.jsx("th",{children:"Item Category"}),n.jsx("th",{children:"Measurement"}),n.jsx("th",{children:"Brand"}),n.jsx("th",{children:"Indicative Price"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:I.map(h=>n.jsxs("tr",{children:[n.jsx("td",{children:h.code}),n.jsx("td",{children:h.name}),n.jsx("td",{children:k(h.itemCategory)}),n.jsx("td",{children:h.uom||"-"}),n.jsx("td",{children:h.brand||"-"}),n.jsx("td",{children:h.indicativePrice!==void 0&&h.indicativePrice!==""?`${String(h.indicativePrice)}`:"-"}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("button",{className:"sa-secondary-button",onClick:()=>{var X;(X=navigator.clipboard)==null||X.writeText(JSON.stringify(h)),alert("Copied")},title:"Copy JSON",children:"Copy"}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>G(h),title:"Edit",children:"Edit"}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>$(h),title:"Delete",children:"Delete"})]})]},h._id||h.id||h.code))})]})}),f&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!c&&b(!1),children:n.jsxs("div",{className:"sa-modal",onClick:h=>h.stopPropagation(),style:{maxWidth:720},children:[n.jsx("h3",{children:p._id?"Edit Item":"Add New Item"}),n.jsx("p",{className:"sa-modal-sub",children:"Define item  Item Category, Brand, UOM and Indicative Price."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:Y,children:[n.jsxs("label",{children:["Item Name",n.jsx("input",{name:"name",value:p.name,onChange:M,placeholder:"e.g. Basmati Rice 5kg",required:!0})]}),n.jsxs("label",{children:["Code",n.jsx("input",{name:"code",value:p.code,onChange:M,placeholder:"e.g. RICE1",required:!0})]}),n.jsxs("label",{children:["Item Category",n.jsxs("select",{name:"itemCategory",value:p.itemCategory,onChange:M,children:[n.jsx("option",{value:"",children:"-- none --"}),r.map(h=>n.jsx("option",{value:h._id,children:h.name},h._id))]})]}),n.jsxs("label",{children:["Measurement (UOM)",n.jsxs("select",{name:"uom",value:p.uom,onChange:M,required:!0,children:[n.jsx("option",{value:"",children:"-- Select --"}),Zu.map(h=>n.jsx("option",{value:h,children:h},h))]})]}),n.jsxs("label",{children:["Brand",n.jsx("input",{name:"brand",value:p.brand,onChange:M,placeholder:"Brand name (optional)"}),n.jsx("small",{style:{display:"block",color:"#6b7280",marginTop:2},children:"Type a new brand name to add it."})]}),n.jsxs("label",{children:["Indicative Price ()",n.jsx("input",{name:"indicativePrice",type:"number",min:"0",step:"0.01",value:p.indicativePrice,onChange:M,placeholder:"Numeric price per selected UOM"})]}),d&&n.jsx("div",{className:"sa-modal-error",children:d}),n.jsxs("div",{className:"sa-modal-actions",children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!c&&b(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:c,children:c?"Saving...":"Save Item"})]})]})]})})]})},ws="http://localhost:5000",Dj=[{key:"SUPER_ADMIN",label:"Super Admin"},{key:"RESORT_USER",label:"Resort User"},{key:"APPROVER",label:"Approver"},{key:"PURCHASE_MANAGER",label:"Purchase Manager"},{key:"STORE_USER",label:"Store User"}],em=()=>({firstName:"",lastName:"",email:"",password:"",isdCode:"+91",phone:"",status:"ACTIVE",role:"RESORT_USER",resorts:[],defaultResort:"",accountAdmin:!1}),Fj=()=>{const[e,t]=m.useState([]),[r,s]=m.useState([]),[a,i]=m.useState([]),[o,l]=m.useState(!1),[c,u]=m.useState(!1),[d,g]=m.useState(""),[f,b]=m.useState(!1),[p,R]=m.useState(em()),_=(k=[])=>{const L=(k||[]).reduce((G,M)=>(M.key&&(G[M.key]=M),G),{}),O=Dj.map(G=>{var M,Y;return{key:G.key,label:G.label,_id:((M=L[G.key])==null?void 0:M._id)||null,fromBackend:!!L[G.key],storeMode:((Y=L[G.key])==null?void 0:Y.storeMode)||"MULTI"}});k.forEach(G=>{O.find(M=>M.key===G.key)||O.push({key:G.key,label:G.name||G.key,_id:G._id,fromBackend:!0,storeMode:G.storeMode||"MULTI"})}),i(O),R(G=>({...G,role:O.find(M=>M.key===G.role)?G.role:"RESORT_USER"}))},j=async()=>{var k,L;try{l(!0);const[O,G,M]=await Promise.all([Z.get(`${ws}/api/users`),Z.get(`${ws}/api/resorts`),Z.get(`${ws}/api/roles`)]);t(O.data||[]),s(G.data||[]),_(M.data||[])}catch(O){console.error("loadData error:",O),g(((L=(k=O.response)==null?void 0:k.data)==null?void 0:L.message)||"Failed to load data")}finally{l(!1)}},v=async()=>{try{const k=await Z.get(`${ws}/api/roles`);_(k.data||[])}catch(k){console.error("Failed to load roles:",k),_([])}};m.useEffect(()=>{j()},[]);const N=async()=>{await v(),R(em()),g(""),b(!0)},C=()=>{c||(b(!1),g(""))},V=k=>{const{name:L,value:O}=k.target;R(G=>{let M={...G,[L]:O};if(L==="role"){const Y=a.find(I=>I.key===O);if((Y==null?void 0:Y.storeMode)==="SINGLE"){const I=G.resorts[0]||"";M.resorts=I?[I]:[],M.defaultResort=I||""}}return M})},H=k=>{const{name:L,checked:O}=k.target;R(G=>({...G,[L]:O}))},F=k=>{R(L=>{const G=L.resorts.includes(k)?L.resorts.filter(Y=>Y!==k):[...L.resorts,k],M=L.defaultResort&&!G.includes(L.defaultResort)?"":L.defaultResort;return{...L,resorts:G,defaultResort:M}})},K=k=>{const L=k.target.value;R(O=>({...O,defaultResort:L,resorts:L&&!O.resorts.includes(L)?[...O.resorts,L]:O.resorts}))},ne=k=>{const L=k.target.value;R(O=>({...O,resorts:L?[L]:[],defaultResort:L||""}))},D=async(k=!1)=>{var O,G;g("");const L=`${p.firstName} ${p.lastName}`.trim();if(!L||!p.email||!p.password){g("First Name, Email & Password are required");return}try{u(!0);const M={name:L,email:p.email,password:p.password,role:p.role,resorts:p.resorts},Y=await Z.post(`${ws}/api/users`,M);Y&&Y.data?(t($=>[...$,Y.data]),b(!1)):(await j(),b(!1))}catch(M){console.error("create user error:",M),g(((G=(O=M.response)==null?void 0:O.data)==null?void 0:G.message)||"Failed to create user")}finally{u(!1)}},W=k=>!k.resorts||k.resorts.length===0?"-":(k.resorts||[]).map(L=>{var O;return typeof L=="object"?L.name:(O=r.find(G=>G._id===L))==null?void 0:O.name}).filter(Boolean).join(", ");if(!f)return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Users"}),n.jsx("p",{children:"Create users and assign one or multiple resorts."})]}),n.jsxs("button",{className:"sa-primary-button",type:"button",onClick:N,children:[n.jsx("i",{className:"ri-add-line"})," New User"]})]}),d&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:d}),n.jsx("div",{className:"sa-card",children:o?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Loading users..."}):e.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"No users found."}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Role"}),n.jsx("th",{children:"Resorts"})]})}),n.jsx("tbody",{children:e.map(k=>n.jsxs("tr",{children:[n.jsx("td",{children:k.name}),n.jsx("td",{children:k.email}),n.jsx("td",{children:k.role}),n.jsx("td",{children:W(k)})]},k._id||k.id))})]})})]});const U=a.find(k=>k.key===p.role),q=(U==null?void 0:U.storeMode)==="SINGLE";return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"ADD STAFF"}),n.jsx("p",{children:"Add your team members and assign resorts & roles."})]}),n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:C,children:"Back to Users"})]}),d&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:d}),n.jsx("div",{className:"sa-card",children:n.jsxs("form",{className:"sa-modal-form",style:{maxWidth:700},onSubmit:k=>k.preventDefault(),children:[n.jsxs("label",{children:["First Name",n.jsx("input",{name:"firstName",value:p.firstName,onChange:V,placeholder:"First Name",required:!0})]}),n.jsxs("label",{children:["Last Name",n.jsx("input",{name:"lastName",value:p.lastName,onChange:V,placeholder:"Last Name"})]}),n.jsxs("label",{children:["Email Address",n.jsx("input",{type:"email",name:"email",value:p.email,onChange:V,placeholder:"user@resort.com",required:!0})]}),n.jsxs("label",{children:["Password",n.jsx("input",{type:"password",name:"password",value:p.password,onChange:V,placeholder:"",required:!0})]}),n.jsxs("label",{children:["ISD Code",n.jsx("input",{name:"isdCode",value:p.isdCode,onChange:V,placeholder:"+91"})]}),n.jsxs("label",{children:["Phone Number",n.jsx("input",{name:"phone",value:p.phone,onChange:V,placeholder:"9876543210"})]}),n.jsxs("div",{style:{marginTop:10},children:[n.jsx("div",{style:{fontSize:"0.9rem",fontWeight:600},children:"Status"}),n.jsxs("div",{style:{display:"flex",gap:20,marginTop:6,fontSize:"0.9rem"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[n.jsx("input",{type:"radio",name:"status",value:"ACTIVE",checked:p.status==="ACTIVE",onChange:V}),"Active"]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[n.jsx("input",{type:"radio",name:"status",value:"INACTIVE",checked:p.status==="INACTIVE",onChange:V}),"In-Active"]})]})]}),n.jsx("div",{style:{marginTop:20,paddingTop:12,borderTop:"1px solid #eee"},children:n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontWeight:600,fontSize:"0.95rem"},children:[n.jsx("input",{type:"checkbox",name:"accountAdmin",checked:p.accountAdmin,onChange:H}),n.jsx("span",{children:"Account-Admin"})]})}),n.jsxs("label",{style:{marginTop:12},children:["Role",n.jsx("select",{name:"role",value:p.role,onChange:V,style:{maxWidth:260},children:a.map(k=>n.jsx("option",{value:k.key,children:k.label||k.key},k.key))})]}),U&&n.jsxs("div",{style:{fontSize:12,marginTop:4,color:"#777"},children:["Store access for this role:"," ",q?"Single Store":"Multi Store"]}),n.jsx("div",{style:{marginTop:18,paddingTop:12,borderTop:"1px solid #eee",fontSize:"0.9rem"},children:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"12px 24px"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:600},children:"Property"}),n.jsx("div",{style:{fontSize:"0.8rem",color:"#777"},children:"1. All-Properties"}),q?n.jsxs(n.Fragment,{children:[n.jsxs("select",{style:{marginTop:6,width:"100%"},value:p.resorts[0]||"",onChange:ne,children:[n.jsx("option",{value:"",children:"Select"}),r.map(k=>n.jsx("option",{value:k._id,children:k.name},k._id))]}),n.jsx("div",{style:{marginTop:8,fontWeight:600},children:"Default Property"}),n.jsxs("select",{style:{marginTop:4,width:"100%"},value:p.defaultResort||p.resorts[0]||"",onChange:ne,children:[n.jsx("option",{value:"",children:"Select"}),r.map(k=>n.jsx("option",{value:k._id,children:k.name},k._id))]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{marginTop:6,maxHeight:140,overflowY:"auto",padding:"6px 10px",border:"1px solid #ddd",borderRadius:4},children:r.length===0?n.jsx("div",{style:{fontSize:"0.8rem",color:"#777"},children:"No resorts found."}):r.map(k=>n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:"0.8rem",marginBottom:4},children:[n.jsx("input",{type:"checkbox",checked:p.resorts.includes(k._id),onChange:()=>F(k._id)}),k.name]},k._id))}),n.jsx("div",{style:{marginTop:8,fontWeight:600},children:"Default Property"}),n.jsxs("select",{name:"defaultResort",value:p.defaultResort,onChange:K,style:{marginTop:4,width:"100%"},children:[n.jsx("option",{value:"",children:"Select"}),r.map(k=>n.jsx("option",{value:k._id,children:k.name},k._id))]})]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:600},children:"Product"}),n.jsx("div",{style:{fontSize:"0.8rem",color:"#777"},children:"1. All-Products"}),n.jsx("select",{disabled:!0,style:{marginTop:4,width:"100%",opacity:.6},children:n.jsx("option",{children:"Select"})}),n.jsx("div",{style:{marginTop:8,fontWeight:600},children:"Default Product"}),n.jsx("select",{disabled:!0,style:{marginTop:4,width:"100%",opacity:.6},children:n.jsx("option",{children:"Select"})})]})]})}),d&&n.jsx("div",{className:"sa-modal-error",children:d}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:24,display:"flex",gap:12,flexWrap:"wrap"},children:[n.jsx("button",{type:"button",className:"sa-primary-button",disabled:c,onClick:()=>D(!1),children:c?"Saving...":"Add New User"}),n.jsx("button",{type:"button",className:"sa-primary-button",disabled:c,onClick:()=>D(!0),children:c?"Saving...":"Add New User and Send Password"}),n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:C,disabled:c,children:"Cancel"})]})]})})]})},kn="http://localhost:5000",Er=()=>({lineId:`po_${Date.now()}_${Math.floor(Math.random()*1e3)}`,item:"",qty:1,rate:"",amount:0}),_r=e=>{const t=e?new Date(e):new Date;if(Number.isNaN(t.getTime()))return`GRN-${Date.now()}`;const r=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),i=Math.floor(Math.random()*900)+100;return`GRN-${r}${s}${a}-${i}`},hn=new Date().toISOString().slice(0,10),Mj=()=>{var w,he,be,ke;const{activeResort:e}=m.useContext(ms),[t,r]=m.useState([]),[s,a]=m.useState([]),[i,o]=m.useState([]),[l,c]=m.useState([]),[u,d]=m.useState([]),[g,f]=m.useState([]),[b,p]=m.useState(!1),[R,_]=m.useState(!1),[j,v]=m.useState(""),[N,C]=m.useState(!1),[V,H]=m.useState(null),[F,K]=m.useState({requisitionId:"",vendor:"",resort:"",store:"",poDate:new Date().toISOString().slice(0,10),lines:[Er()],poNo:""}),[ne,D]=m.useState({open:!1,po:null,grnNo:_r(hn),receivedBy:"",receivedDate:hn,challanNo:"",billNo:"",items:[]}),W=bn(),[U,q]=m.useState("ALL"),[k,L]=m.useState(""),[O,G]=m.useState(""),[M,Y]=m.useState(""),[$,I]=m.useState(""),[ce,T]=m.useState("ALL"),[le,h]=m.useState("");function X(y){const B=y.includes("?")?"&":"?";return e&&e!=="all"?`${kn}${y}${B}resort=${encodeURIComponent(e)}`:`${kn}${y}`}const se=async()=>{var y,B;try{p(!0),v("");const[oe,ge,we,Te,Je,st]=await Promise.all([Z.get(X("/api/po")),Z.get(X("/api/requisitions?status=Approved")),Z.get(X("/api/vendors")),Z.get(`${kn}/api/resorts`),Z.get(X("/api/stores")),Z.get(X("/api/items"))]),Bt=Array.isArray(oe.data)?oe.data:[];r(Bt);const jr=(Array.isArray(ge.data)?ge.data:[]).filter(at=>{const ze=!!(at.po||at.poId||at.po_no||at.poNo),St=!!(at.grn||at.grnId||at.grn_no||at.grnNo);return!ze&&!St});a(jr),o(Array.isArray(we.data)?we.data:[]),c(Array.isArray(Te.data)?Te.data:[]),d(Array.isArray(Je.data)?Je.data:[]),f(Array.isArray(st.data)?st.data:[])}catch(oe){console.error("loadData error",oe);const ge=((B=(y=oe==null?void 0:oe.response)==null?void 0:y.data)==null?void 0:B.message)||(oe==null?void 0:oe.message)||"Failed to load data from backend.";v(ge),r([]),a([]),o([]),c([]),d([]),f([])}finally{p(!1)}};m.useEffect(()=>{Y(e&&e!=="all"?e:""),se()},[e]);const Ce=y=>{if(!y){K(we=>({...we,requisitionId:"",lines:[Er()],vendor:"",resort:"",store:""}));return}const B=s.find(we=>(we._id||we.id)===y);if(!B)return;const ge=(B.lines||B.items||B.requestedItems||[]||[]).map(we=>{var Te;return{lineId:`po_${Date.now()}_${Math.floor(Math.random()*1e3)}`,item:((Te=we.item)==null?void 0:Te._id)||we.item||we.itemId||"",qty:we.qty||we.quantity||1,rate:we.rate||"",amount:(we.qty||we.quantity||0)*(we.rate||0)}});K(we=>({...we,requisitionId:y,vendor:B.vendor||we.vendor||"",resort:B.resort||we.resort||"",store:B.store||we.store||"",lines:ge.length?ge:[Er()],poNo:""}))},Re=y=>{H(y._id||y.id),K({requisitionId:y.requisitionId||"",vendor:y.vendor||"",resort:y.resort||"",store:y.store||"",poDate:(y.poDate||y.date||new Date().toISOString()).slice(0,10),lines:y.items&&y.items.map(B=>({lineId:B.lineId||`po_${Math.floor(Math.random()*1e5)}`,item:B.item||B.itemId||"",qty:B.qty||1,rate:B.rate||0,amount:B.amount||(B.qty||1)*(B.rate||0)}))||[Er()],poNo:y.poNo||y.po_number||""}),C(!0)},ue=y=>{H(null),K({requisitionId:y.requisitionId||"",vendor:y.vendor||"",resort:y.resort||"",store:y.store||"",poDate:new Date().toISOString().slice(0,10),lines:y.items&&y.items.map(B=>({lineId:`dup_${Math.floor(Math.random()*1e5)}`,item:B.item||B.itemId||"",qty:B.qty||1,rate:B.rate||0,amount:B.amount||(B.qty||1)*(B.rate||0)}))||[Er()],poNo:`PO-${Date.now()}`}),C(!0)},ve=y=>{const{name:B,value:oe}=y.target;K(ge=>({...ge,[B]:oe}))},Ne=(y,B,oe)=>{K(ge=>{const we=[...ge.lines];if(we[y][B]=oe,B==="qty"||B==="rate"){const Te=Number(we[y].qty||0),Je=Number(we[y].rate||0);we[y].amount=Te*Je}return{...ge,lines:we}})},P=()=>K(y=>({...y,lines:[...y.lines,Er()]})),ie=y=>K(B=>({...B,lines:B.lines.filter((oe,ge)=>ge!==y)})),A=async y=>{var B,oe;if(y.preventDefault(),v(""),!F.vendor)return v("Select vendor");if(!F.resort)return v("Select resort");if(!F.store)return v("Select delivery store");if(!F.lines||F.lines.length===0)return v("Add item lines");for(const ge of F.lines){if(!ge.item)return v("Each line must have item selected");if(!ge.qty||Number(ge.qty)<=0)return v("Each line must have quantity > 0")}try{_(!0);const ge={requisitionId:F.requisitionId||void 0,vendor:F.vendor,resort:F.resort,store:F.store,poDate:F.poDate,poNo:F.poNo||void 0,items:F.lines.map(we=>({item:we.item,qty:Number(we.qty),rate:Number(we.rate||0),amount:Number(we.amount||0)}))};if(V){const we=await Z.put(`${kn}/api/po/${V}`,ge);we!=null&&we.data?r(Te=>Te.map(Je=>Je._id===V||Je.id===V?we.data:Je)):await se()}else{const Te=(await Z.post(`${kn}/api/po`,ge)).data||null;if(Te){r(st=>[...st,Te]),Te.requisitionId&&a(st=>st.filter(Bt=>(Bt._id||Bt.id)!==Te.requisitionId));const Je=Te._id||Te.id||Te.poNo||Te.po_number;Je&&W(`/super-admin/po/${Je}`)}else await se(),W("/super-admin/po")}C(!1),H(null)}catch(ge){console.error("save PO error",ge),v(((oe=(B=ge.response)==null?void 0:B.data)==null?void 0:oe.message)||"Failed to save PO")}finally{_(!1)}},ee=async y=>{var B,oe;if(window.confirm(`Delete PO ${y.poNo||y._id||y.id}?`))try{r(ge=>ge.filter(we=>we._id!==y._id&&we.id!==y.id)),await Z.delete(`${kn}/api/po/${y._id||y.id}`)}catch(ge){console.error("delete po error",ge),v(((oe=(B=ge.response)==null?void 0:B.data)==null?void 0:oe.message)||"Failed to delete PO"),await se()}},E=async y=>{var B,oe;if(!(y.status==="Approved"||y.status==="APPROVED")&&window.confirm(`Approve PO ${y.poNo||y._id||y.id}?`))try{const ge=await Z.post(`${kn}/api/po/${y._id||y.id}/approve`).catch(()=>null);ge!=null&&ge.data?r(we=>we.map(Te=>Te._id===y._id||Te.id===y.id?ge.data:Te)):r(we=>we.map(Te=>Te._id===y._id||Te.id===y.id?{...Te,status:"Approved"}:Te))}catch(ge){console.error("approve po error",ge),v(((oe=(B=ge.response)==null?void 0:B.data)==null?void 0:oe.message)||"Failed to approve PO")}},re=y=>{const B=(y.items||[]).map(ge=>{var Bt;const we=((Bt=ge.item)==null?void 0:Bt._id)||ge.item||ge.itemId,Te=g.find(Tt=>(Tt._id||Tt.id)===we),Je=ge.item&&ge.item.name||(Te?Te.name:""),st=ge.qty||ge.quantity||0;return{lineId:ge.lineId||`ln_${Math.floor(Math.random()*1e5)}`,item:we,itemName:Je,qtyRequested:st,qtyReceived:st,remark:ge.remark||""}}),oe=new Date().toISOString().slice(0,10);D({open:!0,po:y,grnNo:_r(oe),receivedBy:"",receivedDate:oe,challanNo:"",billNo:"",items:B})},J=(y,B,oe)=>{D(ge=>{const we=[...ge.items||[]];return we[y]={...we[y],[B]:oe},{...ge,items:we}})},Se=async()=>{var st,Bt;const{po:y,grnNo:B,receivedBy:oe,receivedDate:ge,challanNo:we,billNo:Te,items:Je}=ne;if(y){if(!B)return v("GRN No. is required");if(!we.trim())return v("Challan No is required");if(!Je||Je.length===0)return v("GRN must include at least one item");for(const Tt of Je){if(!Tt.item)return v("Each GRN line must have an item");if(Tt.qtyReceived==null||Number(Tt.qtyReceived)<0)return v("Each GRN line received qty must be >= 0")}try{_(!0);const Tt=Je.map(ze=>({item:ze.item,qtyRequested:Number(ze.qtyRequested||0),qtyReceived:Number(ze.qtyReceived||0),remark:ze.remark||""})),jr={grnNo:B,receivedBy:oe||void 0,receivedDate:ge,challanNo:we.trim(),billNo:(Te==null?void 0:Te.trim())||void 0,items:Tt,store:y.store||void 0},at=await Z.post(`${kn}/api/po/${y._id||y.id}/create-grn`,jr).catch(()=>null);if(at!=null&&at.data){const ze=at.data.po||at.data,St=at.data.grn||ze.grn||null;r(xa=>xa.map(Sr=>Sr._id===(y._id||y.id)||Sr.id===(y._id||y.id)?ze:Sr));const va=(St==null?void 0:St._id)||(St==null?void 0:St.grnNo)||B;va&&W(`/super-admin/grn/${va}`)}else r(ze=>ze.map(St=>St._id===(y._id||y.id)?{...St,grn:{grnNo:B}}:St)),W(`/super-admin/grn/${B}`);D({open:!1,po:null,grnNo:_r(hn),receivedBy:"",receivedDate:hn,challanNo:"",billNo:"",items:[]})}catch(Tt){console.error("create grn error",Tt),v(((Bt=(st=Tt.response)==null?void 0:st.data)==null?void 0:Bt.message)||"Failed to create GRN")}finally{_(!1)}}},Pe=y=>{const B=y._id||y.id||y.poNo||y.po_number;B&&W(`/super-admin/po/${B}`)},Ae=y=>{const B=y._id||y.id||y.grnNo||y.grn_number;B&&W(`/super-admin/grn/${B}`)},Le=y=>{var B;return((B=i.find(oe=>oe._id===y||oe.id===y))==null?void 0:B.name)||y||"-"},$e=y=>{var B;return((B=l.find(oe=>oe._id===y||oe.id===y))==null?void 0:B.name)||y||"-"},mt=y=>{var B;return((B=u.find(oe=>oe._id===y||oe.id===y))==null?void 0:B.name)||y||"-"},S=y=>{var B;return((B=s.find(oe=>(oe._id||oe.id)===y))==null?void 0:B.requisitionNo)||y||"-"},pe=y=>{var B;return((B=g.find(oe=>oe._id===y||oe.id===y))==null?void 0:B.name)||y||"-"},fe=t.filter(y=>{if(U!=="ALL"&&(y.status||"").toString().toLowerCase()!==U.toLowerCase())return!1;if(ce!=="ALL"){const B=!!y.grn,oe=(y.status||"").toString().toLowerCase()==="approved";if(ce==="NeedsGRN"&&B||ce==="HasGRN"&&!B||ce==="Approved"&&!oe||ce==="Open"&&(y.status||"").toString().toLowerCase()!=="open")return!1}if(M&&!(y.resort||y.resortName||y.resortId||"").toString().toLowerCase().includes(M.toString().toLowerCase())||$&&!(y.vendor||"").toString().toLowerCase().includes($.toString().toLowerCase()))return!1;if(k){const B=y.poDate?new Date(y.poDate).setHours(0,0,0,0):null,oe=new Date(k).setHours(0,0,0,0);if(!B||B<oe)return!1}if(O){const B=y.poDate?new Date(y.poDate).setHours(0,0,0,0):null,oe=new Date(O).setHours(0,0,0,0);if(!B||B>oe)return!1}if(le&&le.trim()){const B=le.trim().toLowerCase();if(![y.poNo,y.po_number,y.requisitionId,y.vendor,y.store,y.resort].filter(Boolean).join(" ").toLowerCase().includes(B))return!1}return!0}),ye=()=>{q("ALL"),L(""),G(""),Y(""),I(""),T("ALL"),h("")},xe={display:"inline-block",marginLeft:6,cursor:"pointer",padding:"6px",borderRadius:6,position:"relative"};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",style:{alignItems:"flex-start"},children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Purchase Orders"}),n.jsx("p",{children:"Generate & manage purchase orders created from approved requisitions."})]}),n.jsx("div",{style:{display:"flex",gap:8},children:n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>{se(),ye()},children:"Refresh"})})]}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:12},children:[n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Status",n.jsxs("select",{value:U,onChange:y=>q(y.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"ALL",children:"All"}),n.jsx("option",{value:"Open",children:"Open"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Closed",children:"Closed"})]})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Action",n.jsxs("select",{value:ce,onChange:y=>T(y.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"ALL",children:"All"}),n.jsx("option",{value:"NeedsGRN",children:"Needs GRN"}),n.jsx("option",{value:"HasGRN",children:"Has GRN"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Open",children:"Open"})]})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Resort",n.jsxs("select",{value:M,onChange:y=>Y(y.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"",children:"All Resorts"}),l.length>0?l.map(y=>n.jsx("option",{value:y._id||y.name||y.id,children:y.name},y._id||y.id)):Array.from(new Set(t.map(y=>y.resort))).map(y=>n.jsx("option",{value:y,children:y},y))]})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Vendor",n.jsxs("select",{value:$,onChange:y=>I(y.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"",children:"All Vendors"}),i.length>0?i.map(y=>n.jsx("option",{value:y._id||y.name||y.id,children:y.name},y._id||y.id)):Array.from(new Set(t.map(y=>y.vendor))).map(y=>n.jsx("option",{value:y,children:y},y))]})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Date from",n.jsx("input",{type:"date",value:k,onChange:y=>L(y.target.value),style:{marginLeft:6}})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Date to",n.jsx("input",{type:"date",value:O,onChange:y=>G(y.target.value),style:{marginLeft:6}})]}),n.jsxs("label",{style:{flex:1,minWidth:220},children:["Search",n.jsx("input",{placeholder:"PO no / requisition / vendor / store",value:le,onChange:y=>h(y.target.value),style:{marginLeft:8,width:"80%"}})]}),n.jsx("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:n.jsx("button",{className:"sa-secondary-button",onClick:ye,children:"Clear"})})]}),j&&n.jsx("div",{className:"sa-modal-error",children:j}),n.jsx("div",{className:"sa-card",children:b?n.jsx("div",{children:"Loading purchase orders..."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{marginBottom:8,color:"#6b7280",fontSize:"0.9rem"},children:["Showing ",fe.length," of ",t.length," purchase orders"]}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"PO No."}),n.jsx("th",{children:"Requisition"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Resort"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:fe.map(y=>n.jsxs("tr",{children:[n.jsx("td",{style:{cursor:"pointer",color:"#0b69ff"},onClick:()=>Pe(y),children:y.poNo||y.po_number||y._id||"-"}),n.jsx("td",{children:S(y.requisitionId)}),n.jsx("td",{children:Le(y.vendor)}),n.jsx("td",{children:$e(y.resort)}),n.jsx("td",{children:mt(y.store)}),n.jsx("td",{children:(y.poDate||y.date||"").slice(0,10)}),n.jsx("td",{children:y.status||"Open"}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("span",{style:xe,onClick:()=>Pe(y),title:"View",children:n.jsx("i",{className:"ri-eye-line"})}),n.jsx("span",{style:xe,onClick:()=>ue(y),title:"Create (Duplicate)",children:n.jsx("i",{className:"ri-file-copy-line"})}),n.jsx("span",{style:xe,onClick:()=>Re(y),title:"Edit",children:n.jsx("i",{className:"ri-edit-line"})}),n.jsx("span",{style:{...xe,background:y.status==="Approved"||y.status==="APPROVED"?"#052e16":"transparent"},onClick:()=>E(y),title:y.status==="Approved"||y.status==="APPROVED"?"Already approved":"Approve",children:n.jsx("i",{className:"ri-checkbox-circle-line"})}),y.grn?n.jsx("span",{style:xe,title:"View GRN",onClick:()=>Ae(y.grn),children:n.jsx("i",{className:"ri-inbox-line"})}):n.jsx("span",{style:xe,title:"Create GRN",onClick:()=>re(y),children:n.jsx("i",{className:"ri-add-box-line"})}),n.jsx("span",{style:xe,onClick:()=>ee(y),title:"Delete",children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},y._id||y.id||y.poNo))})]})]})}),N&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!R&&(C(!1),H(null)),children:n.jsxs("div",{className:"sa-modal",onClick:y=>y.stopPropagation(),children:[n.jsx("h3",{children:V?"Edit PO":"Create PO"}),n.jsx("p",{className:"sa-modal-sub",children:"Create or edit a purchase order."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:A,children:[n.jsxs("label",{children:["Approved Requisition (optional)",n.jsxs("select",{name:"requisitionId",value:F.requisitionId||"",onChange:y=>Ce(y.target.value),children:[n.jsx("option",{value:"",children:"-- Select Approved Requisition --"}),s.map(y=>{var B;return n.jsxs("option",{value:y._id||y.id,children:[y.requisitionNo||y._id||y.id,"  ",y.resortName||y.resort||"-","  ",((B=y.date)==null?void 0:B.slice(0,10))||"-"]},y._id||y.id)})]}),n.jsx("small",{style:{display:"block",color:"#6b7280",marginTop:6},children:"Only approved requisitions that don't already have PO/GRN are listed."})]}),n.jsxs("label",{children:["PO No.",n.jsx("input",{name:"poNo",value:F.poNo||"",onChange:ve,placeholder:"PO-YYYY-XXX"})]}),n.jsxs("label",{children:["Vendor",n.jsxs("select",{name:"vendor",value:F.vendor||"",onChange:ve,required:!0,children:[n.jsx("option",{value:"",children:"-- Select Vendor --"}),i.map(y=>n.jsx("option",{value:y._id||y.id,children:y.name},y._id||y.id))]})]}),n.jsxs("label",{children:["Resort",n.jsxs("select",{name:"resort",value:F.resort||"",onChange:ve,required:!0,children:[n.jsx("option",{value:"",children:"-- Select Resort --"}),l.map(y=>n.jsx("option",{value:y._id||y.id,children:y.name},y._id||y.id))]})]}),n.jsxs("label",{children:["Delivery Store",n.jsxs("select",{name:"store",value:F.store||"",onChange:ve,required:!0,children:[n.jsx("option",{value:"",children:"-- Select Store --"}),u.filter(y=>!F.resort||y.resort===F.resort).map(y=>n.jsx("option",{value:y._id||y.id,children:y.name},y._id||y.id))]})]}),n.jsxs("label",{children:["PO Date",n.jsx("input",{type:"date",name:"poDate",value:F.poDate,onChange:ve,required:!0})]}),n.jsxs("div",{style:{marginTop:10},children:[n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Rate"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{})]})}),n.jsx("tbody",{children:F.lines.map((y,B)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("select",{value:y.item||"",onChange:oe=>Ne(B,"item",oe.target.value),required:!0,children:[n.jsx("option",{value:"",children:"-- Select Item --"}),g.map(oe=>n.jsx("option",{value:oe._id||oe.id,children:oe.name},oe._id||oe.id))]})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"1",value:y.qty,onChange:oe=>Ne(B,"qty",oe.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:y.rate,onChange:oe=>Ne(B,"rate",oe.target.value),required:!0})}),n.jsx("td",{style:{textAlign:"center"},children:y.amount}),n.jsx("td",{children:F.lines.length>1&&n.jsx("button",{type:"button",onClick:()=>ie(B),children:"Remove"})})]},y.lineId))})]}),n.jsx("button",{type:"button",onClick:P,style:{marginTop:6},children:"+ Add Line"})]}),j&&n.jsx("div",{className:"sa-modal-error",style:{marginTop:8},children:j}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!R&&(C(!1),H(null)),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:R,children:R?"Saving...":V?"Update PO":"Save PO"})]})]})]})}),ne.open&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!R&&D({open:!1,po:null,grnNo:_r(hn),receivedBy:"",receivedDate:hn,challanNo:"",billNo:"",items:[]}),children:n.jsxs("div",{className:"sa-modal large",onClick:y=>y.stopPropagation(),style:{maxWidth:980},children:[n.jsx("h3",{children:"Create GRN"}),n.jsx("p",{className:"sa-modal-sub",children:"Record goods received against the approved purchase order."}),n.jsxs("div",{className:"sa-modal-form",children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[n.jsxs("label",{children:["Approved PO (read-only)",n.jsx("input",{value:((w=ne.po)==null?void 0:w.poNo)||((he=ne.po)==null?void 0:he.po_number)||((be=ne.po)==null?void 0:be._id)||"",readOnly:!0})]}),n.jsxs("label",{children:["GRN No.",n.jsx("input",{value:ne.grnNo||"",onChange:y=>D(B=>({...B,grnNo:y.target.value}))})]}),n.jsxs("label",{children:["Received By",n.jsx("input",{value:ne.receivedBy||"",onChange:y=>D(B=>({...B,receivedBy:y.target.value}))})]}),n.jsxs("label",{children:["Received Date",n.jsx("input",{type:"date",value:ne.receivedDate||hn,onChange:y=>{const B=y.target.value;D(oe=>({...oe,receivedDate:B,grnNo:_r(B)}))}})]}),n.jsxs("label",{children:["Challan No ",n.jsx("span",{style:{color:"red"},children:" *"}),n.jsx("input",{value:ne.challanNo||"",onChange:y=>D(B=>({...B,challanNo:y.target.value})),required:!0})]}),n.jsxs("label",{children:["Bill No (optional)",n.jsx("input",{value:ne.billNo||"",onChange:y=>D(B=>({...B,billNo:y.target.value}))})]}),n.jsxs("label",{children:["Store (from PO)",n.jsx("input",{value:mt((ke=ne.po)==null?void 0:ke.store)||"",readOnly:!0})]})]}),n.jsx("div",{style:{marginTop:12},children:n.jsxs("table",{className:"sa-table",style:{width:"100%"},children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"45%"},children:"Item"}),n.jsx("th",{style:{width:"12%"},children:"Requested Qty"}),n.jsx("th",{style:{width:"12%"},children:"Received Qty"}),n.jsx("th",{style:{width:"12%"},children:"Balance"}),n.jsx("th",{style:{width:"19%"},children:"Remark"})]})}),n.jsx("tbody",{children:(ne.items||[]).map((y,B)=>n.jsxs("tr",{children:[n.jsx("td",{children:y.itemName||pe(y.item)}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:y.qtyRequested,readOnly:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:y.qtyReceived,onChange:oe=>{const ge=Number(oe.target.value||0);J(B,"qtyReceived",ge)}})}),n.jsx("td",{children:Number((y.qtyRequested||0)-(y.qtyReceived||0)).toFixed(2)}),n.jsx("td",{children:n.jsx("input",{value:y.remark||"",onChange:oe=>J(B,"remark",oe.target.value)})})]},y.lineId||B))})]})}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>D({open:!1,po:null,grnNo:_r(hn),receivedBy:"",receivedDate:hn,challanNo:"",billNo:"",items:[]}),children:"Cancel"}),n.jsx("button",{type:"button",className:"sa-primary-button",onClick:Se,disabled:R,children:R?"Creating...":"Create GRN"})]})]})]})}),n.jsx("style",{children:`
        td .action-btn .tooltip { display:none; }
        td .action-btn:hover .tooltip { display:block; }
        .sa-modal.large { max-height: 85vh; overflow: auto; }
      `})]})},$a="http://localhost:5000",tm=()=>({lineId:`grn_${Date.now()}_${Math.floor(Math.random()*1e3)}`,item:"",poQty:0,receivedQty:"",rejectedQty:"",acceptedQty:0}),Uj=()=>{const{activeResort:e}=m.useContext(ms),[t,r]=m.useState([]),[s,a]=m.useState([]),[i,o]=m.useState([]),[l,c]=m.useState([]),[u,d]=m.useState([]),[g,f]=m.useState([]),[b,p]=m.useState(!1),[R,_]=m.useState(!1),[j,v]=m.useState(""),[N,C]=m.useState(!1),[V,H]=m.useState(null),[F,K]=m.useState({resort:"",store:"",vendor:"",poId:"",grnDate:new Date().toISOString().slice(0,10),lines:[tm()],grnNo:""}),ne=bn(),[D,W]=m.useState("ALL"),[U,q]=m.useState("ALL"),[k,L]=m.useState(""),[O,G]=m.useState(""),[M,Y]=m.useState(""),[$,I]=m.useState(""),[ce,T]=m.useState("");function le(A){const ee=A.includes("?")?"&":"?";return e&&e!=="all"?`${$a}${A}${ee}resort=${encodeURIComponent(e)}`:`${$a}${A}`}const h=async()=>{var A,ee;try{p(!0),v("");const[E,re,J,Se,Pe,Ae]=await Promise.all([Z.get(le("/api/grn")),Z.get(le("/api/po")),Z.get(le("/api/vendors")),Z.get(`${$a}/api/resorts`),Z.get(le("/api/stores")),Z.get(le("/api/items"))]),$e=(Array.isArray(E.data)?E.data:[]).filter(mt=>mt.poId||mt.requisitionId);r($e),a(Array.isArray(re.data)?re.data:[]),o(Array.isArray(J.data)?J.data:[]),c(Array.isArray(Se.data)?Se.data:[]),d(Array.isArray(Pe.data)?Pe.data:[]),f(Array.isArray(Ae.data)?Ae.data:[])}catch(E){console.error("GRN load error",E);const re=((ee=(A=E==null?void 0:E.response)==null?void 0:A.data)==null?void 0:ee.message)||(E==null?void 0:E.message)||"Failed to load data from backend";v(re),r([]),a([]),o([]),c([]),d([]),f([])}finally{p(!1)}};m.useEffect(()=>{Y(e&&e!=="all"?e:""),h()},[e]);const X=A=>{const ee=A._id||A.grnNo;ee&&ne(`/super-admin/grn/${ee}`)},se=A=>{if(A.status==="Approved")return alert("Approved GRN cannot be edited");H(A._id||A.id),K({grnNo:A.grnNo||"",resort:A.resort||"",store:A.store||"",vendor:A.vendor||"",poId:A.poId||"",grnDate:(A.grnDate||A.date||new Date().toISOString()).slice(0,10),lines:A.lines&&A.lines.map(ee=>({lineId:ee.lineId||`grn_${Math.floor(Math.random()*1e5)}`,item:ee.item||"",poQty:ee.poQty||0,receivedQty:ee.receivedQty||"",rejectedQty:ee.rejectedQty||"",acceptedQty:ee.acceptedQty||0}))||[tm()]}),C(!0)},Ce=async A=>{if(A.status==="Approved")return alert("Approved GRN cannot be deleted");if(window.confirm(` Delete GRN ${A.grnNo}?`))try{r(ee=>ee.filter(E=>E._id!==A._id)),await Z.delete(`${$a}/api/grn/${A._id}`)}catch(ee){console.error(ee),v("Failed to delete"),await h()}},Re=A=>{var ee;return((ee=i.find(E=>E._id===A||E.id===A))==null?void 0:ee.name)||A||"-"},ue=A=>{var ee;return((ee=l.find(E=>E._id===A||E.id===A))==null?void 0:ee.name)||A||"-"},ve=A=>{var ee;return((ee=u.find(E=>E._id===A||E.id===A))==null?void 0:ee.name)||A||"-"},Ne=A=>{var ee;return((ee=s.find(E=>(E._id||E.id)===A))==null?void 0:ee.poNo)||A||"-"},ie=t.filter(A=>{if(D!=="ALL"&&(A.status||"").toString().toLowerCase()!==D.toLowerCase())return!1;if(U!=="ALL"){const ee=(A.status||"").toString().toLowerCase()==="approved";if(U==="Approved"&&!ee||U==="NeedsAction"&&ee)return!1}if(M){const ee=A.resort||A.resortName||"";if(!String(ee).toLowerCase().includes(String(M).toLowerCase()))return!1}if($){const ee=A.vendor||"";if(!String(ee).toLowerCase().includes(String($).toLowerCase()))return!1}if(k){const ee=A.grnDate?new Date(A.grnDate).setHours(0,0,0,0):null,E=new Date(k).setHours(0,0,0,0);if(!ee||ee<E)return!1}if(O){const ee=A.grnDate?new Date(A.grnDate).setHours(0,0,0,0):null,E=new Date(O).setHours(0,0,0,0);if(!ee||ee>E)return!1}if(ce&&ce.trim()){const ee=ce.trim().toLowerCase();if(![A.grnNo,A.poId,A.vendor,A.store,A.resort].filter(Boolean).join(" ").toLowerCase().includes(ee))return!1}return!0});return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",style:{alignItems:"flex-start"},children:[n.jsxs("div",{children:[n.jsx("h2",{children:"GRN (Goods Receipt)"}),n.jsx("p",{children:"GRNs created from Purchase Orders. Manual GRN creation disabled."})]}),n.jsx("div",{style:{display:"flex",gap:8},children:n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>{h()},children:"Refresh"})})]}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:12},children:[n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Status",n.jsxs("select",{value:D,onChange:A=>W(A.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"ALL",children:"All"}),n.jsx("option",{value:"Open",children:"Open"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Closed",children:"Closed"})]})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Action",n.jsxs("select",{value:U,onChange:A=>q(A.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"ALL",children:"All"}),n.jsx("option",{value:"NeedsAction",children:"Needs Action"}),n.jsx("option",{value:"Approved",children:"Approved"})]})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Resort",n.jsxs("select",{value:M,onChange:A=>Y(A.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"",children:"All Resorts"}),l.length>0?l.map(A=>n.jsx("option",{value:A._id||A.name||A.id,children:A.name},A._id||A.id)):Array.from(new Set(t.map(A=>A.resort))).map(A=>n.jsx("option",{value:A,children:A},A))]})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Vendor",n.jsxs("select",{value:$,onChange:A=>I(A.target.value),style:{marginLeft:6},children:[n.jsx("option",{value:"",children:"All Vendors"}),i.length>0?i.map(A=>n.jsx("option",{value:A._id||A.name||A.id,children:A.name},A._id||A.id)):Array.from(new Set(t.map(A=>A.vendor))).map(A=>n.jsx("option",{value:A,children:A},A))]})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Date from",n.jsx("input",{type:"date",value:k,onChange:A=>L(A.target.value),style:{marginLeft:6}})]}),n.jsxs("label",{style:{fontSize:"0.85rem"},children:["Date to",n.jsx("input",{type:"date",value:O,onChange:A=>G(A.target.value),style:{marginLeft:6}})]}),n.jsxs("label",{style:{flex:1,minWidth:220},children:["Search",n.jsx("input",{placeholder:"GRN / PO / vendor / store",value:ce,onChange:A=>T(A.target.value),style:{marginLeft:8,width:"80%"}})]}),n.jsx("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:n.jsx("button",{className:"sa-secondary-button",onClick:()=>{W("ALL"),q("ALL"),L(""),G(""),Y(""),I(""),T("")},children:"Clear"})})]}),n.jsx("div",{className:"sa-card",children:b?n.jsx("div",{children:"Loading"}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"GRN No"}),n.jsx("th",{children:"PO No"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Resort"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:ie.map(A=>{var ee;return n.jsxs("tr",{children:[n.jsx("td",{onClick:()=>X(A),style:{cursor:"pointer",color:"#0b69ff"},children:A.grnNo}),n.jsx("td",{children:Ne(A.poId||A.po)}),n.jsx("td",{children:Re(A.vendor)}),n.jsx("td",{children:ue(A.resort)}),n.jsx("td",{children:ve(A.store)}),n.jsx("td",{children:(ee=A.grnDate)==null?void 0:ee.slice(0,10)}),n.jsx("td",{children:A.status||"Open"}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("span",{style:{cursor:"pointer",padding:6},title:"View",onClick:()=>X(A),children:n.jsx("i",{className:"ri-eye-line"})}),A.status==="Approved"?n.jsx("span",{style:{opacity:.4,padding:6},children:n.jsx("i",{className:"ri-edit-line"})}):n.jsx("span",{style:{cursor:"pointer",padding:6},title:"Edit",onClick:()=>se(A),children:n.jsx("i",{className:"ri-edit-line"})}),A.status==="Approved"?n.jsx("span",{style:{opacity:.4,padding:6},children:n.jsx("i",{className:"ri-delete-bin-6-line"})}):n.jsx("span",{style:{cursor:"pointer",padding:6},title:"Delete",onClick:()=>Ce(A),children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},A._id)})})]})})]})},$j=()=>{const[e,t]=m.useState("snapshot"),[r,s]=m.useState({resort:"all",store:"all",item:"",from:"",to:""}),a=i=>{s(o=>({...o,[i.target.name]:i.target.value}))};return n.jsxs("div",{className:"sa-page",children:[n.jsx("div",{className:"sa-page-header",children:n.jsxs("div",{children:[n.jsx("h2",{children:"Inventory"}),n.jsx("p",{children:"High level stock overview & reorder alerts across all resorts."})]})}),n.jsxs("div",{className:"sa-card sa-report-filters",children:[n.jsxs("div",{className:"sa-tabs",children:[n.jsx("button",{type:"button",className:`sa-tab ${e==="snapshot"?"active":""}`,onClick:()=>t("snapshot"),children:"Snapshot"}),n.jsx("button",{type:"button",className:`sa-tab ${e==="store"?"active":""}`,onClick:()=>t("store"),children:"Store-wise Stock"}),n.jsx("button",{type:"button",className:`sa-tab ${e==="ledger"?"active":""}`,onClick:()=>t("ledger"),children:"Item Stock Ledger"}),n.jsx("button",{type:"button",className:`sa-tab ${e==="reorder"?"active":""}`,onClick:()=>t("reorder"),children:"Low Stock / Reorder"})]}),n.jsxs("div",{className:"sa-report-filter-row",children:[n.jsxs("div",{className:"sa-report-filter-group",children:[n.jsx("label",{children:"Resort"}),n.jsxs("select",{name:"resort",value:r.resort,onChange:a,children:[n.jsx("option",{value:"all",children:"All Resorts"}),n.jsx("option",{value:"beachside",children:"Beachside Resort"}),n.jsx("option",{value:"hillview",children:"Hillview Resort"})]})]}),(e==="store"||e==="ledger"||e==="reorder")&&n.jsxs("div",{className:"sa-report-filter-group",children:[n.jsx("label",{children:"Store"}),n.jsxs("select",{name:"store",value:r.store,onChange:a,children:[n.jsx("option",{value:"all",children:"All Stores"}),n.jsx("option",{value:"main",children:"Main Store"}),n.jsx("option",{value:"bar",children:"Bar Store"}),n.jsx("option",{value:"hk",children:"HK Store"})]})]}),e==="ledger"&&n.jsxs("div",{className:"sa-report-filter-group",children:[n.jsx("label",{children:"Item"}),n.jsx("input",{name:"item",value:r.item,onChange:a,placeholder:"Search item..."})]}),(e==="store"||e==="ledger"||e==="reorder")&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"sa-report-filter-group",children:[n.jsx("label",{children:"From"}),n.jsx("input",{type:"date",name:"from",value:r.from,onChange:a})]}),n.jsxs("div",{className:"sa-report-filter-group",children:[n.jsx("label",{children:"To"}),n.jsx("input",{type:"date",name:"to",value:r.to,onChange:a})]})]})]})]}),e==="snapshot"&&n.jsx(qj,{}),e==="store"&&n.jsx(Bj,{}),e==="ledger"&&n.jsx(zj,{}),e==="reorder"&&n.jsx(Vj,{})]})},qj=()=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"sa-grid-4",children:[n.jsxs("div",{className:"sa-card sa-report-kpi",children:[n.jsx("div",{className:"sa-report-kpi-label",children:"Total Stock Value"}),n.jsx("div",{className:"sa-report-kpi-value",children:" 18,40,000"}),n.jsx("div",{className:"sa-report-kpi-sub",children:"All resorts  Last valuation"})]}),n.jsxs("div",{className:"sa-card sa-report-kpi",children:[n.jsx("div",{className:"sa-report-kpi-label",children:"Items in Stock"}),n.jsx("div",{className:"sa-report-kpi-value",children:"462"}),n.jsx("div",{className:"sa-report-kpi-sub",children:"Unique SKUs"})]}),n.jsxs("div",{className:"sa-card sa-report-kpi",children:[n.jsx("div",{className:"sa-report-kpi-label",children:"Slow Moving"}),n.jsx("div",{className:"sa-report-kpi-value",children:"27"}),n.jsx("div",{className:"sa-report-kpi-sub",children:"No movement in 90 days"})]}),n.jsxs("div",{className:"sa-card sa-report-kpi",children:[n.jsx("div",{className:"sa-report-kpi-label",children:"Near Expiry"}),n.jsx("div",{className:"sa-report-kpi-value",children:"9"}),n.jsx("div",{className:"sa-report-kpi-sub",children:"Next 30 days"})]})]}),n.jsxs("div",{className:"sa-grid-2",style:{marginTop:16},children:[n.jsxs("div",{className:"sa-card",children:[n.jsx("div",{className:"sa-card-title",children:"Top 5 items by value"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Value"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Imported Whisky 750ml"}),n.jsx("td",{children:"Beachside - Bar Store"}),n.jsx("td",{children:"120"}),n.jsx("td",{children:" 3,60,000"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"House Wine"}),n.jsx("td",{children:"Beachside - Bar Store"}),n.jsx("td",{children:"80"}),n.jsx("td",{children:" 1,80,000"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Room Linen Set"}),n.jsx("td",{children:"Hillview - HK Store"}),n.jsx("td",{children:"150"}),n.jsx("td",{children:" 1,25,000"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Coffee Beans"}),n.jsx("td",{children:"Beachside - Main Store"}),n.jsx("td",{children:"60"}),n.jsx("td",{children:" 95,000"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"LED Bulbs"}),n.jsx("td",{children:"Hillview - Engineering"}),n.jsx("td",{children:"200"}),n.jsx("td",{children:" 75,000"})]})]})]})]}),n.jsxs("div",{className:"sa-card",children:[n.jsx("div",{className:"sa-card-title",children:"Slow moving items"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Last Issue"}),n.jsx("th",{children:"Qty in Stock"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Decorative Candles"}),n.jsx("td",{children:"Beachside - Main Store"}),n.jsx("td",{children:"12 Aug 2025"}),n.jsx("td",{children:"45"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Spare Kettles"}),n.jsx("td",{children:"Hillview - HK Store"}),n.jsx("td",{children:"03 Jul 2025"}),n.jsx("td",{children:"18"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Engineering Tool Kit"}),n.jsx("td",{children:"City Hotel - Engineering"}),n.jsx("td",{children:"10 Jun 2025"}),n.jsx("td",{children:"6"})]})]})]})]})]})]}),Bj=()=>{const e=[{resort:"Beachside Resort",store:"Main Store",item:"Mineral Water 1L",uom:"Bottle",closing:320,value:" 9,600"},{resort:"Beachside Resort",store:"Bar Store",item:"Imported Whisky 750ml",uom:"Bottle",closing:120,value:" 3,60,000"},{resort:"Hillview Resort",store:"HK Store",item:"Room Freshener",uom:"Bottle",closing:140,value:" 21,000"}];return n.jsxs("div",{className:"sa-card",children:[n.jsx("div",{className:"sa-card-title",children:"Store-wise current stock"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Resort"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Item"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Closing Qty"}),n.jsx("th",{children:"Stock Value"})]})}),n.jsx("tbody",{children:e.map((t,r)=>n.jsxs("tr",{children:[n.jsx("td",{children:t.resort}),n.jsx("td",{children:t.store}),n.jsx("td",{children:t.item}),n.jsx("td",{children:t.uom}),n.jsx("td",{children:t.closing}),n.jsx("td",{children:t.value})]},r))})]})]})},zj=()=>{const e=[{date:"20 Nov 2025",docType:"GRN",ref:"GRN-2025-0060",store:"Beachside - Main Store",inQty:80,outQty:0,balance:320},{date:"18 Nov 2025",docType:"Issue",ref:"ISS-2025-0214",store:"Beachside - F&B",inQty:0,outQty:40,balance:240},{date:"15 Nov 2025",docType:"GRN",ref:"GRN-2025-0052",store:"Beachside - Main Store",inQty:120,outQty:0,balance:280}];return n.jsxs("div",{className:"sa-card",children:[n.jsx("div",{className:"sa-card-title",children:"Item stock ledger (example item)"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Doc Type"}),n.jsx("th",{children:"Ref No"}),n.jsx("th",{children:"Store / Dept"}),n.jsx("th",{children:"In"}),n.jsx("th",{children:"Out"}),n.jsx("th",{children:"Balance"})]})}),n.jsx("tbody",{children:e.map((t,r)=>n.jsxs("tr",{children:[n.jsx("td",{children:t.date}),n.jsx("td",{children:t.docType}),n.jsx("td",{children:t.ref}),n.jsx("td",{children:t.store}),n.jsx("td",{children:t.inQty}),n.jsx("td",{children:t.outQty}),n.jsx("td",{children:t.balance})]},r))})]})]})},Vj=()=>{const e=[{resort:"Beachside Resort",store:"Main Store",item:"Mineral Water 1L",uom:"Bottle",min:200,reorder:250,max:600,stock:180,status:"Below Min"},{resort:"Hillview Resort",store:"HK Store",item:"Room Linen Set",uom:"Set",min:80,reorder:100,max:200,stock:70,status:"Below Min"},{resort:"Beachside Resort",store:"Bar Store",item:"House Wine",uom:"Bottle",min:40,reorder:60,max:150,stock:45,status:"Reorder"}];return n.jsxs("div",{className:"sa-card",children:[n.jsx("div",{className:"sa-card-title",children:"Items below min / reorder level"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Resort"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Item"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Min"}),n.jsx("th",{children:"Reorder"}),n.jsx("th",{children:"Max"}),n.jsx("th",{children:"Stock"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Create"})]})}),n.jsx("tbody",{children:e.map((t,r)=>n.jsxs("tr",{children:[n.jsx("td",{children:t.resort}),n.jsx("td",{children:t.store}),n.jsx("td",{children:t.item}),n.jsx("td",{children:t.uom}),n.jsx("td",{children:t.min}),n.jsx("td",{children:t.reorder}),n.jsx("td",{children:t.max}),n.jsx("td",{children:t.stock}),n.jsx("td",{children:n.jsx("span",{className:t.status==="Below Min"?"sa-badge sa-badge-danger":"sa-badge sa-badge-warning",children:t.status})}),n.jsx("td",{children:n.jsxs("button",{className:"sa-table-action",children:[n.jsx("i",{className:"ri-add-line"}),"Req."]})})]},r))})]})]})},kr="http://localhost:5000",nm=[{id:"BY_PORTION",name:"By Portion",type:"RECIPE_PORTION"},{id:"BY_RECIPE_LUMPSUM",name:"By Recipe Lumpsum",type:"RECIPE_LUMPSUM"}],Rs=[{_id:"item_rice",name:"Rice",uom:"Kg",itemCategory:"Pantry"},{_id:"item_oil",name:"Oil",uom:"Ltr",itemCategory:"Cooking Oil"},{_id:"item_chicken",name:"Chicken",uom:"Kg",itemCategory:"Meat"},{_id:"item_paneer",name:"Paneer",uom:"Kg",itemCategory:"Dairy"},{_id:"item_spice",name:"Spice Mix",uom:"Kg",itemCategory:"Pantry"}],qa=()=>({id:`ln_${Date.now()}_${Math.floor(Math.random()*1e3)}`,itemCategory:"",itemId:"",qty:""}),rm=["Kg","Ltr","Nos","Pax"],Qj=()=>{var ee;const[e,t]=m.useState([]),[r,s]=m.useState([]),[a,i]=m.useState([]),[o,l]=m.useState(!1),[c,u]=m.useState(""),[d,g]=m.useState(""),[f,b]=m.useState(""),[p,R]=m.useState(!1),[_,j]=m.useState(null),[v,N]=m.useState(!1),[C,V]=m.useState(null),H=()=>({code:"",recipeCategoryId:"",type:"",name:"",yieldQty:"",yieldUom:"",lines:[qa()]}),[F,K]=m.useState(H()),[ne,D]=m.useState(!1),[W,U]=m.useState(""),q=async()=>{try{l(!0),u("");const[E,re,J]=await Promise.all([Z.get(`${kr}/api/recipes`).catch(()=>({data:[]})),Z.get(`${kr}/api/items`).catch(()=>({data:Rs})),Z.get(`${kr}/api/item-categories`).catch(()=>({data:null}))]),Se=Array.isArray(E.data)?E.data:[],Pe=Array.isArray(re.data)?re.data:Rs;let Ae=[];const Le=J==null?void 0:J.data;let $e=[];if(Array.isArray(Le)?$e=Le:Le&&Array.isArray(Le.itemCategories)?$e=Le.itemCategories:Le&&Array.isArray(Le.categories)?$e=Le.categories:Le&&Array.isArray(Le.data)&&($e=Le.data),$e.length&&(Ae=$e.map(te=>({id:(te._id||te.id||te.code||te.name).toString(),name:te.name||te.code||te._id||te.id}))),!Ae.length){const te=new Map;(Pe.length?Pe:Rs).forEach(fe=>{const xe=(fe.itemCategoryId||fe.itemCategory||fe.categoryId||fe.item_category||fe.group||"Uncategorized").toString();te.has(xe)||te.set(xe,{id:xe,name:xe})}),Ae=Array.from(te.values())}const mt=new Map(Ae.map(te=>[te.id.toString(),te.name])),S=Pe.map(te=>{const fe=te.uom||te.measurement||te.unit||te.unitOfMeasure||te.unit_of_measure||te.uomName||te.measurementUnit||"",ye=te.itemCategoryId||te.itemCategory||te.categoryId||te.item_category||te.group||"",xe=ye?ye.toString():"",w=mt.get(xe)||te.itemCategoryName||te.categoryName||xe;return{_id:te._id||te.id,id:te.id||te._id,name:te.name||te.title||"",uom:fe,itemCategoryId:xe,itemCategoryName:w,...te}}),pe=Se.map(te=>({_id:te._id||te.id,code:te.code||"",name:te.name||"",recipeCategoryId:te.recipeCategoryId||te.recipeCategory||"",type:te.type||"",yieldQty:te.yieldQty??te.yield_qty??"",yieldUom:te.yieldUom||te.yield_uom||"",lines:Array.isArray(te.lines)?te.lines.map(fe=>{const ye=S.find(w=>w._id===fe.itemId||w.id===fe.itemId),xe=fe.itemCategoryId||fe.itemCategory||fe.categoryId||(ye==null?void 0:ye.itemCategoryId)||"";return{id:fe.id||`ln_${Math.floor(Math.random()*1e5)}`,itemCategory:xe?xe.toString():"",itemId:fe.itemId||fe.item||"",qty:fe.qty??""}}):[]}));t(pe),s(S),i(Ae)}catch(E){console.error(E),u("Failed to load recipe data"),t([]),s(Rs),i(Array.from(new Set(Rs.map(re=>re.itemCategory||"Uncategorized"))).map(re=>({id:re.toString(),name:re.toString()})))}finally{l(!1)}};m.useEffect(()=>{q()},[]);const k=E=>nm.find(re=>re.id===E)||null,L=E=>{if(!E)return"";const re=a.find(J=>J.id===E||J.id===E.toString());return re?re.name:E},O=E=>r.find(re=>re._id===E||re.id===E)||null,G=E=>O(E)?O(E).name:E,M=nm,Y=m.useMemo(()=>e.filter(E=>{if(d&&(E.recipeCategoryId||"").toString()!==d.toString())return!1;if(f&&f.trim()){const re=f.trim().toLowerCase();if(![E.code,E.name,E._id].filter(Boolean).join(" ").toLowerCase().includes(re))return!1}return!0}),[e,d,f]),$=(E,re)=>K(J=>({...J,[E]:re})),I=(E,re,J)=>K(Se=>{const Pe=[...Se.lines];return Pe[E]={...Pe[E],[re]:J},{...Se,lines:Pe}}),ce=()=>K(E=>({...E,lines:[...E.lines,qa()]})),T=E=>K(re=>({...re,lines:re.lines.filter((J,Se)=>Se!==E)})),le=E=>r.filter(re=>(re.itemCategoryId||re.itemCategory||"").toString()===(E||"").toString()),h=E=>rm.includes(E)?E:void 0,X=(E,re)=>{if(I(E,"itemCategory",re),I(E,"itemId",""),I(E,"qty",""),!re)return;const J=le(re);if(J.length===1){const Se=J[0];I(E,"itemId",Se._id||Se.id);const Pe=h(Se.uom);Pe&&K(Ae=>({...Ae,yieldUom:Ae.yieldUom||Pe}))}},se=(E,re)=>{const J=O(re);I(E,"itemId",re),J&&(J.itemCategoryId||J.itemCategory)&&I(E,"itemCategory",(J.itemCategoryId||J.itemCategory).toString());const Se=J?h(J.uom):void 0;Se&&K(Pe=>({...Pe,yieldUom:Pe.yieldUom||Se}))};m.useEffect(()=>{const E=F.lines.map(J=>{const Se=O(J.itemId);return Se?h(Se.uom):void 0}).filter(Boolean);if(!E.length)return;E.every(J=>J===E[0])&&K(J=>({...J,yieldUom:J.yieldUom||E[0]}))},[F.lines.map(E=>E.itemId).join("||")]);const Ce=E=>{const re=k(E);K(J=>({...J,recipeCategoryId:E,type:re&&re.type||J.type}))},Re=()=>{j(null),K(H()),U(""),R(!0)},ue=E=>{j(E),K({code:E.code||"",recipeCategoryId:E.recipeCategoryId||"",type:E.type||"",name:E.name||"",yieldQty:E.yieldQty??E.yield_qty??"",yieldUom:E.yieldUom||E.yield_uom||"",lines:E.lines&&E.lines.map(re=>{const J=O(re.itemId),Se=re.itemCategoryId||re.itemCategory||re.categoryId||(J==null?void 0:J.itemCategoryId)||"";return{id:re.id||`ln_${Math.floor(Math.random()*1e5)}`,itemCategory:Se?Se.toString():"",itemId:re.itemId||re.item||"",qty:re.qty??""}})||[qa()]}),U(""),R(!0)},ve=E=>{V(E),N(!0)},Ne=E=>{j(null),K({code:`${E.code||"RCP"}-COPY`,recipeCategoryId:E.recipeCategoryId||"",type:E.type||"",name:`${E.name||"Copy"} (Copy)`,yieldQty:E.yieldQty??E.yield_qty??"",yieldUom:E.yieldUom||E.yield_uom||"",lines:E.lines&&E.lines.map(re=>{const J=O(re.itemId),Se=re.itemCategoryId||re.itemCategory||re.categoryId||(J==null?void 0:J.itemCategoryId)||"";return{id:`dup_${Math.floor(Math.random()*1e5)}`,itemCategory:Se?Se.toString():"",itemId:re.itemId||"",qty:re.qty??""}})||[qa()]}),U(""),R(!0)},P=()=>{if(!F.code||!F.code.trim())return"Recipe code required";if(!F.name||!F.name.trim())return"Recipe name required";if(!F.recipeCategoryId)return"Select Recipe Category";if(!F.lines||F.lines.length===0)return"Add at least one ingredient";for(const E of F.lines){if(!E.itemCategory)return"Each ingredient must have an item category";if(!E.itemId)return"Each ingredient must have an item";if(!E.qty||Number(E.qty)<=0)return"Each ingredient must have quantity > 0"}return F.yieldQty&&Number(F.yieldQty)<=0?"Yield Qty must be > 0":F.yieldQty&&!F.yieldUom?"Provide Yield UOM when Yield Qty is set":null},ie=async E=>{var Se,Pe;E.preventDefault(),U("");const re=P();if(re)return U(re);const J={code:F.code,name:F.name,recipeCategoryId:F.recipeCategoryId,type:F.type||void 0,yieldQty:F.yieldQty?Number(F.yieldQty):void 0,yieldUom:F.yieldUom||void 0,lines:(F.lines||[]).map(Ae=>({itemId:Ae.itemId,qty:Number(Ae.qty),itemCategory:Ae.itemCategory}))};try{if(D(!0),_&&_._id){const Ae=await Z.put(`${kr}/api/recipes/${_._id}`,J).catch(()=>null);Ae&&Ae.data?t(Le=>Le.map($e=>$e._id===_._id?Ae.data:$e)):t(Le=>Le.map($e=>$e._id===_._id?{...$e,...J}:$e))}else{const Ae=await Z.post(`${kr}/api/recipes`,J).catch(()=>null);Ae&&Ae.data?t(Le=>[Ae.data,...Le]):t(Le=>[{...J,_id:`local_${Date.now()}`},...Le])}R(!1),j(null)}catch(Ae){console.error(Ae),U(((Pe=(Se=Ae.response)==null?void 0:Se.data)==null?void 0:Pe.message)||"Failed to save recipe")}finally{D(!1)}},A=async E=>{if(window.confirm(`Delete recipe ${E.code||E.name}?`))try{t(re=>re.filter(J=>J._id!==E._id)),await Z.delete(`${kr}/api/recipes/${E._id}`).catch(()=>null)}catch(re){console.error(re),u("Failed to delete recipe"),await q()}};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",style:{alignItems:"flex-start"},children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Recipe Master"}),n.jsx("p",{children:"Create and manage recipes (minimal fields)."})]}),n.jsxs("div",{style:{display:"flex",gap:8},children:[n.jsx("button",{className:"sa-secondary-button",onClick:()=>q(),children:"Refresh"}),n.jsxs("button",{className:"sa-primary-button",onClick:Re,children:[n.jsx("i",{className:"ri-add-line"})," New Recipe"]})]})]}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:10,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[n.jsxs("label",{children:["Recipe Category",n.jsxs("select",{value:d,onChange:E=>g(E.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),M.map(E=>n.jsx("option",{value:E.id,children:E.name},E.id))]})]}),n.jsxs("label",{style:{flex:1,minWidth:200},children:["Search",n.jsx("input",{value:f,onChange:E=>b(E.target.value),placeholder:"name / code ...",style:{marginLeft:8,width:"70%"}})]}),n.jsxs("div",{style:{marginLeft:"auto",color:"#9ca3af"},children:["Showing ",Y.length," / ",e.length]})]}),c&&n.jsx("div",{className:"sa-modal-error",children:c}),n.jsx("div",{className:"sa-card",children:o?n.jsx("div",{children:"Loading recipes..."}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:Y.map(E=>{var re;return n.jsxs("tr",{children:[n.jsx("td",{style:{color:"#0b69ff",cursor:"pointer"},onClick:()=>ve(E),children:E.code}),n.jsx("td",{children:E.name}),n.jsx("td",{children:((re=k(E.recipeCategoryId))==null?void 0:re.name)||"-"}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("span",{title:"View",style:{cursor:"pointer",marginRight:6},onClick:()=>ve(E),children:n.jsx("i",{className:"ri-eye-line"})}),n.jsx("span",{title:"Duplicate",style:{cursor:"pointer",marginRight:6},onClick:()=>Ne(E),children:n.jsx("i",{className:"ri-file-copy-line"})}),n.jsx("span",{title:"Edit",style:{cursor:"pointer",marginRight:6},onClick:()=>ue(E),children:n.jsx("i",{className:"ri-edit-line"})}),n.jsx("span",{title:"Delete",style:{cursor:"pointer",marginRight:6},onClick:()=>A(E),children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},E._id)})})]})}),p&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!ne&&(R(!1),j(null)),children:n.jsxs("div",{className:"sa-modal",onClick:E=>E.stopPropagation(),children:[n.jsx("h3",{children:_?"Edit Recipe":"Create Recipe"}),n.jsx("p",{className:"sa-modal-sub",children:"Minimal recipe: code, category, name, yield and ingredient lines."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:ie,children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:10},children:[n.jsxs("label",{children:["Code",n.jsx("input",{value:F.code,onChange:E=>$("code",E.target.value),required:!0})]}),n.jsxs("label",{children:["Recipe Category *",n.jsxs("select",{value:F.recipeCategoryId,onChange:E=>Ce(E.target.value),required:!0,children:[n.jsx("option",{value:"",children:"-- Select Recipe Category --"}),M.map(E=>n.jsx("option",{value:E.id,children:E.name},E.id))]})]}),n.jsxs("label",{children:["Name",n.jsx("input",{value:F.name,onChange:E=>$("name",E.target.value),required:!0})]}),n.jsxs("label",{children:["Yield Qty",n.jsx("input",{type:"number",min:"0",step:"any",value:F.yieldQty,onChange:E=>$("yieldQty",E.target.value),placeholder:"e.g. 50"})]}),n.jsxs("label",{children:["Yield UOM",n.jsxs("select",{value:F.yieldUom||"",onChange:E=>$("yieldUom",E.target.value),children:[n.jsx("option",{value:"",children:"-- Select UOM --"}),rm.map(E=>n.jsx("option",{value:E,children:E==="Pax"?"Pax (persons)":E},E))]})]})]}),n.jsx("h4",{style:{marginTop:8},children:"Ingredients"}),n.jsxs("div",{className:"sa-card",style:{padding:10},children:[n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"35%"},children:"Item Category"}),n.jsx("th",{style:{width:"45%"},children:"Item"}),n.jsx("th",{style:{width:"20%"},children:"Qty"}),n.jsx("th",{})]})}),n.jsx("tbody",{children:F.lines.map((E,re)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("select",{value:E.itemCategory||"",onChange:J=>X(re,J.target.value),required:!0,children:[n.jsx("option",{value:"",children:"-- Select category --"}),a.map(J=>n.jsx("option",{value:J.id,children:J.name},J.id))]})}),n.jsx("td",{children:n.jsxs("select",{value:E.itemId||"",onChange:J=>se(re,J.target.value),required:!0,children:[n.jsx("option",{value:"",children:"-- Select item --"}),le(E.itemCategory).map(J=>n.jsx("option",{value:J._id||J.id,children:J.name},J._id||J.id))]})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",step:"any",value:E.qty,onChange:J=>I(re,"qty",J.target.value),required:!0,placeholder:"Qty",style:{width:"100%"}})}),n.jsx("td",{children:F.lines.length>1&&n.jsx("button",{type:"button",onClick:()=>T(re),children:"Remove"})})]},E.id))})]}),n.jsx("button",{type:"button",className:"sa-secondary-button",style:{marginTop:8},onClick:ce,children:"+ Add Ingredient"})]}),W&&n.jsx("div",{className:"sa-modal-error",style:{marginTop:8},children:W}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!ne&&R(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:ne,children:ne?"Saving...":_?"Update Recipe":"Save Recipe"})]})]})]})}),v&&C&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>N(!1),children:n.jsxs("div",{className:"sa-modal",onClick:E=>E.stopPropagation(),children:[n.jsxs("h3",{children:[C.code,"  ",C.name]}),n.jsxs("p",{className:"sa-modal-sub",children:["Category: ",((ee=k(C.recipeCategoryId))==null?void 0:ee.name)||"-"]}),n.jsxs("p",{children:["Yield: ",C.yieldQty??C.yield_qty??"-"," ",C.yieldUom??C.yield_uom??""]}),n.jsx("h4",{style:{marginTop:8},children:"Ingredients"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Qty"})]})}),n.jsx("tbody",{children:(C.lines||[]).map((E,re)=>n.jsxs("tr",{children:[n.jsx("td",{children:G(E.itemId)}),n.jsx("td",{children:L(E.itemCategory)}),n.jsx("td",{children:E.qty})]},re))})]}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>N(!1),children:"Close"}),n.jsx("button",{type:"button",className:"sa-primary-button",onClick:()=>{N(!1),ue(C)},children:"Edit"})]})]})})]})},bs="http://localhost:5000",Ho=()=>({_id:void 0,name:"",code:"",departmentCategory:""}),Ba=(e="")=>{const t=e.trim().toUpperCase().replace(/[^A-Z0-9\s]/g,"").split(/\s+/).filter(Boolean).slice(0,2).map(s=>s.length<=4?s:s.slice(0,4)).join("_")||"IC",r=Math.floor(Math.random()*900+100);return`${t}_${r}`.slice(0,20)},Wj=()=>{const[e,t]=m.useState([]),[r,s]=m.useState([]),[a,i]=m.useState(!1),[o,l]=m.useState(!1),[c,u]=m.useState(""),[d,g]=m.useState(!1),[f,b]=m.useState(Ho()),[p,R]=m.useState(""),[_,j]=m.useState(""),v=async()=>{var D;try{i(!0),u("");const[W,U]=await Promise.all([Z.get(`${bs}/api/item-categories`).catch(O=>(console.error("load item-categories error:",O),u("Failed to load item categories"),{data:[]})),Z.get(`${bs}/api/departments`).catch(O=>(console.error("load departments error:",O),u("Failed to load departments"),{data:[]}))]),q=Array.isArray(W.data)?W.data.map(O=>({_id:O._id||O.id,name:O.name||"",code:O.code||Ba(O.name||""),departmentCategory:O.departmentCategory||O.department||O.dept||""})):[];t(q);const L=(Array.isArray((D=U.data)==null?void 0:D.departments)?U.data.departments:Array.isArray(U.data)?U.data:[]).map(O=>({_id:O._id||O.id,name:O.name||"",code:O.code||""}));s(L)}catch(W){console.error("loadData fatal error:",W),u("Failed to load item categories / departments")}finally{i(!1)}};m.useEffect(()=>{v()},[]);const N=m.useMemo(()=>e.filter(D=>{var W;return!(p&&!((W=D.name)!=null&&W.toLowerCase().includes(p.toLowerCase()))||_&&(D.departmentCategory||"").toString()!==_)}),[e,p,_]),C=()=>{b(Ho()),u(""),g(!0)},V=D=>{b({_id:D._id||D.id,name:D.name||"",code:D.code||Ba(D.name),departmentCategory:D.departmentCategory||""}),u(""),g(!0)},H=D=>{const{name:W,value:U}=D.target;b(q=>({...q,[W]:U}))},F=D=>{if(!D)return"-";const W=r.find(U=>U._id===D||U.code===D||U.name===D)||null;return(W==null?void 0:W.name)||D},K=async D=>{var W,U;if(D.preventDefault(),u(""),!f.name||!f.name.trim())return u("Item Category name required");if(!f.departmentCategory||!f.departmentCategory.trim())return u("Select Department");try{l(!0);const q={name:f.name.trim(),code:f.code&&f.code.trim()?f.code.trim():Ba(f.name),department:f.departmentCategory,departmentCategory:f.departmentCategory};if(f._id){const k=await Z.put(`${bs}/api/item-categories/${f._id}`,q).catch(L=>(console.error("update item-category error:",L),null));if(k!=null&&k.data){const L={_id:k.data._id||k.data.id,name:k.data.name,code:k.data.code,departmentCategory:k.data.departmentCategory||k.data.department||k.data.dept||q.department};t(O=>O.map(G=>G._id===f._id||G.id===f._id?L:G))}else t(L=>L.map(O=>O._id===f._id||O.id===f._id?{...O,...q}:O))}else{const k=await Z.post(`${bs}/api/item-categories`,q).catch(O=>(console.error("create item-category error:",O),null)),L=k!=null&&k.data?{_id:k.data._id||k.data.id,name:k.data.name,code:k.data.code,departmentCategory:k.data.departmentCategory||k.data.department||k.data.dept||q.department}:{...q,_id:`local_${Date.now()}`};t(O=>[L,...O])}g(!1),b(Ho())}catch(q){console.error("save error",q),u(((U=(W=q.response)==null?void 0:W.data)==null?void 0:U.message)||"Failed to save item category")}finally{l(!1)}},ne=async D=>{if(window.confirm(`Delete item category ${D.name||D._id}?`))try{t(W=>W.filter(U=>(U._id||U.id)!==(D._id||D.id))),await Z.delete(`${bs}/api/item-categories/${D._id||D.id}`).catch(()=>null)}catch(W){console.error("delete error",W),u("Failed to delete item category"),await v()}};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Item Categories (Master)"}),n.jsx("p",{children:"Create and manage item categories. Assign each item-category to an existing Department."})]}),n.jsx("div",{style:{display:"flex",gap:8,alignItems:"center"},children:n.jsxs("button",{className:"sa-primary-button",type:"button",onClick:C,children:[n.jsx("i",{className:"ri-add-line"})," Add Category"]})})]}),c&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:c}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[n.jsxs("label",{children:["Item Category",n.jsx("input",{value:p,onChange:D=>R(D.target.value),placeholder:"Search category...",style:{marginLeft:8}})]}),n.jsxs("label",{children:["Department",n.jsxs("select",{value:_,onChange:D=>j(D.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),r.map(D=>n.jsx("option",{value:D._id||D.code||D.name,children:D.name||D.code||D._id},D._id||D.code||D.name))]})]}),n.jsxs("div",{style:{marginLeft:"auto",color:"#9ca3af"},children:["Showing ",N.length," / ",e.length]})]}),n.jsx("div",{className:"sa-card",children:a?n.jsx("div",{children:"Loading item categories..."}):N.length===0?n.jsx("div",{children:'No item categories found. Add one using "Add Category".'}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item Category"}),n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Department"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:N.map(D=>n.jsxs("tr",{children:[n.jsx("td",{children:D.name}),n.jsx("td",{children:D.code}),n.jsx("td",{children:F(D.departmentCategory)}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("button",{className:"sa-secondary-button",onClick:()=>V(D),title:"Edit",children:n.jsx("i",{className:"ri-edit-line"})}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>{var W;(W=navigator.clipboard)==null||W.writeText(JSON.stringify(D)),alert("Copied")},title:"Copy JSON",children:n.jsx("i",{className:"ri-file-copy-line"})}),n.jsx("button",{className:"sa-secondary-button",onClick:()=>ne(D),title:"Delete",children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},D._id||D.id||D.code))})]})}),d&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!o&&g(!1),children:n.jsxs("div",{className:"sa-modal",onClick:D=>D.stopPropagation(),style:{maxWidth:700},children:[n.jsx("h3",{style:{marginBottom:6},children:f._id?"Edit Item Category":"Add Item Category"}),n.jsx("p",{className:"sa-modal-sub",children:"Give a name, code (auto) and assign a Department."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:K,children:[n.jsxs("label",{children:["Item Category Name *",n.jsx("input",{name:"name",value:f.name,onChange:H,placeholder:"e.g. Utensils",required:!0})]}),n.jsxs("label",{children:["Code (auto)",n.jsx("input",{name:"code",value:f.code||Ba(f.name),disabled:!0,style:{background:"#f3f4f6"}})]}),n.jsxs("label",{children:["Department *",n.jsxs("select",{name:"departmentCategory",value:f.departmentCategory,onChange:H,required:!0,children:[n.jsx("option",{value:"",children:"-- Select Department --"}),r.map(D=>n.jsx("option",{value:D._id||D.code||D.name,children:D.name||D.code||D._id},D._id||D.code||D.name))]})]}),c&&n.jsx("div",{className:"sa-modal-error",style:{marginTop:8},children:c}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!o&&g(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:o,children:o?"Saving...":f._id?"Update Category":"Save Category"})]})]})]})})]})},Pn="http://localhost:5000",Go=[{_id:"item_rice",name:"Rice",uom:"Kg",unitCost:40},{_id:"item_oil",name:"Oil",uom:"Ltr",unitCost:150},{_id:"item_chicken",name:"Chicken",uom:"Kg",unitCost:200},{_id:"item_paneer",name:"Paneer",uom:"Kg",unitCost:320},{_id:"item_spice",name:"Spice Mix",uom:"Kg",unitCost:500}],Ko=[{_id:"rc_cat_1",name:"Lumpsum - Single fixed cost (Lumpsum)",code:"LUMP_101",type:"LUMPSUM",description:"Single fixed-cost recipe"},{_id:"rc_cat_2",name:"By Portion - Recipe scaled per portion",code:"PORT_102",type:"RECIPE_PORTION",description:"Recipe measured per portion"},{_id:"rc_cat_3",name:"By Lumpsum (Recipe) - Lumpsum measured as recipe batch",code:"R_LUMP_103",type:"RECIPE_LUMPSUM",description:"Lumpsum measured as recipe batch"}],sm=[{_id:"dev_rcp_1",code:"RCP-001",name:"Plain Rice",recipeCategoryId:"rc_cat_1",type:"LUMPSUM",resort:"Resort A",department:"Kitchen",yieldQty:10,yieldUOM:"Kg",yieldPortions:null,instructions:"Boil rice in salted water.",lines:[{itemId:"item_rice",qty:10,uom:"Kg",wastePercent:2}],status:"ACTIVE",createdAt:new Date().toISOString()},{_id:"dev_rcp_3",code:"RCP-003",name:"Chicken Curry (50 portions)",recipeCategoryId:"rc_cat_2",type:"RECIPE_PORTION",resort:"Resort B",department:"Kitchen",yieldQty:null,yieldUOM:"Portion",yieldPortions:50,instructions:"Recipe for 50 portions.",lines:[{itemId:"item_chicken",qty:10,uom:"Kg",wastePercent:5},{itemId:"item_spice",qty:.3,uom:"Kg",wastePercent:.5}],status:"ACTIVE",createdAt:new Date().toISOString()}],za=()=>({id:`ln_${Date.now()}_${Math.floor(Math.random()*1e3)}`,itemId:"",qty:"",uom:"",wastePercent:0}),Hj=[{key:"LUMPSUM",label:"Lumpsum - Single fixed cost (Lumpsum)"},{key:"RECIPE_PORTION",label:"By Portion - Recipe scaled per portion"},{key:"RECIPE_LUMPSUM",label:"By Lumpsum (Recipe) - Lumpsum measured as recipe batch"}],Gj=()=>{var xe;const[e,t]=m.useState([]),[r,s]=m.useState([]),[a,i]=m.useState([]),[o,l]=m.useState(!1),[c,u]=m.useState(""),[d,g]=m.useState(""),[f,b]=m.useState(""),[p,R]=m.useState(""),[_,j]=m.useState(""),[v,N]=m.useState(""),[C,V]=m.useState(""),[H,F]=m.useState(!1),[K,ne]=m.useState(null),[D,W]=m.useState(!1),[U,q]=m.useState(null),[k,L]=m.useState(!1),[O,G]=m.useState({name:"",type:"LUMPSUM",description:""}),[M,Y]=m.useState(""),$=()=>({code:"",recipeCategoryId:"",recipeCategoryName:"",type:"LUMPSUM",name:"",resort:"",department:"",yieldQty:"",yieldUOM:"",yieldPortions:"",instructions:"",lines:[za()],status:"DRAFT"}),[I,ce]=m.useState($()),[T,le]=m.useState(!1),[h,X]=m.useState(""),se=async()=>{try{l(!0),u("");const[w,he,be]=await Promise.all([Z.get(`${Pn}/api/recipes`).catch(()=>({data:[]})),Z.get(`${Pn}/api/items`).catch(()=>({data:Go})),Z.get(`${Pn}/api/recipe-categories`).catch(()=>({data:Ko}))]),ke=Array.isArray(w.data)?w.data:[],y=Array.isArray(he.data)?he.data:Go,B=Array.isArray(be.data)?be.data:Ko,oe=ke.map(we=>({...we,recipeCategoryId:we.recipeCategoryId||we.recipeCategory||we.categoryId||"",type:we.type||"LUMPSUM",lines:Array.isArray(we.lines)?we.lines:[]})),ge=oe.length?oe:sm;t(ge),s(y),i(B)}catch(w){console.error("load error",w),u("Failed to load recipes/categories/items; using sample data"),t(sm),s(Go),i(Ko)}finally{l(!1)}};m.useEffect(()=>{se()},[]);const Ce=w=>a.find(he=>he._id===w||he.id===w)||null,Re=m.useMemo(()=>a,[a]),ue=m.useMemo(()=>Array.from(new Set(e.map(w=>(w.resort||"").toString()).filter(Boolean))),[e]),ve=m.useMemo(()=>Array.from(new Set(e.map(w=>(w.department||"").toString()).filter(Boolean))),[e]),Ne=m.useMemo(()=>e.filter(w=>{if(d&&(w.recipeCategoryId||"")!==d||f&&w.type!==f||p&&!(w.resort||"").toLowerCase().includes(p.toLowerCase())||_&&!(w.department||"").toLowerCase().includes(_.toLowerCase())||v&&(w.status||"").toLowerCase()!==v.toLowerCase())return!1;if(C&&C.trim()){const he=C.trim().toLowerCase();if(![w.code,w.name,w.instructions,w._id,w.resort,w.department].filter(Boolean).join(" ").toLowerCase().includes(he))return!1}return!0}),[e,d,f,p,_,v,C]),P=(w,he)=>ce(be=>({...be,[w]:he})),ie=(w,he,be)=>ce(ke=>{const y=[...ke.lines];return y[w]={...y[w],[he]:be},{...ke,lines:y}}),A=()=>ce(w=>({...w,lines:[...w.lines,za()]})),ee=w=>ce(he=>({...he,lines:he.lines.filter((be,ke)=>ke!==w)})),E=w=>r.find(he=>he._id===w||he.id===w)||null,re=w=>E(w)?E(w).name:w,J=w=>{const he=Ce(w);ce(be=>({...be,recipeCategoryId:w,recipeCategoryName:he?he.name:"",type:he&&he.type||be.type}))},Se=()=>{ne(null),ce($()),X(""),F(!0)},Pe=w=>{var he;ne(w),ce({code:w.code||"",recipeCategoryId:w.recipeCategoryId||w.recipeCategory||"",recipeCategoryName:((he=Ce(w.recipeCategoryId||w.recipeCategory||""))==null?void 0:he.name)||"",type:w.type||"LUMPSUM",name:w.name||"",resort:w.resort||"",department:w.department||"",yieldQty:w.yieldQty??"",yieldUOM:w.yieldUOM||"",yieldPortions:w.yieldPortions??"",instructions:w.instructions||"",lines:w.lines&&w.lines.map(be=>({id:be.id||`ln_${Math.floor(Math.random()*1e5)}`,itemId:be.itemId||be.item||"",qty:be.qty??"",uom:be.uom||"",wastePercent:be.wastePercent??0}))||[za()],status:w.status||"DRAFT"}),X(""),F(!0)},Ae=w=>{var he;ne(null),ce({code:`${w.code||"RCP"}-COPY`,recipeCategoryId:w.recipeCategoryId||w.recipeCategory||"",recipeCategoryName:((he=Ce(w.recipeCategoryId||w.recipeCategory||""))==null?void 0:he.name)||"",type:w.type||"LUMPSUM",name:`${w.name||"Copy"} (Copy)`,resort:w.resort||"",department:w.department||"",yieldQty:w.yieldQty??"",yieldUOM:w.yieldUOM||"",yieldPortions:w.yieldPortions??"",instructions:w.instructions||"",lines:w.lines&&w.lines.map(be=>({id:`dup_${Math.floor(Math.random()*1e5)}`,itemId:be.itemId||be.item||"",qty:be.qty??"",uom:be.uom||"",wastePercent:be.wastePercent??0}))||[za()],status:"DRAFT"}),X(""),F(!0)},Le=w=>{q(w),W(!0)},$e=m.useMemo(()=>{let w=0;for(const ke of I.lines||[]){const y=E(ke.itemId),B=(y==null?void 0:y.unitCost)??0,oe=Number(ke.qty||0),ge=Number(ke.wastePercent||0),we=oe*(1+ge/100);w+=we*B}let he=null,be=null;if(I.type==="RECIPE_LUMPSUM"){const ke=Number(I.yieldQty||1);he=w}if(I.type==="RECIPE_PORTION"){const ke=Number(I.yieldPortions||1);be=ke?w/ke:w}return{totalIngredientCost:w,perYieldCost:he,perPortionCost:be}},[I,r]),mt=()=>{if(!I.code||!I.code.trim())return"Recipe code required";if(!I.name||!I.name.trim())return"Recipe name required";if(!I.recipeCategoryId)return"Select Recipe Category";if(!I.resort)return"Resort required";if(I.type==="RECIPE_LUMPSUM"&&(!I.yieldQty||Number(I.yieldQty)<=0))return"Yield qty required for lumpsum recipe";if(I.type==="RECIPE_PORTION"&&(!I.yieldPortions||Number(I.yieldPortions)<=0))return"Yield portions required for portion recipe";if(!I.lines||I.lines.length===0)return"Add at least one ingredient";for(const w of I.lines){if(!w.itemId)return"Each ingredient must have an item";if(!w.qty||Number(w.qty)<=0)return"Each ingredient must have quantity > 0"}return null},S=async w=>{var ke,y;w.preventDefault(),X("");const he=mt();if(he)return X(he);const be={code:I.code,name:I.name,recipeCategoryId:I.recipeCategoryId,type:I.type,resort:I.resort,department:I.department||void 0,yieldQty:I.type==="RECIPE_LUMPSUM"?Number(I.yieldQty||0):void 0,yieldUOM:I.type==="RECIPE_LUMPSUM"&&I.yieldUOM||void 0,yieldPortions:I.type==="RECIPE_PORTION"?Number(I.yieldPortions||0):void 0,instructions:I.instructions||void 0,status:I.status||"DRAFT",lines:(I.lines||[]).map(B=>{var oe;return{itemId:B.itemId,qty:Number(B.qty),uom:B.uom||((oe=E(B.itemId))==null?void 0:oe.uom)||"",wastePercent:Number(B.wastePercent||0)}})};try{if(le(!0),K&&K._id){const B=await Z.put(`${Pn}/api/recipes/${K._id}`,be).catch(()=>null);B&&B.data?t(oe=>oe.map(ge=>ge._id===K._id?B.data:ge)):t(oe=>oe.map(ge=>ge._id===K._id?{...ge,...be,_id:ge._id}:ge))}else{const B=await Z.post(`${Pn}/api/recipes`,be).catch(()=>null);if(B&&B.data)t(oe=>[B.data,...oe]);else{const oe={...be,_id:`local_${Date.now()}`,createdAt:new Date().toISOString()};t(ge=>[oe,...ge])}}F(!1),ne(null)}catch(B){console.error("save recipe error",B),X(((y=(ke=B.response)==null?void 0:ke.data)==null?void 0:y.message)||"Failed to save recipe")}finally{le(!1)}},pe=async w=>{if(window.confirm(`Delete recipe ${w.code||w.name}?`))try{t(he=>he.filter(be=>be._id!==w._id)),await Z.delete(`${Pn}/api/recipes/${w._id}`).catch(()=>null)}catch(he){console.error("delete error",he),u("Failed to delete recipe"),await se()}},te=async w=>{if(window.confirm(`Activate recipe ${w.code||w.name}?`))try{const he=await Z.post(`${Pn}/api/recipes/${w._id}/activate`).catch(()=>null);he&&he.data?t(be=>be.map(ke=>ke._id===w._id?he.data:ke)):t(be=>be.map(ke=>ke._id===w._id?{...ke,status:"ACTIVE"}:ke))}catch(he){console.error("activate error",he),u("Failed to activate recipe")}},fe=async()=>{if(Y(""),!(O.name||"").trim())return Y("Name required");const he={name:O.name.trim(),type:O.type,description:O.description||""};try{const be=await Z.post(`${Pn}/api/recipe-categories`,he).catch(()=>null),ke=be!=null&&be.data?{_id:be.data._id||be.data.id,...be.data}:{...he,_id:`local_rc_${Date.now()}`};i(y=>[ke,...y]),ce(y=>({...y,recipeCategoryId:ke._id,recipeCategoryName:ke.name,type:ke.type||y.type})),G({name:"",type:"LUMPSUM",description:""}),L(!1),Y("")}catch(be){console.error("create category error",be),Y("Failed to create category")}},ye=w=>typeof w=="number"?w.toFixed(2):"-";return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",style:{alignItems:"flex-start"},children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Recipe Master"}),n.jsx("p",{children:"Create and manage recipes. Recipe Category is selected from Recipe Category master (you can add here)."})]}),n.jsxs("div",{style:{display:"flex",gap:8},children:[n.jsx("button",{className:"sa-secondary-button",onClick:()=>se(),children:"Refresh"}),n.jsxs("button",{className:"sa-primary-button",onClick:Se,children:[n.jsx("i",{className:"ri-add-line"})," New Recipe"]})]})]}),n.jsxs("div",{className:"sa-card",style:{display:"flex",gap:10,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[n.jsxs("label",{children:["Recipe Category",n.jsxs("select",{value:d,onChange:w=>g(w.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),Re.map(w=>n.jsx("option",{value:w._id,children:w.name},w._id))]})]}),n.jsxs("label",{children:["Type",n.jsxs("select",{value:f,onChange:w=>b(w.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),n.jsx("option",{value:"LUMPSUM",children:"Lumpsum"}),n.jsx("option",{value:"RECIPE_LUMPSUM",children:"By Recipe - Lumpsum"}),n.jsx("option",{value:"RECIPE_PORTION",children:"By Recipe - Portion"})]})]}),n.jsxs("label",{children:["Resort",n.jsxs("select",{value:p,onChange:w=>R(w.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),ue.map(w=>n.jsx("option",{value:w,children:w},w))]})]}),n.jsxs("label",{children:["Department",n.jsxs("select",{value:_,onChange:w=>j(w.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),ve.map(w=>n.jsx("option",{value:w,children:w},w))]})]}),n.jsxs("label",{children:["Status",n.jsxs("select",{value:v,onChange:w=>N(w.target.value),style:{marginLeft:8},children:[n.jsx("option",{value:"",children:"All"}),n.jsx("option",{value:"DRAFT",children:"Draft"}),n.jsx("option",{value:"ACTIVE",children:"Active"}),n.jsx("option",{value:"ARCHIVED",children:"Archived"})]})]}),n.jsxs("label",{style:{flex:1,minWidth:200},children:["Search",n.jsx("input",{value:C,onChange:w=>V(w.target.value),placeholder:"name / code ...",style:{marginLeft:8,width:"70%"}})]}),n.jsxs("div",{style:{marginLeft:"auto",color:"#9ca3af"},children:["Showing ",Ne.length," / ",e.length]})]}),c&&n.jsx("div",{className:"sa-modal-error",children:c}),n.jsx("div",{className:"sa-card",children:o?n.jsx("div",{children:"Loading recipes..."}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Resort"}),n.jsx("th",{children:"Dept"}),n.jsx("th",{children:"Yield"}),n.jsx("th",{children:"Cost Preview"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:Ne.map(w=>{const he=(w.lines||[]).reduce((y,B)=>{const oe=E(B.itemId),ge=((oe==null?void 0:oe.unitCost)??0)*(Number(B.qty||0)*(1+Number(B.wastePercent||0)/100));return y+ge},0),be=w.type==="RECIPE_PORTION"?`${w.yieldPortions||"-"} portions`:w.yieldQty?`${w.yieldQty} ${w.yieldUOM||""}`:"-",ke=Ce(w.recipeCategoryId);return n.jsxs("tr",{children:[n.jsx("td",{style:{color:"#0b69ff",cursor:"pointer"},onClick:()=>Le(w),children:w.code}),n.jsx("td",{children:w.name}),n.jsx("td",{children:ke?ke.name:"-"}),n.jsx("td",{children:w.type}),n.jsx("td",{children:w.resort||"-"}),n.jsx("td",{children:w.department||"-"}),n.jsx("td",{children:be}),n.jsx("td",{children:ye(he)}),n.jsx("td",{children:w.status||"DRAFT"}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("span",{title:"View",style:{cursor:"pointer",marginRight:6},onClick:()=>Le(w),children:n.jsx("i",{className:"ri-eye-line"})}),n.jsx("span",{title:"Duplicate",style:{cursor:"pointer",marginRight:6},onClick:()=>Ae(w),children:n.jsx("i",{className:"ri-file-copy-line"})}),n.jsx("span",{title:"Edit",style:{cursor:"pointer",marginRight:6},onClick:()=>Pe(w),children:n.jsx("i",{className:"ri-edit-line"})}),n.jsx("span",{title:"Activate",style:{cursor:"pointer",marginRight:6},onClick:()=>te(w),children:n.jsx("i",{className:"ri-checkbox-circle-line"})}),n.jsx("span",{title:"Delete",style:{cursor:"pointer",marginRight:6},onClick:()=>pe(w),children:n.jsx("i",{className:"ri-delete-bin-6-line"})})]})]},w._id)})})]})}),H&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!T&&(F(!1),ne(null)),children:n.jsxs("div",{className:"sa-modal",onClick:w=>w.stopPropagation(),children:[n.jsx("h3",{children:K?"Edit Recipe":"Create Recipe"}),n.jsx("p",{className:"sa-modal-sub",children:"Fill recipe details and ingredient lines. Recipe Category drives the recipe type."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:S,children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:10},children:[n.jsxs("label",{children:["Code",n.jsx("input",{value:I.code,onChange:w=>P("code",w.target.value),required:!0})]}),n.jsxs("label",{children:["Recipe Category *",n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[n.jsxs("select",{value:I.recipeCategoryId,onChange:w=>J(w.target.value),required:!0,children:[n.jsx("option",{value:"",children:"-- Select Recipe Category --"}),Re.map(w=>n.jsx("option",{value:w._id,children:w.name},w._id))]}),n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>{L(!0),Y("")},title:"Add Category",children:"+ Add Category"})]})]}),n.jsxs("label",{children:["Name",n.jsx("input",{value:I.name,onChange:w=>P("name",w.target.value),required:!0})]}),n.jsxs("label",{children:["Type",n.jsx("input",{value:I.type,disabled:!0})]}),n.jsxs("label",{children:["Resort",n.jsx("input",{value:I.resort,onChange:w=>P("resort",w.target.value),required:!0})]}),n.jsxs("label",{children:["Department",n.jsx("input",{value:I.department,onChange:w=>P("department",w.target.value)})]}),I.type==="RECIPE_LUMPSUM"&&n.jsxs(n.Fragment,{children:[n.jsxs("label",{children:["Yield Qty",n.jsx("input",{type:"number",min:"0",value:I.yieldQty,onChange:w=>P("yieldQty",w.target.value)}),n.jsx("small",{style:{display:"block",color:"#6b7280"},children:"Yield amount produced per batch"})]}),n.jsxs("label",{children:["Yield UOM",n.jsx("input",{value:I.yieldUOM,onChange:w=>P("yieldUOM",w.target.value)})]})]}),I.type==="RECIPE_PORTION"&&n.jsxs("label",{children:["Yield Portions",n.jsx("input",{type:"number",min:"1",value:I.yieldPortions,onChange:w=>P("yieldPortions",w.target.value)}),n.jsx("small",{style:{display:"block",color:"#6b7280"},children:"Number of portions this recipe yields"})]}),n.jsxs("label",{children:["Status",n.jsxs("select",{value:I.status,onChange:w=>P("status",w.target.value),children:[n.jsx("option",{value:"DRAFT",children:"Draft"}),n.jsx("option",{value:"ACTIVE",children:"Active"}),n.jsx("option",{value:"ARCHIVED",children:"Archived"})]})]})]}),n.jsxs("label",{style:{marginTop:10},children:["Instructions",n.jsx("textarea",{rows:3,value:I.instructions,onChange:w=>P("instructions",w.target.value)})]}),n.jsx("h4",{style:{marginTop:8},children:"Ingredients"}),n.jsxs("div",{className:"sa-card",style:{padding:10},children:[n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"40%"},children:"Item"}),n.jsx("th",{style:{width:"15%"},children:"Qty"}),n.jsx("th",{style:{width:"15%"},children:"UOM"}),n.jsx("th",{style:{width:"15%"},children:"Waste %"}),n.jsx("th",{})]})}),n.jsx("tbody",{children:I.lines.map((w,he)=>{var be;return n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("select",{value:w.itemId,onChange:ke=>ie(he,"itemId",ke.target.value),required:!0,children:[n.jsx("option",{value:"",children:"-- Select item --"}),r.map(ke=>n.jsx("option",{value:ke._id||ke.id,children:ke.name},ke._id||ke.id))]})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:w.qty,onChange:ke=>ie(he,"qty",ke.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{value:w.uom||((be=E(w.itemId))==null?void 0:be.uom)||"",onChange:ke=>ie(he,"uom",ke.target.value)})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:w.wastePercent,onChange:ke=>ie(he,"wastePercent",ke.target.value)})}),n.jsx("td",{children:I.lines.length>1&&n.jsx("button",{type:"button",onClick:()=>ee(he),children:"Remove"})})]},w.id)})})]}),n.jsx("button",{type:"button",className:"sa-secondary-button",style:{marginTop:8},onClick:A,children:"+ Add Ingredient"}),n.jsxs("div",{style:{marginTop:12,borderTop:"1px dashed #e5e7eb",paddingTop:8},children:[n.jsx("strong",{children:"Cost Preview"}),n.jsxs("div",{style:{marginTop:6},children:["Total ingredient cost: ",n.jsxs("strong",{children:[" ",ye($e.totalIngredientCost)]}),I.type==="RECIPE_LUMPSUM"&&n.jsxs("div",{children:["Cost per yield: ",n.jsxs("strong",{children:[" ",ye($e.perYieldCost??$e.totalIngredientCost)]})]}),I.type==="RECIPE_PORTION"&&n.jsxs("div",{children:["Cost per portion: ",n.jsxs("strong",{children:[" ",ye($e.perPortionCost??$e.totalIngredientCost)]})]})]})]})]}),h&&n.jsx("div",{className:"sa-modal-error",style:{marginTop:8},children:h}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!T&&F(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:T,children:T?"Saving...":K?"Update Recipe":"Save Recipe"})]})]})]})}),k&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>L(!1),children:n.jsxs("div",{className:"sa-modal",onClick:w=>w.stopPropagation(),style:{maxWidth:520},children:[n.jsx("h3",{children:"Add Recipe Category"}),n.jsx("p",{className:"sa-modal-sub",children:"Create a recipe category (type determines recipe behaviour)."}),n.jsxs("label",{children:["Name *",n.jsx("input",{value:O.name,onChange:w=>G(he=>({...he,name:w.target.value})),placeholder:"e.g. Lumpsum - Single fixed cost (Lumpsum)"})]}),n.jsxs("label",{children:["Type *",n.jsx("select",{value:O.type,onChange:w=>G(he=>({...he,type:w.target.value})),children:Hj.map(w=>n.jsx("option",{value:w.key,children:w.label},w.key))})]}),n.jsxs("label",{children:["Description",n.jsx("input",{value:O.description,onChange:w=>G(he=>({...he,description:w.target.value})),placeholder:"Optional description"})]}),M&&n.jsx("div",{className:"sa-modal-error",children:M}),n.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[n.jsx("button",{className:"sa-secondary-button",onClick:()=>L(!1),children:"Cancel"}),n.jsx("button",{className:"sa-primary-button",onClick:fe,children:"Save Category"})]})]})}),D&&U&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>W(!1),children:n.jsxs("div",{className:"sa-modal",onClick:w=>w.stopPropagation(),children:[n.jsxs("h3",{children:[U.code,"  ",U.name]}),n.jsxs("p",{className:"sa-modal-sub",children:["Category: ",((xe=Ce(U.recipeCategoryId))==null?void 0:xe.name)||"-","  Type: ",U.type]}),n.jsxs("div",{style:{marginTop:8},children:[n.jsx("strong",{children:"Resort:"})," ",U.resort||"-"," ",n.jsx("br",{}),n.jsx("strong",{children:"Department:"})," ",U.department||"-"," ",n.jsx("br",{}),n.jsx("strong",{children:"Yield:"})," ",U.type==="RECIPE_PORTION"?`${U.yieldPortions||"-"} portions`:`${U.yieldQty||"-"} ${U.yieldUOM||""}`," ",n.jsx("br",{})]}),n.jsx("h4",{style:{marginTop:8},children:"Ingredients"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"UOM"}),n.jsx("th",{children:"Waste %"})]})}),n.jsx("tbody",{children:(U.lines||[]).map((w,he)=>n.jsxs("tr",{children:[n.jsx("td",{children:re(w.itemId)}),n.jsx("td",{children:w.qty}),n.jsx("td",{children:w.uom}),n.jsx("td",{children:w.wastePercent??0})]},he))})]}),n.jsx("h4",{style:{marginTop:8},children:"Instructions"}),n.jsx("div",{style:{whiteSpace:"pre-wrap",color:"#374151"},children:U.instructions||"-"}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>W(!1),children:"Close"}),n.jsx("button",{type:"button",className:"sa-primary-button",onClick:()=>{W(!1),Pe(U)},children:"Edit"})]})]})})]})},Pr="",Va={id:"user_1",name:"Amit",role:"RESORT_USER",resorts:["resort_1"]},Qa=({title:e,value:t,hint:r})=>n.jsxs("div",{className:"sa-card",style:{padding:18,borderRadius:12},children:[n.jsx("div",{style:{fontSize:13,color:"#98a1b3"},children:e}),n.jsx("div",{style:{marginTop:12,fontSize:28,fontWeight:700},children:t}),r&&n.jsx("div",{style:{marginTop:8,fontSize:12,color:"#6b7a93"},children:r})]}),Kj=()=>{const[e,t]=m.useState([]),[r,s]=m.useState(""),[a,i]=m.useState({}),[o,l]=m.useState([]),[c,u]=m.useState([]),[d,g]=m.useState([]),[f,b]=m.useState(!1),[p,R]=m.useState(!1),[_,j]=m.useState(!1),[v,N]=m.useState(""),[C,V]=m.useState({resort:"",department:"",store:"",requiredBy:"",lines:[{lineId:`ln_${Date.now()}`,item:"",qty:1,remark:""}],type:"INTERNAL",vendor:""}),H={headers:{"x-demo-user":JSON.stringify(Va)}};m.useEffect(()=>{(async()=>{try{b(!0);const k=await Z.get(`${Pr}/api/resorts`).catch(()=>({data:[{_id:"resort_1",name:"Blue Lagoon"}]}));t(k.data||[]);const L=Va.resorts&&Va.resorts[0]||k.data&&k.data[0]&&k.data[0]._id;s(L||"")}finally{b(!1)}})()},[]),m.useEffect(()=>{r&&F(r)},[r]);const F=async q=>{try{b(!0);const[k,L,O,G]=await Promise.all([Z.get(`${Pr}/api/dashboard/resort/${q}/kpi`,H).catch(()=>({data:{openRequisitions:0,pendingApprovals:0,openPOs:0,lowStockCount:0}})),Z.get(`${Pr}/api/requisitions?createdBy=${Va.id}&resort=${q}`,H).catch(()=>({data:[]})),Z.get(`${Pr}/api/po?resort=${q}`,H).catch(()=>({data:[]})),Z.get(`${Pr}/api/items?resort=${q}`,H).catch(()=>({data:[]}))]);i(k.data||{}),l(L.data||[]),u(O.data||[]),g(G.data||[])}catch(k){console.error("fetchAll error",k)}finally{b(!1)}},K=()=>{V(q=>({...q,lines:[...q.lines,{lineId:`ln_${Date.now()}_${Math.random()}`,item:"",qty:1,remark:""}]}))},ne=q=>V(k=>({...k,lines:k.lines.filter((L,O)=>O!==q)})),D=(q,k,L)=>{V(O=>{const G=[...O.lines];return G[q][k]=L,{...O,lines:G}})},W=()=>{N(""),V({resort:r||"",department:"",store:"",requiredBy:"",lines:[{lineId:`ln_${Date.now()}`,item:"",qty:1,remark:""}],type:"INTERNAL",vendor:""}),R(!0)},U=async q=>{var k,L;if(q.preventDefault(),N(""),!C.resort)return N("Select resort");if(!C.lines||C.lines.length===0)return N("Add at least one item line");if(C.type==="VENDOR"&&!C.vendor)return N("Select vendor for vendor requisition");try{j(!0);const O={resort:C.resort,department:C.department,store:C.store,requiredBy:C.requiredBy||new Date,type:C.type,vendor:C.vendor||null,lines:C.lines.map(M=>({item:M.item,qty:Number(M.qty)||1,remark:M.remark}))},G=await Z.post(`${Pr}/api/requisitions`,O,H);F(C.resort),R(!1)}catch(O){console.error(O),N(((L=(k=O.response)==null?void 0:k.data)==null?void 0:L.message)||"Failed to create requisition")}finally{j(!1)}};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{children:[n.jsx("h2",{style:{margin:0},children:"Resort Dashboard"}),n.jsx("p",{style:{margin:"4px 0 0 0",color:"#9aa3b2"},children:"Quick overview & actions for your assigned resort"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("div",{style:{color:"#98a1b3",fontSize:13},children:"Current Resort"}),n.jsxs("select",{value:r||"",onChange:q=>s(q.target.value),style:{background:"#0f1720",color:"#fff",borderRadius:6,padding:"8px 10px",border:"1px solid rgba(255,255,255,0.06)"},children:[n.jsx("option",{value:"",children:"-- Select Resort --"}),e.map(q=>n.jsx("option",{value:q._id,children:q.name},q._id))]})]}),n.jsx("button",{className:"sa-primary-button",onClick:W,style:{background:"#16a34a",borderRadius:20,padding:"8px 16px"},children:"+ New Requisition"})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:16,marginTop:18},children:[n.jsx(Qa,{title:"Open Requisitions",value:a.openRequisitions??0,hint:"Waiting for approval"}),n.jsx(Qa,{title:"Pending Approvals",value:a.pendingApprovals??0,hint:"Need your review"}),n.jsx(Qa,{title:"Open POs",value:a.openPOs??0,hint:"POs open for receipt"}),n.jsx(Qa,{title:"Low Stock Items",value:a.lowStockCount??0,hint:"Below reorder level"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:18,marginTop:20},children:[n.jsxs("div",{className:"sa-card",style:{padding:18},children:[n.jsx("h3",{style:{marginTop:0},children:"My Recent Requisitions"}),f?n.jsx("div",{children:"Loading..."}):o.length===0?n.jsx("div",{className:"text-muted",children:"No requisitions created by you."}):n.jsxs("table",{className:"sa-table",style:{width:"100%",marginTop:8},children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Req No"}),n.jsx("th",{children:"Lines"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Date"})]})}),n.jsx("tbody",{children:o.map(q=>{var k;return n.jsxs("tr",{children:[n.jsx("td",{children:q.requisitionNo}),n.jsx("td",{children:(k=q.lines)==null?void 0:k.map(L=>`${L.item} x ${L.qty}`).join(", ")}),n.jsx("td",{children:n.jsx("span",{style:{padding:"4px 8px",borderRadius:12,background:"#0b1220",color:"#fff"},children:q.status})}),n.jsx("td",{children:new Date(q.createdAt).toLocaleDateString()})]},q._id)})})]})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[n.jsxs("div",{className:"sa-card",style:{padding:18},children:[n.jsx("h3",{style:{marginTop:0},children:"Open POs"}),c.length===0?n.jsx("div",{className:"text-muted",children:"No open POs for this resort."}):n.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:c.map(q=>n.jsxs("li",{style:{padding:10,borderRadius:8,background:"rgba(255,255,255,0.01)",marginBottom:8},children:[n.jsx("div",{style:{fontWeight:600},children:q.poNo}),n.jsx("div",{style:{color:"#98a1b3",fontSize:13},children:q.vendor||"Vendor"}),n.jsx("div",{style:{marginTop:6,fontSize:12,color:"#6b7a93"},children:q.status})]},q._id))})]}),n.jsxs("div",{className:"sa-card",style:{padding:18},children:[n.jsx("h3",{style:{marginTop:0},children:"Low / Important Items"}),d.length===0?n.jsx("div",{className:"text-muted",children:"No items data."}):n.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:d.slice(0,6).map(q=>n.jsxs("li",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,0.02)"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:600},children:q.name}),n.jsx("div",{style:{color:"#98a1b3",fontSize:12},children:q.sku||""})]}),n.jsxs("div",{style:{fontWeight:600},children:[Object.values(q.stockByStore||{}).reduce((k,L)=>k+L,0)," in stock"]})]},q._id))})]})]})]}),p&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!_&&R(!1),children:n.jsxs("div",{className:"sa-modal",onClick:q=>q.stopPropagation(),style:{maxWidth:900},children:[n.jsx("h3",{children:"Create Requisition"}),n.jsx("p",{className:"sa-modal-sub",children:"Fill the following details to raise a requisition."}),n.jsxs("form",{className:"sa-modal-form",onSubmit:U,children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[n.jsxs("label",{children:["Resort",n.jsxs("select",{name:"resort",value:C.resort,onChange:q=>V(k=>({...k,resort:q.target.value})),required:!0,children:[n.jsx("option",{value:"",children:"-- Select Resort --"}),e.map(q=>n.jsx("option",{value:q._id,children:q.name},q._id))]})]}),n.jsxs("label",{children:["Requisition Type",n.jsxs("select",{name:"type",value:C.type,onChange:q=>V(k=>({...k,type:q.target.value})),children:[n.jsx("option",{value:"INTERNAL",children:"Internal (Store to Store)"}),n.jsx("option",{value:"VENDOR",children:"Vendor (Buy from vendor)"})]})]}),n.jsxs("label",{children:["Department",n.jsx("input",{name:"department",value:C.department,onChange:q=>V(k=>({...k,department:q.target.value}))})]}),n.jsxs("label",{children:["Store",n.jsx("input",{name:"store",value:C.store,onChange:q=>V(k=>({...k,store:q.target.value}))})]}),C.type==="VENDOR"&&n.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Vendor",n.jsx("input",{name:"vendor",value:C.vendor,onChange:q=>V(k=>({...k,vendor:q.target.value})),placeholder:"Vendor name or id"})]}),n.jsxs("label",{children:["Required By",n.jsx("input",{type:"date",name:"requiredBy",value:C.requiredBy,onChange:q=>V(k=>({...k,requiredBy:q.target.value}))})]})]}),n.jsxs("div",{style:{marginTop:12},children:[n.jsxs("table",{className:"sa-table",style:{width:"100%"},children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Remark"}),n.jsx("th",{})]})}),n.jsx("tbody",{children:C.lines.map((q,k)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("input",{value:q.item,onChange:L=>D(k,"item",L.target.value),placeholder:"Item id or name",required:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"1",value:q.qty,onChange:L=>D(k,"qty",L.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{value:q.remark,onChange:L=>D(k,"remark",L.target.value)})}),n.jsx("td",{children:C.lines.length>1&&n.jsx("button",{type:"button",onClick:()=>ne(k),children:"Remove"})})]},q.lineId))})]}),n.jsx("button",{type:"button",onClick:K,style:{marginTop:8},className:"sa-secondary-button",children:"+ Add Line"})]}),v&&n.jsx("div",{className:"sa-modal-error",style:{marginTop:8},children:v}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>!_&&R(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:_,children:_?"Saving...":"Save Requisition"})]})]})]})})]})},Yj="http://localhost:5000",ps=Z.create({baseURL:Yj,headers:{"Content-Type":"application/json"}});try{const e=localStorage.getItem("auth");if(e){const t=JSON.parse(e);t.token&&(ps.defaults.headers.common.Authorization=`Bearer ${t.token}`)}}catch{}const ga=({selected:e,onChange:t})=>{const[r,s]=m.useState([]);return m.useEffect(()=>{async function a(){try{const i=await ps.get("/resort-user/assigned-resorts");s(i.data.resorts||[])}catch(i){console.error("Failed to load resorts",i)}}a()},[]),n.jsxs("select",{value:e||"",onChange:a=>t(a.target.value),children:[n.jsx("option",{value:"",children:"-- Select Resort --"}),r.map(a=>n.jsx("option",{value:a._id,children:a.name},a._id))]})},Jj=({title:e,children:t,onClose:r})=>n.jsx("div",{className:"sa-modal-backdrop",onClick:r,children:n.jsxs("div",{className:"sa-modal",onClick:s=>s.stopPropagation(),children:[n.jsxs("div",{className:"sa-modal-header",children:[n.jsx("h3",{children:e}),n.jsx("button",{className:"sa-modal-close",onClick:r,children:""})]}),n.jsx("div",{className:"sa-modal-body",children:t})]})}),rf=({onClose:e})=>{const[t,r]=m.useState(""),[s,a]=m.useState(""),[i,o]=m.useState([{item:"",qty:1,remark:""}]),[l,c]=m.useState(""),u=()=>o(f=>[...f,{item:"",qty:1,remark:""}]),d=f=>o(b=>b.filter((p,R)=>R!==f)),g=async f=>{f.preventDefault();try{const b={resort:t,department:s,lines:i},p=await ps.post("/resort-user/requisitions",b);c("Requisition created: "+(p.data.requisition.requisitionNo||"")),e&&setTimeout(()=>e(),800)}catch(b){console.error(b),c("Failed to create requisition")}};return n.jsxs("div",{children:[n.jsx(ga,{selected:t,onChange:r}),n.jsxs("form",{onSubmit:g,children:[n.jsx("div",{style:{marginTop:8},children:n.jsxs("label",{children:["Department / Store",n.jsx("br",{}),n.jsx("input",{value:s,onChange:f=>a(f.target.value),required:!0})]})}),n.jsxs("table",{style:{width:"100%",marginTop:8},children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"Remark"}),n.jsx("th",{})]})}),n.jsx("tbody",{children:i.map((f,b)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("input",{value:f.item,onChange:p=>{const R=p.target.value;o(_=>{const j=[..._];return j[b].item=R,j})},required:!0})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"1",value:f.qty,onChange:p=>{const R=Number(p.target.value);o(_=>{const j=[..._];return j[b].qty=R,j})}})}),n.jsx("td",{children:n.jsx("input",{value:f.remark,onChange:p=>{const R=p.target.value;o(_=>{const j=[..._];return j[b].remark=R,j})}})}),n.jsx("td",{children:b>0&&n.jsx("button",{type:"button",onClick:()=>d(b),children:"Remove"})})]},b))})]}),n.jsxs("div",{style:{marginTop:8},children:[n.jsx("button",{type:"button",onClick:u,children:"Add Line"})," ",n.jsx("button",{type:"submit",children:"Submit Requisition"})," ",e&&n.jsx("button",{type:"button",onClick:e,children:"Close"})]})]}),l&&n.jsx("div",{style:{marginTop:8},children:l})]})},Wa=({title:e,value:t,subtitle:r,actionText:s,actionLink:a})=>n.jsxs("div",{className:"sa-stat-card",children:[n.jsx("div",{className:"sa-stat-title",children:e}),n.jsx("div",{className:"sa-stat-value",children:t}),n.jsx("div",{className:"sa-stat-sub",children:r}),s&&a&&n.jsx(_h,{to:a,className:"sa-stat-action",children:s})]}),Xj=()=>{const[e,t]=m.useState(""),[r,s]=m.useState({totalResorts:0,openRequisitions:0,pendingGRN:0,lowStockItems:0}),[a,i]=m.useState(!1),[o,l]=m.useState(!1);return m.useEffect(()=>{e&&(i(!0),ps.get(`/resort-user/dashboard-stats/${e}`).then(c=>{s(c.data||{})}).catch(c=>{console.error("Failed to load dashboard stats",c)}).finally(()=>i(!1)))},[e]),n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("h2",{children:"Resort User Dashboard"}),n.jsx("div",{style:{display:"flex",gap:12,alignItems:"center"},children:n.jsx("button",{className:"btn btn-primary",onClick:()=>l(!0),children:"+ New Requisition"})})]}),n.jsxs("div",{style:{marginTop:10,marginBottom:20},children:[n.jsx("label",{style:{marginRight:10},children:"Current Resort: "}),n.jsx(ga,{selected:e,onChange:t})]}),n.jsxs("div",{className:"sa-card-grid",style:{display:"grid",gridTemplateColumns:"repeat(4,1fr)",gap:16},children:[n.jsx(Wa,{title:"Total Resorts",value:r.totalResorts,subtitle:"Active properties"}),n.jsx(Wa,{title:"Open Requisitions",value:r.openRequisitions,subtitle:"Waiting for approval",actionText:"+ view",actionLink:"/resort/requisitions"}),n.jsx(Wa,{title:"Pending GRN",value:r.pendingGRN,subtitle:"PO received, GRN not done",actionText:"Review",actionLink:"/resort/grn"}),n.jsx(Wa,{title:"Low Stock Items",value:r.lowStockItems,subtitle:"Below reorder level",actionText:"Check now",actionLink:"/resort/reports"})]}),a&&n.jsx("div",{style:{marginTop:20},children:"Loading stats..."}),o&&n.jsx(Jj,{title:"Create Requisition",onClose:()=>l(!1),children:n.jsx(rf,{onClose:()=>l(!1)})})]})},Zj=()=>{const[e,t]=m.useState(""),[r,s]=m.useState(""),[a,i]=m.useState([{item:"",qty:1,rate:0}]),[o,l]=m.useState(""),c=()=>i(d=>[...d,{item:"",qty:1,rate:0}]),u=async()=>{try{const d=await ps.post("/resort-user/po",{resort:e,vendor:r,items:a});l("PO created: "+(d.data.po.poNo||""))}catch(d){console.error(d),l("Failed to create PO")}};return n.jsxs("div",{className:"sa-page",children:[n.jsx("h2",{children:"Create PO"}),n.jsx(ga,{selected:e,onChange:t}),n.jsxs("label",{children:["Vendor ",n.jsx("input",{value:r,onChange:d=>s(d.target.value)})]}),n.jsx("div",{children:a.map((d,g)=>n.jsxs("div",{children:[n.jsx("input",{placeholder:"Item",value:d.item,onChange:f=>{const b=f.target.value;i(p=>{const R=[...p];return R[g].item=b,R})}}),n.jsx("input",{type:"number",value:d.qty,onChange:f=>{const b=Number(f.target.value);i(p=>{const R=[...p];return R[g].qty=b,R})}}),n.jsx("input",{type:"number",value:d.rate,onChange:f=>{const b=Number(f.target.value);i(p=>{const R=[...p];return R[g].rate=b,R})}})]},g))}),n.jsx("button",{onClick:c,children:"Add Item"}),n.jsx("button",{onClick:u,children:"Create PO"}),o&&n.jsx("div",{children:o})]})},e0=()=>{const[e,t]=m.useState(""),[r,s]=m.useState(""),[a,i]=m.useState(""),[o,l]=m.useState(""),[c,u]=m.useState([{item:"",receivedQty:0,rejectedQty:0}]),[d,g]=m.useState(""),f=async()=>{try{const b=await ps.post("/resort-user/grn",{resort:e,store:r,vendor:a,po:o,items:c});g("GRN created: "+(b.data.grn.grnNo||""))}catch(b){console.error(b),g("Failed to create GRN")}};return n.jsxs("div",{className:"sa-page",children:[n.jsx("h2",{children:"GRN Entry"}),n.jsx(ga,{selected:e,onChange:t}),n.jsxs("label",{children:["Store ",n.jsx("input",{value:r,onChange:b=>s(b.target.value)})]}),n.jsxs("label",{children:["Vendor ",n.jsx("input",{value:a,onChange:b=>i(b.target.value)})]}),n.jsxs("label",{children:["PO ",n.jsx("input",{value:o,onChange:b=>l(b.target.value)})]}),n.jsx("button",{onClick:f,children:"Create GRN"}),d&&n.jsx("div",{children:d})]})},t0=()=>n.jsxs("div",{className:"sa-page",children:[n.jsx("h2",{children:"Purchase Reports"}),n.jsx(ga,{onChange:()=>{}}),n.jsxs("ul",{children:[n.jsx("li",{children:n.jsx("a",{href:"#",onClick:e=>{e.preventDefault(),alert("Report: Requisition Register (stub)")},children:"Requisition Register"})}),n.jsx("li",{children:n.jsx("a",{href:"#",onClick:e=>{e.preventDefault(),alert("Report: Pending Requisition (stub)")},children:"Pending Requisition"})}),n.jsx("li",{children:n.jsx("a",{href:"#",onClick:e=>{e.preventDefault(),alert("Report: PO Register (stub)")},children:"PO Register"})})]})]}),n0=()=>{const[e,t]=m.useState("purchase"),[r,s]=m.useState({resort:"all",from:"",to:""}),a=i=>{s(o=>({...o,[i.target.name]:i.target.value}))};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Reports"}),n.jsx("p",{children:"Purchase, stock & consumption analytics for all resorts."})]}),n.jsxs("button",{className:"sa-primary-button",type:"button",children:[n.jsx("i",{className:"ri-download-2-line"})," Export"]})]}),n.jsxs("div",{className:"sa-card sa-report-filters",children:[n.jsxs("div",{className:"sa-tabs",children:[n.jsx("button",{type:"button",className:`sa-tab ${e==="purchase"?"active":""}`,onClick:()=>t("purchase"),children:"Purchase Summary"}),n.jsx("button",{type:"button",className:`sa-tab ${e==="stock"?"active":""}`,onClick:()=>t("stock"),children:"Stock Ledger"}),n.jsx("button",{type:"button",className:`sa-tab ${e==="consumption"?"active":""}`,onClick:()=>t("consumption"),children:"Consumption Report"})]}),n.jsxs("div",{className:"sa-report-filter-row",children:[n.jsxs("div",{className:"sa-report-filter-group",children:[n.jsx("label",{children:"Resort"}),n.jsxs("select",{name:"resort",value:r.resort,onChange:a,children:[n.jsx("option",{value:"all",children:"All Resorts"}),n.jsx("option",{value:"beachside",children:"Beachside Resort"}),n.jsx("option",{value:"hillview",children:"Hillview Resort"})]})]}),n.jsxs("div",{className:"sa-report-filter-group",children:[n.jsx("label",{children:"From"}),n.jsx("input",{type:"date",name:"from",value:r.from,onChange:a})]}),n.jsxs("div",{className:"sa-report-filter-group",children:[n.jsx("label",{children:"To"}),n.jsx("input",{type:"date",name:"to",value:r.to,onChange:a})]})]})]}),e==="purchase"&&n.jsx(r0,{}),e==="stock"&&n.jsx(s0,{}),e==="consumption"&&n.jsx(a0,{})]})},r0=()=>{const e=[{resort:"Beachside Resort",vendor:"FreshFoods Supplier",orders:12,value:" 4,25,000"},{resort:"Hillview Resort",vendor:"Beverage Distributors",orders:8,value:" 2,10,000"}];return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"sa-grid-3",children:[n.jsxs("div",{className:"sa-card sa-report-kpi",children:[n.jsx("div",{className:"sa-report-kpi-label",children:"Total PO Value"}),n.jsx("div",{className:"sa-report-kpi-value",children:" 9,80,000"}),n.jsx("div",{className:"sa-report-kpi-sub",children:"Last 30 days"})]}),n.jsxs("div",{className:"sa-card sa-report-kpi",children:[n.jsx("div",{className:"sa-report-kpi-label",children:"Vendors"}),n.jsx("div",{className:"sa-report-kpi-value",children:"18"}),n.jsx("div",{className:"sa-report-kpi-sub",children:"With active PO"})]}),n.jsxs("div",{className:"sa-card sa-report-kpi",children:[n.jsx("div",{className:"sa-report-kpi-label",children:"Avg. PO Value"}),n.jsx("div",{className:"sa-report-kpi-value",children:" 54,000"}),n.jsx("div",{className:"sa-report-kpi-sub",children:"Per order"})]})]}),n.jsxs("div",{className:"sa-card",style:{marginTop:16},children:[n.jsx("div",{className:"sa-card-title",children:"Resort & vendor-wise purchase"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Resort"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"No. of POs"}),n.jsx("th",{children:"Total Value"})]})}),n.jsx("tbody",{children:e.map((t,r)=>n.jsxs("tr",{children:[n.jsx("td",{children:t.resort}),n.jsx("td",{children:t.vendor}),n.jsx("td",{children:t.orders}),n.jsx("td",{children:t.value})]},r))})]})]})]})},s0=()=>{const e=[{item:"Mineral Water 1L",store:"Beachside - Main Store",opening:120,inQty:80,outQty:60,closing:140},{item:"Room Freshener",store:"Hillview - HK Store",opening:40,inQty:30,outQty:20,closing:50}];return n.jsxs("div",{className:"sa-card",children:[n.jsx("div",{className:"sa-card-title",children:"Item-wise in/out balance"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Opening"}),n.jsx("th",{children:"In"}),n.jsx("th",{children:"Out"}),n.jsx("th",{children:"Closing"})]})}),n.jsx("tbody",{children:e.map((t,r)=>n.jsxs("tr",{children:[n.jsx("td",{children:t.item}),n.jsx("td",{children:t.store}),n.jsx("td",{children:t.opening}),n.jsx("td",{children:t.inQty}),n.jsx("td",{children:t.outQty}),n.jsx("td",{children:t.closing})]},r))})]})]})},a0=()=>{const e=[{resort:"Beachside Resort",department:"F&B",item:"Mineral Water 1L",qty:220},{resort:"Hillview Resort",department:"Housekeeping",item:"Room Freshener",qty:65}];return n.jsxs("div",{className:"sa-card",children:[n.jsx("div",{className:"sa-card-title",children:"Department / outlet-wise usage"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Resort"}),n.jsx("th",{children:"Department"}),n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Consumed Qty"})]})}),n.jsx("tbody",{children:e.map((t,r)=>n.jsxs("tr",{children:[n.jsx("td",{children:t.resort}),n.jsx("td",{children:t.department}),n.jsx("td",{children:t.item}),n.jsx("td",{children:t.qty})]},r))})]})]})},i0=({children:e,allowedRoles:t})=>{const{user:r}=od();return r?t&&!t.includes(r.role)?n.jsx(Ti,{to:"/login",replace:!0}):e:n.jsx(Ti,{to:"/login",replace:!0})},Ha="http://localhost:5000",Yo={SUPER_ADMIN:{label:"Super Admin (full access)",modules:{USERS:["CREATE","READ","UPDATE","DELETE"],ROLES:["CREATE","READ","UPDATE","DELETE"],RESORTS:["CREATE","READ","UPDATE","DELETE"],VENDORS:["CREATE","READ","UPDATE","DELETE"],ITEMS:["CREATE","READ","UPDATE","DELETE"],REQUISITIONS:["CREATE","READ","UPDATE","DELETE","APPROVE"],PO:["CREATE","READ","UPDATE","DELETE"],GRN:["CREATE","READ","UPDATE","DELETE"],REPORTS:["READ"]}},RESORT_USER:{label:"Resort User (operational)",modules:{REQUISITIONS:["CREATE","READ"],ITEMS:["READ"],STORES:["READ"],REPORTS:["READ"]}},APPROVER:{label:"Approver (requisition approvals)",modules:{REQUISITIONS:["READ","APPROVE","COMMENT"],REPORTS:["READ"]}},PURCHASE_MANAGER:{label:"Purchase Manager (PO & vendor)",modules:{REQUISITIONS:["READ"],PO:["CREATE","READ","UPDATE"],VENDORS:["READ","UPDATE"],ITEMS:["READ","UPDATE"],REPORTS:["READ"]}},STORE_USER:{label:"Store / Store Incharge",modules:{GRN:["CREATE","READ"],ITEMS:["READ","UPDATE_STOCK"],REQUISITIONS:["READ"]}}},o0=()=>{const[e,t]=m.useState([]),[r,s]=m.useState([]),[a,i]=m.useState([]),[o,l]=m.useState(null),[c,u]=m.useState(""),[d,g]=m.useState({name:"",key:"",description:"",type:"CUSTOM",storeMode:"MULTI",permissions:[]}),[f,b]=m.useState(!1),[p,R]=m.useState(!1),[_,j]=m.useState(""),v=async()=>{try{const L=await Z.get(`${Ha}/api/roles/meta`);s(L.data.modules||[]),i(L.data.actions||[])}catch(L){console.error("Failed to load roles meta",L),s(O=>O.length?O:["USERS","ROLES","RESORTS","REQUISITIONS","PO","GRN","ITEMS","VENDORS","REPORTS"]),i(O=>O.length?O:["CREATE","READ","UPDATE","DELETE","APPROVE","COMMENT"])}},N=async()=>{try{b(!0);const L=await Z.get(`${Ha}/api/roles`);t(L.data||[])}catch(L){console.error("Failed to load roles",L),j("Failed to load roles")}finally{b(!1)}};m.useEffect(()=>{v(),N()},[]);const C=()=>j(""),V=L=>{l(L._id),g({name:L.name||"",key:L.key||"",description:L.description||"",type:L.type||"CUSTOM",storeMode:L.storeMode||"MULTI",permissions:L.permissions||[]}),u(""),C()},H=()=>{l(null),g({name:"",key:"",description:"",type:"CUSTOM",storeMode:"MULTI",permissions:[]}),u(""),C()},F=L=>{const{name:O,value:G}=L.target;o&&d.type==="SYSTEM"&&O==="key"||(g(M=>({...M,[O]:G})),C())},K=(L,O)=>{const G=d.permissions.find(M=>M.module===L);return G?G.actions.includes(O):!1},ne=(L,O)=>{g(G=>{const M=[...G.permissions],Y=M.findIndex(I=>I.module===L);if(Y===-1)M.push({module:L,actions:[O]});else{const I=new Set(M[Y].actions||[]);I.has(O)?I.delete(O):I.add(O),M[Y].actions=Array.from(I)}const $=M.filter(I=>I.actions&&I.actions.length);return{...G,permissions:$}}),C()},D=(L,O=!0)=>{if(!L)return;const G=Yo[L];if(!G)return;const M=r.map(Y=>{const I=(G.modules&&G.modules[Y]||G.modules&&G.modules[Y.toUpperCase()]||[]).filter(ce=>a.includes(ce));return I.length?{module:Y,actions:I}:null}).filter(Boolean);g(Y=>{const $=O?M:W(Y.permissions,M);return{...Y,permissions:$,type:L==="SUPER_ADMIN"?"SYSTEM":Y.type,key:Y.key||L,name:Y.name||G.label||Y.name}}),u(L),C()},W=(L=[],O=[])=>{const G=new Map;return L.forEach(Y=>G.set(Y.module,new Set(Y.actions||[]))),O.forEach(Y=>{const $=G.get(Y.module)||new Set;(Y.actions||[]).forEach(I=>$.add(I)),G.set(Y.module,$)}),Array.from(G.entries()).map(([Y,$])=>({module:Y,actions:Array.from($)}))},U=L=>{g(O=>({...O,permissions:O.permissions.filter(G=>G.module!==L)}))},q=async()=>{var L,O;if(!d.name||!d.key){j("Role name & key are required");return}if(d.type==="SYSTEM"&&o===null){j("Cannot create new SYSTEM role from UI. Use custom roles or ask system admin.");return}try{if(R(!0),j(""),o){const G=await Z.put(`${Ha}/api/roles/${o}`,{name:d.name,description:d.description,permissions:d.permissions,storeMode:d.storeMode});t(M=>M.map(Y=>Y._id===o?G.data:Y))}else{const G=await Z.post(`${Ha}/api/roles`,{name:d.name,key:d.key,description:d.description,type:"CUSTOM",permissions:d.permissions,storeMode:d.storeMode});t(M=>[...M,G.data]),l(G.data._id)}C()}catch(G){console.error("save error",G),j(((O=(L=G.response)==null?void 0:L.data)==null?void 0:O.message)||"Failed to save role")}finally{R(!1)}},k=L=>typeof L=="string"?L.replace(/_/g," "):L;return n.jsxs("div",{className:"sa-page sa-page-roles",children:[n.jsx("div",{className:"sa-page-header",children:n.jsxs("div",{children:[n.jsx("h2",{children:"User Roles"}),n.jsx("p",{children:"Define system & custom roles with module-wise permissions and store access."})]})}),n.jsxs("div",{className:"sa-roles-layout",children:[n.jsxs("div",{className:"sa-roles-left",children:[n.jsx("div",{className:"sa-roles-section-title",children:"Roles"}),f?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Loading roles..."}):n.jsxs("ul",{className:"sa-roles-list",children:[e.map(L=>n.jsxs("li",{className:"sa-role-pill "+(o===L._id?"active":"")+(L.type==="SYSTEM"?" system":""),onClick:()=>V(L),children:[n.jsx("div",{className:"sa-role-name",children:L.name}),n.jsxs("div",{className:"sa-role-sub",children:[(L.type||"CUSTOM").toLowerCase(),"  ",L.key," "," ",(L.storeMode||"MULTI")==="SINGLE"?"Single Store":"Multi Store"]})]},L._id)),!f&&e.length===0&&n.jsx("li",{className:"sa-role-sub",children:"No roles created yet."})]}),n.jsxs("button",{className:"sa-primary-button",onClick:H,children:[n.jsx("i",{className:"ri-add-line"})," New Custom Role"]})]}),n.jsxs("div",{className:"sa-roles-right",children:[n.jsxs("div",{className:"sa-card",style:{marginBottom:12},children:[n.jsx("h3",{children:"Basic Details"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 1fr) minmax(0, 1fr)",gap:16,marginTop:8},children:[n.jsxs("div",{children:[n.jsx("label",{children:"Role Name"}),n.jsx("input",{name:"name",value:d.name,onChange:F,placeholder:"Store Incharge / Front Office..."})]}),n.jsxs("div",{children:[n.jsx("label",{children:"Key"}),n.jsx("input",{name:"key",value:d.key,onChange:F,placeholder:"STORE_USER",disabled:!!o&&d.type==="SYSTEM"})]}),n.jsxs("div",{children:[n.jsx("label",{children:"Type"}),n.jsxs("select",{name:"type",value:d.type,onChange:F,disabled:!!o&&d.type==="SYSTEM",children:[n.jsx("option",{value:"CUSTOM",children:"CUSTOM"}),n.jsx("option",{value:"SYSTEM",children:"SYSTEM"})]})]})]}),n.jsxs("div",{style:{marginTop:16},children:[n.jsx("div",{style:{fontSize:14,fontWeight:600,marginBottom:4},children:"Store Access"}),n.jsxs("div",{style:{display:"flex",gap:24,fontSize:14,flexWrap:"wrap"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[n.jsx("input",{type:"radio",name:"storeMode",value:"SINGLE",checked:d.storeMode==="SINGLE",onChange:F}),"Single Store (user can be mapped to only one store)"]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[n.jsx("input",{type:"radio",name:"storeMode",value:"MULTI",checked:d.storeMode==="MULTI",onChange:F}),"Multi Store (user can be mapped to multiple stores)"]})]})]}),n.jsxs("div",{style:{marginTop:16},children:[n.jsx("label",{children:"Description"}),n.jsx("textarea",{name:"description",value:d.description,onChange:F,rows:2,placeholder:"Short description for this role..."})]}),n.jsxs("div",{style:{marginTop:16,paddingTop:12,borderTop:"1px solid rgba(255,255,255,0.05)"},children:[n.jsx("div",{style:{fontSize:13,fontWeight:600,marginBottom:6},children:"Copy permissions from template (optional)"}),n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[n.jsxs("select",{value:c,onChange:L=>u(L.target.value),style:{flex:1,minWidth:240},children:[n.jsx("option",{value:"",children:"-- Select a template --"}),Object.keys(Yo).map(L=>n.jsxs("option",{value:L,children:[L,"  ",Yo[L].label]},L))]}),n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>D(c,!0),disabled:!c,children:"Apply"}),n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>D(c,!1),disabled:!c,title:"Merge template with existing permissions",children:"Merge"})]})]})]}),n.jsxs("div",{className:"sa-card",children:[n.jsx("h3",{children:"Permissions"}),n.jsx("p",{className:"sa-modal-sub",children:"Tick what this role can do in each module."}),n.jsx("div",{className:"sa-role-permission-table",style:{overflowX:"auto"},children:n.jsxs("table",{children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Module"}),a.map(L=>n.jsx("th",{style:{whiteSpace:"nowrap"},children:L},L)),n.jsx("th",{style:{width:60},children:"Clear"})]})}),n.jsxs("tbody",{children:[r.map(L=>n.jsxs("tr",{children:[n.jsx("td",{style:{minWidth:160},children:k(L)}),a.map(O=>n.jsx("td",{style:{textAlign:"center"},children:n.jsx("input",{type:"checkbox",checked:K(L,O),onChange:()=>ne(L,O),"aria-label":`${L}-${O}`})},O)),n.jsx("td",{style:{textAlign:"center"},children:n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>U(L),children:"Clear"})})]},L)),r.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:a.length+2,children:"No modules metadata loaded."})})]})]})}),_&&n.jsx("div",{className:"sa-modal-error",style:{marginTop:8},children:_}),n.jsx("div",{className:"sa-modal-actions",style:{marginTop:12},children:n.jsx("button",{type:"button",className:"sa-primary-button",onClick:q,disabled:p,children:p?"Saving...":"Save Role"})})]})]})]})]})},l0="http://localhost:5000",c0=[{value:"",label:"All Types"},{value:"LUMPSUM",label:"Lumpsum"},{value:"RECIPE_LUMPSUM",label:"Lumpsum by Recipe"},{value:"RECIPE_PORTION",label:"Portion by Recipe"}],d0=e=>e?e==="LUMPSUM"?"Lumpsum":e==="RECIPE_LUMPSUM"?"Lumpsum by Recipe":e==="RECIPE_PORTION"?"Portion by Recipe":e:"-",Jo=[{_id:"dev_cons_1",date:new Date().toISOString(),type:"LUMPSUM",eventName:"Staff Meal - Kitchen",menuName:null,resort:"Resort A",department:"Kitchen",storeFrom:{_id:"store_cold",name:"Cold Store"},storeTo:null,lines:[{item:"Rice",qty:10,uom:"Kg"}],notes:"Daily staff meal lumpsum"},{_id:"dev_cons_2",date:new Date().toISOString(),type:"RECIPE_LUMPSUM",eventName:"Wedding Dinner",menuName:"Veg Buffet",resort:"Resort A",department:null,storeFrom:{_id:"store_main",name:"Main Store"},storeTo:null,lines:[{item:"Paneer",qty:8,uom:"Kg"}],notes:"Recipe lumpsum for wedding"},{_id:"dev_cons_3",date:new Date().toISOString(),type:"RECIPE_PORTION",eventName:"Catering - 50 pax",menuName:"Set Menu B",resort:"Resort B",department:null,storeFrom:{_id:"store_cold",name:"Cold Store"},storeTo:null,lines:[{item:"Chicken",qty:25,uom:"Kg"}],notes:"Portion consumption by recipe"},{_id:"dev_cons_4",date:new Date().toISOString(),type:"LUMPSUM",eventName:"Banquet - Lumpsum",menuName:"Banquet Menu",resort:"Resort C",department:null,storeFrom:{_id:"store_freezer",name:"Freezer"},storeTo:null,lines:[{item:"Oil",qty:20,uom:"Ltr"}],notes:"Lumpsum for banquet"}],u0=()=>{const[e,t]=m.useState([]),[r,s]=m.useState([]),[a,i]=m.useState(""),[o,l]=m.useState(!1),[c,u]=m.useState(""),[d,g]=m.useState(""),[f,b]=m.useState(""),[p,R]=m.useState(""),[_,j]=m.useState(""),[v,N]=m.useState(""),C=bn(),V=()=>{const W={};return a&&(W.type=a),W},H=async()=>{try{l(!0),u("");const W=V();let U;try{U=await Z.get(`${l0}/api/consumption`,{params:W})}catch(M){console.warn("API call failed (consumption). Falling back to samples.",M),U={data:[]}}const k=(Array.isArray(U.data)?U.data:[]).filter(M=>M.type!=="REPLACEMENT"),L=new Set(k.map(M=>M._id)),O=Jo.filter(M=>!L.has(M._id)),G=[...k,...O];s(G),t(F(G))}catch(W){console.error("load consumption error",W),u("Failed to load consumption entries"),s(Jo),t(F(Jo))}finally{l(!1)}};m.useEffect(()=>{H()},[]);const F=W=>W.filter(U=>{var q,k,L,O,G,M,Y;if(U.type==="REPLACEMENT"||a&&U.type!==a||d&&!(U.resort||U.resortName||"").toString().toLowerCase().includes(d.toLowerCase())||f&&![(q=U.storeFrom)==null?void 0:q.name,(k=U.storeTo)==null?void 0:k.name,(L=U.department)==null?void 0:L.name,(O=U.store)==null?void 0:O.name].filter(Boolean).join(" ").toLowerCase().includes(f.toLowerCase()))return!1;if(p){const $=U.date?new Date(U.date).setHours(0,0,0,0):null,I=new Date(p).setHours(0,0,0,0);if(!$||$<I)return!1}if(_){const $=U.date?new Date(U.date).setHours(0,0,0,0):null,I=new Date(_).setHours(0,0,0,0);if(!$||$>I)return!1}if(v&&v.trim()){const $=v.trim().toLowerCase();if(![U._id,U.referenceNo,U.eventName,U.menuName,U.type,U.resort,(G=U.storeFrom)==null?void 0:G.name,(M=U.storeTo)==null?void 0:M.name,(Y=U.department)==null?void 0:Y.name,...(U.lines||[]).map(ce=>ce.item)].filter(Boolean).join(" ").toLowerCase().includes($))return!1}return!0});m.useEffect(()=>{t(F(r))},[a,d,f,p,_,v,r]);const K=()=>{C("/super-admin/consumption/new")},ne=W=>{C(`/super-admin/consumption/${W._id}`)},D=()=>{i(""),g(""),b(""),R(""),j(""),N("")};return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",style:{alignItems:"flex-start"},children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Consumption"}),n.jsx("p",{children:"Record stock consumption by lumpsum / recipe / portion."})]}),n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[n.jsxs("button",{className:"sa-primary-button",onClick:K,children:[n.jsx("i",{className:"ri-add-line"})," New"]}),n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>{H()},children:"Refresh"})]})]}),n.jsxs("div",{className:"sa-card",style:{display:"flex",alignItems:"center",gap:12,marginBottom:12,flexWrap:"wrap"},children:[n.jsxs("label",{style:{fontSize:"0.9rem"},children:["Type",n.jsx("select",{value:a,onChange:W=>i(W.target.value),style:{marginLeft:8,marginTop:4},children:c0.map(W=>n.jsx("option",{value:W.value,children:W.label},W.value??"all"))})]}),n.jsxs("label",{style:{fontSize:"0.9rem"},children:["Resort",n.jsx("input",{placeholder:"Resort name",value:d,onChange:W=>g(W.target.value),style:{marginLeft:8}})]}),n.jsxs("label",{style:{fontSize:"0.9rem"},children:["Store / Dept",n.jsx("input",{placeholder:"Store or Department",value:f,onChange:W=>b(W.target.value),style:{marginLeft:8}})]}),n.jsxs("label",{style:{fontSize:"0.9rem"},children:["Date from",n.jsx("input",{type:"date",value:p,onChange:W=>R(W.target.value),style:{marginLeft:8}})]}),n.jsxs("label",{style:{fontSize:"0.9rem"},children:["Date to",n.jsx("input",{type:"date",value:_,onChange:W=>j(W.target.value),style:{marginLeft:8}})]}),n.jsxs("label",{style:{flex:1,minWidth:200},children:["Search",n.jsx("input",{placeholder:"Event/Menu/Store/Item...",value:v,onChange:W=>N(W.target.value),style:{marginLeft:8,width:"80%"}})]}),n.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:[n.jsx("button",{className:"sa-secondary-button",onClick:D,children:"Clear"}),n.jsxs("div",{style:{fontSize:"0.9rem",color:"#9ca3af",alignSelf:"center"},children:["Showing: ",e.length," / ",r.length]})]})]}),n.jsxs("div",{className:"sa-card",children:[c&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:8},children:c}),o?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Loading..."}):e.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"No consumption entries found. Click New to add one."}):n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Event / Reference"}),n.jsx("th",{children:"Store / Dept"}),n.jsx("th",{children:"Lines"}),n.jsx("th",{children:"Notes"})]})}),n.jsx("tbody",{children:e.map(W=>{var U,q,k;return n.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>ne(W),children:[n.jsx("td",{children:W.date?new Date(W.date).toLocaleDateString():"-"}),n.jsx("td",{children:d0(W.type)}),n.jsx("td",{children:W.eventName||W.menuName||W.referenceNo||"-"}),n.jsxs("td",{children:[((U=W.storeFrom)==null?void 0:U.name)||""," ",W.storeTo?` ${W.storeTo.name}`:(q=W.department)!=null&&q.name?`(${W.department.name})`:""]}),n.jsx("td",{children:((k=W.lines)==null?void 0:k.length)||0}),n.jsx("td",{style:{maxWidth:220,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:W.notes||"-"})]},W._id)})})]})]})]})},An="http://localhost:5000",m0=[{value:"LUMPSUM",label:"Lumpsum"},{value:"RECIPE_LUMPSUM",label:"By Recipe  Lumpsum"},{value:"RECIPE_PORTION",label:"By Recipe  Portion"}],Xo=()=>({category:"",item:"",recipe:"",qty:"",uom:"",remarks:""}),am=()=>{const{id:e}=uv(),t=bn(),[r,s]=m.useState("LUMPSUM"),[a,i]=m.useState(""),[o,l]=m.useState(new Date().toISOString().slice(0,10)),[c,u]=m.useState(""),[d,g]=m.useState(""),[f,b]=m.useState([Xo()]),[p,R]=m.useState([]),[_,j]=m.useState([]),[v,N]=m.useState([]),[C,V]=m.useState([]),[H,F]=m.useState(!1),[K,ne]=m.useState(""),D=r==="RECIPE_LUMPSUM"||r==="RECIPE_PORTION",W=async()=>{try{const[$,I,ce]=await Promise.all([Z.get(`${An}/api/stores`).catch(()=>({data:[]})),Z.get(`${An}/api/items`).catch(()=>({data:[]})),Z.get(`${An}/api/recipes`).catch(()=>({data:[]}))]);R(Array.isArray($.data)?$.data:[]),j(Array.isArray(I.data)?I.data:[]),N(Array.isArray(ce.data)?ce.data:[]);let T=await Z.get(`${An}/api/item-categories`).catch(()=>({data:[]}));(!Array.isArray(T.data)||T.data.length===0)&&(T=await Z.get(`${An}/api/categories`).catch(()=>({data:[]}))),V(Array.isArray(T.data)?T.data:[])}catch($){console.error("load masters error",$)}},U=async()=>{var $;if(e)try{const ce=(await Z.get(`${An}/api/consumption/${e}`)).data||{},T=ce.type||"LUMPSUM",le=T==="RECIPE_LUMPSUM"||T==="RECIPE_PORTION";s(T),i((($=ce.storeFrom)==null?void 0:$._id)||ce.storeFrom||""),l(ce.date?ce.date.slice(0,10):new Date().toISOString().slice(0,10)),u(ce.notes||""),g(ce.referenceNo||""),b((ce.lines||[]).map(h=>{var X,se;return{category:h.category||"",recipe:le&&(((X=h.recipe)==null?void 0:X._id)||h.recipe)||"",item:le?"":((se=h.item)==null?void 0:se._id)||h.item||"",qty:h.qty??"",uom:h.uom||"",remarks:h.remarks||""}})||[Xo()])}catch(I){console.error("load consumption error",I),ne("Failed to load existing consumption entry")}};m.useEffect(()=>{W(),U()},[]);const q=(C||[]).map($=>{const I=$._id||$.id||$.code||$.value||$.name,ce=$.name||$.label||$.title||I;return{id:I,name:ce}}),k=($,I,ce)=>{b(T=>{const le=[...T];let h={...le[$]};if(I==="category")h.category=ce,h.item="",h.uom="";else if(I==="item"){h.item=ce;const X=_.find(se=>(se._id||se.id)===ce);if(X){h.uom=X.uom||X.UOM||X.unit||X.unitOfMeasure||X.measure||h.uom||"";const se=X.categoryId||X.category||X.itemCategory||"";se&&(h.category=se)}else h.uom=h.uom||""}else I==="recipe"?h.recipe=ce:h[I]=ce;return le[$]=h,le})},L=()=>b($=>[...$,Xo()]),O=$=>b(I=>I.filter((ce,T)=>T!==$)),G=()=>{if(!r)return ne("Type is required."),!1;if(!a)return ne("Store From is required."),!1;let $;return D?$=f.filter(I=>I.recipe&&I.qty&&Number(I.qty)>0):$=f.filter(I=>I.item&&I.qty&&Number(I.qty)>0),$.length===0?(ne(D?"Add at least one recipe with quantity.":"Add at least one item line with quantity."),!1):(ne(""),!0)},M=async $=>{var T,le;if($.preventDefault(),!G())return;let I;D?I=f.filter(h=>h.recipe&&h.qty&&Number(h.qty)>0).map(h=>({recipe:h.recipe,qty:Number(h.qty),remarks:h.remarks||""})):I=f.filter(h=>h.item&&h.qty&&Number(h.qty)>0).map(h=>({item:h.item,qty:Number(h.qty),uom:h.uom||"",remarks:h.remarks||"",category:h.category||void 0}));const ce={type:r,storeFrom:a,date:o,notes:c||void 0,referenceNo:d||void 0,lines:I};try{F(!0),e?await Z.put(`${An}/api/consumption/${e}`,ce):await Z.post(`${An}/api/consumption`,ce),t("/super-admin/consumption")}catch(h){console.error("save consumption error",h),ne(((le=(T=h.response)==null?void 0:T.data)==null?void 0:le.message)||"Failed to save consumption entry")}finally{F(!1)}},Y=e?"Edit Consumption":"New Consumption";return n.jsxs("div",{className:"sa-page",children:[n.jsx("div",{className:"sa-page-header",children:n.jsxs("div",{children:[n.jsx("h2",{children:Y}),n.jsx("p",{children:D?"Record stock consumption by recipe.":"Record stock consumption (lumpsum / recipe / portion)."})]})}),n.jsxs("form",{className:"sa-card",onSubmit:M,children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:12,marginBottom:16},children:[n.jsxs("label",{children:["Type",n.jsx("select",{value:r,onChange:$=>s($.target.value),required:!0,children:m0.map($=>n.jsx("option",{value:$.value,children:$.label},$.value))})]}),n.jsxs("label",{children:["Date",n.jsx("input",{type:"date",value:o,disabled:!0})]}),n.jsxs("label",{children:["Store From",n.jsxs("select",{value:a,onChange:$=>i($.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Select store"}),p.map($=>n.jsx("option",{value:$._id||$.id,children:$.name},$._id||$.id))]})]})]}),n.jsx("div",{style:{marginBottom:16},children:n.jsxs("label",{children:["Notes (optional)",n.jsx("textarea",{value:c,onChange:$=>u($.target.value),rows:2,placeholder:"Any remarks..."})]})}),n.jsx("h3",{style:{marginBottom:8},children:D?"Recipes":"Items"}),n.jsxs("div",{className:"sa-card",style:{padding:12,marginBottom:16},children:[n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:D?n.jsxs("tr",{children:[n.jsx("th",{style:{width:"45%"},children:"Recipe"}),n.jsx("th",{style:{width:"15%"},children:"Consumed Qty"}),n.jsx("th",{children:"Remarks"}),n.jsx("th",{style:{width:"5%"}})]}):n.jsxs("tr",{children:[n.jsx("th",{style:{width:"20%"},children:"Category"}),n.jsx("th",{style:{width:"30%"},children:"Item"}),n.jsx("th",{style:{width:"15%"},children:"Qty"}),n.jsx("th",{style:{width:"15%"},children:"UOM"}),n.jsx("th",{children:"Remarks"}),n.jsx("th",{style:{width:"5%"}})]})}),n.jsx("tbody",{children:f.map(($,I)=>{if(D)return n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("select",{value:$.recipe,onChange:T=>k(I,"recipe",T.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Select recipe"}),v.map(T=>n.jsx("option",{value:T._id||T.id,children:T.name},T._id||T.id))]})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:$.qty,onChange:T=>k(I,"qty",T.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{value:$.remarks,onChange:T=>k(I,"remarks",T.target.value),placeholder:"optional"})}),n.jsx("td",{children:f.length>1&&n.jsx("button",{type:"button",onClick:()=>O(I),className:"sa-secondary-button",children:"-"})})]},I);const ce=_.filter(T=>{const le=T.categoryId||T.category||T.itemCategory||T.categoryName||"";return $.category?String(le)===String($.category):!0});return n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("select",{value:$.category,onChange:T=>k(I,"category",T.target.value),children:[n.jsx("option",{value:"",children:"Select category"}),q.map(T=>n.jsx("option",{value:T.id,children:T.name},T.id))]})}),n.jsx("td",{children:n.jsxs("select",{value:$.item,onChange:T=>k(I,"item",T.target.value),required:!0,disabled:_.length===0,children:[n.jsx("option",{value:"",children:"Select item"}),ce.map(T=>n.jsx("option",{value:T._id||T.id,children:T.name},T._id||T.id))]})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:$.qty,onChange:T=>k(I,"qty",T.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{value:$.uom,readOnly:!0,placeholder:"Auto",style:{backgroundColor:"#020617",opacity:.95,color:"#fff",border:"1px solid rgba(255,255,255,0.06)",padding:"6px 8px"}})}),n.jsx("td",{children:n.jsx("input",{value:$.remarks,onChange:T=>k(I,"remarks",T.target.value),placeholder:"optional"})}),n.jsx("td",{children:f.length>1&&n.jsx("button",{type:"button",onClick:()=>O(I),className:"sa-secondary-button",children:"-"})})]},I)})})]}),n.jsx("button",{type:"button",className:"sa-secondary-button",style:{marginTop:8},onClick:L,children:D?"+ Add Recipe":"+ Add Item"})]}),K&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:12},children:K}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:8},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>t("/super-admin/consumption"),disabled:H,children:"Cancel"}),n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:H,children:H?"Saving...":"Save Consumption"})]})]})]})},nr="http://localhost:5000",Zo=[{_id:"store_main",name:"Main Store"},{_id:"store_cold",name:"Cold Store"}],el=[{_id:"item_1",name:"Milk 1L"},{_id:"item_2",name:"Bread Loaf"},{_id:"item_3",name:"Egg Tray"}],tl=[{_id:"vend_1",name:"Demo Vendor 1"},{_id:"vend_2",name:"Demo Vendor 2"}],nl=[{_id:"rep_1",replNo:"REP-2025-001",storeId:"store_main",date:new Date().toISOString(),status:"OPEN",vendorId:null,lines:[{lineId:"ln1",itemId:"item_1",qty:2,issuedQty:0,remark:"Damaged pack"},{lineId:"ln2",itemId:"item_2",qty:5,issuedQty:0,remark:""}]}],rl=()=>({lineId:`ln_${Date.now()}_${Math.floor(Math.random()*1e3)}`,itemId:"",qty:"",remark:""}),Es=()=>new Date().toISOString().slice(0,10),p0=()=>{var h,X,se,Ce,Re,ue,ve,Ne;const[e,t]=m.useState([]),[r,s]=m.useState([]),[a,i]=m.useState([]),[o,l]=m.useState([]),[c,u]=m.useState("ADD"),[d,g]=m.useState({storeId:"",lines:[rl()]}),[f,b]=m.useState(!1),[p,R]=m.useState(!1),[_,j]=m.useState(""),[v,N]=m.useState({open:!1,replacement:null,vendorId:"",lines:[]}),[C,V]=m.useState({open:!1,replacement:null,storeId:"",date:Es(),lines:[]}),H=P=>{var ie;return((ie=e.find(A=>A._id===P||A.id===P))==null?void 0:ie.name)||P||"-"},F=P=>r.find(ie=>ie._id===P||ie.id===P)||null,K=P=>{var ie;return((ie=F(P))==null?void 0:ie.name)||P||"-"},ne=P=>{var ie;return((ie=a.find(A=>A._id===P||A.id===P))==null?void 0:ie.name)||P||"-"},D=()=>{const P=new Date,ie=P.getFullYear(),A=String(P.getMonth()+1).padStart(2,"0"),ee=String(P.getDate()).padStart(2,"0"),E=String(P.getHours()*3600+P.getMinutes()*60+P.getSeconds()).padStart(5,"0");return`REP-${ie}${A}${ee}-${E}`},W=async()=>{try{b(!0),j("");const[P,ie,A,ee]=await Promise.all([Z.get(`${nr}/api/stores`).catch(()=>({data:Zo})),Z.get(`${nr}/api/items`).catch(()=>({data:el})),Z.get(`${nr}/api/vendors`).catch(()=>({data:tl})),Z.get(`${nr}/api/store-replacements`).catch(()=>({data:nl}))]);t(Array.isArray(P.data)&&P.data.length?P.data:Zo),s(Array.isArray(ie.data)&&ie.data.length?ie.data:el),i(Array.isArray(A.data)&&A.data.length?A.data:tl);const re=(Array.isArray(ee.data)?ee.data:[]).map(J=>({_id:J._id||J.id,replNo:J.replNo||J.repl_no||J.code||"",storeId:J.storeId||J.store||J.storeFrom||"",date:J.date||J.createdAt||new Date().toISOString(),status:J.status||"OPEN",vendorId:J.vendorId||J.vendor||null,lines:(J.lines||[]).map(Se=>({lineId:Se.lineId||Se._id||`ln_${Math.floor(Math.random()*1e5)}`,itemId:Se.itemId||Se.item||"",qty:Se.qty??Se.quantity??0,issuedQty:Se.issuedQty??0,remark:Se.remark||""}))||[]}));l(re.length?re:nl)}catch(P){console.error("load store replacement error",P),j("Failed to load store replacement data, using demo data."),t(Zo),s(el),i(tl),l(nl)}finally{b(!1)}};m.useEffect(()=>{W()},[]);const U=(P,ie)=>g(A=>({...A,[P]:ie})),q=(P,ie,A)=>{g(ee=>{const E=[...ee.lines];return E[P]={...E[P],[ie]:A},{...ee,lines:E}})},k=()=>g(P=>({...P,lines:[...P.lines,rl()]})),L=P=>g(ie=>({...ie,lines:ie.lines.filter((A,ee)=>ee!==P)})),O=()=>d.storeId?d.lines.filter(ie=>ie.itemId&&ie.qty&&Number(ie.qty)>0).length?null:"Add at least one Item with Qty.":"Select Store Name.",G=async P=>{var E,re;P.preventDefault();const ie=O();if(ie){j(ie);return}j("");const ee={replNo:D(),storeId:d.storeId,date:new Date().toISOString(),status:"OPEN",lines:d.lines.filter(J=>J.itemId&&J.qty&&Number(J.qty)>0).map(J=>({itemId:J.itemId,qty:Number(J.qty),remark:J.remark||""}))};try{R(!0);const Se=(await Z.post(`${nr}/api/store-replacements`,ee).catch(()=>({data:{...ee,_id:`local_${Date.now()}`}}))).data||ee;l(Pe=>[Se,...Pe]),g({storeId:"",lines:[rl()]})}catch(J){console.error("save replacement error",J),j(((re=(E=J.response)==null?void 0:E.data)==null?void 0:re.message)||"Failed to save replacement")}finally{R(!1)}},M=P=>{const ie=(P.lines||[]).map(A=>({lineId:A.lineId,itemId:A.itemId,itemName:K(A.itemId),replQty:A.qty,issueQty:A.qty-(A.issuedQty||0),remark:A.remark||""}));N({open:!0,replacement:P,vendorId:P.vendorId||"",lines:ie}),j("")},Y=(P,ie,A)=>{N(ee=>{const E=[...ee.lines];return E[P]={...E[P],[ie]:A},{...ee,lines:E}})},$=async()=>{var E,re;const{replacement:P,vendorId:ie,lines:A}=v;if(!P)return;if(!ie){j("Select Vendor before issuing.");return}for(const J of A){const Se=Number(J.issueQty||0);if(Se<0)return j("Issue quantity cannot be negative.");if(Se>Number(J.replQty||0))return j("Issue quantity cannot be more than replacement quantity.")}const ee={vendorId:ie,lines:A.map(J=>({lineId:J.lineId,itemId:J.itemId,issueQty:Number(J.issueQty||0),remark:J.remark||""}))};try{R(!0);const J=await Z.patch(`${nr}/api/store-replacements/${P._id||P.id}/issue-vendor`,ee).catch(()=>null);if(J&&J.data){const Se=J.data;l(Pe=>Pe.map(Ae=>Ae._id===(P._id||P.id)?Se:Ae))}else l(Se=>Se.map(Pe=>{if(Pe._id!==(P._id||P.id))return Pe;const Ae=(Pe.lines||[]).map(Le=>{const $e=A.find(mt=>mt.lineId===Le.lineId);return $e?{...Le,issuedQty:Number($e.issueQty||0),remark:$e.remark||Le.remark}:Le});return{...Pe,vendorId:ie,status:"SENT_TO_VENDOR",lines:Ae}}));N({open:!1,replacement:null,vendorId:"",lines:[]})}catch(J){console.error("issue to vendor error",J),j(((re=(E=J.response)==null?void 0:E.data)==null?void 0:re.message)||"Failed to issue to vendor")}finally{R(!1)}},I=P=>{if(!P.vendorId){j("Vendor not set for this replacement. Please Issue to Vendor first.");return}const ie=(P.lines||[]).map(A=>({lineId:A.lineId,itemId:A.itemId,itemName:K(A.itemId),issuedQty:A.issuedQty||A.qty||0,receivedQty:A.issuedQty||A.qty||0,remark:""}));V({open:!0,replacement:P,storeId:P.storeId||"",date:Es(),lines:ie}),j("")},ce=(P,ie,A)=>{V(ee=>{const E=[...ee.lines];return E[P]={...E[P],[ie]:A},{...ee,lines:E}})},T=async()=>{var re,J;const{replacement:P,storeId:ie,date:A,lines:ee}=C;if(!P)return;if(!ie){j("Select Store for GRN.");return}for(const Se of ee){const Pe=Number(Se.receivedQty||0);if(Pe<0)return j("Received quantity cannot be negative.");if(Pe>Number(Se.issuedQty||0))return j("Received qty cannot be more than issued qty.")}const E={storeId:ie,grnDate:A,lines:ee.map(Se=>({lineId:Se.lineId,itemId:Se.itemId,issuedQty:Number(Se.issuedQty||0),receivedQty:Number(Se.receivedQty||0),remark:Se.remark||""}))};try{R(!0);const Se=await Z.post(`${nr}/api/store-replacements/${P._id||P.id}/create-grn`,E).catch(()=>null);if(Se&&Se.data){const Pe=Se.data;l(Ae=>Ae.map(Le=>Le._id===(P._id||P.id)?Pe:Le))}else l(Pe=>Pe.map(Ae=>Ae._id===(P._id||P.id)?{...Ae,status:"CLOSED"}:Ae));V({open:!1,replacement:null,storeId:"",date:Es(),lines:[]})}catch(Se){console.error("replacement grn error",Se),j(((J=(re=Se.response)==null?void 0:re.data)==null?void 0:J.message)||"Failed to create replacement GRN")}finally{R(!1)}},le=P=>({padding:"6px 14px",borderRadius:999,border:"none",cursor:"pointer",fontSize:"0.9rem",background:c===P?"#10b981":"#111827",color:c===P?"#0b1120":"#e5e7eb"});return n.jsxs("div",{className:"sa-page",children:[n.jsxs("div",{className:"sa-page-header",style:{alignItems:"flex-start"},children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Store Replacement"}),n.jsx("p",{children:"Add replacement against store, issue to vendor and finally create replacement GRN."})]}),n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:W,children:"Refresh"})]}),n.jsxs("div",{className:"sa-card",style:{marginBottom:12,display:"flex",gap:8},children:[n.jsx("button",{style:le("ADD"),onClick:()=>u("ADD"),children:"Add Replacement"}),n.jsx("button",{style:le("ISSUE"),onClick:()=>u("ISSUE"),children:"Replacement Store / Issue Vendor"}),n.jsx("button",{style:le("GRN"),onClick:()=>u("GRN"),children:"Replacement GRN"})]}),_&&n.jsx("div",{className:"sa-modal-error",style:{marginBottom:10},children:_}),c==="ADD"&&n.jsxs("div",{className:"sa-card",style:{marginBottom:16},children:[n.jsx("h3",{style:{marginBottom:8},children:"Add Replacement"}),n.jsxs("form",{onSubmit:G,children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[n.jsxs("label",{children:["Store Name",n.jsxs("select",{value:d.storeId,onChange:P=>U("storeId",P.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Select store"}),e.map(P=>n.jsx("option",{value:P._id||P.id,children:P.name},P._id||P.id))]})]}),n.jsxs("label",{children:["Replacement No.",n.jsx("input",{value:"Auto Generated on Save",readOnly:!0})]})]}),n.jsx("h4",{style:{marginBottom:6},children:"Items"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"40%"},children:"Item Name"}),n.jsx("th",{style:{width:"15%"},children:"Item Qty"}),n.jsx("th",{children:"Reason / Remarks"}),n.jsx("th",{style:{width:"8%"}})]})}),n.jsx("tbody",{children:d.lines.map((P,ie)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("select",{value:P.itemId,onChange:A=>q(ie,"itemId",A.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Select item"}),r.map(A=>n.jsx("option",{value:A._id||A.id,children:A.name},A._id||A.id))]})}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:P.qty,onChange:A=>q(ie,"qty",A.target.value),required:!0})}),n.jsx("td",{children:n.jsx("input",{value:P.remark,onChange:A=>q(ie,"remark",A.target.value),placeholder:"Damaged / Expired / Others"})}),n.jsx("td",{children:d.lines.length>1&&n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>L(ie),children:"-"})})]},P.lineId))})]}),n.jsx("button",{type:"button",className:"sa-secondary-button",style:{marginTop:8},onClick:k,children:"+ Add Item"}),n.jsx("div",{className:"sa-modal-actions",style:{marginTop:12},children:n.jsx("button",{type:"submit",className:"sa-primary-button",disabled:p,children:p?"Saving...":"Save Replacement"})})]})]}),c==="ISSUE"&&n.jsxs("div",{className:"sa-card",children:[n.jsx("h3",{style:{marginBottom:8},children:"Replacement Store"}),f?n.jsx("div",{children:"Loading replacements..."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{marginBottom:8,color:"#9ca3af"},children:["Showing ",o.length," replacements"]}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Repl No"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Items"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:o.map(P=>n.jsxs("tr",{children:[n.jsx("td",{children:P.replNo||P._id}),n.jsx("td",{children:H(P.storeId)}),n.jsx("td",{children:(P.date||"").slice(0,10)}),n.jsx("td",{children:(P.lines||[]).length}),n.jsx("td",{children:P.vendorId?ne(P.vendorId):"-"}),n.jsx("td",{children:P.status||"OPEN"}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",style:{padding:"4px 8px",marginRight:6},onClick:()=>M(P),children:"Issue to Vendor"}),n.jsx("button",{type:"button",className:"sa-secondary-button",style:{padding:"4px 8px"},onClick:()=>I(P),children:"Create GRN"})]})]},P._id))})]})]})]}),c==="GRN"&&n.jsxs("div",{className:"sa-card",children:[n.jsx("h3",{style:{marginBottom:8},children:"Replacement Issued Items"}),n.jsxs("p",{style:{marginBottom:8,color:"#9ca3af"},children:['Select any replacement (with vendor) from "Replacement Store" tab and click ',n.jsx("strong",{children:"Create GRN"})," to record GRN  Replacement for a store."]}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Repl No"}),n.jsx("th",{children:"Store"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Action"})]})}),n.jsx("tbody",{children:o.filter(P=>P.vendorId).map(P=>n.jsxs("tr",{children:[n.jsx("td",{children:P.replNo}),n.jsx("td",{children:H(P.storeId)}),n.jsx("td",{children:ne(P.vendorId)}),n.jsx("td",{children:P.status}),n.jsx("td",{children:n.jsx("button",{type:"button",className:"sa-secondary-button",style:{padding:"4px 8px"},onClick:()=>I(P),children:"GRN - Replacement"})})]},P._id))})]})]}),v.open&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!p&&N({open:!1,replacement:null,vendorId:"",lines:[]}),children:n.jsxs("div",{className:"sa-modal",onClick:P=>P.stopPropagation(),style:{maxWidth:900},children:[n.jsx("h3",{children:"Issue to Vendor (Replacement)"}),n.jsxs("p",{className:"sa-modal-sub",children:["Repl No: ",((h=v.replacement)==null?void 0:h.replNo)||"-","  Store:"," ",H((X=v.replacement)==null?void 0:X.storeId)]}),n.jsxs("div",{className:"sa-modal-form",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[n.jsxs("label",{children:["Repl No",n.jsx("input",{value:((se=v.replacement)==null?void 0:se.replNo)||"",readOnly:!0})]}),n.jsxs("label",{children:["Store Name",n.jsx("input",{value:H((Ce=v.replacement)==null?void 0:Ce.storeId),readOnly:!0})]}),n.jsxs("label",{children:["Select Vendor",n.jsxs("select",{value:v.vendorId,onChange:P=>N(ie=>({...ie,vendorId:P.target.value})),required:!0,children:[n.jsx("option",{value:"",children:"Select Vendor"}),a.map(P=>n.jsx("option",{value:P._id||P.id,children:P.name},P._id||P.id))]})]})]}),n.jsx("h4",{style:{marginBottom:6},children:"Items to Issue"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Replacement Qty"}),n.jsx("th",{children:"Issue Qty"}),n.jsx("th",{children:"Remarks"})]})}),n.jsx("tbody",{children:v.lines.map((P,ie)=>n.jsxs("tr",{children:[n.jsx("td",{children:P.itemName}),n.jsx("td",{children:P.replQty}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:P.issueQty,onChange:A=>Y(ie,"issueQty",A.target.value)})}),n.jsx("td",{children:n.jsx("input",{value:P.remark,onChange:A=>Y(ie,"remark",A.target.value),placeholder:"optional"})})]},P.lineId))})]}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>N({open:!1,replacement:null,vendorId:"",lines:[]}),children:"Cancel"}),n.jsx("button",{type:"button",className:"sa-primary-button",onClick:$,disabled:p,children:p?"Saving...":"Save Issue to Vendor"})]})]})}),C.open&&n.jsx("div",{className:"sa-modal-backdrop",onClick:()=>!p&&V({open:!1,replacement:null,storeId:"",date:Es(),lines:[]}),children:n.jsxs("div",{className:"sa-modal",onClick:P=>P.stopPropagation(),style:{maxWidth:900},children:[n.jsx("h3",{children:"GRN  Replacement"}),n.jsxs("p",{className:"sa-modal-sub",children:["Repl No: ",((Re=C.replacement)==null?void 0:Re.replNo)||"-","  Vendor:"," ",ne((ue=C.replacement)==null?void 0:ue.vendorId)]}),n.jsxs("div",{className:"sa-modal-form",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[n.jsxs("label",{children:["Repl No",n.jsx("input",{value:((ve=C.replacement)==null?void 0:ve.replNo)||"",readOnly:!0})]}),n.jsxs("label",{children:["Vendor",n.jsx("input",{value:ne((Ne=C.replacement)==null?void 0:Ne.vendorId),readOnly:!0})]}),n.jsxs("label",{children:["Select Store",n.jsxs("select",{value:C.storeId,onChange:P=>V(ie=>({...ie,storeId:P.target.value})),required:!0,children:[n.jsx("option",{value:"",children:"Select store"}),e.map(P=>n.jsx("option",{value:P._id||P.id,children:P.name},P._id||P.id))]})]}),n.jsxs("label",{children:["GRN Date",n.jsx("input",{type:"date",value:C.date,onChange:P=>V(ie=>({...ie,date:P.target.value})),required:!0})]})]}),n.jsx("h4",{style:{marginBottom:6},children:"Items"}),n.jsxs("table",{className:"sa-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Issued Qty"}),n.jsx("th",{children:"Received Qty"}),n.jsx("th",{children:"Remarks"})]})}),n.jsx("tbody",{children:C.lines.map((P,ie)=>n.jsxs("tr",{children:[n.jsx("td",{children:P.itemName}),n.jsx("td",{children:P.issuedQty}),n.jsx("td",{children:n.jsx("input",{type:"number",min:"0",value:P.receivedQty,onChange:A=>ce(ie,"receivedQty",A.target.value)})}),n.jsx("td",{children:n.jsx("input",{value:P.remark,onChange:A=>ce(ie,"remark",A.target.value),placeholder:"optional"})})]},P.lineId))})]}),n.jsxs("div",{className:"sa-modal-actions",style:{marginTop:12},children:[n.jsx("button",{type:"button",className:"sa-secondary-button",onClick:()=>V({open:!1,replacement:null,storeId:"",date:Es(),lines:[]}),children:"Cancel"}),n.jsx("button",{type:"button",className:"sa-primary-button",onClick:T,disabled:p,children:p?"Saving...":"Save Replacement GRN"})]})]})})]})},sf=()=>n.jsxs(_v,{children:[n.jsx(Fe,{path:"/login",element:n.jsx(Cj,{})}),n.jsxs(Fe,{path:"/super-admin",element:n.jsx(i0,{allowedRoles:["SUPER_ADMIN"],children:n.jsx(bj,{})}),children:[n.jsx(Fe,{index:!0,element:n.jsx(Ti,{to:"dashboard",replace:!0})}),n.jsx(Fe,{path:"dashboard",element:n.jsx(Ej,{})}),n.jsx(Fe,{path:"resorts",element:n.jsx(Pj,{})}),n.jsx(Fe,{path:"departments",element:n.jsx(Ij,{})}),n.jsx(Fe,{path:"stores",element:n.jsx(Lj,{})}),n.jsx(Fe,{path:"vendors",element:n.jsx(Tj,{})}),n.jsx(Fe,{path:"recipes",element:n.jsx(Qj,{})}),n.jsx(Fe,{path:"item-categories",element:n.jsx(Wj,{})}),n.jsx(Fe,{path:"recipe-categories",element:n.jsx(Gj,{})}),n.jsx(Fe,{path:"items",element:n.jsx(Oj,{})}),n.jsx(Fe,{path:"users",element:n.jsx(Fj,{})}),n.jsx(Fe,{path:"roles",element:n.jsx(o0,{})}),n.jsx(Fe,{path:"consumption",element:n.jsx(u0,{})}),n.jsx(Fe,{path:"consumption/new",element:n.jsx(am,{})}),n.jsx(Fe,{path:"consumption/:id",element:n.jsx(am,{})}),n.jsx(Fe,{path:"store-replacement",element:n.jsx(p0,{})}),n.jsx(Fe,{path:"requisitions",element:n.jsx(Gu,{})}),n.jsx(Fe,{path:"po",element:n.jsx(Mj,{})}),n.jsx(Fe,{path:"grn",element:n.jsx(Uj,{})}),n.jsx(Fe,{path:"inventory",element:n.jsx($j,{})}),n.jsx(Fe,{path:"reports",element:n.jsx(n0,{})})]}),n.jsxs(Fe,{path:"/resort",children:[n.jsx(Fe,{index:!0,element:n.jsx(Xj,{})}),n.jsx(Fe,{path:"requisitions",element:n.jsx(Gu,{})}),n.jsx(Fe,{path:"requisitions/create",element:n.jsx(rf,{})}),n.jsx(Fe,{path:"po",element:n.jsx(Zj,{})}),n.jsx(Fe,{path:"grn",element:n.jsx(e0,{})}),n.jsx(Fe,{path:"reports",element:n.jsx(t0,{})})]}),n.jsx(Fe,{path:"/dashboard/resort",element:n.jsx(Kj,{})}),n.jsx(Fe,{path:"*",element:n.jsx(Ti,{to:"/login",replace:!0})})]});sl.createRoot(document.getElementById("root")).render(n.jsx(cc.StrictMode,{children:n.jsx(Dv,{children:n.jsx(jj,{children:n.jsx(sf,{})})})}));createRoot(document.getElementById("root")).render(n.jsx(cc.StrictMode,{children:n.jsx(Nj,{children:n.jsx(sf,{})})}));
